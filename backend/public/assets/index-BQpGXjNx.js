var ku=t=>{throw TypeError(t)};var fo=(t,s,r)=>s.has(t)||ku("Cannot "+r);var I=(t,s,r)=>(fo(t,s,"read from private field"),r?r.call(t):s.get(t)),be=(t,s,r)=>s.has(t)?ku("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,r),xe=(t,s,r,a)=>(fo(t,s,"write to private field"),a?a.call(t,r):s.set(t,r),r),Se=(t,s,r)=>(fo(t,s,"access private method"),r);var _l=(t,s,r,a)=>({set _(n){xe(t,s,n,r)},get _(){return I(t,s,a)}});function Zp(t,s){for(var r=0;r<s.length;r++){const a=s[r];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in t)){const l=Object.getOwnPropertyDescriptor(a,n);l&&Object.defineProperty(t,n,l.get?l:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(n){if(n.ep)return;n.ep=!0;const l=r(n);fetch(n.href,l)}})();function eg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Mx={exports:{}},zi={},Dx={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hl=Symbol.for("react.element"),tg=Symbol.for("react.portal"),sg=Symbol.for("react.fragment"),rg=Symbol.for("react.strict_mode"),ag=Symbol.for("react.profiler"),ng=Symbol.for("react.provider"),lg=Symbol.for("react.context"),ig=Symbol.for("react.forward_ref"),og=Symbol.for("react.suspense"),cg=Symbol.for("react.memo"),dg=Symbol.for("react.lazy"),Su=Symbol.iterator;function ug(t){return t===null||typeof t!="object"?null:(t=Su&&t[Su]||t["@@iterator"],typeof t=="function"?t:null)}var $x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qx=Object.assign,Ix={};function ln(t,s,r){this.props=t,this.context=s,this.refs=Ix,this.updater=r||$x}ln.prototype.isReactComponent={};ln.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};ln.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function zx(){}zx.prototype=ln.prototype;function gd(t,s,r){this.props=t,this.context=s,this.refs=Ix,this.updater=r||$x}var fd=gd.prototype=new zx;fd.constructor=gd;qx(fd,ln.prototype);fd.isPureReactComponent=!0;var Cu=Array.isArray,Bx=Object.prototype.hasOwnProperty,yd={current:null},Ux={key:!0,ref:!0,__self:!0,__source:!0};function Qx(t,s,r){var a,n={},l=null,i=null;if(s!=null)for(a in s.ref!==void 0&&(i=s.ref),s.key!==void 0&&(l=""+s.key),s)Bx.call(s,a)&&!Ux.hasOwnProperty(a)&&(n[a]=s[a]);var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];n.children=c}if(t&&t.defaultProps)for(a in o=t.defaultProps,o)n[a]===void 0&&(n[a]=o[a]);return{$$typeof:hl,type:t,key:l,ref:i,props:n,_owner:yd.current}}function mg(t,s){return{$$typeof:hl,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function bd(t){return typeof t=="object"&&t!==null&&t.$$typeof===hl}function xg(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return s[r]})}var Eu=/\/+/g;function yo(t,s){return typeof t=="object"&&t!==null&&t.key!=null?xg(""+t.key):s.toString(36)}function Vl(t,s,r,a,n){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case hl:case tg:i=!0}}if(i)return i=t,n=n(i),t=a===""?"."+yo(i,0):a,Cu(n)?(r="",t!=null&&(r=t.replace(Eu,"$&/")+"/"),Vl(n,s,r,"",function(d){return d})):n!=null&&(bd(n)&&(n=mg(n,r+(!n.key||i&&i.key===n.key?"":(""+n.key).replace(Eu,"$&/")+"/")+t)),s.push(n)),1;if(i=0,a=a===""?".":a+":",Cu(t))for(var o=0;o<t.length;o++){l=t[o];var c=a+yo(l,o);i+=Vl(l,s,r,c,n)}else if(c=ug(t),typeof c=="function")for(t=c.call(t),o=0;!(l=t.next()).done;)l=l.value,c=a+yo(l,o++),i+=Vl(l,s,r,c,n);else if(l==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return i}function kl(t,s,r){if(t==null)return t;var a=[],n=0;return Vl(t,a,"","",function(l){return s.call(r,l,n++)}),a}function hg(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var Tt={current:null},Kl={transition:null},pg={ReactCurrentDispatcher:Tt,ReactCurrentBatchConfig:Kl,ReactCurrentOwner:yd};function Vx(){throw Error("act(...) is not supported in production builds of React.")}Ee.Children={map:kl,forEach:function(t,s,r){kl(t,function(){s.apply(this,arguments)},r)},count:function(t){var s=0;return kl(t,function(){s++}),s},toArray:function(t){return kl(t,function(s){return s})||[]},only:function(t){if(!bd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ee.Component=ln;Ee.Fragment=sg;Ee.Profiler=ag;Ee.PureComponent=gd;Ee.StrictMode=rg;Ee.Suspense=og;Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pg;Ee.act=Vx;Ee.cloneElement=function(t,s,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var a=qx({},t.props),n=t.key,l=t.ref,i=t._owner;if(s!=null){if(s.ref!==void 0&&(l=s.ref,i=yd.current),s.key!==void 0&&(n=""+s.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in s)Bx.call(s,c)&&!Ux.hasOwnProperty(c)&&(a[c]=s[c]===void 0&&o!==void 0?o[c]:s[c])}var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];a.children=o}return{$$typeof:hl,type:t.type,key:n,ref:l,props:a,_owner:i}};Ee.createContext=function(t){return t={$$typeof:lg,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ng,_context:t},t.Consumer=t};Ee.createElement=Qx;Ee.createFactory=function(t){var s=Qx.bind(null,t);return s.type=t,s};Ee.createRef=function(){return{current:null}};Ee.forwardRef=function(t){return{$$typeof:ig,render:t}};Ee.isValidElement=bd;Ee.lazy=function(t){return{$$typeof:dg,_payload:{_status:-1,_result:t},_init:hg}};Ee.memo=function(t,s){return{$$typeof:cg,type:t,compare:s===void 0?null:s}};Ee.startTransition=function(t){var s=Kl.transition;Kl.transition={};try{t()}finally{Kl.transition=s}};Ee.unstable_act=Vx;Ee.useCallback=function(t,s){return Tt.current.useCallback(t,s)};Ee.useContext=function(t){return Tt.current.useContext(t)};Ee.useDebugValue=function(){};Ee.useDeferredValue=function(t){return Tt.current.useDeferredValue(t)};Ee.useEffect=function(t,s){return Tt.current.useEffect(t,s)};Ee.useId=function(){return Tt.current.useId()};Ee.useImperativeHandle=function(t,s,r){return Tt.current.useImperativeHandle(t,s,r)};Ee.useInsertionEffect=function(t,s){return Tt.current.useInsertionEffect(t,s)};Ee.useLayoutEffect=function(t,s){return Tt.current.useLayoutEffect(t,s)};Ee.useMemo=function(t,s){return Tt.current.useMemo(t,s)};Ee.useReducer=function(t,s,r){return Tt.current.useReducer(t,s,r)};Ee.useRef=function(t){return Tt.current.useRef(t)};Ee.useState=function(t){return Tt.current.useState(t)};Ee.useSyncExternalStore=function(t,s,r){return Tt.current.useSyncExternalStore(t,s,r)};Ee.useTransition=function(){return Tt.current.useTransition()};Ee.version="18.3.1";Dx.exports=Ee;var j=Dx.exports;const ht=eg(j),gg=Zp({__proto__:null,default:ht},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fg=j,yg=Symbol.for("react.element"),bg=Symbol.for("react.fragment"),vg=Object.prototype.hasOwnProperty,jg=fg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wg={key:!0,ref:!0,__self:!0,__source:!0};function Kx(t,s,r){var a,n={},l=null,i=null;r!==void 0&&(l=""+r),s.key!==void 0&&(l=""+s.key),s.ref!==void 0&&(i=s.ref);for(a in s)vg.call(s,a)&&!wg.hasOwnProperty(a)&&(n[a]=s[a]);if(t&&t.defaultProps)for(a in s=t.defaultProps,s)n[a]===void 0&&(n[a]=s[a]);return{$$typeof:yg,type:t,key:l,ref:i,props:n,_owner:jg.current}}zi.Fragment=bg;zi.jsx=Kx;zi.jsxs=Kx;Mx.exports=zi;var e=Mx.exports,Wx={exports:{}},Xt={},Hx={exports:{}},Gx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s(C,V){var T=C.length;C.push(V);e:for(;0<T;){var Z=T-1>>>1,se=C[Z];if(0<n(se,V))C[Z]=V,C[T]=se,T=Z;else break e}}function r(C){return C.length===0?null:C[0]}function a(C){if(C.length===0)return null;var V=C[0],T=C.pop();if(T!==V){C[0]=T;e:for(var Z=0,se=C.length,B=se>>>1;Z<B;){var ee=2*(Z+1)-1,S=C[ee],re=ee+1,le=C[re];if(0>n(S,T))re<se&&0>n(le,S)?(C[Z]=le,C[re]=T,Z=re):(C[Z]=S,C[ee]=T,Z=ee);else if(re<se&&0>n(le,T))C[Z]=le,C[re]=T,Z=re;else break e}}return V}function n(C,V){var T=C.sortIndex-V.sortIndex;return T!==0?T:C.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var c=[],d=[],h=1,m=null,u=3,g=!1,b=!1,f=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(C){for(var V=r(d);V!==null;){if(V.callback===null)a(d);else if(V.startTime<=C)a(d),V.sortIndex=V.expirationTime,s(c,V);else break;V=r(d)}}function w(C){if(f=!1,x(C),!b)if(r(c)!==null)b=!0,M(R);else{var V=r(d);V!==null&&P(w,V.startTime-C)}}function R(C,V){b=!1,f&&(f=!1,y(L),L=-1),g=!0;var T=u;try{for(x(V),m=r(c);m!==null&&(!(m.expirationTime>V)||C&&!_());){var Z=m.callback;if(typeof Z=="function"){m.callback=null,u=m.priorityLevel;var se=Z(m.expirationTime<=V);V=t.unstable_now(),typeof se=="function"?m.callback=se:m===r(c)&&a(c),x(V)}else a(c);m=r(c)}if(m!==null)var B=!0;else{var ee=r(d);ee!==null&&P(w,ee.startTime-V),B=!1}return B}finally{m=null,u=T,g=!1}}var N=!1,k=null,L=-1,E=5,z=-1;function _(){return!(t.unstable_now()-z<E)}function O(){if(k!==null){var C=t.unstable_now();z=C;var V=!0;try{V=k(!0,C)}finally{V?Y():(N=!1,k=null)}}else N=!1}var Y;if(typeof p=="function")Y=function(){p(O)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,A=q.port2;q.port1.onmessage=O,Y=function(){A.postMessage(null)}}else Y=function(){v(O,0)};function M(C){k=C,N||(N=!0,Y())}function P(C,V){L=v(function(){C(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(C){C.callback=null},t.unstable_continueExecution=function(){b||g||(b=!0,M(R))},t.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<C?Math.floor(1e3/C):5},t.unstable_getCurrentPriorityLevel=function(){return u},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(C){switch(u){case 1:case 2:case 3:var V=3;break;default:V=u}var T=u;u=V;try{return C()}finally{u=T}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(C,V){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var T=u;u=C;try{return V()}finally{u=T}},t.unstable_scheduleCallback=function(C,V,T){var Z=t.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?Z+T:Z):T=Z,C){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=T+se,C={id:h++,callback:V,priorityLevel:C,startTime:T,expirationTime:se,sortIndex:-1},T>Z?(C.sortIndex=T,s(d,C),r(c)===null&&C===r(d)&&(f?(y(L),L=-1):f=!0,P(w,T-Z))):(C.sortIndex=se,s(c,C),b||g||(b=!0,M(R))),C},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(C){var V=u;return function(){var T=u;u=V;try{return C.apply(this,arguments)}finally{u=T}}}})(Gx);Hx.exports=Gx;var Ng=Hx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _g=j,Yt=Ng;function oe(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Jx=new Set,Bn={};function ma(t,s){Ya(t,s),Ya(t+"Capture",s)}function Ya(t,s){for(Bn[t]=s,t=0;t<s.length;t++)Jx.add(s[t])}var Vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zo=Object.prototype.hasOwnProperty,kg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fu={},Pu={};function Sg(t){return Zo.call(Pu,t)?!0:Zo.call(Fu,t)?!1:kg.test(t)?Pu[t]=!0:(Fu[t]=!0,!1)}function Cg(t,s,r,a){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Eg(t,s,r,a){if(s===null||typeof s>"u"||Cg(t,s,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function Rt(t,s,r,a,n,l,i){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=t,this.type=s,this.sanitizeURL=l,this.removeEmptyString=i}var ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ft[t]=new Rt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];ft[s]=new Rt(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ft[t]=new Rt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ft[t]=new Rt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ft[t]=new Rt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ft[t]=new Rt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ft[t]=new Rt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ft[t]=new Rt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ft[t]=new Rt(t,5,!1,t.toLowerCase(),null,!1,!1)});var vd=/[\-:]([a-z])/g;function jd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(vd,jd);ft[s]=new Rt(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(vd,jd);ft[s]=new Rt(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(vd,jd);ft[s]=new Rt(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ft[t]=new Rt(t,1,!1,t.toLowerCase(),null,!1,!1)});ft.xlinkHref=new Rt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ft[t]=new Rt(t,1,!1,t.toLowerCase(),null,!0,!0)});function wd(t,s,r,a){var n=ft.hasOwnProperty(s)?ft[s]:null;(n!==null?n.type!==0:a||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(Eg(s,r,n,a)&&(r=null),a||n===null?Sg(s)&&(r===null?t.removeAttribute(s):t.setAttribute(s,""+r)):n.mustUseProperty?t[n.propertyName]=r===null?n.type===3?!1:"":r:(s=n.attributeName,a=n.attributeNamespace,r===null?t.removeAttribute(s):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,a?t.setAttributeNS(a,s,r):t.setAttribute(s,r))))}var Js=_g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sl=Symbol.for("react.element"),ya=Symbol.for("react.portal"),ba=Symbol.for("react.fragment"),Nd=Symbol.for("react.strict_mode"),ec=Symbol.for("react.profiler"),Yx=Symbol.for("react.provider"),Xx=Symbol.for("react.context"),_d=Symbol.for("react.forward_ref"),tc=Symbol.for("react.suspense"),sc=Symbol.for("react.suspense_list"),kd=Symbol.for("react.memo"),sr=Symbol.for("react.lazy"),Zx=Symbol.for("react.offscreen"),Tu=Symbol.iterator;function gn(t){return t===null||typeof t!="object"?null:(t=Tu&&t[Tu]||t["@@iterator"],typeof t=="function"?t:null)}var Ke=Object.assign,bo;function Sn(t){if(bo===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);bo=s&&s[1]||""}return`
`+bo+t}var vo=!1;function jo(t,s){if(!t||vo)return"";vo=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(d){var a=d}Reflect.construct(t,[],s)}else{try{s.call()}catch(d){a=d}t.call(s.prototype)}else{try{throw Error()}catch(d){a=d}t()}}catch(d){if(d&&a&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),l=a.stack.split(`
`),i=n.length-1,o=l.length-1;1<=i&&0<=o&&n[i]!==l[o];)o--;for(;1<=i&&0<=o;i--,o--)if(n[i]!==l[o]){if(i!==1||o!==1)do if(i--,o--,0>o||n[i]!==l[o]){var c=`
`+n[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=o);break}}}finally{vo=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Sn(t):""}function Fg(t){switch(t.tag){case 5:return Sn(t.type);case 16:return Sn("Lazy");case 13:return Sn("Suspense");case 19:return Sn("SuspenseList");case 0:case 2:case 15:return t=jo(t.type,!1),t;case 11:return t=jo(t.type.render,!1),t;case 1:return t=jo(t.type,!0),t;default:return""}}function rc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ba:return"Fragment";case ya:return"Portal";case ec:return"Profiler";case Nd:return"StrictMode";case tc:return"Suspense";case sc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Xx:return(t.displayName||"Context")+".Consumer";case Yx:return(t._context.displayName||"Context")+".Provider";case _d:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kd:return s=t.displayName||null,s!==null?s:rc(t.type)||"Memo";case sr:s=t._payload,t=t._init;try{return rc(t(s))}catch{}}return null}function Pg(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rc(s);case 8:return s===Nd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Tr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function eh(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Tg(t){var s=eh(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),a=""+t[s];if(!t.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,l=r.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return n.call(this)},set:function(i){a=""+i,l.call(this,i)}}),Object.defineProperty(t,s,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(i){a=""+i},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Cl(t){t._valueTracker||(t._valueTracker=Tg(t))}function th(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),a="";return t&&(a=eh(t)?t.checked?"true":"false":t.value),t=a,t!==r?(s.setValue(t),!0):!1}function oi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ac(t,s){var r=s.checked;return Ke({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Ru(t,s){var r=s.defaultValue==null?"":s.defaultValue,a=s.checked!=null?s.checked:s.defaultChecked;r=Tr(s.value!=null?s.value:r),t._wrapperState={initialChecked:a,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function sh(t,s){s=s.checked,s!=null&&wd(t,"checked",s,!1)}function nc(t,s){sh(t,s);var r=Tr(s.value),a=s.type;if(r!=null)a==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(a==="submit"||a==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?lc(t,s.type,r):s.hasOwnProperty("defaultValue")&&lc(t,s.type,Tr(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function Ou(t,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var a=s.type;if(!(a!=="submit"&&a!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,r||s===t.value||(t.value=s),t.defaultValue=s}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function lc(t,s,r){(s!=="number"||oi(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Cn=Array.isArray;function Ta(t,s,r,a){if(t=t.options,s){s={};for(var n=0;n<r.length;n++)s["$"+r[n]]=!0;for(r=0;r<t.length;r++)n=s.hasOwnProperty("$"+t[r].value),t[r].selected!==n&&(t[r].selected=n),n&&a&&(t[r].defaultSelected=!0)}else{for(r=""+Tr(r),s=null,n=0;n<t.length;n++){if(t[n].value===r){t[n].selected=!0,a&&(t[n].defaultSelected=!0);return}s!==null||t[n].disabled||(s=t[n])}s!==null&&(s.selected=!0)}}function ic(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(oe(91));return Ke({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Au(t,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(oe(92));if(Cn(r)){if(1<r.length)throw Error(oe(93));r=r[0]}s=r}s==null&&(s=""),r=s}t._wrapperState={initialValue:Tr(r)}}function rh(t,s){var r=Tr(s.value),a=Tr(s.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),s.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),a!=null&&(t.defaultValue=""+a)}function Lu(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function ah(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oc(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?ah(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var El,nh=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,a,n){MSApp.execUnsafeLocalFunction(function(){return t(s,r,a,n)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(El=El||document.createElement("div"),El.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=El.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function Un(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var Tn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rg=["Webkit","ms","Moz","O"];Object.keys(Tn).forEach(function(t){Rg.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Tn[s]=Tn[t]})});function lh(t,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||Tn.hasOwnProperty(t)&&Tn[t]?(""+s).trim():s+"px"}function ih(t,s){t=t.style;for(var r in s)if(s.hasOwnProperty(r)){var a=r.indexOf("--")===0,n=lh(r,s[r],a);r==="float"&&(r="cssFloat"),a?t.setProperty(r,n):t[r]=n}}var Og=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cc(t,s){if(s){if(Og[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(oe(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(oe(61))}if(s.style!=null&&typeof s.style!="object")throw Error(oe(62))}}function dc(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uc=null;function Sd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var mc=null,Ra=null,Oa=null;function Mu(t){if(t=fl(t)){if(typeof mc!="function")throw Error(oe(280));var s=t.stateNode;s&&(s=Ki(s),mc(t.stateNode,t.type,s))}}function oh(t){Ra?Oa?Oa.push(t):Oa=[t]:Ra=t}function ch(){if(Ra){var t=Ra,s=Oa;if(Oa=Ra=null,Mu(t),s)for(t=0;t<s.length;t++)Mu(s[t])}}function dh(t,s){return t(s)}function uh(){}var wo=!1;function mh(t,s,r){if(wo)return t(s,r);wo=!0;try{return dh(t,s,r)}finally{wo=!1,(Ra!==null||Oa!==null)&&(uh(),ch())}}function Qn(t,s){var r=t.stateNode;if(r===null)return null;var a=Ki(r);if(a===null)return null;r=a[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(oe(231,s,typeof r));return r}var xc=!1;if(Vs)try{var fn={};Object.defineProperty(fn,"passive",{get:function(){xc=!0}}),window.addEventListener("test",fn,fn),window.removeEventListener("test",fn,fn)}catch{xc=!1}function Ag(t,s,r,a,n,l,i,o,c){var d=Array.prototype.slice.call(arguments,3);try{s.apply(r,d)}catch(h){this.onError(h)}}var Rn=!1,ci=null,di=!1,hc=null,Lg={onError:function(t){Rn=!0,ci=t}};function Mg(t,s,r,a,n,l,i,o,c){Rn=!1,ci=null,Ag.apply(Lg,arguments)}function Dg(t,s,r,a,n,l,i,o,c){if(Mg.apply(this,arguments),Rn){if(Rn){var d=ci;Rn=!1,ci=null}else throw Error(oe(198));di||(di=!0,hc=d)}}function xa(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function xh(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function Du(t){if(xa(t)!==t)throw Error(oe(188))}function $g(t){var s=t.alternate;if(!s){if(s=xa(t),s===null)throw Error(oe(188));return s!==t?null:t}for(var r=t,a=s;;){var n=r.return;if(n===null)break;var l=n.alternate;if(l===null){if(a=n.return,a!==null){r=a;continue}break}if(n.child===l.child){for(l=n.child;l;){if(l===r)return Du(n),t;if(l===a)return Du(n),s;l=l.sibling}throw Error(oe(188))}if(r.return!==a.return)r=n,a=l;else{for(var i=!1,o=n.child;o;){if(o===r){i=!0,r=n,a=l;break}if(o===a){i=!0,a=n,r=l;break}o=o.sibling}if(!i){for(o=l.child;o;){if(o===r){i=!0,r=l,a=n;break}if(o===a){i=!0,a=l,r=n;break}o=o.sibling}if(!i)throw Error(oe(189))}}if(r.alternate!==a)throw Error(oe(190))}if(r.tag!==3)throw Error(oe(188));return r.stateNode.current===r?t:s}function hh(t){return t=$g(t),t!==null?ph(t):null}function ph(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=ph(t);if(s!==null)return s;t=t.sibling}return null}var gh=Yt.unstable_scheduleCallback,$u=Yt.unstable_cancelCallback,qg=Yt.unstable_shouldYield,Ig=Yt.unstable_requestPaint,Xe=Yt.unstable_now,zg=Yt.unstable_getCurrentPriorityLevel,Cd=Yt.unstable_ImmediatePriority,fh=Yt.unstable_UserBlockingPriority,ui=Yt.unstable_NormalPriority,Bg=Yt.unstable_LowPriority,yh=Yt.unstable_IdlePriority,Bi=null,Ts=null;function Ug(t){if(Ts&&typeof Ts.onCommitFiberRoot=="function")try{Ts.onCommitFiberRoot(Bi,t,void 0,(t.current.flags&128)===128)}catch{}}var ys=Math.clz32?Math.clz32:Kg,Qg=Math.log,Vg=Math.LN2;function Kg(t){return t>>>=0,t===0?32:31-(Qg(t)/Vg|0)|0}var Fl=64,Pl=4194304;function En(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function mi(t,s){var r=t.pendingLanes;if(r===0)return 0;var a=0,n=t.suspendedLanes,l=t.pingedLanes,i=r&268435455;if(i!==0){var o=i&~n;o!==0?a=En(o):(l&=i,l!==0&&(a=En(l)))}else i=r&~n,i!==0?a=En(i):l!==0&&(a=En(l));if(a===0)return 0;if(s!==0&&s!==a&&!(s&n)&&(n=a&-a,l=s&-s,n>=l||n===16&&(l&4194240)!==0))return s;if(a&4&&(a|=r&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=a;0<s;)r=31-ys(s),n=1<<r,a|=t[r],s&=~n;return a}function Wg(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hg(t,s){for(var r=t.suspendedLanes,a=t.pingedLanes,n=t.expirationTimes,l=t.pendingLanes;0<l;){var i=31-ys(l),o=1<<i,c=n[i];c===-1?(!(o&r)||o&a)&&(n[i]=Wg(o,s)):c<=s&&(t.expiredLanes|=o),l&=~o}}function pc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function bh(){var t=Fl;return Fl<<=1,!(Fl&4194240)&&(Fl=64),t}function No(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function pl(t,s,r){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-ys(s),t[s]=r}function Gg(t,s){var r=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var a=t.eventTimes;for(t=t.expirationTimes;0<r;){var n=31-ys(r),l=1<<n;s[n]=0,a[n]=-1,t[n]=-1,r&=~l}}function Ed(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var a=31-ys(r),n=1<<a;n&s|t[a]&s&&(t[a]|=s),r&=~n}}var Oe=0;function vh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jh,Fd,wh,Nh,_h,gc=!1,Tl=[],vr=null,jr=null,wr=null,Vn=new Map,Kn=new Map,ar=[],Jg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qu(t,s){switch(t){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":jr=null;break;case"mouseover":case"mouseout":wr=null;break;case"pointerover":case"pointerout":Vn.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kn.delete(s.pointerId)}}function yn(t,s,r,a,n,l){return t===null||t.nativeEvent!==l?(t={blockedOn:s,domEventName:r,eventSystemFlags:a,nativeEvent:l,targetContainers:[n]},s!==null&&(s=fl(s),s!==null&&Fd(s)),t):(t.eventSystemFlags|=a,s=t.targetContainers,n!==null&&s.indexOf(n)===-1&&s.push(n),t)}function Yg(t,s,r,a,n){switch(s){case"focusin":return vr=yn(vr,t,s,r,a,n),!0;case"dragenter":return jr=yn(jr,t,s,r,a,n),!0;case"mouseover":return wr=yn(wr,t,s,r,a,n),!0;case"pointerover":var l=n.pointerId;return Vn.set(l,yn(Vn.get(l)||null,t,s,r,a,n)),!0;case"gotpointercapture":return l=n.pointerId,Kn.set(l,yn(Kn.get(l)||null,t,s,r,a,n)),!0}return!1}function kh(t){var s=Ir(t.target);if(s!==null){var r=xa(s);if(r!==null){if(s=r.tag,s===13){if(s=xh(r),s!==null){t.blockedOn=s,_h(t.priority,function(){wh(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wl(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=fc(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var a=new r.constructor(r.type,r);uc=a,r.target.dispatchEvent(a),uc=null}else return s=fl(r),s!==null&&Fd(s),t.blockedOn=r,!1;s.shift()}return!0}function Iu(t,s,r){Wl(t)&&r.delete(s)}function Xg(){gc=!1,vr!==null&&Wl(vr)&&(vr=null),jr!==null&&Wl(jr)&&(jr=null),wr!==null&&Wl(wr)&&(wr=null),Vn.forEach(Iu),Kn.forEach(Iu)}function bn(t,s){t.blockedOn===s&&(t.blockedOn=null,gc||(gc=!0,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,Xg)))}function Wn(t){function s(n){return bn(n,t)}if(0<Tl.length){bn(Tl[0],t);for(var r=1;r<Tl.length;r++){var a=Tl[r];a.blockedOn===t&&(a.blockedOn=null)}}for(vr!==null&&bn(vr,t),jr!==null&&bn(jr,t),wr!==null&&bn(wr,t),Vn.forEach(s),Kn.forEach(s),r=0;r<ar.length;r++)a=ar[r],a.blockedOn===t&&(a.blockedOn=null);for(;0<ar.length&&(r=ar[0],r.blockedOn===null);)kh(r),r.blockedOn===null&&ar.shift()}var Aa=Js.ReactCurrentBatchConfig,xi=!0;function Zg(t,s,r,a){var n=Oe,l=Aa.transition;Aa.transition=null;try{Oe=1,Pd(t,s,r,a)}finally{Oe=n,Aa.transition=l}}function ef(t,s,r,a){var n=Oe,l=Aa.transition;Aa.transition=null;try{Oe=4,Pd(t,s,r,a)}finally{Oe=n,Aa.transition=l}}function Pd(t,s,r,a){if(xi){var n=fc(t,s,r,a);if(n===null)Oo(t,s,a,hi,r),qu(t,a);else if(Yg(n,t,s,r,a))a.stopPropagation();else if(qu(t,a),s&4&&-1<Jg.indexOf(t)){for(;n!==null;){var l=fl(n);if(l!==null&&jh(l),l=fc(t,s,r,a),l===null&&Oo(t,s,a,hi,r),l===n)break;n=l}n!==null&&a.stopPropagation()}else Oo(t,s,a,null,r)}}var hi=null;function fc(t,s,r,a){if(hi=null,t=Sd(a),t=Ir(t),t!==null)if(s=xa(t),s===null)t=null;else if(r=s.tag,r===13){if(t=xh(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return hi=t,null}function Sh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zg()){case Cd:return 1;case fh:return 4;case ui:case Bg:return 16;case yh:return 536870912;default:return 16}default:return 16}}var fr=null,Td=null,Hl=null;function Ch(){if(Hl)return Hl;var t,s=Td,r=s.length,a,n="value"in fr?fr.value:fr.textContent,l=n.length;for(t=0;t<r&&s[t]===n[t];t++);var i=r-t;for(a=1;a<=i&&s[r-a]===n[l-a];a++);return Hl=n.slice(t,1<a?1-a:void 0)}function Gl(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Rl(){return!0}function zu(){return!1}function Zt(t){function s(r,a,n,l,i){this._reactName=r,this._targetInst=n,this.type=a,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(l):l[o]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Rl:zu,this.isPropagationStopped=zu,this}return Ke(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Rl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Rl)},persist:function(){},isPersistent:Rl}),s}var on={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rd=Zt(on),gl=Ke({},on,{view:0,detail:0}),tf=Zt(gl),_o,ko,vn,Ui=Ke({},gl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Od,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vn&&(vn&&t.type==="mousemove"?(_o=t.screenX-vn.screenX,ko=t.screenY-vn.screenY):ko=_o=0,vn=t),_o)},movementY:function(t){return"movementY"in t?t.movementY:ko}}),Bu=Zt(Ui),sf=Ke({},Ui,{dataTransfer:0}),rf=Zt(sf),af=Ke({},gl,{relatedTarget:0}),So=Zt(af),nf=Ke({},on,{animationName:0,elapsedTime:0,pseudoElement:0}),lf=Zt(nf),of=Ke({},on,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cf=Zt(of),df=Ke({},on,{data:0}),Uu=Zt(df),uf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hf(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=xf[t])?!!s[t]:!1}function Od(){return hf}var pf=Ke({},gl,{key:function(t){if(t.key){var s=uf[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Gl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mf[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Od,charCode:function(t){return t.type==="keypress"?Gl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),gf=Zt(pf),ff=Ke({},Ui,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qu=Zt(ff),yf=Ke({},gl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Od}),bf=Zt(yf),vf=Ke({},on,{propertyName:0,elapsedTime:0,pseudoElement:0}),jf=Zt(vf),wf=Ke({},Ui,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Nf=Zt(wf),_f=[9,13,27,32],Ad=Vs&&"CompositionEvent"in window,On=null;Vs&&"documentMode"in document&&(On=document.documentMode);var kf=Vs&&"TextEvent"in window&&!On,Eh=Vs&&(!Ad||On&&8<On&&11>=On),Vu=" ",Ku=!1;function Fh(t,s){switch(t){case"keyup":return _f.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ph(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var va=!1;function Sf(t,s){switch(t){case"compositionend":return Ph(s);case"keypress":return s.which!==32?null:(Ku=!0,Vu);case"textInput":return t=s.data,t===Vu&&Ku?null:t;default:return null}}function Cf(t,s){if(va)return t==="compositionend"||!Ad&&Fh(t,s)?(t=Ch(),Hl=Td=fr=null,va=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Eh&&s.locale!=="ko"?null:s.data;default:return null}}var Ef={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wu(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Ef[t.type]:s==="textarea"}function Th(t,s,r,a){oh(a),s=pi(s,"onChange"),0<s.length&&(r=new Rd("onChange","change",null,r,a),t.push({event:r,listeners:s}))}var An=null,Hn=null;function Ff(t){Bh(t,0)}function Qi(t){var s=Na(t);if(th(s))return t}function Pf(t,s){if(t==="change")return s}var Rh=!1;if(Vs){var Co;if(Vs){var Eo="oninput"in document;if(!Eo){var Hu=document.createElement("div");Hu.setAttribute("oninput","return;"),Eo=typeof Hu.oninput=="function"}Co=Eo}else Co=!1;Rh=Co&&(!document.documentMode||9<document.documentMode)}function Gu(){An&&(An.detachEvent("onpropertychange",Oh),Hn=An=null)}function Oh(t){if(t.propertyName==="value"&&Qi(Hn)){var s=[];Th(s,Hn,t,Sd(t)),mh(Ff,s)}}function Tf(t,s,r){t==="focusin"?(Gu(),An=s,Hn=r,An.attachEvent("onpropertychange",Oh)):t==="focusout"&&Gu()}function Rf(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qi(Hn)}function Of(t,s){if(t==="click")return Qi(s)}function Af(t,s){if(t==="input"||t==="change")return Qi(s)}function Lf(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var vs=typeof Object.is=="function"?Object.is:Lf;function Gn(t,s){if(vs(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),a=Object.keys(s);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var n=r[a];if(!Zo.call(s,n)||!vs(t[n],s[n]))return!1}return!0}function Ju(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yu(t,s){var r=Ju(t);t=0;for(var a;r;){if(r.nodeType===3){if(a=t+r.textContent.length,t<=s&&a>=s)return{node:r,offset:s-t};t=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ju(r)}}function Ah(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Ah(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Lh(){for(var t=window,s=oi();s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=oi(t.document)}return s}function Ld(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function Mf(t){var s=Lh(),r=t.focusedElem,a=t.selectionRange;if(s!==r&&r&&r.ownerDocument&&Ah(r.ownerDocument.documentElement,r)){if(a!==null&&Ld(r)){if(s=a.start,t=a.end,t===void 0&&(t=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(t,r.value.length);else if(t=(s=r.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var n=r.textContent.length,l=Math.min(a.start,n);a=a.end===void 0?l:Math.min(a.end,n),!t.extend&&l>a&&(n=a,a=l,l=n),n=Yu(r,l);var i=Yu(r,a);n&&i&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(s=s.createRange(),s.setStart(n.node,n.offset),t.removeAllRanges(),l>a?(t.addRange(s),t.extend(i.node,i.offset)):(s.setEnd(i.node,i.offset),t.addRange(s)))}}for(s=[],t=r;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)t=s[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Df=Vs&&"documentMode"in document&&11>=document.documentMode,ja=null,yc=null,Ln=null,bc=!1;function Xu(t,s,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;bc||ja==null||ja!==oi(a)||(a=ja,"selectionStart"in a&&Ld(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Ln&&Gn(Ln,a)||(Ln=a,a=pi(yc,"onSelect"),0<a.length&&(s=new Rd("onSelect","select",null,s,r),t.push({event:s,listeners:a}),s.target=ja)))}function Ol(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var wa={animationend:Ol("Animation","AnimationEnd"),animationiteration:Ol("Animation","AnimationIteration"),animationstart:Ol("Animation","AnimationStart"),transitionend:Ol("Transition","TransitionEnd")},Fo={},Mh={};Vs&&(Mh=document.createElement("div").style,"AnimationEvent"in window||(delete wa.animationend.animation,delete wa.animationiteration.animation,delete wa.animationstart.animation),"TransitionEvent"in window||delete wa.transitionend.transition);function Vi(t){if(Fo[t])return Fo[t];if(!wa[t])return t;var s=wa[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in Mh)return Fo[t]=s[r];return t}var Dh=Vi("animationend"),$h=Vi("animationiteration"),qh=Vi("animationstart"),Ih=Vi("transitionend"),zh=new Map,Zu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(t,s){zh.set(t,s),ma(s,[t])}for(var Po=0;Po<Zu.length;Po++){var To=Zu[Po],$f=To.toLowerCase(),qf=To[0].toUpperCase()+To.slice(1);Ar($f,"on"+qf)}Ar(Dh,"onAnimationEnd");Ar($h,"onAnimationIteration");Ar(qh,"onAnimationStart");Ar("dblclick","onDoubleClick");Ar("focusin","onFocus");Ar("focusout","onBlur");Ar(Ih,"onTransitionEnd");Ya("onMouseEnter",["mouseout","mouseover"]);Ya("onMouseLeave",["mouseout","mouseover"]);Ya("onPointerEnter",["pointerout","pointerover"]);Ya("onPointerLeave",["pointerout","pointerover"]);ma("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ma("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ma("onBeforeInput",["compositionend","keypress","textInput","paste"]);ma("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ma("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ma("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),If=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fn));function em(t,s,r){var a=t.type||"unknown-event";t.currentTarget=r,Dg(a,s,void 0,t),t.currentTarget=null}function Bh(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var a=t[r],n=a.event;a=a.listeners;e:{var l=void 0;if(s)for(var i=a.length-1;0<=i;i--){var o=a[i],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==l&&n.isPropagationStopped())break e;em(n,o,d),l=c}else for(i=0;i<a.length;i++){if(o=a[i],c=o.instance,d=o.currentTarget,o=o.listener,c!==l&&n.isPropagationStopped())break e;em(n,o,d),l=c}}}if(di)throw t=hc,di=!1,hc=null,t}function ze(t,s){var r=s[_c];r===void 0&&(r=s[_c]=new Set);var a=t+"__bubble";r.has(a)||(Uh(s,t,2,!1),r.add(a))}function Ro(t,s,r){var a=0;s&&(a|=4),Uh(r,t,a,s)}var Al="_reactListening"+Math.random().toString(36).slice(2);function Jn(t){if(!t[Al]){t[Al]=!0,Jx.forEach(function(r){r!=="selectionchange"&&(If.has(r)||Ro(r,!1,t),Ro(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Al]||(s[Al]=!0,Ro("selectionchange",!1,s))}}function Uh(t,s,r,a){switch(Sh(s)){case 1:var n=Zg;break;case 4:n=ef;break;default:n=Pd}r=n.bind(null,s,r,t),n=void 0,!xc||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(n=!0),a?n!==void 0?t.addEventListener(s,r,{capture:!0,passive:n}):t.addEventListener(s,r,!0):n!==void 0?t.addEventListener(s,r,{passive:n}):t.addEventListener(s,r,!1)}function Oo(t,s,r,a,n){var l=a;if(!(s&1)&&!(s&2)&&a!==null)e:for(;;){if(a===null)return;var i=a.tag;if(i===3||i===4){var o=a.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(i===4)for(i=a.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;i=i.return}for(;o!==null;){if(i=Ir(o),i===null)return;if(c=i.tag,c===5||c===6){a=l=i;continue e}o=o.parentNode}}a=a.return}mh(function(){var d=l,h=Sd(r),m=[];e:{var u=zh.get(t);if(u!==void 0){var g=Rd,b=t;switch(t){case"keypress":if(Gl(r)===0)break e;case"keydown":case"keyup":g=gf;break;case"focusin":b="focus",g=So;break;case"focusout":b="blur",g=So;break;case"beforeblur":case"afterblur":g=So;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Bu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=rf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=bf;break;case Dh:case $h:case qh:g=lf;break;case Ih:g=jf;break;case"scroll":g=tf;break;case"wheel":g=Nf;break;case"copy":case"cut":case"paste":g=cf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Qu}var f=(s&4)!==0,v=!f&&t==="scroll",y=f?u!==null?u+"Capture":null:u;f=[];for(var p=d,x;p!==null;){x=p;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,y!==null&&(w=Qn(p,y),w!=null&&f.push(Yn(p,w,x)))),v)break;p=p.return}0<f.length&&(u=new g(u,b,null,r,h),m.push({event:u,listeners:f}))}}if(!(s&7)){e:{if(u=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",u&&r!==uc&&(b=r.relatedTarget||r.fromElement)&&(Ir(b)||b[Ks]))break e;if((g||u)&&(u=h.window===h?h:(u=h.ownerDocument)?u.defaultView||u.parentWindow:window,g?(b=r.relatedTarget||r.toElement,g=d,b=b?Ir(b):null,b!==null&&(v=xa(b),b!==v||b.tag!==5&&b.tag!==6)&&(b=null)):(g=null,b=d),g!==b)){if(f=Bu,w="onMouseLeave",y="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(f=Qu,w="onPointerLeave",y="onPointerEnter",p="pointer"),v=g==null?u:Na(g),x=b==null?u:Na(b),u=new f(w,p+"leave",g,r,h),u.target=v,u.relatedTarget=x,w=null,Ir(h)===d&&(f=new f(y,p+"enter",b,r,h),f.target=x,f.relatedTarget=v,w=f),v=w,g&&b)t:{for(f=g,y=b,p=0,x=f;x;x=pa(x))p++;for(x=0,w=y;w;w=pa(w))x++;for(;0<p-x;)f=pa(f),p--;for(;0<x-p;)y=pa(y),x--;for(;p--;){if(f===y||y!==null&&f===y.alternate)break t;f=pa(f),y=pa(y)}f=null}else f=null;g!==null&&tm(m,u,g,f,!1),b!==null&&v!==null&&tm(m,v,b,f,!0)}}e:{if(u=d?Na(d):window,g=u.nodeName&&u.nodeName.toLowerCase(),g==="select"||g==="input"&&u.type==="file")var R=Pf;else if(Wu(u))if(Rh)R=Af;else{R=Rf;var N=Tf}else(g=u.nodeName)&&g.toLowerCase()==="input"&&(u.type==="checkbox"||u.type==="radio")&&(R=Of);if(R&&(R=R(t,d))){Th(m,R,r,h);break e}N&&N(t,u,d),t==="focusout"&&(N=u._wrapperState)&&N.controlled&&u.type==="number"&&lc(u,"number",u.value)}switch(N=d?Na(d):window,t){case"focusin":(Wu(N)||N.contentEditable==="true")&&(ja=N,yc=d,Ln=null);break;case"focusout":Ln=yc=ja=null;break;case"mousedown":bc=!0;break;case"contextmenu":case"mouseup":case"dragend":bc=!1,Xu(m,r,h);break;case"selectionchange":if(Df)break;case"keydown":case"keyup":Xu(m,r,h)}var k;if(Ad)e:{switch(t){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else va?Fh(t,r)&&(L="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(L="onCompositionStart");L&&(Eh&&r.locale!=="ko"&&(va||L!=="onCompositionStart"?L==="onCompositionEnd"&&va&&(k=Ch()):(fr=h,Td="value"in fr?fr.value:fr.textContent,va=!0)),N=pi(d,L),0<N.length&&(L=new Uu(L,t,null,r,h),m.push({event:L,listeners:N}),k?L.data=k:(k=Ph(r),k!==null&&(L.data=k)))),(k=kf?Sf(t,r):Cf(t,r))&&(d=pi(d,"onBeforeInput"),0<d.length&&(h=new Uu("onBeforeInput","beforeinput",null,r,h),m.push({event:h,listeners:d}),h.data=k))}Bh(m,s)})}function Yn(t,s,r){return{instance:t,listener:s,currentTarget:r}}function pi(t,s){for(var r=s+"Capture",a=[];t!==null;){var n=t,l=n.stateNode;n.tag===5&&l!==null&&(n=l,l=Qn(t,r),l!=null&&a.unshift(Yn(t,l,n)),l=Qn(t,s),l!=null&&a.push(Yn(t,l,n))),t=t.return}return a}function pa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function tm(t,s,r,a,n){for(var l=s._reactName,i=[];r!==null&&r!==a;){var o=r,c=o.alternate,d=o.stateNode;if(c!==null&&c===a)break;o.tag===5&&d!==null&&(o=d,n?(c=Qn(r,l),c!=null&&i.unshift(Yn(r,c,o))):n||(c=Qn(r,l),c!=null&&i.push(Yn(r,c,o)))),r=r.return}i.length!==0&&t.push({event:s,listeners:i})}var zf=/\r\n?/g,Bf=/\u0000|\uFFFD/g;function sm(t){return(typeof t=="string"?t:""+t).replace(zf,`
`).replace(Bf,"")}function Ll(t,s,r){if(s=sm(s),sm(t)!==s&&r)throw Error(oe(425))}function gi(){}var vc=null,jc=null;function wc(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Nc=typeof setTimeout=="function"?setTimeout:void 0,Uf=typeof clearTimeout=="function"?clearTimeout:void 0,rm=typeof Promise=="function"?Promise:void 0,Qf=typeof queueMicrotask=="function"?queueMicrotask:typeof rm<"u"?function(t){return rm.resolve(null).then(t).catch(Vf)}:Nc;function Vf(t){setTimeout(function(){throw t})}function Ao(t,s){var r=s,a=0;do{var n=r.nextSibling;if(t.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(a===0){t.removeChild(n),Wn(s);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=n}while(r);Wn(s)}function Nr(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function am(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return t;s--}else r==="/$"&&s++}t=t.previousSibling}return null}var cn=Math.random().toString(36).slice(2),Fs="__reactFiber$"+cn,Xn="__reactProps$"+cn,Ks="__reactContainer$"+cn,_c="__reactEvents$"+cn,Kf="__reactListeners$"+cn,Wf="__reactHandles$"+cn;function Ir(t){var s=t[Fs];if(s)return s;for(var r=t.parentNode;r;){if(s=r[Ks]||r[Fs]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=am(t);t!==null;){if(r=t[Fs])return r;t=am(t)}return s}t=r,r=t.parentNode}return null}function fl(t){return t=t[Fs]||t[Ks],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Na(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function Ki(t){return t[Xn]||null}var kc=[],_a=-1;function Lr(t){return{current:t}}function Be(t){0>_a||(t.current=kc[_a],kc[_a]=null,_a--)}function $e(t,s){_a++,kc[_a]=t.current,t.current=s}var Rr={},_t=Lr(Rr),$t=Lr(!1),aa=Rr;function Xa(t,s){var r=t.type.contextTypes;if(!r)return Rr;var a=t.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===s)return a.__reactInternalMemoizedMaskedChildContext;var n={},l;for(l in r)n[l]=s[l];return a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=n),n}function qt(t){return t=t.childContextTypes,t!=null}function fi(){Be($t),Be(_t)}function nm(t,s,r){if(_t.current!==Rr)throw Error(oe(168));$e(_t,s),$e($t,r)}function Qh(t,s,r){var a=t.stateNode;if(s=s.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var n in a)if(!(n in s))throw Error(oe(108,Pg(t)||"Unknown",n));return Ke({},r,a)}function yi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Rr,aa=_t.current,$e(_t,t),$e($t,$t.current),!0}function lm(t,s,r){var a=t.stateNode;if(!a)throw Error(oe(169));r?(t=Qh(t,s,aa),a.__reactInternalMemoizedMergedChildContext=t,Be($t),Be(_t),$e(_t,t)):Be($t),$e($t,r)}var Ds=null,Wi=!1,Lo=!1;function Vh(t){Ds===null?Ds=[t]:Ds.push(t)}function Hf(t){Wi=!0,Vh(t)}function Mr(){if(!Lo&&Ds!==null){Lo=!0;var t=0,s=Oe;try{var r=Ds;for(Oe=1;t<r.length;t++){var a=r[t];do a=a(!0);while(a!==null)}Ds=null,Wi=!1}catch(n){throw Ds!==null&&(Ds=Ds.slice(t+1)),gh(Cd,Mr),n}finally{Oe=s,Lo=!1}}return null}var ka=[],Sa=0,bi=null,vi=0,as=[],ns=0,na=null,zs=1,Bs="";function $r(t,s){ka[Sa++]=vi,ka[Sa++]=bi,bi=t,vi=s}function Kh(t,s,r){as[ns++]=zs,as[ns++]=Bs,as[ns++]=na,na=t;var a=zs;t=Bs;var n=32-ys(a)-1;a&=~(1<<n),r+=1;var l=32-ys(s)+n;if(30<l){var i=n-n%5;l=(a&(1<<i)-1).toString(32),a>>=i,n-=i,zs=1<<32-ys(s)+n|r<<n|a,Bs=l+t}else zs=1<<l|r<<n|a,Bs=t}function Md(t){t.return!==null&&($r(t,1),Kh(t,1,0))}function Dd(t){for(;t===bi;)bi=ka[--Sa],ka[Sa]=null,vi=ka[--Sa],ka[Sa]=null;for(;t===na;)na=as[--ns],as[ns]=null,Bs=as[--ns],as[ns]=null,zs=as[--ns],as[ns]=null}var Jt=null,Ht=null,Ue=!1,fs=null;function Wh(t,s){var r=ls(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=t,s=t.deletions,s===null?(t.deletions=[r],t.flags|=16):s.push(r)}function im(t,s){switch(t.tag){case 5:var r=t.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,Jt=t,Ht=Nr(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,Jt=t,Ht=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=na!==null?{id:zs,overflow:Bs}:null,t.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=ls(18,null,null,0),r.stateNode=s,r.return=t,t.child=r,Jt=t,Ht=null,!0):!1;default:return!1}}function Sc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Cc(t){if(Ue){var s=Ht;if(s){var r=s;if(!im(t,s)){if(Sc(t))throw Error(oe(418));s=Nr(r.nextSibling);var a=Jt;s&&im(t,s)?Wh(a,r):(t.flags=t.flags&-4097|2,Ue=!1,Jt=t)}}else{if(Sc(t))throw Error(oe(418));t.flags=t.flags&-4097|2,Ue=!1,Jt=t}}}function om(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Jt=t}function Ml(t){if(t!==Jt)return!1;if(!Ue)return om(t),Ue=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!wc(t.type,t.memoizedProps)),s&&(s=Ht)){if(Sc(t))throw Hh(),Error(oe(418));for(;s;)Wh(t,s),s=Nr(s.nextSibling)}if(om(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(s===0){Ht=Nr(t.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}t=t.nextSibling}Ht=null}}else Ht=Jt?Nr(t.stateNode.nextSibling):null;return!0}function Hh(){for(var t=Ht;t;)t=Nr(t.nextSibling)}function Za(){Ht=Jt=null,Ue=!1}function $d(t){fs===null?fs=[t]:fs.push(t)}var Gf=Js.ReactCurrentBatchConfig;function jn(t,s,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(oe(309));var a=r.stateNode}if(!a)throw Error(oe(147,t));var n=a,l=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===l?s.ref:(s=function(i){var o=n.refs;i===null?delete o[l]:o[l]=i},s._stringRef=l,s)}if(typeof t!="string")throw Error(oe(284));if(!r._owner)throw Error(oe(290,t))}return t}function Dl(t,s){throw t=Object.prototype.toString.call(s),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function cm(t){var s=t._init;return s(t._payload)}function Gh(t){function s(y,p){if(t){var x=y.deletions;x===null?(y.deletions=[p],y.flags|=16):x.push(p)}}function r(y,p){if(!t)return null;for(;p!==null;)s(y,p),p=p.sibling;return null}function a(y,p){for(y=new Map;p!==null;)p.key!==null?y.set(p.key,p):y.set(p.index,p),p=p.sibling;return y}function n(y,p){return y=Cr(y,p),y.index=0,y.sibling=null,y}function l(y,p,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<p?(y.flags|=2,p):x):(y.flags|=2,p)):(y.flags|=1048576,p)}function i(y){return t&&y.alternate===null&&(y.flags|=2),y}function o(y,p,x,w){return p===null||p.tag!==6?(p=Bo(x,y.mode,w),p.return=y,p):(p=n(p,x),p.return=y,p)}function c(y,p,x,w){var R=x.type;return R===ba?h(y,p,x.props.children,w,x.key):p!==null&&(p.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===sr&&cm(R)===p.type)?(w=n(p,x.props),w.ref=jn(y,p,x),w.return=y,w):(w=si(x.type,x.key,x.props,null,y.mode,w),w.ref=jn(y,p,x),w.return=y,w)}function d(y,p,x,w){return p===null||p.tag!==4||p.stateNode.containerInfo!==x.containerInfo||p.stateNode.implementation!==x.implementation?(p=Uo(x,y.mode,w),p.return=y,p):(p=n(p,x.children||[]),p.return=y,p)}function h(y,p,x,w,R){return p===null||p.tag!==7?(p=ea(x,y.mode,w,R),p.return=y,p):(p=n(p,x),p.return=y,p)}function m(y,p,x){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Bo(""+p,y.mode,x),p.return=y,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Sl:return x=si(p.type,p.key,p.props,null,y.mode,x),x.ref=jn(y,null,p),x.return=y,x;case ya:return p=Uo(p,y.mode,x),p.return=y,p;case sr:var w=p._init;return m(y,w(p._payload),x)}if(Cn(p)||gn(p))return p=ea(p,y.mode,x,null),p.return=y,p;Dl(y,p)}return null}function u(y,p,x,w){var R=p!==null?p.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return R!==null?null:o(y,p,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Sl:return x.key===R?c(y,p,x,w):null;case ya:return x.key===R?d(y,p,x,w):null;case sr:return R=x._init,u(y,p,R(x._payload),w)}if(Cn(x)||gn(x))return R!==null?null:h(y,p,x,w,null);Dl(y,x)}return null}function g(y,p,x,w,R){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(x)||null,o(p,y,""+w,R);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Sl:return y=y.get(w.key===null?x:w.key)||null,c(p,y,w,R);case ya:return y=y.get(w.key===null?x:w.key)||null,d(p,y,w,R);case sr:var N=w._init;return g(y,p,x,N(w._payload),R)}if(Cn(w)||gn(w))return y=y.get(x)||null,h(p,y,w,R,null);Dl(p,w)}return null}function b(y,p,x,w){for(var R=null,N=null,k=p,L=p=0,E=null;k!==null&&L<x.length;L++){k.index>L?(E=k,k=null):E=k.sibling;var z=u(y,k,x[L],w);if(z===null){k===null&&(k=E);break}t&&k&&z.alternate===null&&s(y,k),p=l(z,p,L),N===null?R=z:N.sibling=z,N=z,k=E}if(L===x.length)return r(y,k),Ue&&$r(y,L),R;if(k===null){for(;L<x.length;L++)k=m(y,x[L],w),k!==null&&(p=l(k,p,L),N===null?R=k:N.sibling=k,N=k);return Ue&&$r(y,L),R}for(k=a(y,k);L<x.length;L++)E=g(k,y,L,x[L],w),E!==null&&(t&&E.alternate!==null&&k.delete(E.key===null?L:E.key),p=l(E,p,L),N===null?R=E:N.sibling=E,N=E);return t&&k.forEach(function(_){return s(y,_)}),Ue&&$r(y,L),R}function f(y,p,x,w){var R=gn(x);if(typeof R!="function")throw Error(oe(150));if(x=R.call(x),x==null)throw Error(oe(151));for(var N=R=null,k=p,L=p=0,E=null,z=x.next();k!==null&&!z.done;L++,z=x.next()){k.index>L?(E=k,k=null):E=k.sibling;var _=u(y,k,z.value,w);if(_===null){k===null&&(k=E);break}t&&k&&_.alternate===null&&s(y,k),p=l(_,p,L),N===null?R=_:N.sibling=_,N=_,k=E}if(z.done)return r(y,k),Ue&&$r(y,L),R;if(k===null){for(;!z.done;L++,z=x.next())z=m(y,z.value,w),z!==null&&(p=l(z,p,L),N===null?R=z:N.sibling=z,N=z);return Ue&&$r(y,L),R}for(k=a(y,k);!z.done;L++,z=x.next())z=g(k,y,L,z.value,w),z!==null&&(t&&z.alternate!==null&&k.delete(z.key===null?L:z.key),p=l(z,p,L),N===null?R=z:N.sibling=z,N=z);return t&&k.forEach(function(O){return s(y,O)}),Ue&&$r(y,L),R}function v(y,p,x,w){if(typeof x=="object"&&x!==null&&x.type===ba&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Sl:e:{for(var R=x.key,N=p;N!==null;){if(N.key===R){if(R=x.type,R===ba){if(N.tag===7){r(y,N.sibling),p=n(N,x.props.children),p.return=y,y=p;break e}}else if(N.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===sr&&cm(R)===N.type){r(y,N.sibling),p=n(N,x.props),p.ref=jn(y,N,x),p.return=y,y=p;break e}r(y,N);break}else s(y,N);N=N.sibling}x.type===ba?(p=ea(x.props.children,y.mode,w,x.key),p.return=y,y=p):(w=si(x.type,x.key,x.props,null,y.mode,w),w.ref=jn(y,p,x),w.return=y,y=w)}return i(y);case ya:e:{for(N=x.key;p!==null;){if(p.key===N)if(p.tag===4&&p.stateNode.containerInfo===x.containerInfo&&p.stateNode.implementation===x.implementation){r(y,p.sibling),p=n(p,x.children||[]),p.return=y,y=p;break e}else{r(y,p);break}else s(y,p);p=p.sibling}p=Uo(x,y.mode,w),p.return=y,y=p}return i(y);case sr:return N=x._init,v(y,p,N(x._payload),w)}if(Cn(x))return b(y,p,x,w);if(gn(x))return f(y,p,x,w);Dl(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,p!==null&&p.tag===6?(r(y,p.sibling),p=n(p,x),p.return=y,y=p):(r(y,p),p=Bo(x,y.mode,w),p.return=y,y=p),i(y)):r(y,p)}return v}var en=Gh(!0),Jh=Gh(!1),ji=Lr(null),wi=null,Ca=null,qd=null;function Id(){qd=Ca=wi=null}function zd(t){var s=ji.current;Be(ji),t._currentValue=s}function Ec(t,s,r){for(;t!==null;){var a=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,a!==null&&(a.childLanes|=s)):a!==null&&(a.childLanes&s)!==s&&(a.childLanes|=s),t===r)break;t=t.return}}function La(t,s){wi=t,qd=Ca=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(Dt=!0),t.firstContext=null)}function cs(t){var s=t._currentValue;if(qd!==t)if(t={context:t,memoizedValue:s,next:null},Ca===null){if(wi===null)throw Error(oe(308));Ca=t,wi.dependencies={lanes:0,firstContext:t}}else Ca=Ca.next=t;return s}var zr=null;function Bd(t){zr===null?zr=[t]:zr.push(t)}function Yh(t,s,r,a){var n=s.interleaved;return n===null?(r.next=r,Bd(s)):(r.next=n.next,n.next=r),s.interleaved=r,Ws(t,a)}function Ws(t,s){t.lanes|=s;var r=t.alternate;for(r!==null&&(r.lanes|=s),r=t,t=t.return;t!==null;)t.childLanes|=s,r=t.alternate,r!==null&&(r.childLanes|=s),r=t,t=t.return;return r.tag===3?r.stateNode:null}var rr=!1;function Ud(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xh(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Us(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function _r(t,s,r){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,Pe&2){var n=a.pending;return n===null?s.next=s:(s.next=n.next,n.next=s),a.pending=s,Ws(t,r)}return n=a.interleaved,n===null?(s.next=s,Bd(a)):(s.next=n.next,n.next=s),a.interleaved=s,Ws(t,r)}function Jl(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var a=s.lanes;a&=t.pendingLanes,r|=a,s.lanes=r,Ed(t,r)}}function dm(t,s){var r=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var n=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?n=l=i:l=l.next=i,r=r.next}while(r!==null);l===null?n=l=s:l=l.next=s}else n=l=s;r={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:l,shared:a.shared,effects:a.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}function Ni(t,s,r,a){var n=t.updateQueue;rr=!1;var l=n.firstBaseUpdate,i=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var c=o,d=c.next;c.next=null,i===null?l=d:i.next=d,i=c;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==i&&(o===null?h.firstBaseUpdate=d:o.next=d,h.lastBaseUpdate=c))}if(l!==null){var m=n.baseState;i=0,h=d=c=null,o=l;do{var u=o.lane,g=o.eventTime;if((a&u)===u){h!==null&&(h=h.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var b=t,f=o;switch(u=s,g=r,f.tag){case 1:if(b=f.payload,typeof b=="function"){m=b.call(g,m,u);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=f.payload,u=typeof b=="function"?b.call(g,m,u):b,u==null)break e;m=Ke({},m,u);break e;case 2:rr=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,u=n.effects,u===null?n.effects=[o]:u.push(o))}else g={eventTime:g,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(d=h=g,c=m):h=h.next=g,i|=u;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;u=o,o=u.next,u.next=null,n.lastBaseUpdate=u,n.shared.pending=null}}while(!0);if(h===null&&(c=m),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=h,s=n.shared.interleaved,s!==null){n=s;do i|=n.lane,n=n.next;while(n!==s)}else l===null&&(n.shared.lanes=0);ia|=i,t.lanes=i,t.memoizedState=m}}function um(t,s,r){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var a=t[s],n=a.callback;if(n!==null){if(a.callback=null,a=r,typeof n!="function")throw Error(oe(191,n));n.call(a)}}}var yl={},Rs=Lr(yl),Zn=Lr(yl),el=Lr(yl);function Br(t){if(t===yl)throw Error(oe(174));return t}function Qd(t,s){switch($e(el,s),$e(Zn,t),$e(Rs,yl),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:oc(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=oc(s,t)}Be(Rs),$e(Rs,s)}function tn(){Be(Rs),Be(Zn),Be(el)}function Zh(t){Br(el.current);var s=Br(Rs.current),r=oc(s,t.type);s!==r&&($e(Zn,t),$e(Rs,r))}function Vd(t){Zn.current===t&&(Be(Rs),Be(Zn))}var Qe=Lr(0);function _i(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Mo=[];function Kd(){for(var t=0;t<Mo.length;t++)Mo[t]._workInProgressVersionPrimary=null;Mo.length=0}var Yl=Js.ReactCurrentDispatcher,Do=Js.ReactCurrentBatchConfig,la=0,Ve=null,at=null,ot=null,ki=!1,Mn=!1,tl=0,Jf=0;function yt(){throw Error(oe(321))}function Wd(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!vs(t[r],s[r]))return!1;return!0}function Hd(t,s,r,a,n,l){if(la=l,Ve=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Yl.current=t===null||t.memoizedState===null?ey:ty,t=r(a,n),Mn){l=0;do{if(Mn=!1,tl=0,25<=l)throw Error(oe(301));l+=1,ot=at=null,s.updateQueue=null,Yl.current=sy,t=r(a,n)}while(Mn)}if(Yl.current=Si,s=at!==null&&at.next!==null,la=0,ot=at=Ve=null,ki=!1,s)throw Error(oe(300));return t}function Gd(){var t=tl!==0;return tl=0,t}function ks(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?Ve.memoizedState=ot=t:ot=ot.next=t,ot}function ds(){if(at===null){var t=Ve.alternate;t=t!==null?t.memoizedState:null}else t=at.next;var s=ot===null?Ve.memoizedState:ot.next;if(s!==null)ot=s,at=t;else{if(t===null)throw Error(oe(310));at=t,t={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},ot===null?Ve.memoizedState=ot=t:ot=ot.next=t}return ot}function sl(t,s){return typeof s=="function"?s(t):s}function $o(t){var s=ds(),r=s.queue;if(r===null)throw Error(oe(311));r.lastRenderedReducer=t;var a=at,n=a.baseQueue,l=r.pending;if(l!==null){if(n!==null){var i=n.next;n.next=l.next,l.next=i}a.baseQueue=n=l,r.pending=null}if(n!==null){l=n.next,a=a.baseState;var o=i=null,c=null,d=l;do{var h=d.lane;if((la&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:t(a,d.action);else{var m={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=m,i=a):c=c.next=m,Ve.lanes|=h,ia|=h}d=d.next}while(d!==null&&d!==l);c===null?i=a:c.next=o,vs(a,s.memoizedState)||(Dt=!0),s.memoizedState=a,s.baseState=i,s.baseQueue=c,r.lastRenderedState=a}if(t=r.interleaved,t!==null){n=t;do l=n.lane,Ve.lanes|=l,ia|=l,n=n.next;while(n!==t)}else n===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function qo(t){var s=ds(),r=s.queue;if(r===null)throw Error(oe(311));r.lastRenderedReducer=t;var a=r.dispatch,n=r.pending,l=s.memoizedState;if(n!==null){r.pending=null;var i=n=n.next;do l=t(l,i.action),i=i.next;while(i!==n);vs(l,s.memoizedState)||(Dt=!0),s.memoizedState=l,s.baseQueue===null&&(s.baseState=l),r.lastRenderedState=l}return[l,a]}function e0(){}function t0(t,s){var r=Ve,a=ds(),n=s(),l=!vs(a.memoizedState,n);if(l&&(a.memoizedState=n,Dt=!0),a=a.queue,Jd(a0.bind(null,r,a,t),[t]),a.getSnapshot!==s||l||ot!==null&&ot.memoizedState.tag&1){if(r.flags|=2048,rl(9,r0.bind(null,r,a,n,s),void 0,null),ct===null)throw Error(oe(349));la&30||s0(r,s,n)}return n}function s0(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=Ve.updateQueue,s===null?(s={lastEffect:null,stores:null},Ve.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function r0(t,s,r,a){s.value=r,s.getSnapshot=a,n0(s)&&l0(t)}function a0(t,s,r){return r(function(){n0(s)&&l0(t)})}function n0(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!vs(t,r)}catch{return!0}}function l0(t){var s=Ws(t,1);s!==null&&bs(s,t,1,-1)}function mm(t){var s=ks();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sl,lastRenderedState:t},s.queue=t,t=t.dispatch=Zf.bind(null,Ve,t),[s.memoizedState,t]}function rl(t,s,r,a){return t={tag:t,create:s,destroy:r,deps:a,next:null},s=Ve.updateQueue,s===null?(s={lastEffect:null,stores:null},Ve.updateQueue=s,s.lastEffect=t.next=t):(r=s.lastEffect,r===null?s.lastEffect=t.next=t:(a=r.next,r.next=t,t.next=a,s.lastEffect=t)),t}function i0(){return ds().memoizedState}function Xl(t,s,r,a){var n=ks();Ve.flags|=t,n.memoizedState=rl(1|s,r,void 0,a===void 0?null:a)}function Hi(t,s,r,a){var n=ds();a=a===void 0?null:a;var l=void 0;if(at!==null){var i=at.memoizedState;if(l=i.destroy,a!==null&&Wd(a,i.deps)){n.memoizedState=rl(s,r,l,a);return}}Ve.flags|=t,n.memoizedState=rl(1|s,r,l,a)}function xm(t,s){return Xl(8390656,8,t,s)}function Jd(t,s){return Hi(2048,8,t,s)}function o0(t,s){return Hi(4,2,t,s)}function c0(t,s){return Hi(4,4,t,s)}function d0(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function u0(t,s,r){return r=r!=null?r.concat([t]):null,Hi(4,4,d0.bind(null,s,t),r)}function Yd(){}function m0(t,s){var r=ds();s=s===void 0?null:s;var a=r.memoizedState;return a!==null&&s!==null&&Wd(s,a[1])?a[0]:(r.memoizedState=[t,s],t)}function x0(t,s){var r=ds();s=s===void 0?null:s;var a=r.memoizedState;return a!==null&&s!==null&&Wd(s,a[1])?a[0]:(t=t(),r.memoizedState=[t,s],t)}function h0(t,s,r){return la&21?(vs(r,s)||(r=bh(),Ve.lanes|=r,ia|=r,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,Dt=!0),t.memoizedState=r)}function Yf(t,s){var r=Oe;Oe=r!==0&&4>r?r:4,t(!0);var a=Do.transition;Do.transition={};try{t(!1),s()}finally{Oe=r,Do.transition=a}}function p0(){return ds().memoizedState}function Xf(t,s,r){var a=Sr(t);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},g0(t))f0(s,r);else if(r=Yh(t,s,r,a),r!==null){var n=Pt();bs(r,t,a,n),y0(r,s,a)}}function Zf(t,s,r){var a=Sr(t),n={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(g0(t))f0(s,n);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=s.lastRenderedReducer,l!==null))try{var i=s.lastRenderedState,o=l(i,r);if(n.hasEagerState=!0,n.eagerState=o,vs(o,i)){var c=s.interleaved;c===null?(n.next=n,Bd(s)):(n.next=c.next,c.next=n),s.interleaved=n;return}}catch{}finally{}r=Yh(t,s,n,a),r!==null&&(n=Pt(),bs(r,t,a,n),y0(r,s,a))}}function g0(t){var s=t.alternate;return t===Ve||s!==null&&s===Ve}function f0(t,s){Mn=ki=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function y0(t,s,r){if(r&4194240){var a=s.lanes;a&=t.pendingLanes,r|=a,s.lanes=r,Ed(t,r)}}var Si={readContext:cs,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},ey={readContext:cs,useCallback:function(t,s){return ks().memoizedState=[t,s===void 0?null:s],t},useContext:cs,useEffect:xm,useImperativeHandle:function(t,s,r){return r=r!=null?r.concat([t]):null,Xl(4194308,4,d0.bind(null,s,t),r)},useLayoutEffect:function(t,s){return Xl(4194308,4,t,s)},useInsertionEffect:function(t,s){return Xl(4,2,t,s)},useMemo:function(t,s){var r=ks();return s=s===void 0?null:s,t=t(),r.memoizedState=[t,s],t},useReducer:function(t,s,r){var a=ks();return s=r!==void 0?r(s):s,a.memoizedState=a.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},a.queue=t,t=t.dispatch=Xf.bind(null,Ve,t),[a.memoizedState,t]},useRef:function(t){var s=ks();return t={current:t},s.memoizedState=t},useState:mm,useDebugValue:Yd,useDeferredValue:function(t){return ks().memoizedState=t},useTransition:function(){var t=mm(!1),s=t[0];return t=Yf.bind(null,t[1]),ks().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,r){var a=Ve,n=ks();if(Ue){if(r===void 0)throw Error(oe(407));r=r()}else{if(r=s(),ct===null)throw Error(oe(349));la&30||s0(a,s,r)}n.memoizedState=r;var l={value:r,getSnapshot:s};return n.queue=l,xm(a0.bind(null,a,l,t),[t]),a.flags|=2048,rl(9,r0.bind(null,a,l,r,s),void 0,null),r},useId:function(){var t=ks(),s=ct.identifierPrefix;if(Ue){var r=Bs,a=zs;r=(a&~(1<<32-ys(a)-1)).toString(32)+r,s=":"+s+"R"+r,r=tl++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=Jf++,s=":"+s+"r"+r.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},ty={readContext:cs,useCallback:m0,useContext:cs,useEffect:Jd,useImperativeHandle:u0,useInsertionEffect:o0,useLayoutEffect:c0,useMemo:x0,useReducer:$o,useRef:i0,useState:function(){return $o(sl)},useDebugValue:Yd,useDeferredValue:function(t){var s=ds();return h0(s,at.memoizedState,t)},useTransition:function(){var t=$o(sl)[0],s=ds().memoizedState;return[t,s]},useMutableSource:e0,useSyncExternalStore:t0,useId:p0,unstable_isNewReconciler:!1},sy={readContext:cs,useCallback:m0,useContext:cs,useEffect:Jd,useImperativeHandle:u0,useInsertionEffect:o0,useLayoutEffect:c0,useMemo:x0,useReducer:qo,useRef:i0,useState:function(){return qo(sl)},useDebugValue:Yd,useDeferredValue:function(t){var s=ds();return at===null?s.memoizedState=t:h0(s,at.memoizedState,t)},useTransition:function(){var t=qo(sl)[0],s=ds().memoizedState;return[t,s]},useMutableSource:e0,useSyncExternalStore:t0,useId:p0,unstable_isNewReconciler:!1};function xs(t,s){if(t&&t.defaultProps){s=Ke({},s),t=t.defaultProps;for(var r in t)s[r]===void 0&&(s[r]=t[r]);return s}return s}function Fc(t,s,r,a){s=t.memoizedState,r=r(a,s),r=r==null?s:Ke({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Gi={isMounted:function(t){return(t=t._reactInternals)?xa(t)===t:!1},enqueueSetState:function(t,s,r){t=t._reactInternals;var a=Pt(),n=Sr(t),l=Us(a,n);l.payload=s,r!=null&&(l.callback=r),s=_r(t,l,n),s!==null&&(bs(s,t,n,a),Jl(s,t,n))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var a=Pt(),n=Sr(t),l=Us(a,n);l.tag=1,l.payload=s,r!=null&&(l.callback=r),s=_r(t,l,n),s!==null&&(bs(s,t,n,a),Jl(s,t,n))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=Pt(),a=Sr(t),n=Us(r,a);n.tag=2,s!=null&&(n.callback=s),s=_r(t,n,a),s!==null&&(bs(s,t,a,r),Jl(s,t,a))}};function hm(t,s,r,a,n,l,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,l,i):s.prototype&&s.prototype.isPureReactComponent?!Gn(r,a)||!Gn(n,l):!0}function b0(t,s,r){var a=!1,n=Rr,l=s.contextType;return typeof l=="object"&&l!==null?l=cs(l):(n=qt(s)?aa:_t.current,a=s.contextTypes,l=(a=a!=null)?Xa(t,n):Rr),s=new s(r,l),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Gi,t.stateNode=s,s._reactInternals=t,a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=l),s}function pm(t,s,r,a){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,a),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,a),s.state!==t&&Gi.enqueueReplaceState(s,s.state,null)}function Pc(t,s,r,a){var n=t.stateNode;n.props=r,n.state=t.memoizedState,n.refs={},Ud(t);var l=s.contextType;typeof l=="object"&&l!==null?n.context=cs(l):(l=qt(s)?aa:_t.current,n.context=Xa(t,l)),n.state=t.memoizedState,l=s.getDerivedStateFromProps,typeof l=="function"&&(Fc(t,s,l,r),n.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(s=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),s!==n.state&&Gi.enqueueReplaceState(n,n.state,null),Ni(t,r,n,a),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function sn(t,s){try{var r="",a=s;do r+=Fg(a),a=a.return;while(a);var n=r}catch(l){n=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:s,stack:n,digest:null}}function Io(t,s,r){return{value:t,source:null,stack:r??null,digest:s??null}}function Tc(t,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var ry=typeof WeakMap=="function"?WeakMap:Map;function v0(t,s,r){r=Us(-1,r),r.tag=3,r.payload={element:null};var a=s.value;return r.callback=function(){Ei||(Ei=!0,zc=a),Tc(t,s)},r}function j0(t,s,r){r=Us(-1,r),r.tag=3;var a=t.type.getDerivedStateFromError;if(typeof a=="function"){var n=s.value;r.payload=function(){return a(n)},r.callback=function(){Tc(t,s)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){Tc(t,s),typeof a!="function"&&(kr===null?kr=new Set([this]):kr.add(this));var i=s.stack;this.componentDidCatch(s.value,{componentStack:i!==null?i:""})}),r}function gm(t,s,r){var a=t.pingCache;if(a===null){a=t.pingCache=new ry;var n=new Set;a.set(s,n)}else n=a.get(s),n===void 0&&(n=new Set,a.set(s,n));n.has(r)||(n.add(r),t=fy.bind(null,t,s,r),s.then(t,t))}function fm(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function ym(t,s,r,a,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===s?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=Us(-1,1),s.tag=2,_r(r,s,1))),r.lanes|=1),t)}var ay=Js.ReactCurrentOwner,Dt=!1;function Et(t,s,r,a){s.child=t===null?Jh(s,null,r,a):en(s,t.child,r,a)}function bm(t,s,r,a,n){r=r.render;var l=s.ref;return La(s,n),a=Hd(t,s,r,a,l,n),r=Gd(),t!==null&&!Dt?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n,Hs(t,s,n)):(Ue&&r&&Md(s),s.flags|=1,Et(t,s,a,n),s.child)}function vm(t,s,r,a,n){if(t===null){var l=r.type;return typeof l=="function"&&!nu(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=l,w0(t,s,l,a,n)):(t=si(r.type,null,a,s,s.mode,n),t.ref=s.ref,t.return=s,s.child=t)}if(l=t.child,!(t.lanes&n)){var i=l.memoizedProps;if(r=r.compare,r=r!==null?r:Gn,r(i,a)&&t.ref===s.ref)return Hs(t,s,n)}return s.flags|=1,t=Cr(l,a),t.ref=s.ref,t.return=s,s.child=t}function w0(t,s,r,a,n){if(t!==null){var l=t.memoizedProps;if(Gn(l,a)&&t.ref===s.ref)if(Dt=!1,s.pendingProps=a=l,(t.lanes&n)!==0)t.flags&131072&&(Dt=!0);else return s.lanes=t.lanes,Hs(t,s,n)}return Rc(t,s,r,a,n)}function N0(t,s,r){var a=s.pendingProps,n=a.children,l=t!==null?t.memoizedState:null;if(a.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(Fa,Kt),Kt|=r;else{if(!(r&1073741824))return t=l!==null?l.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,$e(Fa,Kt),Kt|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=l!==null?l.baseLanes:r,$e(Fa,Kt),Kt|=a}else l!==null?(a=l.baseLanes|r,s.memoizedState=null):a=r,$e(Fa,Kt),Kt|=a;return Et(t,s,n,r),s.child}function _0(t,s){var r=s.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function Rc(t,s,r,a,n){var l=qt(r)?aa:_t.current;return l=Xa(s,l),La(s,n),r=Hd(t,s,r,a,l,n),a=Gd(),t!==null&&!Dt?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n,Hs(t,s,n)):(Ue&&a&&Md(s),s.flags|=1,Et(t,s,r,n),s.child)}function jm(t,s,r,a,n){if(qt(r)){var l=!0;yi(s)}else l=!1;if(La(s,n),s.stateNode===null)Zl(t,s),b0(s,r,a),Pc(s,r,a,n),a=!0;else if(t===null){var i=s.stateNode,o=s.memoizedProps;i.props=o;var c=i.context,d=r.contextType;typeof d=="object"&&d!==null?d=cs(d):(d=qt(r)?aa:_t.current,d=Xa(s,d));var h=r.getDerivedStateFromProps,m=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function";m||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==a||c!==d)&&pm(s,i,a,d),rr=!1;var u=s.memoizedState;i.state=u,Ni(s,a,i,n),c=s.memoizedState,o!==a||u!==c||$t.current||rr?(typeof h=="function"&&(Fc(s,r,h,a),c=s.memoizedState),(o=rr||hm(s,r,o,a,u,c,d))?(m||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(s.flags|=4194308)):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=a,s.memoizedState=c),i.props=a,i.state=c,i.context=d,a=o):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),a=!1)}else{i=s.stateNode,Xh(t,s),o=s.memoizedProps,d=s.type===s.elementType?o:xs(s.type,o),i.props=d,m=s.pendingProps,u=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=cs(c):(c=qt(r)?aa:_t.current,c=Xa(s,c));var g=r.getDerivedStateFromProps;(h=typeof g=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==m||u!==c)&&pm(s,i,a,c),rr=!1,u=s.memoizedState,i.state=u,Ni(s,a,i,n);var b=s.memoizedState;o!==m||u!==b||$t.current||rr?(typeof g=="function"&&(Fc(s,r,g,a),b=s.memoizedState),(d=rr||hm(s,r,d,a,u,b,c)||!1)?(h||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(a,b,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(a,b,c)),typeof i.componentDidUpdate=="function"&&(s.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&u===t.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&u===t.memoizedState||(s.flags|=1024),s.memoizedProps=a,s.memoizedState=b),i.props=a,i.state=b,i.context=c,a=d):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&u===t.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&u===t.memoizedState||(s.flags|=1024),a=!1)}return Oc(t,s,r,a,l,n)}function Oc(t,s,r,a,n,l){_0(t,s);var i=(s.flags&128)!==0;if(!a&&!i)return n&&lm(s,r,!1),Hs(t,s,l);a=s.stateNode,ay.current=s;var o=i&&typeof r.getDerivedStateFromError!="function"?null:a.render();return s.flags|=1,t!==null&&i?(s.child=en(s,t.child,null,l),s.child=en(s,null,o,l)):Et(t,s,o,l),s.memoizedState=a.state,n&&lm(s,r,!0),s.child}function k0(t){var s=t.stateNode;s.pendingContext?nm(t,s.pendingContext,s.pendingContext!==s.context):s.context&&nm(t,s.context,!1),Qd(t,s.containerInfo)}function wm(t,s,r,a,n){return Za(),$d(n),s.flags|=256,Et(t,s,r,a),s.child}var Ac={dehydrated:null,treeContext:null,retryLane:0};function Lc(t){return{baseLanes:t,cachePool:null,transitions:null}}function S0(t,s,r){var a=s.pendingProps,n=Qe.current,l=!1,i=(s.flags&128)!==0,o;if((o=i)||(o=t!==null&&t.memoizedState===null?!1:(n&2)!==0),o?(l=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),$e(Qe,n&1),t===null)return Cc(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(i=a.children,t=a.fallback,l?(a=s.mode,l=s.child,i={mode:"hidden",children:i},!(a&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=Xi(i,a,0,null),t=ea(t,a,r,null),l.return=s,t.return=s,l.sibling=t,s.child=l,s.child.memoizedState=Lc(r),s.memoizedState=Ac,t):Xd(s,i));if(n=t.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return ny(t,s,i,a,o,n,r);if(l){l=a.fallback,i=s.mode,n=t.child,o=n.sibling;var c={mode:"hidden",children:a.children};return!(i&1)&&s.child!==n?(a=s.child,a.childLanes=0,a.pendingProps=c,s.deletions=null):(a=Cr(n,c),a.subtreeFlags=n.subtreeFlags&14680064),o!==null?l=Cr(o,l):(l=ea(l,i,r,null),l.flags|=2),l.return=s,a.return=s,a.sibling=l,s.child=a,a=l,l=s.child,i=t.child.memoizedState,i=i===null?Lc(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=t.childLanes&~r,s.memoizedState=Ac,a}return l=t.child,t=l.sibling,a=Cr(l,{mode:"visible",children:a.children}),!(s.mode&1)&&(a.lanes=r),a.return=s,a.sibling=null,t!==null&&(r=s.deletions,r===null?(s.deletions=[t],s.flags|=16):r.push(t)),s.child=a,s.memoizedState=null,a}function Xd(t,s){return s=Xi({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function $l(t,s,r,a){return a!==null&&$d(a),en(s,t.child,null,r),t=Xd(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function ny(t,s,r,a,n,l,i){if(r)return s.flags&256?(s.flags&=-257,a=Io(Error(oe(422))),$l(t,s,i,a)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(l=a.fallback,n=s.mode,a=Xi({mode:"visible",children:a.children},n,0,null),l=ea(l,n,i,null),l.flags|=2,a.return=s,l.return=s,a.sibling=l,s.child=a,s.mode&1&&en(s,t.child,null,i),s.child.memoizedState=Lc(i),s.memoizedState=Ac,l);if(!(s.mode&1))return $l(t,s,i,null);if(n.data==="$!"){if(a=n.nextSibling&&n.nextSibling.dataset,a)var o=a.dgst;return a=o,l=Error(oe(419)),a=Io(l,a,void 0),$l(t,s,i,a)}if(o=(i&t.childLanes)!==0,Dt||o){if(a=ct,a!==null){switch(i&-i){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(a.suspendedLanes|i)?0:n,n!==0&&n!==l.retryLane&&(l.retryLane=n,Ws(t,n),bs(a,t,n,-1))}return au(),a=Io(Error(oe(421))),$l(t,s,i,a)}return n.data==="$?"?(s.flags|=128,s.child=t.child,s=yy.bind(null,t),n._reactRetry=s,null):(t=l.treeContext,Ht=Nr(n.nextSibling),Jt=s,Ue=!0,fs=null,t!==null&&(as[ns++]=zs,as[ns++]=Bs,as[ns++]=na,zs=t.id,Bs=t.overflow,na=s),s=Xd(s,a.children),s.flags|=4096,s)}function Nm(t,s,r){t.lanes|=s;var a=t.alternate;a!==null&&(a.lanes|=s),Ec(t.return,s,r)}function zo(t,s,r,a,n){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:n}:(l.isBackwards=s,l.rendering=null,l.renderingStartTime=0,l.last=a,l.tail=r,l.tailMode=n)}function C0(t,s,r){var a=s.pendingProps,n=a.revealOrder,l=a.tail;if(Et(t,s,a.children,r),a=Qe.current,a&2)a=a&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Nm(t,r,s);else if(t.tag===19)Nm(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}a&=1}if($e(Qe,a),!(s.mode&1))s.memoizedState=null;else switch(n){case"forwards":for(r=s.child,n=null;r!==null;)t=r.alternate,t!==null&&_i(t)===null&&(n=r),r=r.sibling;r=n,r===null?(n=s.child,s.child=null):(n=r.sibling,r.sibling=null),zo(s,!1,n,r,l);break;case"backwards":for(r=null,n=s.child,s.child=null;n!==null;){if(t=n.alternate,t!==null&&_i(t)===null){s.child=n;break}t=n.sibling,n.sibling=r,r=n,n=t}zo(s,!0,r,null,l);break;case"together":zo(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Zl(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function Hs(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),ia|=s.lanes,!(r&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(oe(153));if(s.child!==null){for(t=s.child,r=Cr(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=Cr(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function ly(t,s,r){switch(s.tag){case 3:k0(s),Za();break;case 5:Zh(s);break;case 1:qt(s.type)&&yi(s);break;case 4:Qd(s,s.stateNode.containerInfo);break;case 10:var a=s.type._context,n=s.memoizedProps.value;$e(ji,a._currentValue),a._currentValue=n;break;case 13:if(a=s.memoizedState,a!==null)return a.dehydrated!==null?($e(Qe,Qe.current&1),s.flags|=128,null):r&s.child.childLanes?S0(t,s,r):($e(Qe,Qe.current&1),t=Hs(t,s,r),t!==null?t.sibling:null);$e(Qe,Qe.current&1);break;case 19:if(a=(r&s.childLanes)!==0,t.flags&128){if(a)return C0(t,s,r);s.flags|=128}if(n=s.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),$e(Qe,Qe.current),a)break;return null;case 22:case 23:return s.lanes=0,N0(t,s,r)}return Hs(t,s,r)}var E0,Mc,F0,P0;E0=function(t,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Mc=function(){};F0=function(t,s,r,a){var n=t.memoizedProps;if(n!==a){t=s.stateNode,Br(Rs.current);var l=null;switch(r){case"input":n=ac(t,n),a=ac(t,a),l=[];break;case"select":n=Ke({},n,{value:void 0}),a=Ke({},a,{value:void 0}),l=[];break;case"textarea":n=ic(t,n),a=ic(t,a),l=[];break;default:typeof n.onClick!="function"&&typeof a.onClick=="function"&&(t.onclick=gi)}cc(r,a);var i;r=null;for(d in n)if(!a.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var o=n[d];for(i in o)o.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Bn.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in a){var c=a[d];if(o=n!=null?n[d]:void 0,a.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(i in o)!o.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&o[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(l||(l=[]),l.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(l=l||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Bn.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ze("scroll",t),l||o===c||(l=[])):(l=l||[]).push(d,c))}r&&(l=l||[]).push("style",r);var d=l;(s.updateQueue=d)&&(s.flags|=4)}};P0=function(t,s,r,a){r!==a&&(s.flags|=4)};function wn(t,s){if(!Ue)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function bt(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,a=0;if(s)for(var n=t.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags&14680064,a|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=a,t.childLanes=r,s}function iy(t,s,r){var a=s.pendingProps;switch(Dd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(s),null;case 1:return qt(s.type)&&fi(),bt(s),null;case 3:return a=s.stateNode,tn(),Be($t),Be(_t),Kd(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ml(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,fs!==null&&(Qc(fs),fs=null))),Mc(t,s),bt(s),null;case 5:Vd(s);var n=Br(el.current);if(r=s.type,t!==null&&s.stateNode!=null)F0(t,s,r,a,n),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!a){if(s.stateNode===null)throw Error(oe(166));return bt(s),null}if(t=Br(Rs.current),Ml(s)){a=s.stateNode,r=s.type;var l=s.memoizedProps;switch(a[Fs]=s,a[Xn]=l,t=(s.mode&1)!==0,r){case"dialog":ze("cancel",a),ze("close",a);break;case"iframe":case"object":case"embed":ze("load",a);break;case"video":case"audio":for(n=0;n<Fn.length;n++)ze(Fn[n],a);break;case"source":ze("error",a);break;case"img":case"image":case"link":ze("error",a),ze("load",a);break;case"details":ze("toggle",a);break;case"input":Ru(a,l),ze("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!l.multiple},ze("invalid",a);break;case"textarea":Au(a,l),ze("invalid",a)}cc(r,l),n=null;for(var i in l)if(l.hasOwnProperty(i)){var o=l[i];i==="children"?typeof o=="string"?a.textContent!==o&&(l.suppressHydrationWarning!==!0&&Ll(a.textContent,o,t),n=["children",o]):typeof o=="number"&&a.textContent!==""+o&&(l.suppressHydrationWarning!==!0&&Ll(a.textContent,o,t),n=["children",""+o]):Bn.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&ze("scroll",a)}switch(r){case"input":Cl(a),Ou(a,l,!0);break;case"textarea":Cl(a),Lu(a);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(a.onclick=gi)}a=n,s.updateQueue=a,a!==null&&(s.flags|=4)}else{i=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ah(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof a.is=="string"?t=i.createElement(r,{is:a.is}):(t=i.createElement(r),r==="select"&&(i=t,a.multiple?i.multiple=!0:a.size&&(i.size=a.size))):t=i.createElementNS(t,r),t[Fs]=s,t[Xn]=a,E0(t,s,!1,!1),s.stateNode=t;e:{switch(i=dc(r,a),r){case"dialog":ze("cancel",t),ze("close",t),n=a;break;case"iframe":case"object":case"embed":ze("load",t),n=a;break;case"video":case"audio":for(n=0;n<Fn.length;n++)ze(Fn[n],t);n=a;break;case"source":ze("error",t),n=a;break;case"img":case"image":case"link":ze("error",t),ze("load",t),n=a;break;case"details":ze("toggle",t),n=a;break;case"input":Ru(t,a),n=ac(t,a),ze("invalid",t);break;case"option":n=a;break;case"select":t._wrapperState={wasMultiple:!!a.multiple},n=Ke({},a,{value:void 0}),ze("invalid",t);break;case"textarea":Au(t,a),n=ic(t,a),ze("invalid",t);break;default:n=a}cc(r,n),o=n;for(l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="style"?ih(t,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&nh(t,c)):l==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Un(t,c):typeof c=="number"&&Un(t,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Bn.hasOwnProperty(l)?c!=null&&l==="onScroll"&&ze("scroll",t):c!=null&&wd(t,l,c,i))}switch(r){case"input":Cl(t),Ou(t,a,!1);break;case"textarea":Cl(t),Lu(t);break;case"option":a.value!=null&&t.setAttribute("value",""+Tr(a.value));break;case"select":t.multiple=!!a.multiple,l=a.value,l!=null?Ta(t,!!a.multiple,l,!1):a.defaultValue!=null&&Ta(t,!!a.multiple,a.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=gi)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return bt(s),null;case 6:if(t&&s.stateNode!=null)P0(t,s,t.memoizedProps,a);else{if(typeof a!="string"&&s.stateNode===null)throw Error(oe(166));if(r=Br(el.current),Br(Rs.current),Ml(s)){if(a=s.stateNode,r=s.memoizedProps,a[Fs]=s,(l=a.nodeValue!==r)&&(t=Jt,t!==null))switch(t.tag){case 3:Ll(a.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ll(a.nodeValue,r,(t.mode&1)!==0)}l&&(s.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[Fs]=s,s.stateNode=a}return bt(s),null;case 13:if(Be(Qe),a=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ue&&Ht!==null&&s.mode&1&&!(s.flags&128))Hh(),Za(),s.flags|=98560,l=!1;else if(l=Ml(s),a!==null&&a.dehydrated!==null){if(t===null){if(!l)throw Error(oe(318));if(l=s.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(oe(317));l[Fs]=s}else Za(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;bt(s),l=!1}else fs!==null&&(Qc(fs),fs=null),l=!0;if(!l)return s.flags&65536?s:null}return s.flags&128?(s.lanes=r,s):(a=a!==null,a!==(t!==null&&t.memoizedState!==null)&&a&&(s.child.flags|=8192,s.mode&1&&(t===null||Qe.current&1?lt===0&&(lt=3):au())),s.updateQueue!==null&&(s.flags|=4),bt(s),null);case 4:return tn(),Mc(t,s),t===null&&Jn(s.stateNode.containerInfo),bt(s),null;case 10:return zd(s.type._context),bt(s),null;case 17:return qt(s.type)&&fi(),bt(s),null;case 19:if(Be(Qe),l=s.memoizedState,l===null)return bt(s),null;if(a=(s.flags&128)!==0,i=l.rendering,i===null)if(a)wn(l,!1);else{if(lt!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(i=_i(t),i!==null){for(s.flags|=128,wn(l,!1),a=i.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),s.subtreeFlags=0,a=r,r=s.child;r!==null;)l=r,t=a,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,t=i.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return $e(Qe,Qe.current&1|2),s.child}t=t.sibling}l.tail!==null&&Xe()>rn&&(s.flags|=128,a=!0,wn(l,!1),s.lanes=4194304)}else{if(!a)if(t=_i(i),t!==null){if(s.flags|=128,a=!0,r=t.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),wn(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!Ue)return bt(s),null}else 2*Xe()-l.renderingStartTime>rn&&r!==1073741824&&(s.flags|=128,a=!0,wn(l,!1),s.lanes=4194304);l.isBackwards?(i.sibling=s.child,s.child=i):(r=l.last,r!==null?r.sibling=i:s.child=i,l.last=i)}return l.tail!==null?(s=l.tail,l.rendering=s,l.tail=s.sibling,l.renderingStartTime=Xe(),s.sibling=null,r=Qe.current,$e(Qe,a?r&1|2:r&1),s):(bt(s),null);case 22:case 23:return ru(),a=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==a&&(s.flags|=8192),a&&s.mode&1?Kt&1073741824&&(bt(s),s.subtreeFlags&6&&(s.flags|=8192)):bt(s),null;case 24:return null;case 25:return null}throw Error(oe(156,s.tag))}function oy(t,s){switch(Dd(s),s.tag){case 1:return qt(s.type)&&fi(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return tn(),Be($t),Be(_t),Kd(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return Vd(s),null;case 13:if(Be(Qe),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(oe(340));Za()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Be(Qe),null;case 4:return tn(),null;case 10:return zd(s.type._context),null;case 22:case 23:return ru(),null;case 24:return null;default:return null}}var ql=!1,jt=!1,cy=typeof WeakSet=="function"?WeakSet:Set,he=null;function Ea(t,s){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){Ge(t,s,a)}else r.current=null}function Dc(t,s,r){try{r()}catch(a){Ge(t,s,a)}}var _m=!1;function dy(t,s){if(vc=xi,t=Lh(),Ld(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var n=a.anchorOffset,l=a.focusNode;a=a.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var i=0,o=-1,c=-1,d=0,h=0,m=t,u=null;t:for(;;){for(var g;m!==r||n!==0&&m.nodeType!==3||(o=i+n),m!==l||a!==0&&m.nodeType!==3||(c=i+a),m.nodeType===3&&(i+=m.nodeValue.length),(g=m.firstChild)!==null;)u=m,m=g;for(;;){if(m===t)break t;if(u===r&&++d===n&&(o=i),u===l&&++h===a&&(c=i),(g=m.nextSibling)!==null)break;m=u,u=m.parentNode}m=g}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(jc={focusedElem:t,selectionRange:r},xi=!1,he=s;he!==null;)if(s=he,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,he=t;else for(;he!==null;){s=he;try{var b=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var f=b.memoizedProps,v=b.memoizedState,y=s.stateNode,p=y.getSnapshotBeforeUpdate(s.elementType===s.type?f:xs(s.type,f),v);y.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var x=s.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(w){Ge(s,s.return,w)}if(t=s.sibling,t!==null){t.return=s.return,he=t;break}he=s.return}return b=_m,_m=!1,b}function Dn(t,s,r){var a=s.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var n=a=a.next;do{if((n.tag&t)===t){var l=n.destroy;n.destroy=void 0,l!==void 0&&Dc(s,r,l)}n=n.next}while(n!==a)}}function Ji(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var a=r.create;r.destroy=a()}r=r.next}while(r!==s)}}function $c(t){var s=t.ref;if(s!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof s=="function"?s(t):s.current=t}}function T0(t){var s=t.alternate;s!==null&&(t.alternate=null,T0(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[Fs],delete s[Xn],delete s[_c],delete s[Kf],delete s[Wf])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function R0(t){return t.tag===5||t.tag===3||t.tag===4}function km(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||R0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qc(t,s,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(t,s):r.insertBefore(t,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(t,r)):(s=r,s.appendChild(t)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=gi));else if(a!==4&&(t=t.child,t!==null))for(qc(t,s,r),t=t.sibling;t!==null;)qc(t,s,r),t=t.sibling}function Ic(t,s,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(a!==4&&(t=t.child,t!==null))for(Ic(t,s,r),t=t.sibling;t!==null;)Ic(t,s,r),t=t.sibling}var mt=null,gs=!1;function Zs(t,s,r){for(r=r.child;r!==null;)O0(t,s,r),r=r.sibling}function O0(t,s,r){if(Ts&&typeof Ts.onCommitFiberUnmount=="function")try{Ts.onCommitFiberUnmount(Bi,r)}catch{}switch(r.tag){case 5:jt||Ea(r,s);case 6:var a=mt,n=gs;mt=null,Zs(t,s,r),mt=a,gs=n,mt!==null&&(gs?(t=mt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):mt.removeChild(r.stateNode));break;case 18:mt!==null&&(gs?(t=mt,r=r.stateNode,t.nodeType===8?Ao(t.parentNode,r):t.nodeType===1&&Ao(t,r),Wn(t)):Ao(mt,r.stateNode));break;case 4:a=mt,n=gs,mt=r.stateNode.containerInfo,gs=!0,Zs(t,s,r),mt=a,gs=n;break;case 0:case 11:case 14:case 15:if(!jt&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){n=a=a.next;do{var l=n,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&Dc(r,s,i),n=n.next}while(n!==a)}Zs(t,s,r);break;case 1:if(!jt&&(Ea(r,s),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(o){Ge(r,s,o)}Zs(t,s,r);break;case 21:Zs(t,s,r);break;case 22:r.mode&1?(jt=(a=jt)||r.memoizedState!==null,Zs(t,s,r),jt=a):Zs(t,s,r);break;default:Zs(t,s,r)}}function Sm(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new cy),s.forEach(function(a){var n=by.bind(null,t,a);r.has(a)||(r.add(a),a.then(n,n))})}}function ms(t,s){var r=s.deletions;if(r!==null)for(var a=0;a<r.length;a++){var n=r[a];try{var l=t,i=s,o=i;e:for(;o!==null;){switch(o.tag){case 5:mt=o.stateNode,gs=!1;break e;case 3:mt=o.stateNode.containerInfo,gs=!0;break e;case 4:mt=o.stateNode.containerInfo,gs=!0;break e}o=o.return}if(mt===null)throw Error(oe(160));O0(l,i,n),mt=null,gs=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(d){Ge(n,s,d)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)A0(s,t),s=s.sibling}function A0(t,s){var r=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ms(s,t),Ns(t),a&4){try{Dn(3,t,t.return),Ji(3,t)}catch(f){Ge(t,t.return,f)}try{Dn(5,t,t.return)}catch(f){Ge(t,t.return,f)}}break;case 1:ms(s,t),Ns(t),a&512&&r!==null&&Ea(r,r.return);break;case 5:if(ms(s,t),Ns(t),a&512&&r!==null&&Ea(r,r.return),t.flags&32){var n=t.stateNode;try{Un(n,"")}catch(f){Ge(t,t.return,f)}}if(a&4&&(n=t.stateNode,n!=null)){var l=t.memoizedProps,i=r!==null?r.memoizedProps:l,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&l.type==="radio"&&l.name!=null&&sh(n,l),dc(o,i);var d=dc(o,l);for(i=0;i<c.length;i+=2){var h=c[i],m=c[i+1];h==="style"?ih(n,m):h==="dangerouslySetInnerHTML"?nh(n,m):h==="children"?Un(n,m):wd(n,h,m,d)}switch(o){case"input":nc(n,l);break;case"textarea":rh(n,l);break;case"select":var u=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!l.multiple;var g=l.value;g!=null?Ta(n,!!l.multiple,g,!1):u!==!!l.multiple&&(l.defaultValue!=null?Ta(n,!!l.multiple,l.defaultValue,!0):Ta(n,!!l.multiple,l.multiple?[]:"",!1))}n[Xn]=l}catch(f){Ge(t,t.return,f)}}break;case 6:if(ms(s,t),Ns(t),a&4){if(t.stateNode===null)throw Error(oe(162));n=t.stateNode,l=t.memoizedProps;try{n.nodeValue=l}catch(f){Ge(t,t.return,f)}}break;case 3:if(ms(s,t),Ns(t),a&4&&r!==null&&r.memoizedState.isDehydrated)try{Wn(s.containerInfo)}catch(f){Ge(t,t.return,f)}break;case 4:ms(s,t),Ns(t);break;case 13:ms(s,t),Ns(t),n=t.child,n.flags&8192&&(l=n.memoizedState!==null,n.stateNode.isHidden=l,!l||n.alternate!==null&&n.alternate.memoizedState!==null||(tu=Xe())),a&4&&Sm(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(jt=(d=jt)||h,ms(s,t),jt=d):ms(s,t),Ns(t),a&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(he=t,h=t.child;h!==null;){for(m=he=h;he!==null;){switch(u=he,g=u.child,u.tag){case 0:case 11:case 14:case 15:Dn(4,u,u.return);break;case 1:Ea(u,u.return);var b=u.stateNode;if(typeof b.componentWillUnmount=="function"){a=u,r=u.return;try{s=a,b.props=s.memoizedProps,b.state=s.memoizedState,b.componentWillUnmount()}catch(f){Ge(a,r,f)}}break;case 5:Ea(u,u.return);break;case 22:if(u.memoizedState!==null){Em(m);continue}}g!==null?(g.return=u,he=g):Em(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{n=m.stateNode,d?(l=n.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(o=m.stateNode,c=m.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=lh("display",i))}catch(f){Ge(t,t.return,f)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(f){Ge(t,t.return,f)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:ms(s,t),Ns(t),a&4&&Sm(t);break;case 21:break;default:ms(s,t),Ns(t)}}function Ns(t){var s=t.flags;if(s&2){try{e:{for(var r=t.return;r!==null;){if(R0(r)){var a=r;break e}r=r.return}throw Error(oe(160))}switch(a.tag){case 5:var n=a.stateNode;a.flags&32&&(Un(n,""),a.flags&=-33);var l=km(t);Ic(t,l,n);break;case 3:case 4:var i=a.stateNode.containerInfo,o=km(t);qc(t,o,i);break;default:throw Error(oe(161))}}catch(c){Ge(t,t.return,c)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function uy(t,s,r){he=t,L0(t)}function L0(t,s,r){for(var a=(t.mode&1)!==0;he!==null;){var n=he,l=n.child;if(n.tag===22&&a){var i=n.memoizedState!==null||ql;if(!i){var o=n.alternate,c=o!==null&&o.memoizedState!==null||jt;o=ql;var d=jt;if(ql=i,(jt=c)&&!d)for(he=n;he!==null;)i=he,c=i.child,i.tag===22&&i.memoizedState!==null?Fm(n):c!==null?(c.return=i,he=c):Fm(n);for(;l!==null;)he=l,L0(l),l=l.sibling;he=n,ql=o,jt=d}Cm(t)}else n.subtreeFlags&8772&&l!==null?(l.return=n,he=l):Cm(t)}}function Cm(t){for(;he!==null;){var s=he;if(s.flags&8772){var r=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:jt||Ji(5,s);break;case 1:var a=s.stateNode;if(s.flags&4&&!jt)if(r===null)a.componentDidMount();else{var n=s.elementType===s.type?r.memoizedProps:xs(s.type,r.memoizedProps);a.componentDidUpdate(n,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var l=s.updateQueue;l!==null&&um(s,l,a);break;case 3:var i=s.updateQueue;if(i!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}um(s,i,r)}break;case 5:var o=s.stateNode;if(r===null&&s.flags&4){r=o;var c=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var d=s.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&Wn(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}jt||s.flags&512&&$c(s)}catch(u){Ge(s,s.return,u)}}if(s===t){he=null;break}if(r=s.sibling,r!==null){r.return=s.return,he=r;break}he=s.return}}function Em(t){for(;he!==null;){var s=he;if(s===t){he=null;break}var r=s.sibling;if(r!==null){r.return=s.return,he=r;break}he=s.return}}function Fm(t){for(;he!==null;){var s=he;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{Ji(4,s)}catch(c){Ge(s,r,c)}break;case 1:var a=s.stateNode;if(typeof a.componentDidMount=="function"){var n=s.return;try{a.componentDidMount()}catch(c){Ge(s,n,c)}}var l=s.return;try{$c(s)}catch(c){Ge(s,l,c)}break;case 5:var i=s.return;try{$c(s)}catch(c){Ge(s,i,c)}}}catch(c){Ge(s,s.return,c)}if(s===t){he=null;break}var o=s.sibling;if(o!==null){o.return=s.return,he=o;break}he=s.return}}var my=Math.ceil,Ci=Js.ReactCurrentDispatcher,Zd=Js.ReactCurrentOwner,is=Js.ReactCurrentBatchConfig,Pe=0,ct=null,st=null,pt=0,Kt=0,Fa=Lr(0),lt=0,al=null,ia=0,Yi=0,eu=0,$n=null,Mt=null,tu=0,rn=1/0,Ms=null,Ei=!1,zc=null,kr=null,Il=!1,yr=null,Fi=0,qn=0,Bc=null,ei=-1,ti=0;function Pt(){return Pe&6?Xe():ei!==-1?ei:ei=Xe()}function Sr(t){return t.mode&1?Pe&2&&pt!==0?pt&-pt:Gf.transition!==null?(ti===0&&(ti=bh()),ti):(t=Oe,t!==0||(t=window.event,t=t===void 0?16:Sh(t.type)),t):1}function bs(t,s,r,a){if(50<qn)throw qn=0,Bc=null,Error(oe(185));pl(t,r,a),(!(Pe&2)||t!==ct)&&(t===ct&&(!(Pe&2)&&(Yi|=r),lt===4&&nr(t,pt)),It(t,a),r===1&&Pe===0&&!(s.mode&1)&&(rn=Xe()+500,Wi&&Mr()))}function It(t,s){var r=t.callbackNode;Hg(t,s);var a=mi(t,t===ct?pt:0);if(a===0)r!==null&&$u(r),t.callbackNode=null,t.callbackPriority=0;else if(s=a&-a,t.callbackPriority!==s){if(r!=null&&$u(r),s===1)t.tag===0?Hf(Pm.bind(null,t)):Vh(Pm.bind(null,t)),Qf(function(){!(Pe&6)&&Mr()}),r=null;else{switch(vh(a)){case 1:r=Cd;break;case 4:r=fh;break;case 16:r=ui;break;case 536870912:r=yh;break;default:r=ui}r=U0(r,M0.bind(null,t))}t.callbackPriority=s,t.callbackNode=r}}function M0(t,s){if(ei=-1,ti=0,Pe&6)throw Error(oe(327));var r=t.callbackNode;if(Ma()&&t.callbackNode!==r)return null;var a=mi(t,t===ct?pt:0);if(a===0)return null;if(a&30||a&t.expiredLanes||s)s=Pi(t,a);else{s=a;var n=Pe;Pe|=2;var l=$0();(ct!==t||pt!==s)&&(Ms=null,rn=Xe()+500,Zr(t,s));do try{py();break}catch(o){D0(t,o)}while(!0);Id(),Ci.current=l,Pe=n,st!==null?s=0:(ct=null,pt=0,s=lt)}if(s!==0){if(s===2&&(n=pc(t),n!==0&&(a=n,s=Uc(t,n))),s===1)throw r=al,Zr(t,0),nr(t,a),It(t,Xe()),r;if(s===6)nr(t,a);else{if(n=t.current.alternate,!(a&30)&&!xy(n)&&(s=Pi(t,a),s===2&&(l=pc(t),l!==0&&(a=l,s=Uc(t,l))),s===1))throw r=al,Zr(t,0),nr(t,a),It(t,Xe()),r;switch(t.finishedWork=n,t.finishedLanes=a,s){case 0:case 1:throw Error(oe(345));case 2:qr(t,Mt,Ms);break;case 3:if(nr(t,a),(a&130023424)===a&&(s=tu+500-Xe(),10<s)){if(mi(t,0)!==0)break;if(n=t.suspendedLanes,(n&a)!==a){Pt(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=Nc(qr.bind(null,t,Mt,Ms),s);break}qr(t,Mt,Ms);break;case 4:if(nr(t,a),(a&4194240)===a)break;for(s=t.eventTimes,n=-1;0<a;){var i=31-ys(a);l=1<<i,i=s[i],i>n&&(n=i),a&=~l}if(a=n,a=Xe()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*my(a/1960))-a,10<a){t.timeoutHandle=Nc(qr.bind(null,t,Mt,Ms),a);break}qr(t,Mt,Ms);break;case 5:qr(t,Mt,Ms);break;default:throw Error(oe(329))}}}return It(t,Xe()),t.callbackNode===r?M0.bind(null,t):null}function Uc(t,s){var r=$n;return t.current.memoizedState.isDehydrated&&(Zr(t,s).flags|=256),t=Pi(t,s),t!==2&&(s=Mt,Mt=r,s!==null&&Qc(s)),t}function Qc(t){Mt===null?Mt=t:Mt.push.apply(Mt,t)}function xy(t){for(var s=t;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var n=r[a],l=n.getSnapshot;n=n.value;try{if(!vs(l(),n))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function nr(t,s){for(s&=~eu,s&=~Yi,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var r=31-ys(s),a=1<<r;t[r]=-1,s&=~a}}function Pm(t){if(Pe&6)throw Error(oe(327));Ma();var s=mi(t,0);if(!(s&1))return It(t,Xe()),null;var r=Pi(t,s);if(t.tag!==0&&r===2){var a=pc(t);a!==0&&(s=a,r=Uc(t,a))}if(r===1)throw r=al,Zr(t,0),nr(t,s),It(t,Xe()),r;if(r===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,qr(t,Mt,Ms),It(t,Xe()),null}function su(t,s){var r=Pe;Pe|=1;try{return t(s)}finally{Pe=r,Pe===0&&(rn=Xe()+500,Wi&&Mr())}}function oa(t){yr!==null&&yr.tag===0&&!(Pe&6)&&Ma();var s=Pe;Pe|=1;var r=is.transition,a=Oe;try{if(is.transition=null,Oe=1,t)return t()}finally{Oe=a,is.transition=r,Pe=s,!(Pe&6)&&Mr()}}function ru(){Kt=Fa.current,Be(Fa)}function Zr(t,s){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Uf(r)),st!==null)for(r=st.return;r!==null;){var a=r;switch(Dd(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&fi();break;case 3:tn(),Be($t),Be(_t),Kd();break;case 5:Vd(a);break;case 4:tn();break;case 13:Be(Qe);break;case 19:Be(Qe);break;case 10:zd(a.type._context);break;case 22:case 23:ru()}r=r.return}if(ct=t,st=t=Cr(t.current,null),pt=Kt=s,lt=0,al=null,eu=Yi=ia=0,Mt=$n=null,zr!==null){for(s=0;s<zr.length;s++)if(r=zr[s],a=r.interleaved,a!==null){r.interleaved=null;var n=a.next,l=r.pending;if(l!==null){var i=l.next;l.next=n,a.next=i}r.pending=a}zr=null}return t}function D0(t,s){do{var r=st;try{if(Id(),Yl.current=Si,ki){for(var a=Ve.memoizedState;a!==null;){var n=a.queue;n!==null&&(n.pending=null),a=a.next}ki=!1}if(la=0,ot=at=Ve=null,Mn=!1,tl=0,Zd.current=null,r===null||r.return===null){lt=1,al=s,st=null;break}e:{var l=t,i=r.return,o=r,c=s;if(s=pt,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=o,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var u=h.alternate;u?(h.updateQueue=u.updateQueue,h.memoizedState=u.memoizedState,h.lanes=u.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=fm(i);if(g!==null){g.flags&=-257,ym(g,i,o,l,s),g.mode&1&&gm(l,d,s),s=g,c=d;var b=s.updateQueue;if(b===null){var f=new Set;f.add(c),s.updateQueue=f}else b.add(c);break e}else{if(!(s&1)){gm(l,d,s),au();break e}c=Error(oe(426))}}else if(Ue&&o.mode&1){var v=fm(i);if(v!==null){!(v.flags&65536)&&(v.flags|=256),ym(v,i,o,l,s),$d(sn(c,o));break e}}l=c=sn(c,o),lt!==4&&(lt=2),$n===null?$n=[l]:$n.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,s&=-s,l.lanes|=s;var y=v0(l,c,s);dm(l,y);break e;case 1:o=c;var p=l.type,x=l.stateNode;if(!(l.flags&128)&&(typeof p.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(kr===null||!kr.has(x)))){l.flags|=65536,s&=-s,l.lanes|=s;var w=j0(l,o,s);dm(l,w);break e}}l=l.return}while(l!==null)}I0(r)}catch(R){s=R,st===r&&r!==null&&(st=r=r.return);continue}break}while(!0)}function $0(){var t=Ci.current;return Ci.current=Si,t===null?Si:t}function au(){(lt===0||lt===3||lt===2)&&(lt=4),ct===null||!(ia&268435455)&&!(Yi&268435455)||nr(ct,pt)}function Pi(t,s){var r=Pe;Pe|=2;var a=$0();(ct!==t||pt!==s)&&(Ms=null,Zr(t,s));do try{hy();break}catch(n){D0(t,n)}while(!0);if(Id(),Pe=r,Ci.current=a,st!==null)throw Error(oe(261));return ct=null,pt=0,lt}function hy(){for(;st!==null;)q0(st)}function py(){for(;st!==null&&!qg();)q0(st)}function q0(t){var s=B0(t.alternate,t,Kt);t.memoizedProps=t.pendingProps,s===null?I0(t):st=s,Zd.current=null}function I0(t){var s=t;do{var r=s.alternate;if(t=s.return,s.flags&32768){if(r=oy(r,s),r!==null){r.flags&=32767,st=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{lt=6,st=null;return}}else if(r=iy(r,s,Kt),r!==null){st=r;return}if(s=s.sibling,s!==null){st=s;return}st=s=t}while(s!==null);lt===0&&(lt=5)}function qr(t,s,r){var a=Oe,n=is.transition;try{is.transition=null,Oe=1,gy(t,s,r,a)}finally{is.transition=n,Oe=a}return null}function gy(t,s,r,a){do Ma();while(yr!==null);if(Pe&6)throw Error(oe(327));r=t.finishedWork;var n=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var l=r.lanes|r.childLanes;if(Gg(t,l),t===ct&&(st=ct=null,pt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Il||(Il=!0,U0(ui,function(){return Ma(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=is.transition,is.transition=null;var i=Oe;Oe=1;var o=Pe;Pe|=4,Zd.current=null,dy(t,r),A0(r,t),Mf(jc),xi=!!vc,jc=vc=null,t.current=r,uy(r),Ig(),Pe=o,Oe=i,is.transition=l}else t.current=r;if(Il&&(Il=!1,yr=t,Fi=n),l=t.pendingLanes,l===0&&(kr=null),Ug(r.stateNode),It(t,Xe()),s!==null)for(a=t.onRecoverableError,r=0;r<s.length;r++)n=s[r],a(n.value,{componentStack:n.stack,digest:n.digest});if(Ei)throw Ei=!1,t=zc,zc=null,t;return Fi&1&&t.tag!==0&&Ma(),l=t.pendingLanes,l&1?t===Bc?qn++:(qn=0,Bc=t):qn=0,Mr(),null}function Ma(){if(yr!==null){var t=vh(Fi),s=is.transition,r=Oe;try{if(is.transition=null,Oe=16>t?16:t,yr===null)var a=!1;else{if(t=yr,yr=null,Fi=0,Pe&6)throw Error(oe(331));var n=Pe;for(Pe|=4,he=t.current;he!==null;){var l=he,i=l.child;if(he.flags&16){var o=l.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(he=d;he!==null;){var h=he;switch(h.tag){case 0:case 11:case 15:Dn(8,h,l)}var m=h.child;if(m!==null)m.return=h,he=m;else for(;he!==null;){h=he;var u=h.sibling,g=h.return;if(T0(h),h===d){he=null;break}if(u!==null){u.return=g,he=u;break}he=g}}}var b=l.alternate;if(b!==null){var f=b.child;if(f!==null){b.child=null;do{var v=f.sibling;f.sibling=null,f=v}while(f!==null)}}he=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,he=i;else e:for(;he!==null;){if(l=he,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Dn(9,l,l.return)}var y=l.sibling;if(y!==null){y.return=l.return,he=y;break e}he=l.return}}var p=t.current;for(he=p;he!==null;){i=he;var x=i.child;if(i.subtreeFlags&2064&&x!==null)x.return=i,he=x;else e:for(i=p;he!==null;){if(o=he,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Ji(9,o)}}catch(R){Ge(o,o.return,R)}if(o===i){he=null;break e}var w=o.sibling;if(w!==null){w.return=o.return,he=w;break e}he=o.return}}if(Pe=n,Mr(),Ts&&typeof Ts.onPostCommitFiberRoot=="function")try{Ts.onPostCommitFiberRoot(Bi,t)}catch{}a=!0}return a}finally{Oe=r,is.transition=s}}return!1}function Tm(t,s,r){s=sn(r,s),s=v0(t,s,1),t=_r(t,s,1),s=Pt(),t!==null&&(pl(t,1,s),It(t,s))}function Ge(t,s,r){if(t.tag===3)Tm(t,t,r);else for(;s!==null;){if(s.tag===3){Tm(s,t,r);break}else if(s.tag===1){var a=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(kr===null||!kr.has(a))){t=sn(r,t),t=j0(s,t,1),s=_r(s,t,1),t=Pt(),s!==null&&(pl(s,1,t),It(s,t));break}}s=s.return}}function fy(t,s,r){var a=t.pingCache;a!==null&&a.delete(s),s=Pt(),t.pingedLanes|=t.suspendedLanes&r,ct===t&&(pt&r)===r&&(lt===4||lt===3&&(pt&130023424)===pt&&500>Xe()-tu?Zr(t,0):eu|=r),It(t,s)}function z0(t,s){s===0&&(t.mode&1?(s=Pl,Pl<<=1,!(Pl&130023424)&&(Pl=4194304)):s=1);var r=Pt();t=Ws(t,s),t!==null&&(pl(t,s,r),It(t,r))}function yy(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),z0(t,r)}function by(t,s){var r=0;switch(t.tag){case 13:var a=t.stateNode,n=t.memoizedState;n!==null&&(r=n.retryLane);break;case 19:a=t.stateNode;break;default:throw Error(oe(314))}a!==null&&a.delete(s),z0(t,r)}var B0;B0=function(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps||$t.current)Dt=!0;else{if(!(t.lanes&r)&&!(s.flags&128))return Dt=!1,ly(t,s,r);Dt=!!(t.flags&131072)}else Dt=!1,Ue&&s.flags&1048576&&Kh(s,vi,s.index);switch(s.lanes=0,s.tag){case 2:var a=s.type;Zl(t,s),t=s.pendingProps;var n=Xa(s,_t.current);La(s,r),n=Hd(null,s,a,t,n,r);var l=Gd();return s.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,qt(a)?(l=!0,yi(s)):l=!1,s.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Ud(s),n.updater=Gi,s.stateNode=n,n._reactInternals=s,Pc(s,a,t,r),s=Oc(null,s,a,!0,l,r)):(s.tag=0,Ue&&l&&Md(s),Et(null,s,n,r),s=s.child),s;case 16:a=s.elementType;e:{switch(Zl(t,s),t=s.pendingProps,n=a._init,a=n(a._payload),s.type=a,n=s.tag=jy(a),t=xs(a,t),n){case 0:s=Rc(null,s,a,t,r);break e;case 1:s=jm(null,s,a,t,r);break e;case 11:s=bm(null,s,a,t,r);break e;case 14:s=vm(null,s,a,xs(a.type,t),r);break e}throw Error(oe(306,a,""))}return s;case 0:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:xs(a,n),Rc(t,s,a,n,r);case 1:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:xs(a,n),jm(t,s,a,n,r);case 3:e:{if(k0(s),t===null)throw Error(oe(387));a=s.pendingProps,l=s.memoizedState,n=l.element,Xh(t,s),Ni(s,a,null,r);var i=s.memoizedState;if(a=i.element,l.isDehydrated)if(l={element:a,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},s.updateQueue.baseState=l,s.memoizedState=l,s.flags&256){n=sn(Error(oe(423)),s),s=wm(t,s,a,r,n);break e}else if(a!==n){n=sn(Error(oe(424)),s),s=wm(t,s,a,r,n);break e}else for(Ht=Nr(s.stateNode.containerInfo.firstChild),Jt=s,Ue=!0,fs=null,r=Jh(s,null,a,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Za(),a===n){s=Hs(t,s,r);break e}Et(t,s,a,r)}s=s.child}return s;case 5:return Zh(s),t===null&&Cc(s),a=s.type,n=s.pendingProps,l=t!==null?t.memoizedProps:null,i=n.children,wc(a,n)?i=null:l!==null&&wc(a,l)&&(s.flags|=32),_0(t,s),Et(t,s,i,r),s.child;case 6:return t===null&&Cc(s),null;case 13:return S0(t,s,r);case 4:return Qd(s,s.stateNode.containerInfo),a=s.pendingProps,t===null?s.child=en(s,null,a,r):Et(t,s,a,r),s.child;case 11:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:xs(a,n),bm(t,s,a,n,r);case 7:return Et(t,s,s.pendingProps,r),s.child;case 8:return Et(t,s,s.pendingProps.children,r),s.child;case 12:return Et(t,s,s.pendingProps.children,r),s.child;case 10:e:{if(a=s.type._context,n=s.pendingProps,l=s.memoizedProps,i=n.value,$e(ji,a._currentValue),a._currentValue=i,l!==null)if(vs(l.value,i)){if(l.children===n.children&&!$t.current){s=Hs(t,s,r);break e}}else for(l=s.child,l!==null&&(l.return=s);l!==null;){var o=l.dependencies;if(o!==null){i=l.child;for(var c=o.firstContext;c!==null;){if(c.context===a){if(l.tag===1){c=Us(-1,r&-r),c.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}l.lanes|=r,c=l.alternate,c!==null&&(c.lanes|=r),Ec(l.return,r,s),o.lanes|=r;break}c=c.next}}else if(l.tag===10)i=l.type===s.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(oe(341));i.lanes|=r,o=i.alternate,o!==null&&(o.lanes|=r),Ec(i,r,s),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===s){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}Et(t,s,n.children,r),s=s.child}return s;case 9:return n=s.type,a=s.pendingProps.children,La(s,r),n=cs(n),a=a(n),s.flags|=1,Et(t,s,a,r),s.child;case 14:return a=s.type,n=xs(a,s.pendingProps),n=xs(a.type,n),vm(t,s,a,n,r);case 15:return w0(t,s,s.type,s.pendingProps,r);case 17:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:xs(a,n),Zl(t,s),s.tag=1,qt(a)?(t=!0,yi(s)):t=!1,La(s,r),b0(s,a,n),Pc(s,a,n,r),Oc(null,s,a,!0,t,r);case 19:return C0(t,s,r);case 22:return N0(t,s,r)}throw Error(oe(156,s.tag))};function U0(t,s){return gh(t,s)}function vy(t,s,r,a){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ls(t,s,r,a){return new vy(t,s,r,a)}function nu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function jy(t){if(typeof t=="function")return nu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_d)return 11;if(t===kd)return 14}return 2}function Cr(t,s){var r=t.alternate;return r===null?(r=ls(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function si(t,s,r,a,n,l){var i=2;if(a=t,typeof t=="function")nu(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case ba:return ea(r.children,n,l,s);case Nd:i=8,n|=8;break;case ec:return t=ls(12,r,s,n|2),t.elementType=ec,t.lanes=l,t;case tc:return t=ls(13,r,s,n),t.elementType=tc,t.lanes=l,t;case sc:return t=ls(19,r,s,n),t.elementType=sc,t.lanes=l,t;case Zx:return Xi(r,n,l,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Yx:i=10;break e;case Xx:i=9;break e;case _d:i=11;break e;case kd:i=14;break e;case sr:i=16,a=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return s=ls(i,r,s,n),s.elementType=t,s.type=a,s.lanes=l,s}function ea(t,s,r,a){return t=ls(7,t,a,s),t.lanes=r,t}function Xi(t,s,r,a){return t=ls(22,t,a,s),t.elementType=Zx,t.lanes=r,t.stateNode={isHidden:!1},t}function Bo(t,s,r){return t=ls(6,t,null,s),t.lanes=r,t}function Uo(t,s,r){return s=ls(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function wy(t,s,r,a,n){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=No(0),this.expirationTimes=No(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=No(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function lu(t,s,r,a,n,l,i,o,c){return t=new wy(t,s,r,o,c),s===1?(s=1,l===!0&&(s|=8)):s=0,l=ls(3,null,null,s),t.current=l,l.stateNode=t,l.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ud(l),t}function Ny(t,s,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ya,key:a==null?null:""+a,children:t,containerInfo:s,implementation:r}}function Q0(t){if(!t)return Rr;t=t._reactInternals;e:{if(xa(t)!==t||t.tag!==1)throw Error(oe(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(qt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(oe(171))}if(t.tag===1){var r=t.type;if(qt(r))return Qh(t,r,s)}return s}function V0(t,s,r,a,n,l,i,o,c){return t=lu(r,a,!0,t,n,l,i,o,c),t.context=Q0(null),r=t.current,a=Pt(),n=Sr(r),l=Us(a,n),l.callback=s??null,_r(r,l,n),t.current.lanes=n,pl(t,n,a),It(t,a),t}function Zi(t,s,r,a){var n=s.current,l=Pt(),i=Sr(n);return r=Q0(r),s.context===null?s.context=r:s.pendingContext=r,s=Us(l,i),s.payload={element:t},a=a===void 0?null:a,a!==null&&(s.callback=a),t=_r(n,s,i),t!==null&&(bs(t,n,i,l),Jl(t,n,i)),i}function Ti(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Rm(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function iu(t,s){Rm(t,s),(t=t.alternate)&&Rm(t,s)}function _y(){return null}var K0=typeof reportError=="function"?reportError:function(t){console.error(t)};function ou(t){this._internalRoot=t}eo.prototype.render=ou.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(oe(409));Zi(t,s,null,null)};eo.prototype.unmount=ou.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;oa(function(){Zi(null,t,null,null)}),s[Ks]=null}};function eo(t){this._internalRoot=t}eo.prototype.unstable_scheduleHydration=function(t){if(t){var s=Nh();t={blockedOn:null,target:t,priority:s};for(var r=0;r<ar.length&&s!==0&&s<ar[r].priority;r++);ar.splice(r,0,t),r===0&&kh(t)}};function cu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function to(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Om(){}function ky(t,s,r,a,n){if(n){if(typeof a=="function"){var l=a;a=function(){var d=Ti(i);l.call(d)}}var i=V0(s,a,t,0,null,!1,!1,"",Om);return t._reactRootContainer=i,t[Ks]=i.current,Jn(t.nodeType===8?t.parentNode:t),oa(),i}for(;n=t.lastChild;)t.removeChild(n);if(typeof a=="function"){var o=a;a=function(){var d=Ti(c);o.call(d)}}var c=lu(t,0,!1,null,null,!1,!1,"",Om);return t._reactRootContainer=c,t[Ks]=c.current,Jn(t.nodeType===8?t.parentNode:t),oa(function(){Zi(s,c,r,a)}),c}function so(t,s,r,a,n){var l=r._reactRootContainer;if(l){var i=l;if(typeof n=="function"){var o=n;n=function(){var c=Ti(i);o.call(c)}}Zi(s,i,t,n)}else i=ky(r,s,t,n,a);return Ti(i)}jh=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var r=En(s.pendingLanes);r!==0&&(Ed(s,r|1),It(s,Xe()),!(Pe&6)&&(rn=Xe()+500,Mr()))}break;case 13:oa(function(){var a=Ws(t,1);if(a!==null){var n=Pt();bs(a,t,1,n)}}),iu(t,1)}};Fd=function(t){if(t.tag===13){var s=Ws(t,134217728);if(s!==null){var r=Pt();bs(s,t,134217728,r)}iu(t,134217728)}};wh=function(t){if(t.tag===13){var s=Sr(t),r=Ws(t,s);if(r!==null){var a=Pt();bs(r,t,s,a)}iu(t,s)}};Nh=function(){return Oe};_h=function(t,s){var r=Oe;try{return Oe=t,s()}finally{Oe=r}};mc=function(t,s,r){switch(s){case"input":if(nc(t,r),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var a=r[s];if(a!==t&&a.form===t.form){var n=Ki(a);if(!n)throw Error(oe(90));th(a),nc(a,n)}}}break;case"textarea":rh(t,r);break;case"select":s=r.value,s!=null&&Ta(t,!!r.multiple,s,!1)}};dh=su;uh=oa;var Sy={usingClientEntryPoint:!1,Events:[fl,Na,Ki,oh,ch,su]},Nn={findFiberByHostInstance:Ir,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cy={bundleType:Nn.bundleType,version:Nn.version,rendererPackageName:Nn.rendererPackageName,rendererConfig:Nn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Js.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=hh(t),t===null?null:t.stateNode},findFiberByHostInstance:Nn.findFiberByHostInstance||_y,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zl.isDisabled&&zl.supportsFiber)try{Bi=zl.inject(Cy),Ts=zl}catch{}}Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sy;Xt.createPortal=function(t,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cu(s))throw Error(oe(200));return Ny(t,s,null,r)};Xt.createRoot=function(t,s){if(!cu(t))throw Error(oe(299));var r=!1,a="",n=K0;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(n=s.onRecoverableError)),s=lu(t,1,!1,null,null,r,!1,a,n),t[Ks]=s.current,Jn(t.nodeType===8?t.parentNode:t),new ou(s)};Xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=hh(s),t=t===null?null:t.stateNode,t};Xt.flushSync=function(t){return oa(t)};Xt.hydrate=function(t,s,r){if(!to(s))throw Error(oe(200));return so(null,t,s,!0,r)};Xt.hydrateRoot=function(t,s,r){if(!cu(t))throw Error(oe(405));var a=r!=null&&r.hydratedSources||null,n=!1,l="",i=K0;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),s=V0(s,null,t,1,r??null,n,!1,l,i),t[Ks]=s.current,Jn(t),a)for(t=0;t<a.length;t++)r=a[t],n=r._getVersion,n=n(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,n]:s.mutableSourceEagerHydrationData.push(r,n);return new eo(s)};Xt.render=function(t,s,r){if(!to(s))throw Error(oe(200));return so(null,t,s,!1,r)};Xt.unmountComponentAtNode=function(t){if(!to(t))throw Error(oe(40));return t._reactRootContainer?(oa(function(){so(null,null,t,!1,function(){t._reactRootContainer=null,t[Ks]=null})}),!0):!1};Xt.unstable_batchedUpdates=su;Xt.unstable_renderSubtreeIntoContainer=function(t,s,r,a){if(!to(r))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return so(t,s,r,!1,a)};Xt.version="18.3.1-next-f1338f8080-20240426";function W0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(W0)}catch(t){console.error(t)}}W0(),Wx.exports=Xt;var Ey=Wx.exports,H0,Am=Ey;H0=Am.createRoot,Am.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nl(){return nl=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},nl.apply(this,arguments)}var br;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(br||(br={}));const Lm="popstate";function Fy(t){t===void 0&&(t={});function s(a,n){let{pathname:l,search:i,hash:o}=a.location;return Vc("",{pathname:l,search:i,hash:o},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(a,n){return typeof n=="string"?n:Ri(n)}return Ty(s,r,null,t)}function Ze(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function G0(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function Py(){return Math.random().toString(36).substr(2,8)}function Mm(t,s){return{usr:t.state,key:t.key,idx:s}}function Vc(t,s,r,a){return r===void 0&&(r=null),nl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?dn(s):s,{state:r,key:s&&s.key||a||Py()})}function Ri(t){let{pathname:s="/",search:r="",hash:a=""}=t;return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(s+=a.charAt(0)==="#"?a:"#"+a),s}function dn(t){let s={};if(t){let r=t.indexOf("#");r>=0&&(s.hash=t.substr(r),t=t.substr(0,r));let a=t.indexOf("?");a>=0&&(s.search=t.substr(a),t=t.substr(0,a)),t&&(s.pathname=t)}return s}function Ty(t,s,r,a){a===void 0&&(a={});let{window:n=document.defaultView,v5Compat:l=!1}=a,i=n.history,o=br.Pop,c=null,d=h();d==null&&(d=0,i.replaceState(nl({},i.state,{idx:d}),""));function h(){return(i.state||{idx:null}).idx}function m(){o=br.Pop;let v=h(),y=v==null?null:v-d;d=v,c&&c({action:o,location:f.location,delta:y})}function u(v,y){o=br.Push;let p=Vc(f.location,v,y);d=h()+1;let x=Mm(p,d),w=f.createHref(p);try{i.pushState(x,"",w)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;n.location.assign(w)}l&&c&&c({action:o,location:f.location,delta:1})}function g(v,y){o=br.Replace;let p=Vc(f.location,v,y);d=h();let x=Mm(p,d),w=f.createHref(p);i.replaceState(x,"",w),l&&c&&c({action:o,location:f.location,delta:0})}function b(v){let y=n.location.origin!=="null"?n.location.origin:n.location.href,p=typeof v=="string"?v:Ri(v);return p=p.replace(/ $/,"%20"),Ze(y,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,y)}let f={get action(){return o},get location(){return t(n,i)},listen(v){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(Lm,m),c=v,()=>{n.removeEventListener(Lm,m),c=null}},createHref(v){return s(n,v)},createURL:b,encodeLocation(v){let y=b(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:u,replace:g,go(v){return i.go(v)}};return f}var Dm;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Dm||(Dm={}));function Ry(t,s,r){return r===void 0&&(r="/"),Oy(t,s,r)}function Oy(t,s,r,a){let n=typeof s=="string"?dn(s):s,l=du(n.pathname||"/",r);if(l==null)return null;let i=J0(t);Ay(i);let o=null;for(let c=0;o==null&&c<i.length;++c){let d=Ky(l);o=Uy(i[c],d)}return o}function J0(t,s,r,a){s===void 0&&(s=[]),r===void 0&&(r=[]),a===void 0&&(a="");let n=(l,i,o)=>{let c={relativePath:o===void 0?l.path||"":o,caseSensitive:l.caseSensitive===!0,childrenIndex:i,route:l};c.relativePath.startsWith("/")&&(Ze(c.relativePath.startsWith(a),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(a.length));let d=Er([a,c.relativePath]),h=r.concat(c);l.children&&l.children.length>0&&(Ze(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),J0(l.children,s,h,d)),!(l.path==null&&!l.index)&&s.push({path:d,score:zy(d,l.index),routesMeta:h})};return t.forEach((l,i)=>{var o;if(l.path===""||!((o=l.path)!=null&&o.includes("?")))n(l,i);else for(let c of Y0(l.path))n(l,i,c)}),s}function Y0(t){let s=t.split("/");if(s.length===0)return[];let[r,...a]=s,n=r.endsWith("?"),l=r.replace(/\?$/,"");if(a.length===0)return n?[l,""]:[l];let i=Y0(a.join("/")),o=[];return o.push(...i.map(c=>c===""?l:[l,c].join("/"))),n&&o.push(...i),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function Ay(t){t.sort((s,r)=>s.score!==r.score?r.score-s.score:By(s.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const Ly=/^:[\w-]+$/,My=3,Dy=2,$y=1,qy=10,Iy=-2,$m=t=>t==="*";function zy(t,s){let r=t.split("/"),a=r.length;return r.some($m)&&(a+=Iy),s&&(a+=Dy),r.filter(n=>!$m(n)).reduce((n,l)=>n+(Ly.test(l)?My:l===""?$y:qy),a)}function By(t,s){return t.length===s.length&&t.slice(0,-1).every((a,n)=>a===s[n])?t[t.length-1]-s[s.length-1]:0}function Uy(t,s,r){let{routesMeta:a}=t,n={},l="/",i=[];for(let o=0;o<a.length;++o){let c=a[o],d=o===a.length-1,h=l==="/"?s:s.slice(l.length)||"/",m=Qy({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),u=c.route;if(!m)return null;Object.assign(n,m.params),i.push({params:n,pathname:Er([l,m.pathname]),pathnameBase:Jy(Er([l,m.pathnameBase])),route:u}),m.pathnameBase!=="/"&&(l=Er([l,m.pathnameBase]))}return i}function Qy(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,a]=Vy(t.path,t.caseSensitive,t.end),n=s.match(r);if(!n)return null;let l=n[0],i=l.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:a.reduce((d,h,m)=>{let{paramName:u,isOptional:g}=h;if(u==="*"){let f=o[m]||"";i=l.slice(0,l.length-f.length).replace(/(.)\/+$/,"$1")}const b=o[m];return g&&!b?d[u]=void 0:d[u]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:i,pattern:t}}function Vy(t,s,r){s===void 0&&(s=!1),r===void 0&&(r=!0),G0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let a=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,c)=>(a.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,s?void 0:"i"),a]}function Ky(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return G0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function du(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,a=t.charAt(r);return a&&a!=="/"?null:t.slice(r)||"/"}function Wy(t,s){s===void 0&&(s="/");let{pathname:r,search:a="",hash:n=""}=typeof t=="string"?dn(t):t;return{pathname:r?r.startsWith("/")?r:Hy(r,s):s,search:Yy(a),hash:Xy(n)}}function Hy(t,s){let r=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function Qo(t,s,r,a){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Gy(t){return t.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function uu(t,s){let r=Gy(t);return s?r.map((a,n)=>n===r.length-1?a.pathname:a.pathnameBase):r.map(a=>a.pathnameBase)}function mu(t,s,r,a){a===void 0&&(a=!1);let n;typeof t=="string"?n=dn(t):(n=nl({},t),Ze(!n.pathname||!n.pathname.includes("?"),Qo("?","pathname","search",n)),Ze(!n.pathname||!n.pathname.includes("#"),Qo("#","pathname","hash",n)),Ze(!n.search||!n.search.includes("#"),Qo("#","search","hash",n)));let l=t===""||n.pathname==="",i=l?"/":n.pathname,o;if(i==null)o=r;else{let m=s.length-1;if(!a&&i.startsWith("..")){let u=i.split("/");for(;u[0]==="..";)u.shift(),m-=1;n.pathname=u.join("/")}o=m>=0?s[m]:"/"}let c=Wy(n,o),d=i&&i!=="/"&&i.endsWith("/"),h=(l||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const Er=t=>t.join("/").replace(/\/\/+/g,"/"),Jy=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Yy=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Xy=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Zy(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const X0=["post","put","patch","delete"];new Set(X0);const eb=["get",...X0];new Set(eb);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ll(){return ll=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},ll.apply(this,arguments)}const xu=j.createContext(null),tb=j.createContext(null),Dr=j.createContext(null),ro=j.createContext(null),Ys=j.createContext({outlet:null,matches:[],isDataRoute:!1}),Z0=j.createContext(null);function sb(t,s){let{relative:r}=s===void 0?{}:s;un()||Ze(!1);let{basename:a,navigator:n}=j.useContext(Dr),{hash:l,pathname:i,search:o}=tp(t,{relative:r}),c=i;return a!=="/"&&(c=i==="/"?a:Er([a,i])),n.createHref({pathname:c,search:o,hash:l})}function un(){return j.useContext(ro)!=null}function js(){return un()||Ze(!1),j.useContext(ro).location}function ep(t){j.useContext(Dr).static||j.useLayoutEffect(t)}function Je(){let{isDataRoute:t}=j.useContext(Ys);return t?pb():rb()}function rb(){un()||Ze(!1);let t=j.useContext(xu),{basename:s,future:r,navigator:a}=j.useContext(Dr),{matches:n}=j.useContext(Ys),{pathname:l}=js(),i=JSON.stringify(uu(n,r.v7_relativeSplatPath)),o=j.useRef(!1);return ep(()=>{o.current=!0}),j.useCallback(function(d,h){if(h===void 0&&(h={}),!o.current)return;if(typeof d=="number"){a.go(d);return}let m=mu(d,JSON.parse(i),l,h.relative==="path");t==null&&s!=="/"&&(m.pathname=m.pathname==="/"?s:Er([s,m.pathname])),(h.replace?a.replace:a.push)(m,h.state,h)},[s,a,i,l,t])}function bl(){let{matches:t}=j.useContext(Ys),s=t[t.length-1];return s?s.params:{}}function tp(t,s){let{relative:r}=s===void 0?{}:s,{future:a}=j.useContext(Dr),{matches:n}=j.useContext(Ys),{pathname:l}=js(),i=JSON.stringify(uu(n,a.v7_relativeSplatPath));return j.useMemo(()=>mu(t,JSON.parse(i),l,r==="path"),[t,i,l,r])}function ab(t,s){return nb(t,s)}function nb(t,s,r,a){un()||Ze(!1);let{navigator:n}=j.useContext(Dr),{matches:l}=j.useContext(Ys),i=l[l.length-1],o=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=js(),h;if(s){var m;let v=typeof s=="string"?dn(s):s;c==="/"||(m=v.pathname)!=null&&m.startsWith(c)||Ze(!1),h=v}else h=d;let u=h.pathname||"/",g=u;if(c!=="/"){let v=c.replace(/^\//,"").split("/");g="/"+u.replace(/^\//,"").split("/").slice(v.length).join("/")}let b=Ry(t,{pathname:g}),f=db(b&&b.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:Er([c,n.encodeLocation?n.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:Er([c,n.encodeLocation?n.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),l,r,a);return s&&f?j.createElement(ro.Provider,{value:{location:ll({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:br.Pop}},f):f}function lb(){let t=hb(),s=Zy(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},s),r?j.createElement("pre",{style:n},r):null,null)}const ib=j.createElement(lb,null);class ob extends j.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){console.error("React Router caught the following error during render",s,r)}render(){return this.state.error!==void 0?j.createElement(Ys.Provider,{value:this.props.routeContext},j.createElement(Z0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cb(t){let{routeContext:s,match:r,children:a}=t,n=j.useContext(xu);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),j.createElement(Ys.Provider,{value:s},a)}function db(t,s,r,a){var n;if(s===void 0&&(s=[]),r===void 0&&(r=null),a===void 0&&(a=null),t==null){var l;if(!r)return null;if(r.errors)t=r.matches;else if((l=a)!=null&&l.v7_partialHydration&&s.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,o=(n=r)==null?void 0:n.errors;if(o!=null){let h=i.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);h>=0||Ze(!1),i=i.slice(0,Math.min(i.length,h+1))}let c=!1,d=-1;if(r&&a&&a.v7_partialHydration)for(let h=0;h<i.length;h++){let m=i[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=h),m.route.id){let{loaderData:u,errors:g}=r,b=m.route.loader&&u[m.route.id]===void 0&&(!g||g[m.route.id]===void 0);if(m.route.lazy||b){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((h,m,u)=>{let g,b=!1,f=null,v=null;r&&(g=o&&m.route.id?o[m.route.id]:void 0,f=m.route.errorElement||ib,c&&(d<0&&u===0?(gb("route-fallback"),b=!0,v=null):d===u&&(b=!0,v=m.route.hydrateFallbackElement||null)));let y=s.concat(i.slice(0,u+1)),p=()=>{let x;return g?x=f:b?x=v:m.route.Component?x=j.createElement(m.route.Component,null):m.route.element?x=m.route.element:x=h,j.createElement(cb,{match:m,routeContext:{outlet:h,matches:y,isDataRoute:r!=null},children:x})};return r&&(m.route.ErrorBoundary||m.route.errorElement||u===0)?j.createElement(ob,{location:r.location,revalidation:r.revalidation,component:f,error:g,children:p(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):p()},null)}var sp=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(sp||{}),rp=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(rp||{});function ub(t){let s=j.useContext(xu);return s||Ze(!1),s}function mb(t){let s=j.useContext(tb);return s||Ze(!1),s}function xb(t){let s=j.useContext(Ys);return s||Ze(!1),s}function ap(t){let s=xb(),r=s.matches[s.matches.length-1];return r.route.id||Ze(!1),r.route.id}function hb(){var t;let s=j.useContext(Z0),r=mb(),a=ap();return s!==void 0?s:(t=r.errors)==null?void 0:t[a]}function pb(){let{router:t}=ub(sp.UseNavigateStable),s=ap(rp.UseNavigateStable),r=j.useRef(!1);return ep(()=>{r.current=!0}),j.useCallback(function(n,l){l===void 0&&(l={}),r.current&&(typeof n=="number"?t.navigate(n):t.navigate(n,ll({fromRouteId:s},l)))},[t,s])}const qm={};function gb(t,s,r){qm[t]||(qm[t]=!0)}function fb(t,s){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function lr(t){let{to:s,replace:r,state:a,relative:n}=t;un()||Ze(!1);let{future:l,static:i}=j.useContext(Dr),{matches:o}=j.useContext(Ys),{pathname:c}=js(),d=Je(),h=mu(s,uu(o,l.v7_relativeSplatPath),c,n==="path"),m=JSON.stringify(h);return j.useEffect(()=>d(JSON.parse(m),{replace:r,state:a,relative:n}),[d,m,n,r,a]),null}function _e(t){Ze(!1)}function yb(t){let{basename:s="/",children:r=null,location:a,navigationType:n=br.Pop,navigator:l,static:i=!1,future:o}=t;un()&&Ze(!1);let c=s.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:c,navigator:l,static:i,future:ll({v7_relativeSplatPath:!1},o)}),[c,o,l,i]);typeof a=="string"&&(a=dn(a));let{pathname:h="/",search:m="",hash:u="",state:g=null,key:b="default"}=a,f=j.useMemo(()=>{let v=du(h,c);return v==null?null:{location:{pathname:v,search:m,hash:u,state:g,key:b},navigationType:n}},[c,h,m,u,g,b,n]);return f==null?null:j.createElement(Dr.Provider,{value:d},j.createElement(ro.Provider,{children:r,value:f}))}function bb(t){let{children:s,location:r}=t;return ab(Kc(s),r)}new Promise(()=>{});function Kc(t,s){s===void 0&&(s=[]);let r=[];return j.Children.forEach(t,(a,n)=>{if(!j.isValidElement(a))return;let l=[...s,n];if(a.type===j.Fragment){r.push.apply(r,Kc(a.props.children,l));return}a.type!==_e&&Ze(!1),!a.props.index||!a.props.children||Ze(!1);let i={id:a.props.id||l.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(i.children=Kc(a.props.children,l)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wc(){return Wc=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Wc.apply(this,arguments)}function vb(t,s){if(t==null)return{};var r={},a=Object.keys(t),n,l;for(l=0;l<a.length;l++)n=a[l],!(s.indexOf(n)>=0)&&(r[n]=t[n]);return r}function jb(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function wb(t,s){return t.button===0&&(!s||s==="_self")&&!jb(t)}function Hc(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((s,r)=>{let a=t[r];return s.concat(Array.isArray(a)?a.map(n=>[r,n]):[[r,a]])},[]))}function Nb(t,s){let r=Hc(t);return s&&s.forEach((a,n)=>{r.has(n)||s.getAll(n).forEach(l=>{r.append(n,l)})}),r}const _b=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],kb="6";try{window.__reactRouterVersion=kb}catch{}const Sb="startTransition",Im=gg[Sb];function Cb(t){let{basename:s,children:r,future:a,window:n}=t,l=j.useRef();l.current==null&&(l.current=Fy({window:n,v5Compat:!0}));let i=l.current,[o,c]=j.useState({action:i.action,location:i.location}),{v7_startTransition:d}=a||{},h=j.useCallback(m=>{d&&Im?Im(()=>c(m)):c(m)},[c,d]);return j.useLayoutEffect(()=>i.listen(h),[i,h]),j.useEffect(()=>fb(a),[a]),j.createElement(yb,{basename:s,children:r,location:o.location,navigationType:o.action,navigator:i,future:a})}const Eb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Fb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ie=j.forwardRef(function(s,r){let{onClick:a,relative:n,reloadDocument:l,replace:i,state:o,target:c,to:d,preventScrollReset:h,viewTransition:m}=s,u=vb(s,_b),{basename:g}=j.useContext(Dr),b,f=!1;if(typeof d=="string"&&Fb.test(d)&&(b=d,Eb))try{let x=new URL(window.location.href),w=d.startsWith("//")?new URL(x.protocol+d):new URL(d),R=du(w.pathname,g);w.origin===x.origin&&R!=null?d=R+w.search+w.hash:f=!0}catch{}let v=sb(d,{relative:n}),y=Pb(d,{replace:i,state:o,target:c,preventScrollReset:h,relative:n,viewTransition:m});function p(x){a&&a(x),x.defaultPrevented||y(x)}return j.createElement("a",Wc({},u,{href:b||v,onClick:f||l?a:p,ref:r,target:c}))});var zm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(zm||(zm={}));var Bm;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Bm||(Bm={}));function Pb(t,s){let{target:r,replace:a,state:n,preventScrollReset:l,relative:i,viewTransition:o}=s===void 0?{}:s,c=Je(),d=js(),h=tp(t,{relative:i});return j.useCallback(m=>{if(wb(m,r)){m.preventDefault();let u=a!==void 0?a:Ri(d)===Ri(h);c(t,{replace:u,state:n,preventScrollReset:l,relative:i,viewTransition:o})}},[d,c,h,a,n,r,t,l,i,o])}function Ye(t){let s=j.useRef(Hc(t)),r=j.useRef(!1),a=js(),n=j.useMemo(()=>Nb(a.search,r.current?null:s.current),[a.search]),l=Je(),i=j.useCallback((o,c)=>{const d=Hc(typeof o=="function"?o(n):o);r.current=!0,l("?"+d,c)},[l,n]);return[n,i]}var mn=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ca=typeof window>"u"||"Deno"in globalThis;function Ft(){}function Tb(t,s){return typeof t=="function"?t(s):t}function Gc(t){return typeof t=="number"&&t>=0&&t!==1/0}function np(t,s){return Math.max(t+(s||0)-Date.now(),0)}function Fr(t,s){return typeof t=="function"?t(s):t}function rs(t,s){return typeof t=="function"?t(s):t}function Um(t,s){const{type:r="all",exact:a,fetchStatus:n,predicate:l,queryKey:i,stale:o}=t;if(i){if(a){if(s.queryHash!==hu(i,s.options))return!1}else if(!il(s.queryKey,i))return!1}if(r!=="all"){const c=s.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof o=="boolean"&&s.isStale()!==o||n&&n!==s.state.fetchStatus||l&&!l(s))}function Qm(t,s){const{exact:r,status:a,predicate:n,mutationKey:l}=t;if(l){if(!s.options.mutationKey)return!1;if(r){if(da(s.options.mutationKey)!==da(l))return!1}else if(!il(s.options.mutationKey,l))return!1}return!(a&&s.state.status!==a||n&&!n(s))}function hu(t,s){return((s==null?void 0:s.queryKeyHashFn)||da)(t)}function da(t){return JSON.stringify(t,(s,r)=>Jc(r)?Object.keys(r).sort().reduce((a,n)=>(a[n]=r[n],a),{}):r)}function il(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?Object.keys(s).every(r=>il(t[r],s[r])):!1}function lp(t,s){if(t===s)return t;const r=Vm(t)&&Vm(s);if(r||Jc(t)&&Jc(s)){const a=r?t:Object.keys(t),n=a.length,l=r?s:Object.keys(s),i=l.length,o=r?[]:{},c=new Set(a);let d=0;for(let h=0;h<i;h++){const m=r?h:l[h];(!r&&c.has(m)||r)&&t[m]===void 0&&s[m]===void 0?(o[m]=void 0,d++):(o[m]=lp(t[m],s[m]),o[m]===t[m]&&t[m]!==void 0&&d++)}return n===i&&d===n?t:o}return s}function Oi(t,s){if(!s||Object.keys(t).length!==Object.keys(s).length)return!1;for(const r in t)if(t[r]!==s[r])return!1;return!0}function Vm(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Jc(t){if(!Km(t))return!1;const s=t.constructor;if(s===void 0)return!0;const r=s.prototype;return!(!Km(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Km(t){return Object.prototype.toString.call(t)==="[object Object]"}function Rb(t){return new Promise(s=>{setTimeout(s,t)})}function Yc(t,s,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,s):r.structuralSharing!==!1?lp(t,s):s}function Ob(t,s,r=0){const a=[...t,s];return r&&a.length>r?a.slice(1):a}function Ab(t,s,r=0){const a=[s,...t];return r&&a.length>r?a.slice(0,-1):a}var pu=Symbol();function ip(t,s){return!t.queryFn&&(s!=null&&s.initialPromise)?()=>s.initialPromise:!t.queryFn||t.queryFn===pu?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function op(t,s){return typeof t=="function"?t(...s):!!t}var Qr,ir,qa,Sx,Lb=(Sx=class extends mn{constructor(){super();be(this,Qr);be(this,ir);be(this,qa);xe(this,qa,s=>{if(!ca&&window.addEventListener){const r=()=>s();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){I(this,ir)||this.setEventListener(I(this,qa))}onUnsubscribe(){var s;this.hasListeners()||((s=I(this,ir))==null||s.call(this),xe(this,ir,void 0))}setEventListener(s){var r;xe(this,qa,s),(r=I(this,ir))==null||r.call(this),xe(this,ir,s(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(s){I(this,Qr)!==s&&(xe(this,Qr,s),this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(r=>{r(s)})}isFocused(){var s;return typeof I(this,Qr)=="boolean"?I(this,Qr):((s=globalThis.document)==null?void 0:s.visibilityState)!=="hidden"}},Qr=new WeakMap,ir=new WeakMap,qa=new WeakMap,Sx),gu=new Lb,Ia,or,za,Cx,Mb=(Cx=class extends mn{constructor(){super();be(this,Ia,!0);be(this,or);be(this,za);xe(this,za,s=>{if(!ca&&window.addEventListener){const r=()=>s(!0),a=()=>s(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",a)}}})}onSubscribe(){I(this,or)||this.setEventListener(I(this,za))}onUnsubscribe(){var s;this.hasListeners()||((s=I(this,or))==null||s.call(this),xe(this,or,void 0))}setEventListener(s){var r;xe(this,za,s),(r=I(this,or))==null||r.call(this),xe(this,or,s(this.setOnline.bind(this)))}setOnline(s){I(this,Ia)!==s&&(xe(this,Ia,s),this.listeners.forEach(a=>{a(s)}))}isOnline(){return I(this,Ia)}},Ia=new WeakMap,or=new WeakMap,za=new WeakMap,Cx),Ai=new Mb;function Xc(){let t,s;const r=new Promise((n,l)=>{t=n,s=l});r.status="pending",r.catch(()=>{});function a(n){Object.assign(r,n),delete r.resolve,delete r.reject}return r.resolve=n=>{a({status:"fulfilled",value:n}),t(n)},r.reject=n=>{a({status:"rejected",reason:n}),s(n)},r}function Db(t){return Math.min(1e3*2**t,3e4)}function cp(t){return(t??"online")==="online"?Ai.isOnline():!0}var dp=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Vo(t){return t instanceof dp}function up(t){let s=!1,r=0,a=!1,n;const l=Xc(),i=f=>{var v;a||(u(new dp(f)),(v=t.abort)==null||v.call(t))},o=()=>{s=!0},c=()=>{s=!1},d=()=>gu.isFocused()&&(t.networkMode==="always"||Ai.isOnline())&&t.canRun(),h=()=>cp(t.networkMode)&&t.canRun(),m=f=>{var v;a||(a=!0,(v=t.onSuccess)==null||v.call(t,f),n==null||n(),l.resolve(f))},u=f=>{var v;a||(a=!0,(v=t.onError)==null||v.call(t,f),n==null||n(),l.reject(f))},g=()=>new Promise(f=>{var v;n=y=>{(a||d())&&f(y)},(v=t.onPause)==null||v.call(t)}).then(()=>{var f;n=void 0,a||(f=t.onContinue)==null||f.call(t)}),b=()=>{if(a)return;let f;const v=r===0?t.initialPromise:void 0;try{f=v??t.fn()}catch(y){f=Promise.reject(y)}Promise.resolve(f).then(m).catch(y=>{var N;if(a)return;const p=t.retry??(ca?0:3),x=t.retryDelay??Db,w=typeof x=="function"?x(r,y):x,R=p===!0||typeof p=="number"&&r<p||typeof p=="function"&&p(r,y);if(s||!R){u(y);return}r++,(N=t.onFail)==null||N.call(t,r,y),Rb(w).then(()=>d()?void 0:g()).then(()=>{s?u(y):b()})})};return{promise:l,cancel:i,continue:()=>(n==null||n(),l),cancelRetry:o,continueRetry:c,canStart:h,start:()=>(h()?b():g().then(b),l)}}var $b=t=>setTimeout(t,0);function qb(){let t=[],s=0,r=o=>{o()},a=o=>{o()},n=$b;const l=o=>{s?t.push(o):n(()=>{r(o)})},i=()=>{const o=t;t=[],o.length&&n(()=>{a(()=>{o.forEach(c=>{r(c)})})})};return{batch:o=>{let c;s++;try{c=o()}finally{s--,s||i()}return c},batchCalls:o=>(...c)=>{l(()=>{o(...c)})},schedule:l,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{a=o},setScheduler:o=>{n=o}}}var nt=qb(),Vr,Ex,mp=(Ex=class{constructor(){be(this,Vr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Gc(this.gcTime)&&xe(this,Vr,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ca?1/0:5*60*1e3))}clearGcTimeout(){I(this,Vr)&&(clearTimeout(I(this,Vr)),xe(this,Vr,void 0))}},Vr=new WeakMap,Ex),Ba,Kr,ss,Wr,vt,dl,Hr,hs,Ls,Fx,Ib=(Fx=class extends mp{constructor(s){super();be(this,hs);be(this,Ba);be(this,Kr);be(this,ss);be(this,Wr);be(this,vt);be(this,dl);be(this,Hr);xe(this,Hr,!1),xe(this,dl,s.defaultOptions),this.setOptions(s.options),this.observers=[],xe(this,Wr,s.client),xe(this,ss,I(this,Wr).getQueryCache()),this.queryKey=s.queryKey,this.queryHash=s.queryHash,xe(this,Ba,zb(this.options)),this.state=s.state??I(this,Ba),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var s;return(s=I(this,vt))==null?void 0:s.promise}setOptions(s){this.options={...I(this,dl),...s},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&I(this,ss).remove(this)}setData(s,r){const a=Yc(this.state.data,s,this.options);return Se(this,hs,Ls).call(this,{data:a,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),a}setState(s,r){Se(this,hs,Ls).call(this,{type:"setState",state:s,setStateOptions:r})}cancel(s){var a,n;const r=(a=I(this,vt))==null?void 0:a.promise;return(n=I(this,vt))==null||n.cancel(s),r?r.then(Ft).catch(Ft):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(I(this,Ba))}isActive(){return this.observers.some(s=>rs(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===pu||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(s=>Fr(s.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(s=0){return this.state.data===void 0?!0:s==="static"?!1:this.state.isInvalidated?!0:!np(this.state.dataUpdatedAt,s)}onFocus(){var r;const s=this.observers.find(a=>a.shouldFetchOnWindowFocus());s==null||s.refetch({cancelRefetch:!1}),(r=I(this,vt))==null||r.continue()}onOnline(){var r;const s=this.observers.find(a=>a.shouldFetchOnReconnect());s==null||s.refetch({cancelRefetch:!1}),(r=I(this,vt))==null||r.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),I(this,ss).notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(r=>r!==s),this.observers.length||(I(this,vt)&&(I(this,Hr)?I(this,vt).cancel({revert:!0}):I(this,vt).cancelRetry()),this.scheduleGc()),I(this,ss).notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Se(this,hs,Ls).call(this,{type:"invalidate"})}fetch(s,r){var d,h,m;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(I(this,vt))return I(this,vt).continueRetry(),I(this,vt).promise}if(s&&this.setOptions(s),!this.options.queryFn){const u=this.observers.find(g=>g.options.queryFn);u&&this.setOptions(u.options)}const a=new AbortController,n=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(xe(this,Hr,!0),a.signal)})},l=()=>{const u=ip(this.options,r),b=(()=>{const f={client:I(this,Wr),queryKey:this.queryKey,meta:this.meta};return n(f),f})();return xe(this,Hr,!1),this.options.persister?this.options.persister(u,b,this):u(b)},o=(()=>{const u={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:I(this,Wr),state:this.state,fetchFn:l};return n(u),u})();(d=this.options.behavior)==null||d.onFetch(o,this),xe(this,Kr,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=o.fetchOptions)==null?void 0:h.meta))&&Se(this,hs,Ls).call(this,{type:"fetch",meta:(m=o.fetchOptions)==null?void 0:m.meta});const c=u=>{var g,b,f,v;Vo(u)&&u.silent||Se(this,hs,Ls).call(this,{type:"error",error:u}),Vo(u)||((b=(g=I(this,ss).config).onError)==null||b.call(g,u,this),(v=(f=I(this,ss).config).onSettled)==null||v.call(f,this.state.data,u,this)),this.scheduleGc()};return xe(this,vt,up({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,abort:a.abort.bind(a),onSuccess:u=>{var g,b,f,v;if(u===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(u)}catch(y){c(y);return}(b=(g=I(this,ss).config).onSuccess)==null||b.call(g,u,this),(v=(f=I(this,ss).config).onSettled)==null||v.call(f,u,this.state.error,this),this.scheduleGc()},onError:c,onFail:(u,g)=>{Se(this,hs,Ls).call(this,{type:"failed",failureCount:u,error:g})},onPause:()=>{Se(this,hs,Ls).call(this,{type:"pause"})},onContinue:()=>{Se(this,hs,Ls).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),I(this,vt).start()}},Ba=new WeakMap,Kr=new WeakMap,ss=new WeakMap,Wr=new WeakMap,vt=new WeakMap,dl=new WeakMap,Hr=new WeakMap,hs=new WeakSet,Ls=function(s){const r=a=>{switch(s.type){case"failed":return{...a,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...xp(a.data,this.options),fetchMeta:s.meta??null};case"success":return xe(this,Kr,void 0),{...a,data:s.data,dataUpdateCount:a.dataUpdateCount+1,dataUpdatedAt:s.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=s.error;return Vo(n)&&n.revert&&I(this,Kr)?{...I(this,Kr),fetchStatus:"idle"}:{...a,error:n,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...s.state}}};this.state=r(this.state),nt.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),I(this,ss).notify({query:this,type:"updated",action:s})})},Fx);function xp(t,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:cp(s.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function zb(t){const s=typeof t.initialData=="function"?t.initialData():t.initialData,r=s!==void 0,a=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:r?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Ss,Px,Bb=(Px=class extends mn{constructor(s={}){super();be(this,Ss);this.config=s,xe(this,Ss,new Map)}build(s,r,a){const n=r.queryKey,l=r.queryHash??hu(n,r);let i=this.get(l);return i||(i=new Ib({client:s,queryKey:n,queryHash:l,options:s.defaultQueryOptions(r),state:a,defaultOptions:s.getQueryDefaults(n)}),this.add(i)),i}add(s){I(this,Ss).has(s.queryHash)||(I(this,Ss).set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const r=I(this,Ss).get(s.queryHash);r&&(s.destroy(),r===s&&I(this,Ss).delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){nt.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return I(this,Ss).get(s)}getAll(){return[...I(this,Ss).values()]}find(s){const r={exact:!0,...s};return this.getAll().find(a=>Um(r,a))}findAll(s={}){const r=this.getAll();return Object.keys(s).length>0?r.filter(a=>Um(s,a)):r}notify(s){nt.batch(()=>{this.listeners.forEach(r=>{r(s)})})}onFocus(){nt.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){nt.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},Ss=new WeakMap,Px),Cs,St,Gr,Es,tr,Tx,Ub=(Tx=class extends mp{constructor(s){super();be(this,Es);be(this,Cs);be(this,St);be(this,Gr);this.mutationId=s.mutationId,xe(this,St,s.mutationCache),xe(this,Cs,[]),this.state=s.state||hp(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){I(this,Cs).includes(s)||(I(this,Cs).push(s),this.clearGcTimeout(),I(this,St).notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){xe(this,Cs,I(this,Cs).filter(r=>r!==s)),this.scheduleGc(),I(this,St).notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){I(this,Cs).length||(this.state.status==="pending"?this.scheduleGc():I(this,St).remove(this))}continue(){var s;return((s=I(this,Gr))==null?void 0:s.continue())??this.execute(this.state.variables)}async execute(s){var l,i,o,c,d,h,m,u,g,b,f,v,y,p,x,w,R,N,k,L;const r=()=>{Se(this,Es,tr).call(this,{type:"continue"})};xe(this,Gr,up({fn:()=>this.options.mutationFn?this.options.mutationFn(s):Promise.reject(new Error("No mutationFn found")),onFail:(E,z)=>{Se(this,Es,tr).call(this,{type:"failed",failureCount:E,error:z})},onPause:()=>{Se(this,Es,tr).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>I(this,St).canRun(this)}));const a=this.state.status==="pending",n=!I(this,Gr).canStart();try{if(a)r();else{Se(this,Es,tr).call(this,{type:"pending",variables:s,isPaused:n}),await((i=(l=I(this,St).config).onMutate)==null?void 0:i.call(l,s,this));const z=await((c=(o=this.options).onMutate)==null?void 0:c.call(o,s));z!==this.state.context&&Se(this,Es,tr).call(this,{type:"pending",context:z,variables:s,isPaused:n})}const E=await I(this,Gr).start();return await((h=(d=I(this,St).config).onSuccess)==null?void 0:h.call(d,E,s,this.state.context,this)),await((u=(m=this.options).onSuccess)==null?void 0:u.call(m,E,s,this.state.context)),await((b=(g=I(this,St).config).onSettled)==null?void 0:b.call(g,E,null,this.state.variables,this.state.context,this)),await((v=(f=this.options).onSettled)==null?void 0:v.call(f,E,null,s,this.state.context)),Se(this,Es,tr).call(this,{type:"success",data:E}),E}catch(E){try{throw await((p=(y=I(this,St).config).onError)==null?void 0:p.call(y,E,s,this.state.context,this)),await((w=(x=this.options).onError)==null?void 0:w.call(x,E,s,this.state.context)),await((N=(R=I(this,St).config).onSettled)==null?void 0:N.call(R,void 0,E,this.state.variables,this.state.context,this)),await((L=(k=this.options).onSettled)==null?void 0:L.call(k,void 0,E,s,this.state.context)),E}finally{Se(this,Es,tr).call(this,{type:"error",error:E})}}finally{I(this,St).runNext(this)}}},Cs=new WeakMap,St=new WeakMap,Gr=new WeakMap,Es=new WeakSet,tr=function(s){const r=a=>{switch(s.type){case"failed":return{...a,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...a,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:s.error,failureCount:a.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=r(this.state),nt.batch(()=>{I(this,Cs).forEach(a=>{a.onMutationUpdate(s)}),I(this,St).notify({mutation:this,type:"updated",action:s})})},Tx);function hp(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var $s,ps,ul,Rx,Qb=(Rx=class extends mn{constructor(s={}){super();be(this,$s);be(this,ps);be(this,ul);this.config=s,xe(this,$s,new Set),xe(this,ps,new Map),xe(this,ul,0)}build(s,r,a){const n=new Ub({mutationCache:this,mutationId:++_l(this,ul)._,options:s.defaultMutationOptions(r),state:a});return this.add(n),n}add(s){I(this,$s).add(s);const r=Bl(s);if(typeof r=="string"){const a=I(this,ps).get(r);a?a.push(s):I(this,ps).set(r,[s])}this.notify({type:"added",mutation:s})}remove(s){if(I(this,$s).delete(s)){const r=Bl(s);if(typeof r=="string"){const a=I(this,ps).get(r);if(a)if(a.length>1){const n=a.indexOf(s);n!==-1&&a.splice(n,1)}else a[0]===s&&I(this,ps).delete(r)}}this.notify({type:"removed",mutation:s})}canRun(s){const r=Bl(s);if(typeof r=="string"){const a=I(this,ps).get(r),n=a==null?void 0:a.find(l=>l.state.status==="pending");return!n||n===s}else return!0}runNext(s){var a;const r=Bl(s);if(typeof r=="string"){const n=(a=I(this,ps).get(r))==null?void 0:a.find(l=>l!==s&&l.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){nt.batch(()=>{I(this,$s).forEach(s=>{this.notify({type:"removed",mutation:s})}),I(this,$s).clear(),I(this,ps).clear()})}getAll(){return Array.from(I(this,$s))}find(s){const r={exact:!0,...s};return this.getAll().find(a=>Qm(r,a))}findAll(s={}){return this.getAll().filter(r=>Qm(s,r))}notify(s){nt.batch(()=>{this.listeners.forEach(r=>{r(s)})})}resumePausedMutations(){const s=this.getAll().filter(r=>r.state.isPaused);return nt.batch(()=>Promise.all(s.map(r=>r.continue().catch(Ft))))}},$s=new WeakMap,ps=new WeakMap,ul=new WeakMap,Rx);function Bl(t){var s;return(s=t.options.scope)==null?void 0:s.id}function Wm(t){return{onFetch:(s,r)=>{var h,m,u,g,b;const a=s.options,n=(u=(m=(h=s.fetchOptions)==null?void 0:h.meta)==null?void 0:m.fetchMore)==null?void 0:u.direction,l=((g=s.state.data)==null?void 0:g.pages)||[],i=((b=s.state.data)==null?void 0:b.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const d=async()=>{let f=!1;const v=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(s.signal.aborted?f=!0:s.signal.addEventListener("abort",()=>{f=!0}),s.signal)})},y=ip(s.options,s.fetchOptions),p=async(x,w,R)=>{if(f)return Promise.reject();if(w==null&&x.pages.length)return Promise.resolve(x);const k=(()=>{const _={client:s.client,queryKey:s.queryKey,pageParam:w,direction:R?"backward":"forward",meta:s.options.meta};return v(_),_})(),L=await y(k),{maxPages:E}=s.options,z=R?Ab:Ob;return{pages:z(x.pages,L,E),pageParams:z(x.pageParams,w,E)}};if(n&&l.length){const x=n==="backward",w=x?Vb:Hm,R={pages:l,pageParams:i},N=w(a,R);o=await p(R,N,x)}else{const x=t??l.length;do{const w=c===0?i[0]??a.initialPageParam:Hm(a,o);if(c>0&&w==null)break;o=await p(o,w),c++}while(c<x)}return o};s.options.persister?s.fetchFn=()=>{var f,v;return(v=(f=s.options).persister)==null?void 0:v.call(f,d,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},r)}:s.fetchFn=d}}}function Hm(t,{pages:s,pageParams:r}){const a=s.length-1;return s.length>0?t.getNextPageParam(s[a],s,r[a],r):void 0}function Vb(t,{pages:s,pageParams:r}){var a;return s.length>0?(a=t.getPreviousPageParam)==null?void 0:a.call(t,s[0],s,r[0],r):void 0}var He,cr,dr,Ua,Qa,ur,Va,Ka,Ox,Kb=(Ox=class{constructor(t={}){be(this,He);be(this,cr);be(this,dr);be(this,Ua);be(this,Qa);be(this,ur);be(this,Va);be(this,Ka);xe(this,He,t.queryCache||new Bb),xe(this,cr,t.mutationCache||new Qb),xe(this,dr,t.defaultOptions||{}),xe(this,Ua,new Map),xe(this,Qa,new Map),xe(this,ur,0)}mount(){_l(this,ur)._++,I(this,ur)===1&&(xe(this,Va,gu.subscribe(async t=>{t&&(await this.resumePausedMutations(),I(this,He).onFocus())})),xe(this,Ka,Ai.subscribe(async t=>{t&&(await this.resumePausedMutations(),I(this,He).onOnline())})))}unmount(){var t,s;_l(this,ur)._--,I(this,ur)===0&&((t=I(this,Va))==null||t.call(this),xe(this,Va,void 0),(s=I(this,Ka))==null||s.call(this),xe(this,Ka,void 0))}isFetching(t){return I(this,He).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return I(this,cr).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const s=this.defaultQueryOptions({queryKey:t});return(r=I(this,He).get(s.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const s=this.defaultQueryOptions(t),r=I(this,He).build(this,s),a=r.state.data;return a===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(Fr(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(a))}getQueriesData(t){return I(this,He).findAll(t).map(({queryKey:s,state:r})=>{const a=r.data;return[s,a]})}setQueryData(t,s,r){const a=this.defaultQueryOptions({queryKey:t}),n=I(this,He).get(a.queryHash),l=n==null?void 0:n.state.data,i=Tb(s,l);if(i!==void 0)return I(this,He).build(this,a).setData(i,{...r,manual:!0})}setQueriesData(t,s,r){return nt.batch(()=>I(this,He).findAll(t).map(({queryKey:a})=>[a,this.setQueryData(a,s,r)]))}getQueryState(t){var r;const s=this.defaultQueryOptions({queryKey:t});return(r=I(this,He).get(s.queryHash))==null?void 0:r.state}removeQueries(t){const s=I(this,He);nt.batch(()=>{s.findAll(t).forEach(r=>{s.remove(r)})})}resetQueries(t,s){const r=I(this,He);return nt.batch(()=>(r.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...t},s)))}cancelQueries(t,s={}){const r={revert:!0,...s},a=nt.batch(()=>I(this,He).findAll(t).map(n=>n.cancel(r)));return Promise.all(a).then(Ft).catch(Ft)}invalidateQueries(t,s={}){return nt.batch(()=>(I(this,He).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},s)))}refetchQueries(t,s={}){const r={...s,cancelRefetch:s.cancelRefetch??!0},a=nt.batch(()=>I(this,He).findAll(t).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let l=n.fetch(void 0,r);return r.throwOnError||(l=l.catch(Ft)),n.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(a).then(Ft)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const r=I(this,He).build(this,s);return r.isStaleByTime(Fr(s.staleTime,r))?r.fetch(s):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ft).catch(Ft)}fetchInfiniteQuery(t){return t.behavior=Wm(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ft).catch(Ft)}ensureInfiniteQueryData(t){return t.behavior=Wm(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Ai.isOnline()?I(this,cr).resumePausedMutations():Promise.resolve()}getQueryCache(){return I(this,He)}getMutationCache(){return I(this,cr)}getDefaultOptions(){return I(this,dr)}setDefaultOptions(t){xe(this,dr,t)}setQueryDefaults(t,s){I(this,Ua).set(da(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...I(this,Ua).values()],r={};return s.forEach(a=>{il(t,a.queryKey)&&Object.assign(r,a.defaultOptions)}),r}setMutationDefaults(t,s){I(this,Qa).set(da(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...I(this,Qa).values()],r={};return s.forEach(a=>{il(t,a.mutationKey)&&Object.assign(r,a.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const s={...I(this,dr).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=hu(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===pu&&(s.enabled=!1),s}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...I(this,dr).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){I(this,He).clear(),I(this,cr).clear()}},He=new WeakMap,cr=new WeakMap,dr=new WeakMap,Ua=new WeakMap,Qa=new WeakMap,ur=new WeakMap,Va=new WeakMap,Ka=new WeakMap,Ox),Ot,Fe,ml,Ct,Jr,Wa,mr,xr,xl,Ha,Ga,Yr,Xr,hr,Ja,Re,Pn,Zc,ed,td,sd,rd,ad,nd,pp,Ax,Wb=(Ax=class extends mn{constructor(s,r){super();be(this,Re);be(this,Ot);be(this,Fe);be(this,ml);be(this,Ct);be(this,Jr);be(this,Wa);be(this,mr);be(this,xr);be(this,xl);be(this,Ha);be(this,Ga);be(this,Yr);be(this,Xr);be(this,hr);be(this,Ja,new Set);this.options=r,xe(this,Ot,s),xe(this,xr,null),xe(this,mr,Xc()),this.options.experimental_prefetchInRender||I(this,mr).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(I(this,Fe).addObserver(this),Gm(I(this,Fe),this.options)?Se(this,Re,Pn).call(this):this.updateResult(),Se(this,Re,sd).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ld(I(this,Fe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ld(I(this,Fe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Se(this,Re,rd).call(this),Se(this,Re,ad).call(this),I(this,Fe).removeObserver(this)}setOptions(s){const r=this.options,a=I(this,Fe);if(this.options=I(this,Ot).defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof rs(this.options.enabled,I(this,Fe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Se(this,Re,nd).call(this),I(this,Fe).setOptions(this.options),r._defaulted&&!Oi(this.options,r)&&I(this,Ot).getQueryCache().notify({type:"observerOptionsUpdated",query:I(this,Fe),observer:this});const n=this.hasListeners();n&&Jm(I(this,Fe),a,this.options,r)&&Se(this,Re,Pn).call(this),this.updateResult(),n&&(I(this,Fe)!==a||rs(this.options.enabled,I(this,Fe))!==rs(r.enabled,I(this,Fe))||Fr(this.options.staleTime,I(this,Fe))!==Fr(r.staleTime,I(this,Fe)))&&Se(this,Re,Zc).call(this);const l=Se(this,Re,ed).call(this);n&&(I(this,Fe)!==a||rs(this.options.enabled,I(this,Fe))!==rs(r.enabled,I(this,Fe))||l!==I(this,hr))&&Se(this,Re,td).call(this,l)}getOptimisticResult(s){const r=I(this,Ot).getQueryCache().build(I(this,Ot),s),a=this.createResult(r,s);return Gb(this,a)&&(xe(this,Ct,a),xe(this,Wa,this.options),xe(this,Jr,I(this,Fe).state)),a}getCurrentResult(){return I(this,Ct)}trackResult(s,r){return new Proxy(s,{get:(a,n)=>(this.trackProp(n),r==null||r(n),Reflect.get(a,n))})}trackProp(s){I(this,Ja).add(s)}getCurrentQuery(){return I(this,Fe)}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const r=I(this,Ot).defaultQueryOptions(s),a=I(this,Ot).getQueryCache().build(I(this,Ot),r);return a.fetch().then(()=>this.createResult(a,r))}fetch(s){return Se(this,Re,Pn).call(this,{...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),I(this,Ct)))}createResult(s,r){var E;const a=I(this,Fe),n=this.options,l=I(this,Ct),i=I(this,Jr),o=I(this,Wa),d=s!==a?s.state:I(this,ml),{state:h}=s;let m={...h},u=!1,g;if(r._optimisticResults){const z=this.hasListeners(),_=!z&&Gm(s,r),O=z&&Jm(s,a,r,n);(_||O)&&(m={...m,...xp(h.data,s.options)}),r._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:b,errorUpdatedAt:f,status:v}=m;g=m.data;let y=!1;if(r.placeholderData!==void 0&&g===void 0&&v==="pending"){let z;l!=null&&l.isPlaceholderData&&r.placeholderData===(o==null?void 0:o.placeholderData)?(z=l.data,y=!0):z=typeof r.placeholderData=="function"?r.placeholderData((E=I(this,Ga))==null?void 0:E.state.data,I(this,Ga)):r.placeholderData,z!==void 0&&(v="success",g=Yc(l==null?void 0:l.data,z,r),u=!0)}if(r.select&&g!==void 0&&!y)if(l&&g===(i==null?void 0:i.data)&&r.select===I(this,xl))g=I(this,Ha);else try{xe(this,xl,r.select),g=r.select(g),g=Yc(l==null?void 0:l.data,g,r),xe(this,Ha,g),xe(this,xr,null)}catch(z){xe(this,xr,z)}I(this,xr)&&(b=I(this,xr),g=I(this,Ha),f=Date.now(),v="error");const p=m.fetchStatus==="fetching",x=v==="pending",w=v==="error",R=x&&p,N=g!==void 0,L={status:v,fetchStatus:m.fetchStatus,isPending:x,isSuccess:v==="success",isError:w,isInitialLoading:R,isLoading:R,data:g,dataUpdatedAt:m.dataUpdatedAt,error:b,errorUpdatedAt:f,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:p,isRefetching:p&&!x,isLoadingError:w&&!N,isPaused:m.fetchStatus==="paused",isPlaceholderData:u,isRefetchError:w&&N,isStale:fu(s,r),refetch:this.refetch,promise:I(this,mr),isEnabled:rs(r.enabled,s)!==!1};if(this.options.experimental_prefetchInRender){const z=Y=>{L.status==="error"?Y.reject(L.error):L.data!==void 0&&Y.resolve(L.data)},_=()=>{const Y=xe(this,mr,L.promise=Xc());z(Y)},O=I(this,mr);switch(O.status){case"pending":s.queryHash===a.queryHash&&z(O);break;case"fulfilled":(L.status==="error"||L.data!==O.value)&&_();break;case"rejected":(L.status!=="error"||L.error!==O.reason)&&_();break}}return L}updateResult(){const s=I(this,Ct),r=this.createResult(I(this,Fe),this.options);if(xe(this,Jr,I(this,Fe).state),xe(this,Wa,this.options),I(this,Jr).data!==void 0&&xe(this,Ga,I(this,Fe)),Oi(r,s))return;xe(this,Ct,r);const a=()=>{if(!s)return!0;const{notifyOnChangeProps:n}=this.options,l=typeof n=="function"?n():n;if(l==="all"||!l&&!I(this,Ja).size)return!0;const i=new Set(l??I(this,Ja));return this.options.throwOnError&&i.add("error"),Object.keys(I(this,Ct)).some(o=>{const c=o;return I(this,Ct)[c]!==s[c]&&i.has(c)})};Se(this,Re,pp).call(this,{listeners:a()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Se(this,Re,sd).call(this)}},Ot=new WeakMap,Fe=new WeakMap,ml=new WeakMap,Ct=new WeakMap,Jr=new WeakMap,Wa=new WeakMap,mr=new WeakMap,xr=new WeakMap,xl=new WeakMap,Ha=new WeakMap,Ga=new WeakMap,Yr=new WeakMap,Xr=new WeakMap,hr=new WeakMap,Ja=new WeakMap,Re=new WeakSet,Pn=function(s){Se(this,Re,nd).call(this);let r=I(this,Fe).fetch(this.options,s);return s!=null&&s.throwOnError||(r=r.catch(Ft)),r},Zc=function(){Se(this,Re,rd).call(this);const s=Fr(this.options.staleTime,I(this,Fe));if(ca||I(this,Ct).isStale||!Gc(s))return;const a=np(I(this,Ct).dataUpdatedAt,s)+1;xe(this,Yr,setTimeout(()=>{I(this,Ct).isStale||this.updateResult()},a))},ed=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(I(this,Fe)):this.options.refetchInterval)??!1},td=function(s){Se(this,Re,ad).call(this),xe(this,hr,s),!(ca||rs(this.options.enabled,I(this,Fe))===!1||!Gc(I(this,hr))||I(this,hr)===0)&&xe(this,Xr,setInterval(()=>{(this.options.refetchIntervalInBackground||gu.isFocused())&&Se(this,Re,Pn).call(this)},I(this,hr)))},sd=function(){Se(this,Re,Zc).call(this),Se(this,Re,td).call(this,Se(this,Re,ed).call(this))},rd=function(){I(this,Yr)&&(clearTimeout(I(this,Yr)),xe(this,Yr,void 0))},ad=function(){I(this,Xr)&&(clearInterval(I(this,Xr)),xe(this,Xr,void 0))},nd=function(){const s=I(this,Ot).getQueryCache().build(I(this,Ot),this.options);if(s===I(this,Fe))return;const r=I(this,Fe);xe(this,Fe,s),xe(this,ml,s.state),this.hasListeners()&&(r==null||r.removeObserver(this),s.addObserver(this))},pp=function(s){nt.batch(()=>{s.listeners&&this.listeners.forEach(r=>{r(I(this,Ct))}),I(this,Ot).getQueryCache().notify({query:I(this,Fe),type:"observerResultsUpdated"})})},Ax);function Hb(t,s){return rs(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function Gm(t,s){return Hb(t,s)||t.state.data!==void 0&&ld(t,s,s.refetchOnMount)}function ld(t,s,r){if(rs(s.enabled,t)!==!1&&Fr(s.staleTime,t)!=="static"){const a=typeof r=="function"?r(t):r;return a==="always"||a!==!1&&fu(t,s)}return!1}function Jm(t,s,r,a){return(t!==s||rs(a.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&fu(t,r)}function fu(t,s){return rs(s.enabled,t)!==!1&&t.isStaleByTime(Fr(s.staleTime,t))}function Gb(t,s){return!Oi(t.getCurrentResult(),s)}var pr,gr,At,qs,Qs,ri,id,Lx,Jb=(Lx=class extends mn{constructor(r,a){super();be(this,Qs);be(this,pr);be(this,gr);be(this,At);be(this,qs);xe(this,pr,r),this.setOptions(a),this.bindMethods(),Se(this,Qs,ri).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var n;const a=this.options;this.options=I(this,pr).defaultMutationOptions(r),Oi(this.options,a)||I(this,pr).getMutationCache().notify({type:"observerOptionsUpdated",mutation:I(this,At),observer:this}),a!=null&&a.mutationKey&&this.options.mutationKey&&da(a.mutationKey)!==da(this.options.mutationKey)?this.reset():((n=I(this,At))==null?void 0:n.state.status)==="pending"&&I(this,At).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=I(this,At))==null||r.removeObserver(this)}onMutationUpdate(r){Se(this,Qs,ri).call(this),Se(this,Qs,id).call(this,r)}getCurrentResult(){return I(this,gr)}reset(){var r;(r=I(this,At))==null||r.removeObserver(this),xe(this,At,void 0),Se(this,Qs,ri).call(this),Se(this,Qs,id).call(this)}mutate(r,a){var n;return xe(this,qs,a),(n=I(this,At))==null||n.removeObserver(this),xe(this,At,I(this,pr).getMutationCache().build(I(this,pr),this.options)),I(this,At).addObserver(this),I(this,At).execute(r)}},pr=new WeakMap,gr=new WeakMap,At=new WeakMap,qs=new WeakMap,Qs=new WeakSet,ri=function(){var a;const r=((a=I(this,At))==null?void 0:a.state)??hp();xe(this,gr,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},id=function(r){nt.batch(()=>{var a,n,l,i,o,c,d,h;if(I(this,qs)&&this.hasListeners()){const m=I(this,gr).variables,u=I(this,gr).context;(r==null?void 0:r.type)==="success"?((n=(a=I(this,qs)).onSuccess)==null||n.call(a,r.data,m,u),(i=(l=I(this,qs)).onSettled)==null||i.call(l,r.data,null,m,u)):(r==null?void 0:r.type)==="error"&&((c=(o=I(this,qs)).onError)==null||c.call(o,r.error,m,u),(h=(d=I(this,qs)).onSettled)==null||h.call(d,void 0,r.error,m,u))}this.listeners.forEach(m=>{m(I(this,gr))})})},Lx),gp=j.createContext(void 0),et=t=>{const s=j.useContext(gp);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},Yb=({client:t,children:s})=>(j.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(gp.Provider,{value:t,children:s})),fp=j.createContext(!1),Xb=()=>j.useContext(fp);fp.Provider;function Zb(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var ev=j.createContext(Zb()),tv=()=>j.useContext(ev),sv=(t,s)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(s.isReset()||(t.retryOnMount=!1))},rv=t=>{j.useEffect(()=>{t.clearReset()},[t])},av=({result:t,errorResetBoundary:s,throwOnError:r,query:a,suspense:n})=>t.isError&&!s.isReset()&&!t.isFetching&&a&&(n&&t.data===void 0||op(r,[t.error,a])),nv=t=>{if(t.suspense){const s=a=>a==="static"?a:Math.max(a??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...a)=>s(r(...a)):s(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},lv=(t,s)=>t.isLoading&&t.isFetching&&!s,iv=(t,s)=>(t==null?void 0:t.suspense)&&s.isPending,Ym=(t,s,r)=>s.fetchOptimistic(t).catch(()=>{r.clearReset()});function ov(t,s,r){var m,u,g,b,f;const a=Xb(),n=tv(),l=et(),i=l.defaultQueryOptions(t);(u=(m=l.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||u.call(m,i),i._optimisticResults=a?"isRestoring":"optimistic",nv(i),sv(i,n),rv(n);const o=!l.getQueryCache().get(i.queryHash),[c]=j.useState(()=>new s(l,i)),d=c.getOptimisticResult(i),h=!a&&t.subscribed!==!1;if(j.useSyncExternalStore(j.useCallback(v=>{const y=h?c.subscribe(nt.batchCalls(v)):Ft;return c.updateResult(),y},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),j.useEffect(()=>{c.setOptions(i)},[i,c]),iv(i,d))throw Ym(i,c,n);if(av({result:d,errorResetBoundary:n,throwOnError:i.throwOnError,query:l.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw d.error;if((b=(g=l.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||b.call(g,i,d),i.experimental_prefetchInRender&&!ca&&lv(d,a)){const v=o?Ym(i,c,n):(f=l.getQueryCache().get(i.queryHash))==null?void 0:f.promise;v==null||v.catch(Ft).finally(()=>{c.updateResult()})}return i.notifyOnChangeProps?d:c.trackResult(d)}function te(t,s){return ov(t,Wb)}function me(t,s){const r=et(),[a]=j.useState(()=>new Jb(r,t));j.useEffect(()=>{a.setOptions(t)},[a,t]);const n=j.useSyncExternalStore(j.useCallback(i=>a.subscribe(nt.batchCalls(i)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),l=j.useCallback((i,o)=>{a.mutate(i,o).catch(Ft)},[a]);if(n.error&&op(a.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:l,mutateAsync:n.mutate}}const Xm=t=>{let s;const r=new Set,a=(d,h)=>{const m=typeof d=="function"?d(s):d;if(!Object.is(m,s)){const u=s;s=h??(typeof m!="object"||m===null)?m:Object.assign({},s,m),r.forEach(g=>g(s,u))}},n=()=>s,o={setState:a,getState:n,getInitialState:()=>c,subscribe:d=>(r.add(d),()=>r.delete(d))},c=s=t(a,n,o);return o},cv=t=>t?Xm(t):Xm,dv=t=>t;function uv(t,s=dv){const r=ht.useSyncExternalStore(t.subscribe,ht.useCallback(()=>s(t.getState()),[t,s]),ht.useCallback(()=>s(t.getInitialState()),[t,s]));return ht.useDebugValue(r),r}const mv=t=>{const s=cv(t),r=a=>uv(s,a);return Object.assign(r,s),r},xv=t=>mv;function hv(t,s){let r;try{r=t()}catch{return}return{getItem:n=>{var l;const i=c=>c===null?null:JSON.parse(c,void 0),o=(l=r.getItem(n))!=null?l:null;return o instanceof Promise?o.then(i):i(o)},setItem:(n,l)=>r.setItem(n,JSON.stringify(l,void 0)),removeItem:n=>r.removeItem(n)}}const od=t=>s=>{try{const r=t(s);return r instanceof Promise?r:{then(a){return od(a)(r)},catch(a){return this}}}catch(r){return{then(a){return this},catch(a){return od(a)(r)}}}},pv=(t,s)=>(r,a,n)=>{let l={storage:hv(()=>localStorage),partialize:f=>f,version:0,merge:(f,v)=>({...v,...f}),...s},i=!1;const o=new Set,c=new Set;let d=l.storage;if(!d)return t((...f)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),r(...f)},a,n);const h=()=>{const f=l.partialize({...a()});return d.setItem(l.name,{state:f,version:l.version})},m=n.setState;n.setState=(f,v)=>(m(f,v),h());const u=t((...f)=>(r(...f),h()),a,n);n.getInitialState=()=>u;let g;const b=()=>{var f,v;if(!d)return;i=!1,o.forEach(p=>{var x;return p((x=a())!=null?x:u)});const y=((v=l.onRehydrateStorage)==null?void 0:v.call(l,(f=a())!=null?f:u))||void 0;return od(d.getItem.bind(d))(l.name).then(p=>{if(p)if(typeof p.version=="number"&&p.version!==l.version){if(l.migrate){const x=l.migrate(p.state,p.version);return x instanceof Promise?x.then(w=>[!0,w]):[!0,x]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,p.state];return[!1,void 0]}).then(p=>{var x;const[w,R]=p;if(g=l.merge(R,(x=a())!=null?x:u),r(g,!0),w)return h()}).then(()=>{y==null||y(g,void 0),g=a(),i=!0,c.forEach(p=>p(g))}).catch(p=>{y==null||y(void 0,p)})};return n.persist={setOptions:f=>{l={...l,...f},f.storage&&(d=f.storage)},clearStorage:()=>{d==null||d.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>b(),hasHydrated:()=>i,onHydrate:f=>(o.add(f),()=>{o.delete(f)}),onFinishHydration:f=>(c.add(f),()=>{c.delete(f)})},l.skipHydration||b(),g||u},gv=pv;function yp(t,s){return function(){return t.apply(s,arguments)}}const{toString:fv}=Object.prototype,{getPrototypeOf:yu}=Object,{iterator:ao,toStringTag:bp}=Symbol,no=(t=>s=>{const r=fv.call(s);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ws=t=>(t=t.toLowerCase(),s=>no(s)===t),lo=t=>s=>typeof s===t,{isArray:xn}=Array,ol=lo("undefined");function vl(t){return t!==null&&!ol(t)&&t.constructor!==null&&!ol(t.constructor)&&zt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const vp=ws("ArrayBuffer");function yv(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&vp(t.buffer),s}const bv=lo("string"),zt=lo("function"),jp=lo("number"),jl=t=>t!==null&&typeof t=="object",vv=t=>t===!0||t===!1,ai=t=>{if(no(t)!=="object")return!1;const s=yu(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(bp in t)&&!(ao in t)},jv=t=>{if(!jl(t)||vl(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},wv=ws("Date"),Nv=ws("File"),_v=ws("Blob"),kv=ws("FileList"),Sv=t=>jl(t)&&zt(t.pipe),Cv=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||zt(t.append)&&((s=no(t))==="formdata"||s==="object"&&zt(t.toString)&&t.toString()==="[object FormData]"))},Ev=ws("URLSearchParams"),[Fv,Pv,Tv,Rv]=["ReadableStream","Request","Response","Headers"].map(ws),Ov=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function wl(t,s,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let a,n;if(typeof t!="object"&&(t=[t]),xn(t))for(a=0,n=t.length;a<n;a++)s.call(null,t[a],a,t);else{if(vl(t))return;const l=r?Object.getOwnPropertyNames(t):Object.keys(t),i=l.length;let o;for(a=0;a<i;a++)o=l[a],s.call(null,t[o],o,t)}}function wp(t,s){if(vl(t))return null;s=s.toLowerCase();const r=Object.keys(t);let a=r.length,n;for(;a-- >0;)if(n=r[a],s===n.toLowerCase())return n;return null}const Ur=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Np=t=>!ol(t)&&t!==Ur;function cd(){const{caseless:t}=Np(this)&&this||{},s={},r=(a,n)=>{const l=t&&wp(s,n)||n;ai(s[l])&&ai(a)?s[l]=cd(s[l],a):ai(a)?s[l]=cd({},a):xn(a)?s[l]=a.slice():s[l]=a};for(let a=0,n=arguments.length;a<n;a++)arguments[a]&&wl(arguments[a],r);return s}const Av=(t,s,r,{allOwnKeys:a}={})=>(wl(s,(n,l)=>{r&&zt(n)?t[l]=yp(n,r):t[l]=n},{allOwnKeys:a}),t),Lv=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Mv=(t,s,r,a)=>{t.prototype=Object.create(s.prototype,a),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),r&&Object.assign(t.prototype,r)},Dv=(t,s,r,a)=>{let n,l,i;const o={};if(s=s||{},t==null)return s;do{for(n=Object.getOwnPropertyNames(t),l=n.length;l-- >0;)i=n[l],(!a||a(i,t,s))&&!o[i]&&(s[i]=t[i],o[i]=!0);t=r!==!1&&yu(t)}while(t&&(!r||r(t,s))&&t!==Object.prototype);return s},$v=(t,s,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=s.length;const a=t.indexOf(s,r);return a!==-1&&a===r},qv=t=>{if(!t)return null;if(xn(t))return t;let s=t.length;if(!jp(s))return null;const r=new Array(s);for(;s-- >0;)r[s]=t[s];return r},Iv=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&yu(Uint8Array)),zv=(t,s)=>{const a=(t&&t[ao]).call(t);let n;for(;(n=a.next())&&!n.done;){const l=n.value;s.call(t,l[0],l[1])}},Bv=(t,s)=>{let r;const a=[];for(;(r=t.exec(s))!==null;)a.push(r);return a},Uv=ws("HTMLFormElement"),Qv=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,n){return a.toUpperCase()+n}),Zm=(({hasOwnProperty:t})=>(s,r)=>t.call(s,r))(Object.prototype),Vv=ws("RegExp"),_p=(t,s)=>{const r=Object.getOwnPropertyDescriptors(t),a={};wl(r,(n,l)=>{let i;(i=s(n,l,t))!==!1&&(a[l]=i||n)}),Object.defineProperties(t,a)},Kv=t=>{_p(t,(s,r)=>{if(zt(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=t[r];if(zt(a)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Wv=(t,s)=>{const r={},a=n=>{n.forEach(l=>{r[l]=!0})};return xn(t)?a(t):a(String(t).split(s)),r},Hv=()=>{},Gv=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function Jv(t){return!!(t&&zt(t.append)&&t[bp]==="FormData"&&t[ao])}const Yv=t=>{const s=new Array(10),r=(a,n)=>{if(jl(a)){if(s.indexOf(a)>=0)return;if(vl(a))return a;if(!("toJSON"in a)){s[n]=a;const l=xn(a)?[]:{};return wl(a,(i,o)=>{const c=r(i,n+1);!ol(c)&&(l[o]=c)}),s[n]=void 0,l}}return a};return r(t,0)},Xv=ws("AsyncFunction"),Zv=t=>t&&(jl(t)||zt(t))&&zt(t.then)&&zt(t.catch),kp=((t,s)=>t?setImmediate:s?((r,a)=>(Ur.addEventListener("message",({source:n,data:l})=>{n===Ur&&l===r&&a.length&&a.shift()()},!1),n=>{a.push(n),Ur.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",zt(Ur.postMessage)),ej=typeof queueMicrotask<"u"?queueMicrotask.bind(Ur):typeof process<"u"&&process.nextTick||kp,tj=t=>t!=null&&zt(t[ao]),J={isArray:xn,isArrayBuffer:vp,isBuffer:vl,isFormData:Cv,isArrayBufferView:yv,isString:bv,isNumber:jp,isBoolean:vv,isObject:jl,isPlainObject:ai,isEmptyObject:jv,isReadableStream:Fv,isRequest:Pv,isResponse:Tv,isHeaders:Rv,isUndefined:ol,isDate:wv,isFile:Nv,isBlob:_v,isRegExp:Vv,isFunction:zt,isStream:Sv,isURLSearchParams:Ev,isTypedArray:Iv,isFileList:kv,forEach:wl,merge:cd,extend:Av,trim:Ov,stripBOM:Lv,inherits:Mv,toFlatObject:Dv,kindOf:no,kindOfTest:ws,endsWith:$v,toArray:qv,forEachEntry:zv,matchAll:Bv,isHTMLForm:Uv,hasOwnProperty:Zm,hasOwnProp:Zm,reduceDescriptors:_p,freezeMethods:Kv,toObjectSet:Wv,toCamelCase:Qv,noop:Hv,toFiniteNumber:Gv,findKey:wp,global:Ur,isContextDefined:Np,isSpecCompliantForm:Jv,toJSONObject:Yv,isAsyncFn:Xv,isThenable:Zv,setImmediate:kp,asap:ej,isIterable:tj};function Ne(t,s,r,a,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),r&&(this.config=r),a&&(this.request=a),n&&(this.response=n,this.status=n.status?n.status:null)}J.inherits(Ne,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:J.toJSONObject(this.config),code:this.code,status:this.status}}});const Sp=Ne.prototype,Cp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Cp[t]={value:t}});Object.defineProperties(Ne,Cp);Object.defineProperty(Sp,"isAxiosError",{value:!0});Ne.from=(t,s,r,a,n,l)=>{const i=Object.create(Sp);return J.toFlatObject(t,i,function(c){return c!==Error.prototype},o=>o!=="isAxiosError"),Ne.call(i,t.message,s,r,a,n),i.cause=t,i.name=t.name,l&&Object.assign(i,l),i};const sj=null;function dd(t){return J.isPlainObject(t)||J.isArray(t)}function Ep(t){return J.endsWith(t,"[]")?t.slice(0,-2):t}function ex(t,s,r){return t?t.concat(s).map(function(n,l){return n=Ep(n),!r&&l?"["+n+"]":n}).join(r?".":""):s}function rj(t){return J.isArray(t)&&!t.some(dd)}const aj=J.toFlatObject(J,{},null,function(s){return/^is[A-Z]/.test(s)});function io(t,s,r){if(!J.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,r=J.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(f,v){return!J.isUndefined(v[f])});const a=r.metaTokens,n=r.visitor||h,l=r.dots,i=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&J.isSpecCompliantForm(s);if(!J.isFunction(n))throw new TypeError("visitor must be a function");function d(b){if(b===null)return"";if(J.isDate(b))return b.toISOString();if(J.isBoolean(b))return b.toString();if(!c&&J.isBlob(b))throw new Ne("Blob is not supported. Use a Buffer instead.");return J.isArrayBuffer(b)||J.isTypedArray(b)?c&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function h(b,f,v){let y=b;if(b&&!v&&typeof b=="object"){if(J.endsWith(f,"{}"))f=a?f:f.slice(0,-2),b=JSON.stringify(b);else if(J.isArray(b)&&rj(b)||(J.isFileList(b)||J.endsWith(f,"[]"))&&(y=J.toArray(b)))return f=Ep(f),y.forEach(function(x,w){!(J.isUndefined(x)||x===null)&&s.append(i===!0?ex([f],w,l):i===null?f:f+"[]",d(x))}),!1}return dd(b)?!0:(s.append(ex(v,f,l),d(b)),!1)}const m=[],u=Object.assign(aj,{defaultVisitor:h,convertValue:d,isVisitable:dd});function g(b,f){if(!J.isUndefined(b)){if(m.indexOf(b)!==-1)throw Error("Circular reference detected in "+f.join("."));m.push(b),J.forEach(b,function(y,p){(!(J.isUndefined(y)||y===null)&&n.call(s,y,J.isString(p)?p.trim():p,f,u))===!0&&g(y,f?f.concat(p):[p])}),m.pop()}}if(!J.isObject(t))throw new TypeError("data must be an object");return g(t),s}function tx(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(a){return s[a]})}function bu(t,s){this._pairs=[],t&&io(t,this,s)}const Fp=bu.prototype;Fp.append=function(s,r){this._pairs.push([s,r])};Fp.toString=function(s){const r=s?function(a){return s.call(this,a,tx)}:tx;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function nj(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Pp(t,s,r){if(!s)return t;const a=r&&r.encode||nj;J.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let l;if(n?l=n(s,r):l=J.isURLSearchParams(s)?s.toString():new bu(s,r).toString(a),l){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class sx{constructor(){this.handlers=[]}use(s,r,a){return this.handlers.push({fulfilled:s,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){J.forEach(this.handlers,function(a){a!==null&&s(a)})}}const Tp={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},lj=typeof URLSearchParams<"u"?URLSearchParams:bu,ij=typeof FormData<"u"?FormData:null,oj=typeof Blob<"u"?Blob:null,cj={isBrowser:!0,classes:{URLSearchParams:lj,FormData:ij,Blob:oj},protocols:["http","https","file","blob","url","data"]},vu=typeof window<"u"&&typeof document<"u",ud=typeof navigator=="object"&&navigator||void 0,dj=vu&&(!ud||["ReactNative","NativeScript","NS"].indexOf(ud.product)<0),uj=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",mj=vu&&window.location.href||"http://localhost",xj=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:vu,hasStandardBrowserEnv:dj,hasStandardBrowserWebWorkerEnv:uj,navigator:ud,origin:mj},Symbol.toStringTag,{value:"Module"})),wt={...xj,...cj};function hj(t,s){return io(t,new wt.classes.URLSearchParams,{visitor:function(r,a,n,l){return wt.isNode&&J.isBuffer(r)?(this.append(a,r.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...s})}function pj(t){return J.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function gj(t){const s={},r=Object.keys(t);let a;const n=r.length;let l;for(a=0;a<n;a++)l=r[a],s[l]=t[l];return s}function Rp(t){function s(r,a,n,l){let i=r[l++];if(i==="__proto__")return!0;const o=Number.isFinite(+i),c=l>=r.length;return i=!i&&J.isArray(n)?n.length:i,c?(J.hasOwnProp(n,i)?n[i]=[n[i],a]:n[i]=a,!o):((!n[i]||!J.isObject(n[i]))&&(n[i]=[]),s(r,a,n[i],l)&&J.isArray(n[i])&&(n[i]=gj(n[i])),!o)}if(J.isFormData(t)&&J.isFunction(t.entries)){const r={};return J.forEachEntry(t,(a,n)=>{s(pj(a),n,r,0)}),r}return null}function fj(t,s,r){if(J.isString(t))try{return(s||JSON.parse)(t),J.trim(t)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(t)}const Nl={transitional:Tp,adapter:["xhr","http","fetch"],transformRequest:[function(s,r){const a=r.getContentType()||"",n=a.indexOf("application/json")>-1,l=J.isObject(s);if(l&&J.isHTMLForm(s)&&(s=new FormData(s)),J.isFormData(s))return n?JSON.stringify(Rp(s)):s;if(J.isArrayBuffer(s)||J.isBuffer(s)||J.isStream(s)||J.isFile(s)||J.isBlob(s)||J.isReadableStream(s))return s;if(J.isArrayBufferView(s))return s.buffer;if(J.isURLSearchParams(s))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let o;if(l){if(a.indexOf("application/x-www-form-urlencoded")>-1)return hj(s,this.formSerializer).toString();if((o=J.isFileList(s))||a.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return io(o?{"files[]":s}:s,c&&new c,this.formSerializer)}}return l||n?(r.setContentType("application/json",!1),fj(s)):s}],transformResponse:[function(s){const r=this.transitional||Nl.transitional,a=r&&r.forcedJSONParsing,n=this.responseType==="json";if(J.isResponse(s)||J.isReadableStream(s))return s;if(s&&J.isString(s)&&(a&&!this.responseType||n)){const i=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(s)}catch(o){if(i)throw o.name==="SyntaxError"?Ne.from(o,Ne.ERR_BAD_RESPONSE,this,null,this.response):o}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wt.classes.FormData,Blob:wt.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};J.forEach(["delete","get","head","post","put","patch"],t=>{Nl.headers[t]={}});const yj=J.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),bj=t=>{const s={};let r,a,n;return t&&t.split(`
`).forEach(function(i){n=i.indexOf(":"),r=i.substring(0,n).trim().toLowerCase(),a=i.substring(n+1).trim(),!(!r||s[r]&&yj[r])&&(r==="set-cookie"?s[r]?s[r].push(a):s[r]=[a]:s[r]=s[r]?s[r]+", "+a:a)}),s},rx=Symbol("internals");function _n(t){return t&&String(t).trim().toLowerCase()}function ni(t){return t===!1||t==null?t:J.isArray(t)?t.map(ni):String(t)}function vj(t){const s=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(t);)s[a[1]]=a[2];return s}const jj=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ko(t,s,r,a,n){if(J.isFunction(a))return a.call(this,s,r);if(n&&(s=r),!!J.isString(s)){if(J.isString(a))return s.indexOf(a)!==-1;if(J.isRegExp(a))return a.test(s)}}function wj(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,r,a)=>r.toUpperCase()+a)}function Nj(t,s){const r=J.toCamelCase(" "+s);["get","set","has"].forEach(a=>{Object.defineProperty(t,a+r,{value:function(n,l,i){return this[a].call(this,s,n,l,i)},configurable:!0})})}let Bt=class{constructor(s){s&&this.set(s)}set(s,r,a){const n=this;function l(o,c,d){const h=_n(c);if(!h)throw new Error("header name must be a non-empty string");const m=J.findKey(n,h);(!m||n[m]===void 0||d===!0||d===void 0&&n[m]!==!1)&&(n[m||c]=ni(o))}const i=(o,c)=>J.forEach(o,(d,h)=>l(d,h,c));if(J.isPlainObject(s)||s instanceof this.constructor)i(s,r);else if(J.isString(s)&&(s=s.trim())&&!jj(s))i(bj(s),r);else if(J.isObject(s)&&J.isIterable(s)){let o={},c,d;for(const h of s){if(!J.isArray(h))throw TypeError("Object iterator must return a key-value pair");o[d=h[0]]=(c=o[d])?J.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}i(o,r)}else s!=null&&l(r,s,a);return this}get(s,r){if(s=_n(s),s){const a=J.findKey(this,s);if(a){const n=this[a];if(!r)return n;if(r===!0)return vj(n);if(J.isFunction(r))return r.call(this,n,a);if(J.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,r){if(s=_n(s),s){const a=J.findKey(this,s);return!!(a&&this[a]!==void 0&&(!r||Ko(this,this[a],a,r)))}return!1}delete(s,r){const a=this;let n=!1;function l(i){if(i=_n(i),i){const o=J.findKey(a,i);o&&(!r||Ko(a,a[o],o,r))&&(delete a[o],n=!0)}}return J.isArray(s)?s.forEach(l):l(s),n}clear(s){const r=Object.keys(this);let a=r.length,n=!1;for(;a--;){const l=r[a];(!s||Ko(this,this[l],l,s,!0))&&(delete this[l],n=!0)}return n}normalize(s){const r=this,a={};return J.forEach(this,(n,l)=>{const i=J.findKey(a,l);if(i){r[i]=ni(n),delete r[l];return}const o=s?wj(l):String(l).trim();o!==l&&delete r[l],r[o]=ni(n),a[o]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const r=Object.create(null);return J.forEach(this,(a,n)=>{a!=null&&a!==!1&&(r[n]=s&&J.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,r])=>s+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...r){const a=new this(s);return r.forEach(n=>a.set(n)),a}static accessor(s){const a=(this[rx]=this[rx]={accessors:{}}).accessors,n=this.prototype;function l(i){const o=_n(i);a[o]||(Nj(n,i),a[o]=!0)}return J.isArray(s)?s.forEach(l):l(s),this}};Bt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);J.reduceDescriptors(Bt.prototype,({value:t},s)=>{let r=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(a){this[r]=a}}});J.freezeMethods(Bt);function Wo(t,s){const r=this||Nl,a=s||r,n=Bt.from(a.headers);let l=a.data;return J.forEach(t,function(o){l=o.call(r,l,n.normalize(),s?s.status:void 0)}),n.normalize(),l}function Op(t){return!!(t&&t.__CANCEL__)}function hn(t,s,r){Ne.call(this,t??"canceled",Ne.ERR_CANCELED,s,r),this.name="CanceledError"}J.inherits(hn,Ne,{__CANCEL__:!0});function Ap(t,s,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?t(r):s(new Ne("Request failed with status code "+r.status,[Ne.ERR_BAD_REQUEST,Ne.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function _j(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function kj(t,s){t=t||10;const r=new Array(t),a=new Array(t);let n=0,l=0,i;return s=s!==void 0?s:1e3,function(c){const d=Date.now(),h=a[l];i||(i=d),r[n]=c,a[n]=d;let m=l,u=0;for(;m!==n;)u+=r[m++],m=m%t;if(n=(n+1)%t,n===l&&(l=(l+1)%t),d-i<s)return;const g=h&&d-h;return g?Math.round(u*1e3/g):void 0}}function Sj(t,s){let r=0,a=1e3/s,n,l;const i=(d,h=Date.now())=>{r=h,n=null,l&&(clearTimeout(l),l=null),t(...d)};return[(...d)=>{const h=Date.now(),m=h-r;m>=a?i(d,h):(n=d,l||(l=setTimeout(()=>{l=null,i(n)},a-m)))},()=>n&&i(n)]}const Li=(t,s,r=3)=>{let a=0;const n=kj(50,250);return Sj(l=>{const i=l.loaded,o=l.lengthComputable?l.total:void 0,c=i-a,d=n(c),h=i<=o;a=i;const m={loaded:i,total:o,progress:o?i/o:void 0,bytes:c,rate:d||void 0,estimated:d&&o&&h?(o-i)/d:void 0,event:l,lengthComputable:o!=null,[s?"download":"upload"]:!0};t(m)},r)},ax=(t,s)=>{const r=t!=null;return[a=>s[0]({lengthComputable:r,total:t,loaded:a}),s[1]]},nx=t=>(...s)=>J.asap(()=>t(...s)),Cj=wt.hasStandardBrowserEnv?((t,s)=>r=>(r=new URL(r,wt.origin),t.protocol===r.protocol&&t.host===r.host&&(s||t.port===r.port)))(new URL(wt.origin),wt.navigator&&/(msie|trident)/i.test(wt.navigator.userAgent)):()=>!0,Ej=wt.hasStandardBrowserEnv?{write(t,s,r,a,n,l){const i=[t+"="+encodeURIComponent(s)];J.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),J.isString(a)&&i.push("path="+a),J.isString(n)&&i.push("domain="+n),l===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const s=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Fj(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Pj(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function Lp(t,s,r){let a=!Fj(s);return t&&(a||r==!1)?Pj(t,s):s}const lx=t=>t instanceof Bt?{...t}:t;function ua(t,s){s=s||{};const r={};function a(d,h,m,u){return J.isPlainObject(d)&&J.isPlainObject(h)?J.merge.call({caseless:u},d,h):J.isPlainObject(h)?J.merge({},h):J.isArray(h)?h.slice():h}function n(d,h,m,u){if(J.isUndefined(h)){if(!J.isUndefined(d))return a(void 0,d,m,u)}else return a(d,h,m,u)}function l(d,h){if(!J.isUndefined(h))return a(void 0,h)}function i(d,h){if(J.isUndefined(h)){if(!J.isUndefined(d))return a(void 0,d)}else return a(void 0,h)}function o(d,h,m){if(m in s)return a(d,h);if(m in t)return a(void 0,d)}const c={url:l,method:l,data:l,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(d,h,m)=>n(lx(d),lx(h),m,!0)};return J.forEach(Object.keys({...t,...s}),function(h){const m=c[h]||n,u=m(t[h],s[h],h);J.isUndefined(u)&&m!==o||(r[h]=u)}),r}const Mp=t=>{const s=ua({},t);let{data:r,withXSRFToken:a,xsrfHeaderName:n,xsrfCookieName:l,headers:i,auth:o}=s;s.headers=i=Bt.from(i),s.url=Pp(Lp(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&i.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let c;if(J.isFormData(r)){if(wt.hasStandardBrowserEnv||wt.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((c=i.getContentType())!==!1){const[d,...h]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];i.setContentType([d||"multipart/form-data",...h].join("; "))}}if(wt.hasStandardBrowserEnv&&(a&&J.isFunction(a)&&(a=a(s)),a||a!==!1&&Cj(s.url))){const d=n&&l&&Ej.read(l);d&&i.set(n,d)}return s},Tj=typeof XMLHttpRequest<"u",Rj=Tj&&function(t){return new Promise(function(r,a){const n=Mp(t);let l=n.data;const i=Bt.from(n.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:d}=n,h,m,u,g,b;function f(){g&&g(),b&&b(),n.cancelToken&&n.cancelToken.unsubscribe(h),n.signal&&n.signal.removeEventListener("abort",h)}let v=new XMLHttpRequest;v.open(n.method.toUpperCase(),n.url,!0),v.timeout=n.timeout;function y(){if(!v)return;const x=Bt.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),R={data:!o||o==="text"||o==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:x,config:t,request:v};Ap(function(k){r(k),f()},function(k){a(k),f()},R),v=null}"onloadend"in v?v.onloadend=y:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(y)},v.onabort=function(){v&&(a(new Ne("Request aborted",Ne.ECONNABORTED,t,v)),v=null)},v.onerror=function(){a(new Ne("Network Error",Ne.ERR_NETWORK,t,v)),v=null},v.ontimeout=function(){let w=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const R=n.transitional||Tp;n.timeoutErrorMessage&&(w=n.timeoutErrorMessage),a(new Ne(w,R.clarifyTimeoutError?Ne.ETIMEDOUT:Ne.ECONNABORTED,t,v)),v=null},l===void 0&&i.setContentType(null),"setRequestHeader"in v&&J.forEach(i.toJSON(),function(w,R){v.setRequestHeader(R,w)}),J.isUndefined(n.withCredentials)||(v.withCredentials=!!n.withCredentials),o&&o!=="json"&&(v.responseType=n.responseType),d&&([u,b]=Li(d,!0),v.addEventListener("progress",u)),c&&v.upload&&([m,g]=Li(c),v.upload.addEventListener("progress",m),v.upload.addEventListener("loadend",g)),(n.cancelToken||n.signal)&&(h=x=>{v&&(a(!x||x.type?new hn(null,t,v):x),v.abort(),v=null)},n.cancelToken&&n.cancelToken.subscribe(h),n.signal&&(n.signal.aborted?h():n.signal.addEventListener("abort",h)));const p=_j(n.url);if(p&&wt.protocols.indexOf(p)===-1){a(new Ne("Unsupported protocol "+p+":",Ne.ERR_BAD_REQUEST,t));return}v.send(l||null)})},Oj=(t,s)=>{const{length:r}=t=t?t.filter(Boolean):[];if(s||r){let a=new AbortController,n;const l=function(d){if(!n){n=!0,o();const h=d instanceof Error?d:this.reason;a.abort(h instanceof Ne?h:new hn(h instanceof Error?h.message:h))}};let i=s&&setTimeout(()=>{i=null,l(new Ne(`timeout ${s} of ms exceeded`,Ne.ETIMEDOUT))},s);const o=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(l):d.removeEventListener("abort",l)}),t=null)};t.forEach(d=>d.addEventListener("abort",l));const{signal:c}=a;return c.unsubscribe=()=>J.asap(o),c}},Aj=function*(t,s){let r=t.byteLength;if(r<s){yield t;return}let a=0,n;for(;a<r;)n=a+s,yield t.slice(a,n),a=n},Lj=async function*(t,s){for await(const r of Mj(t))yield*Aj(r,s)},Mj=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:r,value:a}=await s.read();if(r)break;yield a}}finally{await s.cancel()}},ix=(t,s,r,a)=>{const n=Lj(t,s);let l=0,i,o=c=>{i||(i=!0,a&&a(c))};return new ReadableStream({async pull(c){try{const{done:d,value:h}=await n.next();if(d){o(),c.close();return}let m=h.byteLength;if(r){let u=l+=m;r(u)}c.enqueue(new Uint8Array(h))}catch(d){throw o(d),d}},cancel(c){return o(c),n.return()}},{highWaterMark:2})},oo=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Dp=oo&&typeof ReadableStream=="function",Dj=oo&&(typeof TextEncoder=="function"?(t=>s=>t.encode(s))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),$p=(t,...s)=>{try{return!!t(...s)}catch{return!1}},$j=Dp&&$p(()=>{let t=!1;const s=new Request(wt.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!s}),ox=64*1024,md=Dp&&$p(()=>J.isReadableStream(new Response("").body)),Mi={stream:md&&(t=>t.body)};oo&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(s=>{!Mi[s]&&(Mi[s]=J.isFunction(t[s])?r=>r[s]():(r,a)=>{throw new Ne(`Response type '${s}' is not supported`,Ne.ERR_NOT_SUPPORT,a)})})})(new Response);const qj=async t=>{if(t==null)return 0;if(J.isBlob(t))return t.size;if(J.isSpecCompliantForm(t))return(await new Request(wt.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(J.isArrayBufferView(t)||J.isArrayBuffer(t))return t.byteLength;if(J.isURLSearchParams(t)&&(t=t+""),J.isString(t))return(await Dj(t)).byteLength},Ij=async(t,s)=>{const r=J.toFiniteNumber(t.getContentLength());return r??qj(s)},zj=oo&&(async t=>{let{url:s,method:r,data:a,signal:n,cancelToken:l,timeout:i,onDownloadProgress:o,onUploadProgress:c,responseType:d,headers:h,withCredentials:m="same-origin",fetchOptions:u}=Mp(t);d=d?(d+"").toLowerCase():"text";let g=Oj([n,l&&l.toAbortSignal()],i),b;const f=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let v;try{if(c&&$j&&r!=="get"&&r!=="head"&&(v=await Ij(h,a))!==0){let R=new Request(s,{method:"POST",body:a,duplex:"half"}),N;if(J.isFormData(a)&&(N=R.headers.get("content-type"))&&h.setContentType(N),R.body){const[k,L]=ax(v,Li(nx(c)));a=ix(R.body,ox,k,L)}}J.isString(m)||(m=m?"include":"omit");const y="credentials"in Request.prototype;b=new Request(s,{...u,signal:g,method:r.toUpperCase(),headers:h.normalize().toJSON(),body:a,duplex:"half",credentials:y?m:void 0});let p=await fetch(b,u);const x=md&&(d==="stream"||d==="response");if(md&&(o||x&&f)){const R={};["status","statusText","headers"].forEach(E=>{R[E]=p[E]});const N=J.toFiniteNumber(p.headers.get("content-length")),[k,L]=o&&ax(N,Li(nx(o),!0))||[];p=new Response(ix(p.body,ox,k,()=>{L&&L(),f&&f()}),R)}d=d||"text";let w=await Mi[J.findKey(Mi,d)||"text"](p,t);return!x&&f&&f(),await new Promise((R,N)=>{Ap(R,N,{data:w,headers:Bt.from(p.headers),status:p.status,statusText:p.statusText,config:t,request:b})})}catch(y){throw f&&f(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new Ne("Network Error",Ne.ERR_NETWORK,t,b),{cause:y.cause||y}):Ne.from(y,y&&y.code,t,b)}}),xd={http:sj,xhr:Rj,fetch:zj};J.forEach(xd,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const cx=t=>`- ${t}`,Bj=t=>J.isFunction(t)||t===null||t===!1,qp={getAdapter:t=>{t=J.isArray(t)?t:[t];const{length:s}=t;let r,a;const n={};for(let l=0;l<s;l++){r=t[l];let i;if(a=r,!Bj(r)&&(a=xd[(i=String(r)).toLowerCase()],a===void 0))throw new Ne(`Unknown adapter '${i}'`);if(a)break;n[i||"#"+l]=a}if(!a){const l=Object.entries(n).map(([o,c])=>`adapter ${o} `+(c===!1?"is not supported by the environment":"is not available in the build"));let i=s?l.length>1?`since :
`+l.map(cx).join(`
`):" "+cx(l[0]):"as no adapter specified";throw new Ne("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return a},adapters:xd};function Ho(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new hn(null,t)}function dx(t){return Ho(t),t.headers=Bt.from(t.headers),t.data=Wo.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),qp.getAdapter(t.adapter||Nl.adapter)(t).then(function(a){return Ho(t),a.data=Wo.call(t,t.transformResponse,a),a.headers=Bt.from(a.headers),a},function(a){return Op(a)||(Ho(t),a&&a.response&&(a.response.data=Wo.call(t,t.transformResponse,a.response),a.response.headers=Bt.from(a.response.headers))),Promise.reject(a)})}const Ip="1.11.0",co={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{co[t]=function(a){return typeof a===t||"a"+(s<1?"n ":" ")+t}});const ux={};co.transitional=function(s,r,a){function n(l,i){return"[Axios v"+Ip+"] Transitional option '"+l+"'"+i+(a?". "+a:"")}return(l,i,o)=>{if(s===!1)throw new Ne(n(i," has been removed"+(r?" in "+r:"")),Ne.ERR_DEPRECATED);return r&&!ux[i]&&(ux[i]=!0,console.warn(n(i," has been deprecated since v"+r+" and will be removed in the near future"))),s?s(l,i,o):!0}};co.spelling=function(s){return(r,a)=>(console.warn(`${a} is likely a misspelling of ${s}`),!0)};function Uj(t,s,r){if(typeof t!="object")throw new Ne("options must be an object",Ne.ERR_BAD_OPTION_VALUE);const a=Object.keys(t);let n=a.length;for(;n-- >0;){const l=a[n],i=s[l];if(i){const o=t[l],c=o===void 0||i(o,l,t);if(c!==!0)throw new Ne("option "+l+" must be "+c,Ne.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ne("Unknown option "+l,Ne.ERR_BAD_OPTION)}}const li={assertOptions:Uj,validators:co},_s=li.validators;let ta=class{constructor(s){this.defaults=s||{},this.interceptors={request:new sx,response:new sx}}async request(s,r){try{return await this._request(s,r)}catch(a){if(a instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const l=n.stack?n.stack.replace(/^.+\n/,""):"";try{a.stack?l&&!String(a.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+l):a.stack=l}catch{}}throw a}}_request(s,r){typeof s=="string"?(r=r||{},r.url=s):r=s||{},r=ua(this.defaults,r);const{transitional:a,paramsSerializer:n,headers:l}=r;a!==void 0&&li.assertOptions(a,{silentJSONParsing:_s.transitional(_s.boolean),forcedJSONParsing:_s.transitional(_s.boolean),clarifyTimeoutError:_s.transitional(_s.boolean)},!1),n!=null&&(J.isFunction(n)?r.paramsSerializer={serialize:n}:li.assertOptions(n,{encode:_s.function,serialize:_s.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),li.assertOptions(r,{baseUrl:_s.spelling("baseURL"),withXsrfToken:_s.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i=l&&J.merge(l.common,l[r.method]);l&&J.forEach(["delete","get","head","post","put","patch","common"],b=>{delete l[b]}),r.headers=Bt.concat(i,l);const o=[];let c=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(r)===!1||(c=c&&f.synchronous,o.unshift(f.fulfilled,f.rejected))});const d=[];this.interceptors.response.forEach(function(f){d.push(f.fulfilled,f.rejected)});let h,m=0,u;if(!c){const b=[dx.bind(this),void 0];for(b.unshift(...o),b.push(...d),u=b.length,h=Promise.resolve(r);m<u;)h=h.then(b[m++],b[m++]);return h}u=o.length;let g=r;for(m=0;m<u;){const b=o[m++],f=o[m++];try{g=b(g)}catch(v){f.call(this,v);break}}try{h=dx.call(this,g)}catch(b){return Promise.reject(b)}for(m=0,u=d.length;m<u;)h=h.then(d[m++],d[m++]);return h}getUri(s){s=ua(this.defaults,s);const r=Lp(s.baseURL,s.url,s.allowAbsoluteUrls);return Pp(r,s.params,s.paramsSerializer)}};J.forEach(["delete","get","head","options"],function(s){ta.prototype[s]=function(r,a){return this.request(ua(a||{},{method:s,url:r,data:(a||{}).data}))}});J.forEach(["post","put","patch"],function(s){function r(a){return function(l,i,o){return this.request(ua(o||{},{method:s,headers:a?{"Content-Type":"multipart/form-data"}:{},url:l,data:i}))}}ta.prototype[s]=r(),ta.prototype[s+"Form"]=r(!0)});let Qj=class zp{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(l){r=l});const a=this;this.promise.then(n=>{if(!a._listeners)return;let l=a._listeners.length;for(;l-- >0;)a._listeners[l](n);a._listeners=null}),this.promise.then=n=>{let l;const i=new Promise(o=>{a.subscribe(o),l=o}).then(n);return i.cancel=function(){a.unsubscribe(l)},i},s(function(l,i,o){a.reason||(a.reason=new hn(l,i,o),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const r=this._listeners.indexOf(s);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const s=new AbortController,r=a=>{s.abort(a)};return this.subscribe(r),s.signal.unsubscribe=()=>this.unsubscribe(r),s.signal}static source(){let s;return{token:new zp(function(n){s=n}),cancel:s}}};function Vj(t){return function(r){return t.apply(null,r)}}function Kj(t){return J.isObject(t)&&t.isAxiosError===!0}const hd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(hd).forEach(([t,s])=>{hd[s]=t});function Bp(t){const s=new ta(t),r=yp(ta.prototype.request,s);return J.extend(r,ta.prototype,s,{allOwnKeys:!0}),J.extend(r,s,null,{allOwnKeys:!0}),r.create=function(n){return Bp(ua(t,n))},r}const $=Bp(Nl);$.Axios=ta;$.CanceledError=hn;$.CancelToken=Qj;$.isCancel=Op;$.VERSION=Ip;$.toFormData=io;$.AxiosError=Ne;$.Cancel=$.CanceledError;$.all=function(s){return Promise.all(s)};$.spread=Vj;$.isAxiosError=Kj;$.mergeConfig=ua;$.AxiosHeaders=Bt;$.formToJSON=t=>Rp(J.isHTMLForm(t)?new FormData(t):t);$.getAdapter=qp.getAdapter;$.HttpStatusCode=hd;$.default=$;const{Axios:l1,AxiosError:i1,CanceledError:o1,isCancel:c1,CancelToken:d1,VERSION:u1,all:m1,Cancel:x1,isAxiosError:h1,spread:p1,toFormData:g1,AxiosHeaders:f1,HttpStatusCode:y1,formToJSON:b1,getAdapter:v1,mergeConfig:j1}=$,ae=xv()(gv((t,s)=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!0},error_message:null},notification_state:{unread_counts:{quotes:0,orders:0,messages:0,jobs:0,inventory_alerts:0},notifications:[],last_updated:null},feature_flags:{b2b_accounts:!1,inventory_management:!1,analytics_dashboard:!1,sla_scheduling:!1},system_config:{stripe_enabled:!1,deposit_percentage:50,tax_rate:15,emergency_booking_fee_percentage:20,company_info:{name:"SultanStamp",email:"info@sultanstamp.com",phone:"+353 87 470 0356"}},quote_builder_state:{current_step:1,selected_service_id:null,project_answers:{},uploaded_files:[],selected_tier_id:null,estimate_range:null,is_draft_saved:!1,draft_quote_id:null},booking_state:{selected_date:null,selected_time_slot:null,is_emergency_booking:!1,urgent_fee_amount:0,booking_step:"date_selection"},login_user:async(r,a)=>{var n,l;t(i=>({authentication_state:{...i.authentication_state,authentication_status:{...i.authentication_state.authentication_status,is_loading:!0},error_message:null}}));try{const i=await $.post("http://localhost:3000/api/auth/login",{email:r,password:a},{headers:{"Content-Type":"application/json"}}),{user:o,token:c}=i.data;t(d=>({authentication_state:{current_user:o,auth_token:c,authentication_status:{is_authenticated:!0,is_loading:!1},error_message:null}}))}catch(i){const o=((l=(n=i.response)==null?void 0:n.data)==null?void 0:l.message)||i.message||"Login failed. Please try again.";throw t(c=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1},error_message:o}})),new Error(o)}},logout_user:async()=>{const{auth_token:r}=s().authentication_state;try{r&&await $.post("http://localhost:3000/api/auth/logout",{},{headers:{Authorization:`Bearer ${r}`}})}catch(a){console.error("Logout error:",a)}t({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1},error_message:null},notification_state:{unread_counts:{quotes:0,orders:0,messages:0,jobs:0,inventory_alerts:0},notifications:[],last_updated:null}})},register_user:async(r,a,n,l,i,o)=>{var c,d;t(h=>({authentication_state:{...h.authentication_state,authentication_status:{...h.authentication_state.authentication_status,is_loading:!0},error_message:null}}));try{const h=await $.post("http://localhost:3000/api/auth/register",{email:r,password:a,name:n,phone:l||null,company_name:i||null,address:o||null},{headers:{"Content-Type":"application/json"}}),{user:m,token:u}=h.data;t(g=>({authentication_state:{current_user:m,auth_token:u,authentication_status:{is_authenticated:!0,is_loading:!1},error_message:null}}))}catch(h){const m=((d=(c=h.response)==null?void 0:c.data)==null?void 0:d.message)||h.message||"Registration failed. Please try again.";throw t(u=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1},error_message:m}})),new Error(m)}},initialize_auth:async()=>{const{authentication_state:r}=s(),a=r.auth_token;if(!a){t(n=>({authentication_state:{...n.authentication_state,authentication_status:{is_authenticated:!1,is_loading:!1}}}));return}try{const n=await $.get("http://localhost:3000/api/users/me",{headers:{Authorization:`Bearer ${a}`}}),{user:l,customer_profile:i,staff_profile:o}=n.data;t(c=>({authentication_state:{current_user:{...l,...i&&{customer_profile:i},...o&&{staff_profile:o}},auth_token:a,authentication_status:{is_authenticated:!0,is_loading:!1},error_message:null}}))}catch{t(l=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1},error_message:null}}))}},clear_auth_error:()=>{t(r=>({authentication_state:{...r.authentication_state,error_message:null}}))},update_user_profile:(r,a,n)=>{t(l=>l.authentication_state.current_user?{authentication_state:{...l.authentication_state,current_user:{...l.authentication_state.current_user,...r,...a&&{customer_profile:{...l.authentication_state.current_user.customer_profile,...a}},...n&&{staff_profile:{...l.authentication_state.current_user.staff_profile,...n}}}}}:l)},set_notifications:r=>{t(a=>({notification_state:{...a.notification_state,notifications:r,last_updated:new Date().toISOString()}}))},add_notification:r=>{t(a=>({notification_state:{...a.notification_state,notifications:[r,...a.notification_state.notifications],last_updated:new Date().toISOString()}}))},mark_notification_read:r=>{t(a=>({notification_state:{...a.notification_state,notifications:a.notification_state.notifications.map(n=>n.id===r?{...n,is_read:!0}:n)}}))},mark_all_notifications_read:()=>{t(r=>({notification_state:{...r.notification_state,notifications:r.notification_state.notifications.map(a=>({...a,is_read:!0})),unread_counts:{quotes:0,orders:0,messages:0,jobs:0,inventory_alerts:0}}}))},update_unread_counts:r=>{t(a=>({notification_state:{...a.notification_state,unread_counts:{...a.notification_state.unread_counts,...r}}}))},clear_notifications:()=>{t(r=>({notification_state:{unread_counts:{quotes:0,orders:0,messages:0,jobs:0,inventory_alerts:0},notifications:[],last_updated:null}}))},load_feature_flags:r=>{t({feature_flags:r})},update_feature_flag:(r,a)=>{t(n=>({feature_flags:{...n.feature_flags,[r]:a}}))},load_system_config:r=>{t(a=>({system_config:{...a.system_config,...r}}))},update_system_config:r=>{t(a=>({system_config:{...a.system_config,...r}}))},set_quote_step:r=>{t(a=>({quote_builder_state:{...a.quote_builder_state,current_step:r}}))},select_service:r=>{t(a=>({quote_builder_state:{...a.quote_builder_state,selected_service_id:r}}))},update_project_answer:(r,a)=>{t(n=>({quote_builder_state:{...n.quote_builder_state,project_answers:{...n.quote_builder_state.project_answers,[r]:a}}}))},update_project_answers:r=>{t(a=>({quote_builder_state:{...a.quote_builder_state,project_answers:{...a.quote_builder_state.project_answers,...r}}}))},add_uploaded_file:r=>{t(a=>({quote_builder_state:{...a.quote_builder_state,uploaded_files:[...a.quote_builder_state.uploaded_files,r]}}))},remove_uploaded_file:r=>{t(a=>({quote_builder_state:{...a.quote_builder_state,uploaded_files:a.quote_builder_state.uploaded_files.filter(n=>n.id!==r)}}))},update_uploaded_file:(r,a)=>{t(n=>({quote_builder_state:{...n.quote_builder_state,uploaded_files:n.quote_builder_state.uploaded_files.map(l=>l.id===r?{...l,...a}:l)}}))},select_tier:r=>{t(a=>({quote_builder_state:{...a.quote_builder_state,selected_tier_id:r}}))},set_estimate_range:r=>{t(a=>({quote_builder_state:{...a.quote_builder_state,estimate_range:r}}))},set_draft_saved:r=>{t(a=>({quote_builder_state:{...a.quote_builder_state,is_draft_saved:r}}))},set_draft_quote_id:r=>{t(a=>({quote_builder_state:{...a.quote_builder_state,draft_quote_id:r}}))},reset_quote_builder:()=>{t(r=>({quote_builder_state:{current_step:1,selected_service_id:null,project_answers:{},uploaded_files:[],selected_tier_id:null,estimate_range:null,is_draft_saved:!1,draft_quote_id:null}}))},load_draft_quote:r=>{t(a=>({quote_builder_state:{...a.quote_builder_state,...r}}))},set_selected_date:r=>{t(a=>({booking_state:{...a.booking_state,selected_date:r}}))},set_selected_time_slot:r=>{t(a=>({booking_state:{...a.booking_state,selected_time_slot:r}}))},set_emergency_booking:(r,a=0)=>{t(n=>({booking_state:{...n.booking_state,is_emergency_booking:r,urgent_fee_amount:a}}))},set_booking_step:r=>{t(a=>({booking_state:{...a.booking_state,booking_step:r}}))},reset_booking_state:()=>{t({booking_state:{selected_date:null,selected_time_slot:null,is_emergency_booking:!1,urgent_fee_amount:0,booking_step:"date_selection"}})}}),{name:"sultanstamp-app-storage",partialize:t=>({authentication_state:{current_user:t.authentication_state.current_user,auth_token:t.authentication_state.auth_token,authentication_status:{is_authenticated:t.authentication_state.authentication_status.is_authenticated,is_loading:!1},error_message:null},feature_flags:t.feature_flags,system_config:t.system_config,quote_builder_state:t.quote_builder_state})}));/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Up=(...t)=>t.filter((s,r,a)=>!!s&&a.indexOf(s)===r).join(" ");/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=j.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:l,iconNode:i,...o},c)=>j.createElement("svg",{ref:c,...Hj,width:s,height:s,stroke:t,strokeWidth:a?Number(r)*24/Number(s):r,className:Up("lucide",n),...o},[...i.map(([d,h])=>j.createElement(d,h)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=(t,s)=>{const r=j.forwardRef(({className:a,...n},l)=>j.createElement(Gj,{ref:l,iconNode:s,className:Up(`lucide-${Wj(t)}`,a),...n}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=ue("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=ue("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=ue("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=ue("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=ue("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=ue("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=ue("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=ue("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=ue("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=ue("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=ue("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=ue("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=ue("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=ue("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=ue("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=ue("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=ue("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=ue("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=ue("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=ue("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=ue("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=ue("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=ue("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=ue("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=ue("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=ue("FilePen",[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=ue("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=ue("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=ue("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=ue("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=ue("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=ue("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=ue("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=ue("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=ue("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=ue("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=ue("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wp=ue("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=ue("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=ue("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=ue("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=ue("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=ue("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=ue("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=ue("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=ue("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=ue("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=ue("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=ue("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=ue("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=ue("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=ue("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=ue("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=ue("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=ue("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=ue("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=ue("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=ue("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=ue("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=ue("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=ue("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=ue("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=ue("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=ue("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=ue("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=ue("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=ue("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=ue("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=ue("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),vw=()=>{const[t,s]=j.useState(!1),[r,a]=j.useState(!1),n=js(),l=Je(),i=n.pathname,o=ae(f=>f.authentication_state.authentication_status.is_authenticated),c=ae(f=>f.authentication_state.current_user);j.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),j.useEffect(()=>{s(!1),a(!1)},[i]),j.useEffect(()=>{const f=v=>{v.target.closest(".login-dropdown-container")||a(!1)};return r&&document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[r]);const d=()=>{s(!t)},h=()=>{l(o?"/app/quotes/new":"/login?redirect_url="+encodeURIComponent("/app/quotes/new"))},m=()=>{a(!r)},u=f=>{l(`/login?role=${f}`),a(!1)},g=[{label:"About Us",path:"/about"},{label:"Gallery",path:"/gallery"},{label:"Services",path:"/services"},{label:"Pricing",path:"/pricing"},{label:"Contact",path:"/contact"}],b=f=>i===f;return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:"fixed top-0 left-0 right-0 bg-white border-b border-gray-200 z-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16 md:h-20",children:[e.jsxs(ie,{to:"/",className:"flex items-center space-x-2 flex-shrink-0","aria-label":"SultanStamp Home",children:[e.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-black rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg md:text-xl",children:"SS"})}),e.jsx("span",{className:"text-black font-bold text-lg md:text-xl hidden sm:block",children:"SultanStamp"})]}),e.jsx("div",{className:"hidden md:flex items-center space-x-8",children:g.map(f=>e.jsx(ie,{to:f.path,className:`text-base font-semibold transition-all duration-200 hover:opacity-80 ${b(f.path)?"text-black border-b-2 border-[#FFD300] pb-1":"text-gray-700"}`,children:f.label},f.path))}),e.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[e.jsx("button",{onClick:h,className:"bg-[#FFD300] text-black font-bold px-6 py-3 rounded-lg hover:opacity-90 transition-all duration-200 shadow-md hover:shadow-lg",children:"Get a Quote"}),!o&&e.jsxs("div",{className:"relative login-dropdown-container",children:[e.jsxs("button",{onClick:m,className:"flex items-center space-x-1 text-gray-700 font-semibold hover:text-black transition-colors","aria-label":"Login menu","aria-expanded":r,children:[e.jsx("span",{children:"Log in"}),e.jsx(uo,{className:`w-4 h-4 transition-transform ${r?"rotate-180":""}`})]}),r&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg py-2 z-50",children:[e.jsx("button",{onClick:()=>u("customer"),className:"w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-50 transition-colors",children:"Customer Login"}),e.jsx("button",{onClick:()=>u("staff"),className:"w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-50 transition-colors",children:"Staff Login"}),e.jsx("button",{onClick:()=>u("admin"),className:"w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-50 transition-colors",children:"Admin Login"})]})]}),o&&c&&e.jsxs(ie,{to:c.role==="CUSTOMER"?"/app":c.role==="STAFF"?"/staff":"/admin",className:"flex items-center space-x-2 text-gray-700 hover:text-black transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-semibold text-gray-700",children:c.name.charAt(0).toUpperCase()})}),e.jsx("span",{className:"font-semibold",children:c.name})]})]}),e.jsx("button",{onClick:d,className:"md:hidden p-2 text-gray-700 hover:text-black transition-colors","aria-label":"Toggle mobile menu","aria-expanded":t,children:e.jsx(xo,{className:"w-6 h-6"})})]})})}),t&&e.jsxs("div",{className:"fixed inset-0 z-50 md:hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity",onClick:d}),e.jsx("div",{className:"absolute top-0 right-0 bottom-0 w-full max-w-sm bg-white shadow-xl transform transition-transform",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[e.jsxs(ie,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-10 h-10 bg-black rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"SS"})}),e.jsx("span",{className:"text-black font-bold text-lg",children:"SultanStamp"})]}),e.jsx("button",{onClick:d,className:"p-2 text-gray-700 hover:text-black transition-colors","aria-label":"Close mobile menu",children:e.jsx(je,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto py-6 px-6",children:[e.jsx("div",{className:"space-y-4",children:g.map(f=>e.jsx(ie,{to:f.path,className:`block text-lg font-semibold py-2 transition-colors ${b(f.path)?"text-black border-l-4 border-[#FFD300] pl-4":"text-gray-700 hover:text-black pl-4"}`,children:f.label},f.path))}),e.jsx("div",{className:"mt-8",children:e.jsx("button",{onClick:h,className:"w-full bg-[#FFD300] text-black font-bold px-6 py-3 rounded-lg hover:opacity-90 transition-all duration-200 shadow-md",children:"Get a Quote"})}),!o&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("p",{className:"text-gray-600 font-semibold mb-4",children:"Login as:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>u("customer"),className:"w-full text-left px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors font-medium",children:"Customer"}),e.jsx("button",{onClick:()=>u("staff"),className:"w-full text-left px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors font-medium",children:"Staff"}),e.jsx("button",{onClick:()=>u("admin"),className:"w-full text-left px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors font-medium",children:"Admin"})]})]}),o&&c&&e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs(ie,{to:c.role==="CUSTOMER"?"/app":c.role==="STAFF"?"/staff":"/admin",className:"flex items-center space-x-3 px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:c.name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-black",children:c.name}),e.jsx("p",{className:"text-sm text-gray-600",children:"Go to Dashboard"})]})]})}),e.jsx("div",{className:"mt-6",children:e.jsxs("a",{href:"https://wa.me/353874700356",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center space-x-2 w-full bg-green-500 text-white font-bold px-6 py-3 rounded-lg hover:bg-green-600 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),e.jsx("span",{children:"WhatsApp Us"})]})})]})]})})]})]})},jw=async t=>(await $.get("http://localhost:3000/api/notifications",{params:{limit:10,sort_by:"created_at",sort_order:"desc"},headers:{Authorization:`Bearer ${t}`}})).data,ww=async(t,s)=>{await $.put(`http://localhost:3000/api/notifications/${t}`,{is_read:!0},{headers:{Authorization:`Bearer ${s}`}})},wu=()=>{const t=ae(_=>_.authentication_state.current_user),s=ae(_=>_.authentication_state.auth_token),r=ae(_=>_.logout_user),a=ae(_=>_.notification_state.unread_counts),n=ae(_=>_.feature_flags),l=ae(_=>_.update_unread_counts),[i,o]=j.useState(!1),[c,d]=j.useState(!1),[h,m]=j.useState(!1),u=j.useRef(null),g=j.useRef(null),b=Je(),f=js(),{data:v,refetch:y}=te({queryKey:["notifications",t==null?void 0:t.id],queryFn:()=>jw(s||""),enabled:!!s&&i,staleTime:3e4,refetchOnWindowFocus:!1});j.useEffect(()=>{const _=O=>{u.current&&!u.current.contains(O.target)&&o(!1),g.current&&!g.current.contains(O.target)&&d(!1)};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]),j.useEffect(()=>{const _=O=>{O.key==="Escape"&&(o(!1),d(!1),m(!1))};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[]),j.useEffect(()=>{m(!1),o(!1),d(!1)},[f.pathname]),j.useEffect(()=>{v&&l({quotes:v.notifications.filter(_=>_.type==="quote_update"&&!_.is_read).length,orders:v.notifications.filter(_=>_.type==="order_update"&&!_.is_read).length,messages:v.notifications.filter(_=>_.type==="new_message"&&!_.is_read).length})},[v,l]);const p=()=>{o(!i),d(!1),i||y()},x=()=>{d(!c),o(!1)},w=async _=>{if(s)try{await ww(_.id,s),y(),_.entity_id&&(_.type.includes("quote")?b(`/app/quotes/${_.entity_id}`):_.type.includes("order")?b(`/app/orders/${_.entity_id}`):_.type.includes("message")&&b("/app/messages")),o(!1)}catch(O){console.error("Error marking notification as read:",O)}},R=async()=>{try{await r(),b("/login")}catch(_){console.error("Logout error:",_),b("/login")}},N=()=>{m(!h),o(!1),d(!1)},L=(()=>{if(!t)return[];const _=t.role;if(_==="CUSTOMER")return[{label:"Dashboard",path:"/app"},{label:"Quotes",path:"/app/quotes",badge:a.quotes},{label:"Orders",path:"/app/orders",badge:a.orders},{label:"Bookings",path:"/app/bookings"}];if(_==="STAFF")return[{label:"Dashboard",path:"/staff"},{label:"Jobs",path:"/staff/jobs",badge:a.jobs},{label:"Calendar",path:"/staff/calendar"},{label:"Messages",path:"/staff/messages",badge:a.messages}];if(_==="ADMIN"){const O=[{label:"Dashboard",path:"/admin"},{label:"Services",path:"/admin/services"},{label:"Pricing",path:"/admin/pricing"},{label:"Tiers",path:"/admin/tiers"},{label:"Calendar",path:"/admin/calendar"},{label:"Quotes",path:"/admin/quotes",badge:a.quotes},{label:"Orders",path:"/admin/orders",badge:a.orders},{label:"Users",path:"/admin/users"},{label:"Content",path:"/admin/content"},{label:"Settings",path:"/admin/settings"}];return n.b2b_accounts&&O.push({label:"B2B",path:"/admin/b2b"}),n.inventory_management&&O.push({label:"Inventory",path:"/admin/inventory",badge:a.inventory_alerts}),n.analytics_dashboard&&O.push({label:"Analytics",path:"/admin/analytics"}),O}return[]})(),E=()=>t?t.role==="CUSTOMER"?"/app":t.role==="STAFF"?"/staff":t.role==="ADMIN"?"/admin":"/":"/",z=Object.values(a).reduce((_,O)=>_+(O||0),0);return e.jsxs(e.Fragment,{children:[e.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-black text-white h-20 shadow-lg",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-full",children:e.jsxs("div",{className:"flex items-center justify-between h-full",children:[e.jsx(ie,{to:E(),className:"flex items-center",children:e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white hover:text-yellow-400 transition-colors",children:"SultanStamp"})}),e.jsx("div",{className:"hidden lg:flex lg:items-center lg:space-x-8",children:L.map(_=>e.jsxs(ie,{to:_.path,className:`relative px-3 py-2 text-sm font-semibold transition-colors ${f.pathname===_.path?"text-yellow-400":"text-white hover:text-yellow-400"}`,children:[_.label,_.badge!==void 0&&_.badge>0&&e.jsx("span",{className:"absolute -top-1 -right-2 inline-flex items-center justify-center min-w-[20px] h-5 px-1.5 text-xs font-bold text-black bg-yellow-400 rounded-full",children:_.badge>99?"99+":_.badge})]},_.path))}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",ref:u,children:[e.jsxs("button",{onClick:p,className:"relative p-2 text-white hover:text-yellow-400 transition-colors focus:outline-none focus:ring-2 focus:ring-yellow-400 rounded-lg","aria-label":"Notifications",children:[e.jsx(Zj,{className:"w-6 h-6"}),z>0&&e.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center min-w-[18px] h-[18px] px-1 text-xs font-bold text-black bg-yellow-400 rounded-full",children:z>99?"99+":z})]}),i&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-2xl overflow-hidden",children:[e.jsx("div",{className:"bg-black text-white px-4 py-3 border-b border-gray-200",children:e.jsx("h3",{className:"text-sm font-bold",children:"Notifications"})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:v&&v.notifications.length>0?e.jsx("div",{className:"divide-y divide-gray-200",children:v.notifications.map(_=>e.jsxs("button",{onClick:()=>w(_),className:`w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors ${_.is_read?"":"bg-yellow-50"}`,children:[e.jsx("p",{className:`text-sm ${_.is_read?"text-gray-700":"font-semibold text-black"}`,children:_.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(_.created_at).toLocaleString()})]},_.id))}):e.jsx("div",{className:"px-4 py-8 text-center text-gray-500",children:e.jsx("p",{className:"text-sm",children:"No notifications"})})})]})]}),e.jsxs("div",{className:"relative hidden sm:block",ref:g,children:[e.jsxs("button",{onClick:x,className:"flex items-center space-x-2 px-3 py-2 text-white hover:text-yellow-400 transition-colors focus:outline-none focus:ring-2 focus:ring-yellow-400 rounded-lg",children:[e.jsx(Or,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm font-semibold hidden md:inline",children:t==null?void 0:t.name}),e.jsx(uo,{className:"w-4 h-4"})]}),c&&e.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:t==null?void 0:t.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t==null?void 0:t.email}),e.jsx("p",{className:"text-xs text-gray-400 mt-1 capitalize",children:t==null?void 0:t.role.toLowerCase()})]}),e.jsxs("div",{className:"py-2",children:[e.jsx(ie,{to:(t==null?void 0:t.role)==="CUSTOMER"?"/app/profile":(t==null?void 0:t.role)==="STAFF"?"/staff/profile":"/admin/settings",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:"Profile Settings"}),e.jsx("button",{onClick:R,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors font-medium",children:"Sign Out"})]})]})]}),e.jsx("button",{onClick:N,className:"lg:hidden p-2 text-white hover:text-yellow-400 transition-colors focus:outline-none focus:ring-2 focus:ring-yellow-400 rounded-lg","aria-label":"Toggle mobile menu",children:h?e.jsx(je,{className:"w-6 h-6"}):e.jsx(xo,{className:"w-6 h-6"})})]})]})}),h&&e.jsx("div",{className:"lg:hidden fixed inset-0 top-20 bg-black bg-opacity-90 z-40",children:e.jsxs("div",{className:"h-full overflow-y-auto px-4 py-6 space-y-4",children:[L.map(_=>e.jsxs(ie,{to:_.path,className:`flex items-center justify-between px-4 py-3 rounded-lg transition-colors ${f.pathname===_.path?"bg-yellow-400 text-black":"text-white hover:bg-gray-800"}`,children:[e.jsx("span",{className:"text-base font-semibold",children:_.label}),_.badge!==void 0&&_.badge>0&&e.jsx("span",{className:"inline-flex items-center justify-center min-w-[24px] h-6 px-2 text-xs font-bold text-black bg-yellow-400 rounded-full",children:_.badge>99?"99+":_.badge})]},_.path)),e.jsxs("div",{className:"border-t border-gray-700 pt-4 mt-4",children:[e.jsxs("div",{className:"px-4 py-3 bg-gray-800 rounded-lg mb-2",children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:t==null?void 0:t.name}),e.jsx("p",{className:"text-xs text-gray-400",children:t==null?void 0:t.email}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 capitalize",children:t==null?void 0:t.role.toLowerCase()})]}),e.jsx(ie,{to:(t==null?void 0:t.role)==="CUSTOMER"?"/app/profile":(t==null?void 0:t.role)==="STAFF"?"/staff/profile":"/admin/settings",className:"block px-4 py-3 text-white hover:bg-gray-800 rounded-lg transition-colors text-base font-semibold",children:"Profile Settings"}),e.jsx("button",{onClick:R,className:"w-full text-left px-4 py-3 text-red-400 hover:bg-gray-800 rounded-lg transition-colors text-base font-semibold",children:"Sign Out"})]})]})})]}),e.jsx("div",{className:"h-20"})]})},go=()=>{const t=ae(o=>o.system_config.company_info),s={linktree:"https://linktr.ee/Sultanstamp",instagram:"https://www.instagram.com/sultanstamp/",linkedin:"https://ie.linkedin.com/company/sultanstamp",tiktok:"https://www.tiktok.com/@sultanstamp",facebook:"https://www.facebook.com/share/19zEdk2zbW/"},r=new Date().getFullYear(),a=()=>{const o=t.phone.replace(/\s+/g,""),c=encodeURIComponent("Hi! I would like to inquire about your services.");window.open(`https://wa.me/${o}?text=${c}`,"_blank","noopener,noreferrer")},n=()=>{window.location.href=`mailto:${t.email}`},l=()=>{window.location.href=`tel:${t.phone}`},i=(o,c)=>{console.log(`Social click: ${o}`),window.open(c,"_blank","noopener,noreferrer")};return e.jsx(e.Fragment,{children:e.jsx("footer",{className:"bg-black text-white mt-auto",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 lg:py-16",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 lg:gap-12",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white tracking-tight",children:t.name}),e.jsx("p",{className:"text-gray-400 text-sm mt-2 leading-relaxed",children:"Disciplined Premium Print, Signage, and Branding"})]}),e.jsx("div",{className:"pt-4 border-t border-gray-800",children:e.jsxs("p",{className:"text-gray-500 text-xs",children:[" ",r," ",t.name,". All rights reserved."]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold text-sm uppercase tracking-wider mb-4",children:"Quick Links"}),e.jsxs("nav",{className:"space-y-3",children:[e.jsx(ie,{to:"/services",className:"block text-gray-400 hover:text-yellow-400 text-sm transition-colors duration-200",children:"Services"}),e.jsx(ie,{to:"/pricing",className:"block text-gray-400 hover:text-yellow-400 text-sm transition-colors duration-200",children:"Pricing"}),e.jsx(ie,{to:"/gallery",className:"block text-gray-400 hover:text-yellow-400 text-sm transition-colors duration-200",children:"Gallery"}),e.jsx(ie,{to:"/about",className:"block text-gray-400 hover:text-yellow-400 text-sm transition-colors duration-200",children:"About Us"}),e.jsx(ie,{to:"/contact",className:"block text-gray-400 hover:text-yellow-400 text-sm transition-colors duration-200",children:"Contact"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold text-sm uppercase tracking-wider mb-4",children:"Legal"}),e.jsxs("nav",{className:"space-y-3",children:[e.jsx(ie,{to:"/policies#payment",className:"block text-gray-400 hover:text-yellow-400 text-sm transition-colors duration-200",children:"Payment Terms"}),e.jsx(ie,{to:"/policies#privacy",className:"block text-gray-400 hover:text-yellow-400 text-sm transition-colors duration-200",children:"Privacy Policy"}),e.jsx(ie,{to:"/policies#refunds",className:"block text-gray-400 hover:text-yellow-400 text-sm transition-colors duration-200",children:"Refund Policy"}),e.jsx(ie,{to:"/policies#files",className:"block text-gray-400 hover:text-yellow-400 text-sm transition-colors duration-200",children:"File Requirements"}),e.jsx(ie,{to:"/policies",className:"block text-gray-400 hover:text-yellow-400 text-sm transition-colors duration-200",children:"Terms & Conditions"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold text-sm uppercase tracking-wider mb-4",children:"Connect With Us"}),e.jsxs("button",{onClick:a,className:"w-full bg-yellow-400 hover:bg-yellow-500 text-black font-semibold py-3 px-4 rounded-lg flex items-center justify-center gap-2 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl mb-4","aria-label":"Contact us on WhatsApp",children:[e.jsx($i,{className:"w-5 h-5"}),e.jsx("span",{children:"WhatsApp Us"})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-gray-400 hover:text-yellow-400 text-sm transition-colors duration-200 w-full text-left","aria-label":`Email us at ${t.email}`,children:[e.jsx(nn,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:t.email})]}),e.jsxs("button",{onClick:l,className:"flex items-center gap-2 text-gray-400 hover:text-yellow-400 text-sm transition-colors duration-200 w-full text-left","aria-label":`Call us at ${t.phone}`,children:[e.jsx(ho,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:t.phone})]}),t.address&&e.jsxs("div",{className:"flex items-start gap-2 text-gray-400 text-sm",children:[e.jsx(cl,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"leading-relaxed",children:t.address})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-800",children:[e.jsx("p",{className:"text-gray-400 text-xs mb-3 uppercase tracking-wider",children:"Follow Us"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>i("Linktree",s.linktree),className:"text-gray-400 hover:text-yellow-400 transition-colors duration-200","aria-label":"Visit our Linktree",children:e.jsx(cl,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>i("Instagram",s.instagram),className:"text-gray-400 hover:text-yellow-400 transition-colors duration-200","aria-label":"Follow us on Instagram",children:e.jsx(Kp,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>i("LinkedIn",s.linkedin),className:"text-gray-400 hover:text-yellow-400 transition-colors duration-200","aria-label":"Connect on LinkedIn",children:e.jsx(Wp,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>i("TikTok",s.tiktok),className:"text-gray-400 hover:text-yellow-400 transition-colors duration-200","aria-label":"Follow us on TikTok",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"})})}),e.jsx("button",{onClick:()=>i("Facebook",s.facebook),className:"text-gray-400 hover:text-yellow-400 transition-colors duration-200","aria-label":"Like us on Facebook",children:e.jsx(Qp,{className:"w-5 h-5"})})]})]})]})]}),e.jsx("div",{className:"lg:hidden mt-8 pt-8 border-t border-gray-800 text-center",children:e.jsxs("p",{className:"text-gray-500 text-xs",children:[" ",r," ",t.name,". All rights reserved."]})})]})})})},Nw=()=>{const t=ae(N=>N.authentication_state.current_user),s=ae(N=>N.authentication_state.auth_token),r=ae(N=>N.notification_state.unread_counts),a=ae(N=>N.logout_user),[n,l]=j.useState(()=>{const N=localStorage.getItem("sultanstamp_sidebar_collapsed");return N?JSON.parse(N):!1}),[i,o]=j.useState(!1),[c,d]=j.useState({quotes:0,orders:0,bookings:0,messages:0}),h=js(),m=j.useMemo(()=>h.pathname==="/app"?"dashboard":h.pathname.startsWith("/app/quotes")?"quotes":h.pathname.startsWith("/app/bookings")?"bookings":h.pathname.startsWith("/app/orders")?"orders":h.pathname.startsWith("/app/messages")?"messages":h.pathname.startsWith("/app/profile")?"profile":"dashboard",[h.pathname]),{data:u,isLoading:g}=te({queryKey:["customer-notifications",t==null?void 0:t.id],queryFn:async()=>{if(!s)throw new Error("No auth token");return(await $.get("http://localhost:3000/api/notifications",{params:{is_read:!1,limit:50},headers:{Authorization:`Bearer ${s}`}})).data.notifications},enabled:!!s&&!!t,staleTime:3e4,refetchInterval:3e4,refetchOnWindowFocus:!0,retry:1});j.useEffect(()=>{if(u){const N={quotes:0,orders:0,bookings:0,messages:0};u.forEach(k=>{const L=k.type.toLowerCase();L.includes("quote")&&N.quotes++,L.includes("order")&&N.orders++,L.includes("booking")&&N.bookings++,L.includes("message")&&N.messages++}),d(N)}},[u]),j.useEffect(()=>{!u&&r&&d({quotes:r.quotes||0,orders:r.orders||0,bookings:0,messages:r.messages||0})},[r,u]),j.useEffect(()=>{localStorage.setItem("sultanstamp_sidebar_collapsed",JSON.stringify(n))},[n]);const b=()=>{l(N=>!N)},f=async()=>{await a()},v=()=>{o(N=>!N)},y=j.useMemo(()=>[{id:"dashboard",label:"Dashboard",path:"/app",icon:e.jsx(Vp,{size:20}),mobileVisible:!0},{id:"quotes",label:"Quotes",path:"/app/quotes",icon:e.jsx(Ae,{size:20}),badge:c.quotes,mobileVisible:!0},{id:"bookings",label:"Bookings",path:"/app/bookings",icon:e.jsx(gt,{size:20}),badge:c.bookings,mobileVisible:!1},{id:"orders",label:"Orders",path:"/app/orders",icon:e.jsx(Wt,{size:20}),badge:c.orders,mobileVisible:!0},{id:"messages",label:"Messages",path:"/app/messages",icon:e.jsx(sa,{size:20}),badge:c.messages,mobileVisible:!0},{id:"profile",label:"Profile",path:"/app/profile",icon:e.jsx(Or,{size:20}),mobileVisible:!1}],[c]),p=j.useMemo(()=>{if(!(t!=null&&t.name))return"U";const N=t.name.split(" ");return N.length>=2?`${N[0][0]}${N[1][0]}`.toUpperCase():t.name.substring(0,2).toUpperCase()},[t]),x=N=>!N||N===0?null:e.jsx("span",{className:"absolute -top-1 -right-1 flex items-center justify-center min-w-[20px] h-5 px-1.5 bg-yellow-400 text-black text-xs font-bold rounded-full border-2 border-white",children:N>99?"99+":N}),w=(N,k=!1)=>{const L=m===N.id;return e.jsxs(ie,{to:N.path,className:`
          relative flex items-center h-12 px-4 rounded-lg transition-all duration-200
          ${L?"bg-black text-white":"text-gray-700 hover:bg-gray-100 hover:text-black"}
          ${k?"justify-center":"justify-start gap-3"}
        `,"aria-label":N.label,title:k?N.label:void 0,children:[e.jsxs("div",{className:"relative flex items-center justify-center",children:[N.icon,!k&&x(N.badge)]}),!k&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm font-semibold flex-1",children:N.label}),N.badge&&N.badge>0&&e.jsx("span",{className:"flex items-center justify-center min-w-[24px] h-6 px-2 bg-yellow-400 text-black text-xs font-bold rounded-full",children:N.badge>99?"99+":N.badge})]}),k&&N.badge&&N.badge>0&&x(N.badge)]},N.id)},R=N=>{const k=m===N.id;return e.jsxs(ie,{to:N.path,className:`
          relative flex flex-col items-center justify-center h-full px-2 transition-colors duration-200
          ${k?"text-yellow-400":"text-gray-600 hover:text-black"}
        `,"aria-label":N.label,children:[e.jsxs("div",{className:"relative flex items-center justify-center",children:[ht.cloneElement(N.icon,{size:24}),N.badge&&N.badge>0&&e.jsx("span",{className:"absolute -top-2 -right-2 flex items-center justify-center min-w-[18px] h-[18px] px-1 bg-yellow-400 text-black text-[10px] font-bold rounded-full border-2 border-white",children:N.badge>99?"99+":N.badge})]}),e.jsx("span",{className:"text-[10px] font-semibold mt-1 truncate max-w-full",children:N.label})]},N.id)};return e.jsxs(e.Fragment,{children:[e.jsxs("aside",{className:`
          hidden md:flex flex-col h-screen bg-white border-r border-gray-200 fixed left-0 top-0 z-30
          transition-all duration-300 ease-in-out
          ${n?"w-16":"w-60"}
        `,children:[e.jsx("div",{className:`
          flex items-center h-16 px-4 border-b border-gray-200
          ${n?"justify-center":"justify-between"}
        `,children:n?e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-black text-white rounded-full text-sm font-bold",children:p}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-black text-white rounded-full text-sm font-bold",children:p}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900 truncate max-w-[140px]",children:(t==null?void 0:t.name)||"User"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Customer"})]})]})})}),e.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:y.map(N=>w(N,n))}),e.jsxs("div",{className:`
          px-3 py-4 border-t border-gray-200 space-y-1
        `,children:[e.jsx("button",{onClick:b,className:`
              flex items-center w-full h-12 px-4 rounded-lg text-gray-700 hover:bg-gray-100 hover:text-black transition-all duration-200
              ${n?"justify-center":"justify-start gap-3"}
            `,"aria-label":n?"Expand sidebar":"Collapse sidebar",title:n?"Expand sidebar":"Collapse sidebar",children:n?e.jsx(an,{size:20}):e.jsxs(e.Fragment,{children:[e.jsx(mo,{size:20}),e.jsx("span",{className:"text-sm font-semibold flex-1 text-left",children:"Collapse"})]})}),e.jsxs("button",{onClick:f,className:`
              flex items-center w-full h-12 px-4 rounded-lg text-red-600 hover:bg-red-50 hover:text-red-700 transition-all duration-200
              ${n?"justify-center":"justify-start gap-3"}
            `,"aria-label":"Sign out",title:n?"Sign out":void 0,children:[e.jsx(gx,{size:20}),!n&&e.jsx("span",{className:"text-sm font-semibold",children:"Sign Out"})]})]})]}),e.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 h-16 bg-white border-t border-gray-200 z-40",children:e.jsxs("div",{className:"flex items-center justify-around h-full",children:[y.filter(N=>N.mobileVisible).map(N=>R(N)),e.jsxs("button",{onClick:v,className:`
              relative flex flex-col items-center justify-center h-full px-2 transition-colors duration-200
              ${i?"text-yellow-400":"text-gray-600 hover:text-black"}
            `,"aria-label":"More options",children:[e.jsx(xo,{size:24}),e.jsx("span",{className:"text-[10px] font-semibold mt-1",children:"More"})]})]})}),i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:v}),e.jsx("div",{className:"md:hidden fixed bottom-16 left-0 right-0 bg-white border-t border-gray-200 z-50 shadow-2xl animate-slide-up",children:e.jsxs("div",{className:"px-4 py-6 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-4 mb-4 border-b border-gray-200",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-black text-white rounded-full text-base font-bold",children:p}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-base font-semibold text-gray-900",children:(t==null?void 0:t.name)||"User"}),e.jsx("span",{className:"text-sm text-gray-500",children:t==null?void 0:t.email})]})]}),y.filter(N=>!N.mobileVisible).map(N=>e.jsxs(ie,{to:N.path,onClick:v,className:`
                      flex items-center gap-3 h-12 px-4 rounded-lg transition-all duration-200
                      ${m===N.id?"bg-black text-white":"text-gray-700 hover:bg-gray-100 hover:text-black"}
                    `,children:[N.icon,e.jsx("span",{className:"text-sm font-semibold flex-1",children:N.label}),N.badge&&N.badge>0&&e.jsx("span",{className:"flex items-center justify-center min-w-[24px] h-6 px-2 bg-yellow-400 text-black text-xs font-bold rounded-full",children:N.badge>99?"99+":N.badge})]},N.id)),e.jsxs("button",{onClick:f,className:"flex items-center gap-3 w-full h-12 px-4 rounded-lg text-red-600 hover:bg-red-50 hover:text-red-700 transition-all duration-200 mt-4",children:[e.jsx(gx,{size:20}),e.jsx("span",{className:"text-sm font-semibold",children:"Sign Out"})]})]})})]}),e.jsx("style",{children:`
        @keyframes slide-up {
          from {
            transform: translateY(100%);
          }
          to {
            transform: translateY(0);
          }
        }
        .animate-slide-up {
          animation: slide-up 0.3s ease-out;
        }
      `})]})},vx=[{id:"dashboard",label:"Dashboard",icon:Vp,route:"/staff",badgeKey:null},{id:"jobs",label:"Jobs",icon:aw,route:"/staff/jobs",badgeKey:"assigned_jobs_pending"},{id:"calendar",label:"Calendar",icon:gt,route:"/staff/calendar",badgeKey:"today_bookings"},{id:"messages",label:"Messages",icon:$i,route:"/staff/messages",badgeKey:"unread_messages"},{id:"profile",label:"Profile",icon:Or,route:"/staff/profile",badgeKey:null}],_w=()=>{const t=js(),s=ae(N=>N.authentication_state.auth_token),r=ae(N=>N.authentication_state.current_user),a=r==null?void 0:r.staff_profile,n=(a==null?void 0:a.id)||"",l=async()=>{if(!s||!n)return 0;try{return(await $.get("http://localhost:3000/api/orders",{params:{assigned_staff_id:n,status:"IN_PRODUCTION,PROOF_SENT",limit:100},headers:{Authorization:`Bearer ${s}`}})).data.orders.filter(L=>L.status==="IN_PRODUCTION"||L.status==="PROOF_SENT").length}catch(N){return console.error("Error fetching assigned jobs:",N),0}},{data:i=0,isLoading:o,error:c}=te({queryKey:["staff-assigned-jobs",n],queryFn:l,enabled:!!s&&!!n,staleTime:3e4,refetchOnWindowFocus:!0,retry:1,refetchInterval:6e4}),d=async()=>{if(!s)return 0;try{const N=new Date().toISOString().split("T")[0];return(await $.get("http://localhost:3000/api/bookings",{params:{start_date:N,end_date:N,status:"CONFIRMED"},headers:{Authorization:`Bearer ${s}`}})).data.bookings.length}catch(N){return console.error("Error fetching today bookings:",N),0}},{data:h=0,isLoading:m,error:u}=te({queryKey:["staff-today-bookings",new Date().toISOString().split("T")[0]],queryFn:d,enabled:!!s,staleTime:3e4,refetchOnWindowFocus:!0,retry:1,refetchInterval:6e4}),g=async()=>0,{data:b=0,isLoading:f,error:v}=te({queryKey:["staff-unread-messages",n],queryFn:g,enabled:!!s&&!!n,staleTime:3e4,refetchOnWindowFocus:!0,retry:1,refetchInterval:6e4}),y={assigned_jobs_pending:i,today_bookings:h,unread_messages:b},p=N=>N==="/staff"?t.pathname==="/staff":t.pathname.startsWith(N),x=N=>N&&y[N]||0,w=N=>{const k=x(N.badgeKey);return k>0?`${N.label}, ${k} pending`:N.label},R=(N,k=!1)=>{const L=N.icon,E=p(N.route),z=x(N.badgeKey),_=z>0;return e.jsxs(ie,{to:N.route,"aria-label":w(N),"aria-current":E?"page":void 0,className:`
          relative flex items-center gap-3
          ${k?"flex-col justify-center px-2 py-3":"px-6 py-4"}
          font-semibold text-base transition-all duration-200
          ${E?"bg-yellow-400 text-black":"text-white hover:bg-gray-900 hover:text-white"}
          ${k?"flex-1 min-w-0":""}
        `,children:[e.jsx(L,{className:k?"w-6 h-6":"w-5 h-5"}),e.jsx("span",{className:k?"text-xs font-medium":"text-base",children:N.label}),_&&e.jsx("span",{className:`
              absolute flex items-center justify-center
              min-w-[20px] h-5 px-1.5
              bg-yellow-400 text-black
              text-xs font-bold rounded-full
              ${k?"top-1 right-1/2 translate-x-4":"top-3 right-4"}
            `,"aria-label":`${z} notifications`,children:z>99?"99+":z})]},N.id)};return e.jsxs(e.Fragment,{children:[e.jsxs("nav",{className:"hidden md:flex md:flex-col md:fixed md:left-0 md:top-0 md:h-screen md:w-60 bg-black border-r border-gray-800 z-40","aria-label":"Staff navigation",children:[e.jsx("div",{className:"flex items-center justify-center h-20 border-b border-gray-800",children:e.jsx(ie,{to:"/staff",className:"flex items-center",children:e.jsx("span",{className:"text-2xl font-bold text-white",children:"SultanStamp"})})}),e.jsx("div",{className:"flex-1 flex flex-col overflow-y-auto",children:vx.map(N=>R(N,!1))}),(o||m||f)&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-800",children:e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-gray-400 border-t-transparent"}),e.jsx("span",{children:"Updating..."})]})})]}),e.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-black border-t border-gray-800 z-40 safe-area-bottom","aria-label":"Staff navigation",children:e.jsx("div",{className:"flex items-center justify-around h-16",children:vx.map(N=>R(N,!0))})}),(c||u||v)&&!1]})},kw=async t=>{var r;return((r=(await $.get("http://localhost:3000/api/quotes",{params:{status:"REQUESTED",limit:100},headers:{Authorization:`Bearer ${t}`}})).data.quotes)==null?void 0:r.length)||0},Sw=async t=>{const r=(await $.get("http://localhost:3000/api/orders",{params:{limit:500,sort_by:"due_at",sort_order:"asc"},headers:{Authorization:`Bearer ${t}`}})).data.orders||[],a=new Date,n=r.filter(i=>i.due_at&&new Date(i.due_at)<a&&!["COMPLETED","CANCELLED"].includes(i.status)).length,l=r.filter(i=>i.balance_due>0&&i.status!=="QUOTE_REQUESTED").length;return n+l},Cw=async t=>((await $.get("http://localhost:3000/api/inventory-items",{params:{low_stock:!0,limit:100},headers:{Authorization:`Bearer ${t}`}})).data.items||[]).filter(a=>a.qty_on_hand<=a.reorder_point).length,Ew=()=>{const t=js(),[s,r]=j.useState(!1),[a,n]=j.useState(["overview"]),l=ae(x=>x.authentication_state.auth_token),i=ae(x=>x.feature_flags),{data:o=0}=te({queryKey:["admin-quotes-count"],queryFn:()=>kw(l||""),enabled:!!l,staleTime:6e4,refetchInterval:6e4,retry:1}),{data:c=0}=te({queryKey:["admin-orders-count"],queryFn:()=>Sw(l||""),enabled:!!l,staleTime:6e4,refetchInterval:6e4,retry:1}),{data:d=0}=te({queryKey:["admin-inventory-count"],queryFn:()=>Cw(l||""),enabled:!!l&&i.inventory_management,staleTime:3e5,refetchInterval:3e5,retry:1}),h=()=>{r(!s)},m=x=>{n(w=>w.includes(x)?w.filter(R=>R!==x):[...w,x])},u=()=>{r(!1)};j.useEffect(()=>{r(!1)},[t.pathname]);const g=x=>t.pathname===x,b=[{id:"overview",title:"Overview",items:[{path:"/admin",label:"Dashboard",icon:cw,badge:null}]},{id:"content-services",title:"Content & Services",items:[{path:"/admin/services",label:"Services",icon:Wt,badge:null},{path:"/admin/pricing",label:"Pricing",icon:Gs,badge:null},{path:"/admin/tiers",label:"Tiers",icon:ow,badge:null}]},{id:"operations",title:"Operations",items:[{path:"/admin/calendar",label:"Calendar",icon:gt,badge:null},{path:"/admin/quotes",label:"Quotes",icon:Ae,badge:o>0?o:null},{path:"/admin/orders",label:"Orders",icon:Hp,badge:c>0?c:null}]},{id:"management",title:"Management",items:[{path:"/admin/users",label:"Users",icon:yw,badge:null},{path:"/admin/content",label:"Content",icon:nw,badge:null}]},{id:"system",title:"System",items:[{path:"/admin/settings",label:"Settings",icon:Ii,badge:null}]}],f=[];if(i.b2b_accounts||i.inventory_management||i.analytics_dashboard){const x=[];i.b2b_accounts&&x.push({path:"/admin/b2b",label:"B2B Accounts",icon:Pa,badge:null}),i.inventory_management&&x.push({path:"/admin/inventory",label:"Inventory",icon:Yj,badge:d>0?d:null}),i.analytics_dashboard&&x.push({path:"/admin/analytics",label:"Analytics",icon:sw,badge:null}),x.length>0&&f.push({id:"phase2",title:"Advanced Features",items:x})}const v=[...b,...f],y=x=>e.jsxs(ie,{to:x.path,onClick:u,className:`flex items-center justify-between px-4 py-3 text-sm font-medium transition-all duration-200 rounded-lg group ${g(x.path)?"bg-yellow-400 text-black":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x.icon,{className:`h-5 w-5 ${g(x.path)?"text-black":"text-gray-500 group-hover:text-gray-700"}`}),e.jsx("span",{children:x.label})]}),x.badge!==null&&x.badge>0&&e.jsx("span",{className:"inline-flex items-center justify-center min-w-[20px] h-5 px-2 text-xs font-bold text-black bg-yellow-400 rounded-full",children:x.badge>99?"99+":x.badge})]},x.path),p=x=>{const w=a.includes(x.id);return e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>m(x.id),className:"flex items-center justify-between w-full px-4 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider hover:text-gray-700 transition-colors",children:[e.jsx("span",{children:x.title}),w?e.jsx(uo,{className:"h-4 w-4"}):e.jsx(an,{className:"h-4 w-4"})]}),w&&e.jsx("div",{className:"mt-2 space-y-1",children:x.items.map(R=>y(R))})]},x.id)};return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:h,className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-white rounded-lg shadow-lg border border-gray-200 hover:bg-gray-50 transition-colors","aria-label":"Toggle navigation menu",children:s?e.jsx(je,{className:"h-6 w-6 text-gray-700"}):e.jsx(xo,{className:"h-6 w-6 text-gray-700"})}),s&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:h,"aria-hidden":"true"}),e.jsxs("aside",{className:`fixed top-0 left-0 h-full bg-white border-r border-gray-200 z-40 transform transition-transform duration-300 ease-in-out ${s?"translate-x-0":"-translate-x-full"} lg:translate-x-0 w-[80vw] max-w-[320px] lg:w-[260px] overflow-y-auto`,children:[e.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-6 z-10",children:e.jsxs(ie,{to:"/admin",onClick:u,children:[e.jsx("h2",{className:"text-2xl font-bold text-black",children:"SultanStamp"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Admin Portal"})]})}),e.jsx("nav",{className:"px-3 py-6",children:v.map(x=>p(x))}),e.jsx("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4",children:e.jsx("p",{className:"text-xs text-gray-500",children:" 2024 SultanStamp"})})]}),e.jsx("div",{className:"hidden lg:block w-[260px] flex-shrink-0","aria-hidden":"true"})]})},Fw=async()=>(await $.get("http://localhost:3000/api/services",{params:{is_active:!0,is_top_seller:!0,limit:6,sort_by:"name",sort_order:"asc"}})).data.services||[],Pw=async()=>(await $.get("http://localhost:3000/api/gallery-items",{params:{is_visible:!0,limit:8,sort_by:"sort_order",sort_order:"asc"}})).data.items||[],Tw=()=>{const t=Je(),s=ae(h=>h.authentication_state.authentication_status.is_authenticated),{data:r=[],isLoading:a,error:n}=te({queryKey:["top-selling-services"],queryFn:Fw,staleTime:5*60*1e3,retry:1}),{data:l=[],isLoading:i,error:o}=te({queryKey:["gallery-preview"],queryFn:Pw,staleTime:5*60*1e3,retry:1}),c=()=>{t(s?"/app/quotes/new":"/login?redirect_url=/app/quotes/new")},d=h=>{t(`/services/${h}`)};return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"relative bg-black text-white py-20 md:py-32 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black via-gray-900 to-black opacity-90"}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -left-40 w-80 h-80 bg-yellow-400/20 rounded-full blur-3xl animate-pulse",style:{animationDuration:"4s"}}),e.jsx("div",{className:"absolute top-1/2 -right-20 w-96 h-96 bg-yellow-500/10 rounded-full blur-3xl animate-pulse",style:{animationDuration:"6s",animationDelay:"1s"}}),e.jsx("div",{className:"absolute -bottom-20 left-1/3 w-72 h-72 bg-amber-400/15 rounded-full blur-3xl animate-pulse",style:{animationDuration:"5s",animationDelay:"2s"}})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-yellow-400/5 to-transparent",style:{animation:"shimmer 8s ease-in-out infinite"}}),e.jsx("style",{children:`
          @keyframes shimmer {
            0%, 100% { transform: translateX(-100%); opacity: 0; }
            50% { transform: translateX(100%); opacity: 1; }
          }
        `}),e.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center mb-6",children:[e.jsx(yx,{className:"w-8 h-8 text-yellow-400 mr-3 animate-pulse"}),e.jsx("span",{className:"text-yellow-400 font-bold text-sm uppercase tracking-wider",children:"Premium Print & Branding Solutions"})]}),e.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold mb-6 leading-tight",children:["Personalise First,",e.jsx("br",{}),e.jsx("span",{className:"text-yellow-400",children:"Deliver Excellence"})]}),e.jsx("p",{className:"text-lg md:text-xl text-gray-300 mb-10 max-w-3xl mx-auto leading-relaxed",children:"From business cards to vehicle graphics, we bring your brand to life with disciplined timelines, transparent pricing, and uncompromising quality."}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-5",children:[e.jsxs("button",{onClick:c,className:`group relative w-full sm:w-auto px-10 py-5 bg-yellow-400 text-black font-bold text-lg rounded-xl 
                         hover:bg-yellow-500 transition-all duration-300 transform hover:scale-105 
                         shadow-lg hover:shadow-yellow-400/30 hover:shadow-2xl flex items-center justify-center`,children:["Get Your Custom Quote",e.jsx(xt,{className:"ml-3 w-6 h-6 group-hover:translate-x-1 transition-transform"})]}),e.jsx(ie,{to:"/gallery",className:`w-full sm:w-auto px-10 py-5 bg-white text-black font-bold text-lg rounded-xl 
                         hover:bg-gray-100 transition-all duration-300 border-2 border-white 
                         shadow-lg hover:shadow-white/20 hover:shadow-xl transform hover:scale-105
                         flex items-center justify-center`,children:"View Our Portfolio"})]})]})})]}),e.jsx("section",{className:"py-16 md:py-24 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"flex justify-center mb-10",children:e.jsxs("div",{className:"inline-flex items-center gap-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-3 rounded-full shadow-lg",children:[e.jsx(fw,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold text-sm md:text-base",children:"Fast delivery  Premium quality print at great prices"}),e.jsx(Xj,{className:"w-5 h-5"})]})}),e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Popular Print Categories"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Explore our most requested print products and get started on your next project"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8",children:[e.jsxs("div",{className:"group bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 md:p-8 border-2 border-blue-100 hover:border-blue-300 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-xl flex items-center justify-center mb-5 group-hover:scale-110 transition-transform duration-300 shadow-lg",children:e.jsx(pd,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Business Cards"}),e.jsx("p",{className:"text-gray-600 mb-5 text-sm leading-relaxed",children:"Make powerful first impressions with premium cards that reflect your brand's professionalism"}),e.jsxs(ie,{to:"/services",className:"inline-flex items-center px-5 py-2.5 bg-blue-500 text-white font-semibold rounded-lg hover:bg-blue-600 transition-colors duration-200 shadow-md hover:shadow-lg",children:["Shop Now",e.jsx(xt,{className:"ml-2 w-4 h-4"})]})]}),e.jsxs("div",{className:"group bg-gradient-to-br from-orange-50 to-amber-50 rounded-2xl p-6 md:p-8 border-2 border-orange-100 hover:border-orange-300 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[e.jsx("div",{className:"w-16 h-16 bg-orange-500 rounded-xl flex items-center justify-center mb-5 group-hover:scale-110 transition-transform duration-300 shadow-lg",children:e.jsx(Ae,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Flyers & Brochures"}),e.jsx("p",{className:"text-gray-600 mb-5 text-sm leading-relaxed",children:"Spread your message effectively with eye-catching designs that capture attention instantly"}),e.jsxs(ie,{to:"/services",className:"inline-flex items-center px-5 py-2.5 bg-orange-500 text-white font-semibold rounded-lg hover:bg-orange-600 transition-colors duration-200 shadow-md hover:shadow-lg",children:["Shop Now",e.jsx(xt,{className:"ml-2 w-4 h-4"})]})]}),e.jsxs("div",{className:"group bg-gradient-to-br from-purple-50 to-violet-50 rounded-2xl p-6 md:p-8 border-2 border-purple-100 hover:border-purple-300 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-500 rounded-xl flex items-center justify-center mb-5 group-hover:scale-110 transition-transform duration-300 shadow-lg",children:e.jsx(Pr,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Posters & Banners"}),e.jsx("p",{className:"text-gray-600 mb-5 text-sm leading-relaxed",children:"Stand out at events and in-store with large format prints that demand attention"}),e.jsxs(ie,{to:"/services",className:"inline-flex items-center px-5 py-2.5 bg-purple-500 text-white font-semibold rounded-lg hover:bg-purple-600 transition-colors duration-200 shadow-md hover:shadow-lg",children:["Shop Now",e.jsx(xt,{className:"ml-2 w-4 h-4"})]})]}),e.jsxs("div",{className:"group bg-gradient-to-br from-pink-50 to-rose-50 rounded-2xl p-6 md:p-8 border-2 border-pink-100 hover:border-pink-300 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[e.jsx("div",{className:"w-16 h-16 bg-pink-500 rounded-xl flex items-center justify-center mb-5 group-hover:scale-110 transition-transform duration-300 shadow-lg",children:e.jsx(xw,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Stickers & Labels"}),e.jsx("p",{className:"text-gray-600 mb-5 text-sm leading-relaxed",children:"Custom stickers and labels that stick in customers' minds and on products everywhere"}),e.jsxs(ie,{to:"/services",className:"inline-flex items-center px-5 py-2.5 bg-pink-500 text-white font-semibold rounded-lg hover:bg-pink-600 transition-colors duration-200 shadow-md hover:shadow-lg",children:["Shop Now",e.jsx(xt,{className:"ml-2 w-4 h-4"})]})]}),e.jsxs("div",{className:"group bg-gradient-to-br from-teal-50 to-cyan-50 rounded-2xl p-6 md:p-8 border-2 border-teal-100 hover:border-teal-300 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[e.jsx("div",{className:"w-16 h-16 bg-teal-500 rounded-xl flex items-center justify-center mb-5 group-hover:scale-110 transition-transform duration-300 shadow-lg",children:e.jsx(Wt,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Packaging & Custom Boxes"}),e.jsx("p",{className:"text-gray-600 mb-5 text-sm leading-relaxed",children:"Elevate your unboxing experience with custom packaging that delights customers"}),e.jsxs(ie,{to:"/services",className:"inline-flex items-center px-5 py-2.5 bg-teal-500 text-white font-semibold rounded-lg hover:bg-teal-600 transition-colors duration-200 shadow-md hover:shadow-lg",children:["Shop Now",e.jsx(xt,{className:"ml-2 w-4 h-4"})]})]}),e.jsxs("div",{className:"group bg-gradient-to-br from-slate-50 to-gray-100 rounded-2xl p-6 md:p-8 border-2 border-slate-200 hover:border-slate-400 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-700 rounded-xl flex items-center justify-center mb-5 group-hover:scale-110 transition-transform duration-300 shadow-lg",children:e.jsx(ew,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Corporate Stationery"}),e.jsx("p",{className:"text-gray-600 mb-5 text-sm leading-relaxed",children:"Complete your brand identity with letterheads, envelopes, and presentation folders"}),e.jsxs(ie,{to:"/services",className:"inline-flex items-center px-5 py-2.5 bg-slate-700 text-white font-semibold rounded-lg hover:bg-slate-800 transition-colors duration-200 shadow-md hover:shadow-lg",children:["Shop Now",e.jsx(xt,{className:"ml-2 w-4 h-4"})]})]})]}),e.jsx("div",{className:"text-center mt-12",children:e.jsxs(ie,{to:"/services",className:"inline-flex items-center px-8 py-4 bg-gray-900 text-white font-bold rounded-xl hover:bg-gray-800 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:[e.jsx(bw,{className:"mr-2 w-5 h-5 text-yellow-400"}),"Browse All Products",e.jsx(xt,{className:"ml-2 w-5 h-5"})]})})]})}),e.jsx("section",{className:"py-16 md:py-24 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-black mb-4",children:"Our Top Services"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Discover our most popular solutions, trusted by businesses across Ireland"})]}),a&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(h=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded mb-4 w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2 w-full"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2 w-5/6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-6 w-4/6"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded w-full"})]},h))}),n&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:e.jsx("p",{className:"text-red-700 font-medium",children:"Unable to load services. Please try again later."})}),!a&&!n&&r.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map(h=>e.jsxs("div",{className:`bg-white rounded-xl shadow-lg border border-gray-100 p-8 
                           hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1 
                           flex flex-col`,children:[e.jsx("h3",{className:"text-xl font-bold text-black mb-3",children:h.name}),e.jsx("p",{className:"text-gray-600 mb-6 flex-grow leading-relaxed",children:h.description.length>120?`${h.description.substring(0,120)}...`:h.description}),e.jsxs("button",{onClick:()=>d(h.slug),className:`w-full px-6 py-3 bg-black text-white font-semibold rounded-lg 
                             hover:bg-gray-800 transition-all duration-200 flex items-center justify-center`,children:["Learn More",e.jsx(xt,{className:"ml-2 w-4 h-4"})]})]},h.id))}),!a&&!n&&r.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600 text-lg",children:"Our services are currently being updated. Please check back soon!"})}),r.length>0&&e.jsx("div",{className:"text-center mt-12",children:e.jsxs(ie,{to:"/services",className:`inline-flex items-center text-black font-semibold hover:text-gray-700 
                         transition-colors text-lg`,children:["View All Services",e.jsx(xt,{className:"ml-2 w-5 h-5"})]})})]})}),e.jsx("section",{className:"py-16 md:py-24 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-black mb-4",children:"Our Recent Work"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"See how we've helped businesses stand out with stunning print and branding solutions"})]}),i&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[1,2,3,4,5,6,7,8].map(h=>e.jsx("div",{className:"aspect-square bg-gray-200 rounded-lg animate-pulse"},h))}),o&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:e.jsx("p",{className:"text-red-700 font-medium",children:"Unable to load gallery. Please try again later."})}),!i&&!o&&l.length>0&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:l.map(h=>e.jsxs(ie,{to:"/gallery",className:`group relative aspect-square overflow-hidden rounded-lg shadow-md 
                           hover:shadow-xl transition-all duration-300`,children:[e.jsx("img",{src:h.image_url,alt:h.title||"Portfolio item",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),h.title&&e.jsx("div",{className:`absolute inset-0 bg-gradient-to-t from-black/70 to-transparent 
                                  opacity-0 group-hover:opacity-100 transition-opacity duration-300 
                                  flex items-end p-4`,children:e.jsx("p",{className:"text-white font-semibold text-sm",children:h.title})})]},h.id))}),l.length>0&&e.jsx("div",{className:"text-center mt-12",children:e.jsxs(ie,{to:"/gallery",className:`inline-flex items-center px-8 py-4 bg-yellow-400 text-black font-bold 
                         rounded-lg hover:bg-yellow-500 transition-all duration-200 shadow-lg 
                         hover:shadow-xl transform hover:scale-105`,children:["View Full Portfolio",e.jsx(xt,{className:"ml-2 w-5 h-5"})]})})]})}),e.jsx("section",{className:"py-16 md:py-24 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-black mb-4",children:"How It Works"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Our streamlined process ensures your project is delivered on time, every time"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[e.jsxs("div",{className:`bg-white rounded-xl shadow-lg border border-gray-100 p-6 text-center 
                          hover:shadow-xl transition-shadow duration-300`,children:[e.jsx("div",{className:`w-16 h-16 bg-yellow-400 text-black rounded-full flex items-center 
                            justify-center text-2xl font-bold mx-auto mb-4`,children:"1"}),e.jsx(yx,{className:"w-8 h-8 text-black mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-bold text-black mb-2",children:"Choose Service"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Select from our range of print and branding solutions"})]}),e.jsxs("div",{className:`bg-white rounded-xl shadow-lg border border-gray-100 p-6 text-center 
                          hover:shadow-xl transition-shadow duration-300`,children:[e.jsx("div",{className:`w-16 h-16 bg-yellow-400 text-black rounded-full flex items-center 
                            justify-center text-2xl font-bold mx-auto mb-4`,children:"2"}),e.jsx(sa,{className:"w-8 h-8 text-black mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-bold text-black mb-2",children:"Get Quote"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Provide project details and receive transparent pricing"})]}),e.jsxs("div",{className:`bg-white rounded-xl shadow-lg border border-gray-100 p-6 text-center 
                          hover:shadow-xl transition-shadow duration-300`,children:[e.jsx("div",{className:`w-16 h-16 bg-yellow-400 text-black rounded-full flex items-center 
                            justify-center text-2xl font-bold mx-auto mb-4`,children:"3"}),e.jsx(gt,{className:"w-8 h-8 text-black mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-bold text-black mb-2",children:"Book Slot"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Choose your preferred delivery timeline"})]}),e.jsxs("div",{className:`bg-white rounded-xl shadow-lg border border-gray-100 p-6 text-center 
                          hover:shadow-xl transition-shadow duration-300`,children:[e.jsx("div",{className:`w-16 h-16 bg-yellow-400 text-black rounded-full flex items-center 
                            justify-center text-2xl font-bold mx-auto mb-4`,children:"4"}),e.jsx(mw,{className:"w-8 h-8 text-black mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-bold text-black mb-2",children:"Approve Proof"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Review and approve your design before production"})]}),e.jsxs("div",{className:`bg-white rounded-xl shadow-lg border border-gray-100 p-6 text-center 
                          hover:shadow-xl transition-shadow duration-300`,children:[e.jsx("div",{className:`w-16 h-16 bg-yellow-400 text-black rounded-full flex items-center 
                            justify-center text-2xl font-bold mx-auto mb-4`,children:"5"}),e.jsx(ju,{className:"w-8 h-8 text-black mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-bold text-black mb-2",children:"Receive Order"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get your high-quality print delivered on schedule"})]})]})]})}),e.jsx("section",{className:"py-16 md:py-24 bg-black text-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Why Choose SultanStamp?"}),e.jsx("p",{className:"text-lg text-gray-300 max-w-2xl mx-auto",children:"Three core principles that drive everything we do"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:`bg-gray-900 rounded-xl p-8 text-center hover:bg-gray-800 
                          transition-colors duration-300 border border-gray-800`,children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-400 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(rt,{className:"w-8 h-8 text-black"})}),e.jsx("h3",{className:"text-2xl font-bold mb-3 text-yellow-400",children:"Uncompromising Quality"}),e.jsx("p",{className:"text-gray-300 leading-relaxed",children:"Premium materials, expert craftsmanship, and rigorous quality control ensure your brand looks its absolute best"})]}),e.jsxs("div",{className:`bg-gray-900 rounded-xl p-8 text-center hover:bg-gray-800 
                          transition-colors duration-300 border border-gray-800`,children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-400 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(kt,{className:"w-8 h-8 text-black"})}),e.jsx("h3",{className:"text-2xl font-bold mb-3 text-yellow-400",children:"Disciplined Timelines"}),e.jsx("p",{className:"text-gray-300 leading-relaxed",children:"Clear deadlines, real-time tracking, and on-schedule delivery. Your project arrives when we promise it will"})]}),e.jsxs("div",{className:`bg-gray-900 rounded-xl p-8 text-center hover:bg-gray-800 
                          transition-colors duration-300 border border-gray-800`,children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-400 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Gs,{className:"w-8 h-8 text-black"})}),e.jsx("h3",{className:"text-2xl font-bold mb-3 text-yellow-400",children:"Transparent Pricing"}),e.jsx("p",{className:"text-gray-300 leading-relaxed",children:"No hidden fees, no surprises. Get instant quotes with detailed breakdowns before you commit"})]})]})]})}),e.jsx("section",{className:"py-16 md:py-20 bg-gradient-to-br from-yellow-400 to-yellow-500",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-black mb-4",children:"Ready to Elevate Your Brand?"}),e.jsx("p",{className:"text-lg text-gray-900 mb-8 max-w-2xl mx-auto",children:"Get your custom quote in minutes and start your project with Ireland's most reliable print partner"}),e.jsxs("button",{onClick:c,className:`inline-flex items-center px-10 py-5 bg-black text-white font-bold 
                     rounded-lg hover:bg-gray-800 transition-all duration-200 shadow-xl 
                     hover:shadow-2xl transform hover:scale-105 text-lg`,children:["Get Your Free Quote Now",e.jsx(xt,{className:"ml-3 w-6 h-6"})]})]})})]})},Rw=async()=>(await $.get("http://localhost:3000/api/content-pages/about_us")).data,Ow=()=>{const t=ae(l=>l.authentication_state.authentication_status.is_authenticated);ae(l=>l.authentication_state.current_user);const{data:s,isLoading:r,error:a,refetch:n}=te({queryKey:["about-content"],queryFn:Rw,staleTime:60*60*1e3,retry:2});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r&&e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-black"}),e.jsx("p",{className:"text-gray-900 text-lg font-semibold",children:"Loading..."})]})}),a&&!r&&e.jsx("div",{className:"flex items-center justify-center min-h-screen px-4",children:e.jsx("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg border border-gray-200 p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("h2",{className:"mt-4 text-2xl font-bold text-gray-900",children:"Failed to Load Content"}),e.jsx("p",{className:"mt-2 text-gray-600",children:a instanceof Error?a.message:"Unable to fetch about page content. Please try again."}),e.jsx("button",{onClick:()=>n(),className:"mt-6 px-6 py-3 bg-black text-white font-semibold rounded-lg hover:bg-gray-800 transition-colors duration-200",children:"Retry"})]})})}),s&&!r&&!a&&e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"bg-gradient-to-br from-gray-50 to-gray-100 py-16 md:py-24 lg:py-32",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 leading-tight",children:s.content.hero.headline||"About SultanStamp"}),e.jsx("p",{className:"mt-6 text-xl md:text-2xl text-gray-600 leading-relaxed",children:s.content.hero.subheadline||"Your trusted partner for premium print and branding solutions"})]})})}),e.jsx("section",{className:"py-16 md:py-20 lg:py-24",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("article",{className:"prose prose-lg max-w-none",children:e.jsx("div",{className:"text-gray-700 leading-relaxed space-y-6",children:s.content.narrative.split(`

`).map((l,i)=>e.jsx("p",{className:"text-lg",children:l},i))})})})}),e.jsx("section",{className:"py-16 md:py-20 lg:py-24 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12 lg:mb-16",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:"Our Values"}),e.jsx("p",{className:"mt-4 text-xl text-gray-600",children:"The principles that guide everything we do"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.content.values.map((l,i)=>e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-lg hover:shadow-xl transition-all duration-200 p-8",children:[l.icon_url&&e.jsx("div",{className:"w-16 h-16 mb-6",children:e.jsx("img",{src:l.icon_url,alt:`${l.name} icon`,className:"w-full h-full object-contain",onError:o=>{o.currentTarget.style.display="none"}})}),!l.icon_url&&e.jsx("div",{className:"w-16 h-16 mb-6 bg-yellow-400 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-black",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:l.name}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:l.description})]},i))})]})}),s.content.team&&s.content.team.length>0&&e.jsx("section",{className:"py-16 md:py-20 lg:py-24 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12 lg:mb-16",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:"Meet Our Team"}),e.jsx("p",{className:"mt-4 text-xl text-gray-600",children:"The people behind your perfect print"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.content.team.map((l,i)=>e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-lg overflow-hidden hover:shadow-xl transition-all duration-200",children:[l.photo_url&&e.jsx("div",{className:"aspect-w-3 aspect-h-4 bg-gray-200",children:e.jsx("img",{src:l.photo_url,alt:l.name,className:"w-full h-64 object-cover",onError:o=>{o.currentTarget.src="",o.currentTarget.style.display="none"}})}),!l.photo_url&&e.jsx("div",{className:"w-full h-64 bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center",children:e.jsx("svg",{className:"w-24 h-24 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:l.name}),e.jsx("p",{className:"text-yellow-600 font-semibold mb-3",children:l.role}),l.bio&&e.jsx("p",{className:"text-gray-600 leading-relaxed",children:l.bio})]})]},i))})]})}),e.jsx("section",{className:"py-16 md:py-20 lg:py-24 bg-gradient-to-br from-gray-900 to-black",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-6",children:"Ready to Start Your Project?"}),e.jsx("p",{className:"text-xl text-gray-300 mb-8 leading-relaxed",children:"Let's bring your vision to life with our disciplined approach to quality printing and branding."}),e.jsxs(ie,{to:t?"/app/quotes/new":"/login?redirect_url=/app/quotes/new",className:"inline-flex items-center px-8 py-4 bg-yellow-400 text-black font-bold text-lg rounded-lg hover:bg-yellow-500 hover:scale-105 transition-all duration-200 shadow-xl",children:["Start Your Project",e.jsx("svg",{className:"ml-2 w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),!t&&e.jsx("p",{className:"mt-4 text-sm text-gray-400",children:"You'll be prompted to log in or create an account"})]})})]})]})})},Aw=()=>{const[t,s]=Ye(),r=Je(),[a,n]=j.useState(null),[l,i]=j.useState({category:t.get("category")||null,tag:t.get("tag")||null}),{data:o,isLoading:c,error:d}=te({queryKey:["gallery-items",l.category,l.tag],queryFn:async()=>{const k=new URLSearchParams({is_visible:"true",limit:"50",sort_by:"sort_order",sort_order:"asc"});return l.category&&k.append("category",l.category),l.tag&&k.append("tag",l.tag),(await $.get(`http://localhost:3000/api/gallery-items?${k.toString()}`)).data},staleTime:6e4,refetchOnWindowFocus:!1,retry:1}),h=(o==null?void 0:o.items)||[],m=[...new Set(h.map(k=>k.category).filter(Boolean))],u=[...new Set(h.map(k=>k.tag).filter(Boolean))],{data:g,isLoading:b,refetch:f}=te({queryKey:["case-study",a==null?void 0:a.id],queryFn:async()=>a!=null&&a.id?(await $.get(`http://localhost:3000/api/case-studies/${a.id}`)).data:null,enabled:!1,staleTime:6e4});j.useEffect(()=>{const k=new URLSearchParams;l.category&&k.set("category",l.category),l.tag&&k.set("tag",l.tag),s(k)},[l,s]),j.useEffect(()=>{const k=t.get("category"),L=t.get("tag");i({category:k||null,tag:L||null})},[]),j.useEffect(()=>{const k=L=>{L.key==="Escape"&&a&&w()};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[a]);const v=k=>{i(L=>({...L,category:k}))},y=k=>{i(L=>({...L,tag:k}))},p=()=>{i({category:null,tag:null})},x=async k=>{if(k.case_study_id){n({id:k.case_study_id});const L=await f();L.data&&n(L.data)}},w=()=>{n(null)},R=k=>{r(`/app/quotes/new?service_id=${k}`)},N=l.category||l.tag;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 py-16 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-black mb-4 leading-tight",children:"Our Portfolio"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed",children:"Explore our comprehensive portfolio showcasing high-quality print, branding, and signage projects"})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-40 shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pn,{className:"w-5 h-5 text-black"}),e.jsx("h2",{className:"text-lg font-semibold text-black",children:"Filter Gallery"}),N&&e.jsx("button",{onClick:p,className:"ml-4 text-sm font-medium text-gray-600 hover:text-black transition-colors duration-200",children:"Clear All"})]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[m.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mr-2 flex items-center",children:"Categories:"}),m.map(k=>e.jsx("button",{onClick:()=>v(k),className:`px-4 py-2 rounded-lg text-sm font-semibold transition-all duration-200 ${l.category===k?"bg-yellow-400 text-black shadow-lg scale-105":"bg-gray-100 text-gray-900 hover:bg-gray-200 border-2 border-gray-300"}`,children:k},k))]}),u.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mr-2 flex items-center",children:"Tags:"}),u.map(k=>e.jsx("button",{onClick:()=>y(k),className:`px-4 py-2 rounded-lg text-sm font-semibold transition-all duration-200 ${l.tag===k?"bg-yellow-400 text-black shadow-lg scale-105":"bg-gray-100 text-gray-900 hover:bg-gray-200 border-2 border-gray-300"}`,children:k},k))]})]})]}),N&&e.jsxs("div",{className:"mt-4 flex items-center gap-3 flex-wrap",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Active Filters:"}),l.category&&e.jsxs("div",{className:"flex items-center gap-2 bg-yellow-100 text-black px-3 py-1 rounded-full text-sm font-semibold border border-yellow-300",children:["Category: ",l.category,e.jsx("button",{onClick:()=>i(k=>({...k,category:null})),className:"ml-1 hover:text-gray-700 transition-colors","aria-label":"Remove category filter",children:e.jsx(je,{className:"w-4 h-4"})})]}),l.tag&&e.jsxs("div",{className:"flex items-center gap-2 bg-yellow-100 text-black px-3 py-1 rounded-full text-sm font-semibold border border-yellow-300",children:["Tag: ",l.tag,e.jsx("button",{onClick:()=>i(k=>({...k,tag:null})),className:"ml-1 hover:text-gray-700 transition-colors","aria-label":"Remove tag filter",children:e.jsx(je,{className:"w-4 h-4"})})]})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:c?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-yellow-400"}),e.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"Loading gallery..."})]})}):d?e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 text-red-700 px-6 py-4 rounded-lg",children:[e.jsx("p",{className:"font-semibold",children:"Error loading gallery"}),e.jsx("p",{className:"text-sm mt-1",children:"Please try again later"})]}):h.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(Pr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-black mb-2",children:"No items found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:N?"Try adjusting your filters to see more results":"Gallery items will appear here once added"}),N&&e.jsx("button",{onClick:p,className:"bg-yellow-400 text-black px-6 py-3 rounded-lg font-bold hover:bg-yellow-500 transition-all duration-200 shadow-lg hover:shadow-xl",children:"Clear Filters"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(k=>e.jsxs("div",{onClick:()=>x(k),className:"group relative bg-white rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer border-2 border-gray-100",children:[e.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-gray-100",children:[e.jsx("img",{src:k.image_url,alt:k.title||"Gallery item",loading:"lazy",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-300 flex items-center justify-center",children:e.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:k.case_study_id?e.jsxs("div",{className:"bg-yellow-400 text-black px-6 py-3 rounded-lg font-bold flex items-center gap-2 shadow-xl",children:["View Case Study",e.jsx(cl,{className:"w-5 h-5"})]}):e.jsx("div",{className:"bg-white text-black px-6 py-3 rounded-lg font-bold shadow-xl",children:"View Image"})})}),e.jsxs("div",{className:"absolute top-3 left-3 flex gap-2",children:[k.category&&e.jsx("span",{className:"bg-yellow-400 text-black px-3 py-1 rounded-full text-xs font-bold shadow-md",children:k.category}),k.tag&&e.jsx("span",{className:"bg-black text-white px-3 py-1 rounded-full text-xs font-bold shadow-md",children:k.tag})]})]}),k.title&&e.jsx("div",{className:"p-4",children:e.jsx("h3",{className:"text-lg font-semibold text-black line-clamp-2",children:k.title})})]},k.id))})}),a&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-75 flex items-center justify-center p-4",onClick:w,children:e.jsxs("div",{className:"relative bg-white rounded-xl max-w-5xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",onClick:k=>k.stopPropagation(),children:[e.jsx("button",{onClick:w,className:"absolute top-4 right-4 z-10 bg-white text-black p-2 rounded-full shadow-lg hover:bg-gray-100 transition-colors border-2 border-gray-300","aria-label":"Close modal",children:e.jsx(je,{className:"w-6 h-6"})}),b?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-yellow-400"}),e.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"Loading case study..."})]})}):g?e.jsxs(e.Fragment,{children:[g.image_urls&&g.image_urls.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-6",children:g.image_urls.map((k,L)=>e.jsx("div",{className:"relative aspect-[4/3] rounded-lg overflow-hidden bg-gray-100 border-2 border-gray-200",children:e.jsx("img",{src:k,alt:`${g.title} - Image ${L+1}`,className:"w-full h-full object-cover"})},L))}),e.jsxs("div",{className:"px-6 pb-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-black mb-2 leading-tight",children:g.title}),g.client_name&&e.jsxs("p",{className:"text-lg text-gray-600",children:["Client: ",e.jsx("span",{className:"font-semibold text-black",children:g.client_name})]})]}),e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{className:"text-gray-700 text-base leading-relaxed whitespace-pre-wrap",children:g.description})}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[g.service_ids&&g.service_ids.length>0&&e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Services:"}),g.service_ids.map(k=>e.jsx("span",{className:"bg-yellow-400 text-black px-3 py-1 rounded-full text-sm font-bold",children:k},k))]}),g.tier_id&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Tier:"}),e.jsx("span",{className:"bg-black text-white px-3 py-1 rounded-full text-sm font-bold",children:g.tier_id})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 pt-4 border-t-2 border-gray-200",children:[g.service_ids&&g.service_ids.length>0&&e.jsxs("button",{onClick:()=>R(g.service_ids[0]),className:"bg-yellow-400 text-black px-8 py-4 rounded-lg font-bold text-lg hover:bg-yellow-500 transition-all duration-200 shadow-lg hover:shadow-xl flex items-center gap-2",children:["Request Similar Quote",e.jsx(cl,{className:"w-5 h-5"})]}),e.jsx("button",{onClick:w,className:"bg-gray-100 text-black px-8 py-4 rounded-lg font-semibold text-lg hover:bg-gray-200 transition-colors border-2 border-gray-300",children:"Close"})]})]})]}):e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-center text-gray-600 text-lg",children:"Case study not found"})})]})})]})},Lw=async()=>(await $.get("http://localhost:3000/api/service-categories",{params:{is_active:!0,sort_by:"sort_order",sort_order:"asc",limit:100}})).data,Mw=async()=>(await $.get("http://localhost:3000/api/services",{params:{is_active:!0,sort_by:"name",sort_order:"asc",limit:200}})).data,Dw=()=>{var p;const[t,s]=j.useState(null),{data:r,isLoading:a,isError:n,error:l,refetch:i}=te({queryKey:["service-categories",{is_active:!0}],queryFn:Lw,staleTime:5*60*1e3,refetchOnWindowFocus:!1,retry:1}),o=(r==null?void 0:r.categories)||[],{data:c,isLoading:d,isError:h,error:m,refetch:u}=te({queryKey:["services",{is_active:!0}],queryFn:Mw,select:x=>{const w=x.services||[],R={};return w.forEach(N=>{R[N.category_id]||(R[N.category_id]=[]),R[N.category_id].push(N)}),R},staleTime:5*60*1e3,refetchOnWindowFocus:!1,retry:1}),g=j.useMemo(()=>c?t?c[t]||[]:Object.values(c).flat():[],[c,t]),b=j.useMemo(()=>{if(!c)return{};const x={};return Object.entries(c).forEach(([w,R])=>{x[w]=R.length}),x},[c]),f=j.useMemo(()=>Object.values(b).reduce((x,w)=>x+w,0),[b]),v=x=>{if(s(x),window.innerWidth<768){const w=document.getElementById("services-grid");w&&w.scrollIntoView({behavior:"smooth",block:"start"})}},y=x=>e.jsxs("div",{className:"flex flex-wrap gap-2",children:[x.is_top_seller&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-yellow-400 text-black border-2 border-black",children:" Popular"}),x.requires_booking&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-yellow-400 text-black",children:" Booking Required"}),x.requires_proof&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-white text-black border-2 border-black",children:" Proof Required"})]});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("section",{className:"bg-gradient-to-br from-gray-900 to-black text-white py-12 lg:py-20",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold mb-4 leading-tight",children:"Our Services"}),e.jsx("p",{className:"text-lg md:text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:"Discover our comprehensive range of professional printing, branding, and signage services. From business cards to vehicle wraps, we deliver exceptional quality every time."})]})})}),n&&e.jsx("div",{className:"bg-yellow-400 border-b-4 border-black",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-2xl mr-3",children:""}),e.jsx("p",{className:"text-black font-semibold",children:"Unable to load service categories. Please refresh the page."})]}),e.jsx("button",{onClick:()=>i(),className:"px-4 py-2 bg-black text-white font-medium rounded-lg hover:bg-gray-800 transition-all duration-200",children:"Retry"})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"lg:flex lg:gap-8",children:[e.jsx("aside",{className:"hidden lg:block lg:w-64 flex-shrink-0",children:e.jsx("div",{className:"sticky top-6",children:e.jsxs("nav",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-900 to-black border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-bold text-white",children:"Categories"})}),e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsx("button",{onClick:()=>v(null),className:`w-full text-left px-4 py-3 rounded-lg font-medium transition-all duration-200 ${t===null?"bg-yellow-400 text-black border-2 border-black shadow-md":"bg-gray-100 text-gray-900 hover:bg-gray-200 border-2 border-transparent"}`,"aria-current":t===null?"true":void 0,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"All Services"}),e.jsx("span",{className:`text-sm font-bold ${t===null?"text-black":"text-gray-600"}`,children:f})]})}),a?e.jsx("div",{className:"space-y-2",children:[1,2,3,4].map(x=>e.jsx("div",{className:"h-12 bg-gray-200 rounded-lg animate-pulse"},x))}):o.map(x=>e.jsx("button",{onClick:()=>v(x.id),className:`w-full text-left px-4 py-3 rounded-lg font-medium transition-all duration-200 ${t===x.id?"bg-yellow-400 text-black border-2 border-black shadow-md":"bg-gray-100 text-gray-900 hover:bg-gray-200 border-2 border-transparent"}`,"aria-label":`Filter by ${x.name}`,"aria-current":t===x.id?"true":void 0,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:x.name}),e.jsx("span",{className:`text-sm font-bold ${t===x.id?"text-black":"text-gray-600"}`,children:b[x.id]||0})]})},x.id))]})]})})}),e.jsxs("main",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"lg:hidden mb-8",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"overflow-x-auto scrollbar-hide -mx-4 px-4",children:e.jsxs("div",{className:"flex gap-3 pb-2",style:{scrollSnapType:"x mandatory"},children:[e.jsxs("button",{onClick:()=>v(null),className:`flex-shrink-0 px-4 py-2 rounded-full font-medium text-sm transition-all duration-200 border-2 ${t===null?"bg-yellow-400 text-black border-black":"bg-white text-gray-900 border-gray-300"}`,style:{scrollSnapAlign:"start"},children:["All (",f,")"]}),a?e.jsx(e.Fragment,{children:[1,2,3,4].map(x=>e.jsx("div",{className:"flex-shrink-0 h-10 w-24 bg-gray-200 rounded-full animate-pulse"},x))}):o.map(x=>e.jsxs("button",{onClick:()=>v(x.id),className:`flex-shrink-0 px-4 py-2 rounded-full font-medium text-sm transition-all duration-200 border-2 ${t===x.id?"bg-yellow-400 text-black border-black":"bg-white text-gray-900 border-gray-300"}`,style:{scrollSnapAlign:"start"},children:[x.name," (",b[x.id]||0,")"]},x.id))]})})})}),e.jsxs("div",{id:"services-grid",children:[d&&e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-yellow-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading services..."})]})}),h&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-12 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Unable to Load Services"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We couldn't fetch our services at this time. Please try again."}),e.jsx("button",{onClick:()=>u(),className:"px-6 py-3 bg-yellow-400 text-black font-bold rounded-lg hover:bg-yellow-500 transition-all duration-200 border-2 border-black shadow-lg hover:shadow-xl",children:"Retry"})]}),!d&&!h&&g.length===0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-12 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:t?"No Services in This Category":"No Services Available"}),e.jsx("p",{className:"text-gray-600 mb-6",children:t?"Check back soon or explore other categories.":"Our services catalog is currently being updated. Please check back soon!"}),t&&e.jsx("button",{onClick:()=>v(null),className:"px-6 py-3 bg-yellow-400 text-black font-bold rounded-lg hover:bg-yellow-500 transition-all duration-200 border-2 border-black",children:"View All Services"})]}),!d&&!h&&g.length>0&&e.jsxs(e.Fragment,{children:[t&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:((p=o.find(x=>x.id===t))==null?void 0:p.name)||"Services"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[g.length," service",g.length!==1?"s":""," available"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(x=>e.jsxs("article",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden transition-all duration-200 hover:shadow-2xl hover:scale-105","aria-label":`${x.name} service`,children:[e.jsx("div",{className:"h-48 bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-2",children:""}),e.jsx("p",{className:"text-gray-600 font-medium",children:x.name})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 leading-tight",children:x.name}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3 leading-relaxed",children:x.description}),e.jsx("div",{className:"mb-6",children:y(x)}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(ie,{to:`/services/${x.slug}`,className:"flex-1 px-4 py-3 bg-gray-100 text-gray-900 font-semibold rounded-lg text-center hover:bg-gray-200 transition-all duration-200 border-2 border-gray-300",children:"View Details"}),e.jsx(ie,{to:`/app/quotes/new?service_id=${x.id}`,className:"flex-1 px-4 py-3 bg-yellow-400 text-black font-bold rounded-lg text-center hover:bg-yellow-500 transition-all duration-200 border-2 border-black shadow-lg hover:shadow-xl",children:"Get Quote"})]})]})]},x.id))})]})]})]})]})}),e.jsx("section",{className:"bg-gradient-to-br from-gray-900 to-black text-white py-12 lg:py-16",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Can't Find What You're Looking For?"}),e.jsx("p",{className:"text-lg text-gray-300 mb-8 leading-relaxed",children:"We offer custom solutions for unique projects. Get in touch to discuss your specific requirements."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(ie,{to:"/contact",className:"px-8 py-4 bg-white text-black font-bold rounded-lg hover:bg-gray-100 transition-all duration-200 text-center border-2 border-white shadow-lg hover:shadow-xl",children:"Contact Us"}),e.jsx(ie,{to:"/app/quotes/new",className:"px-8 py-4 bg-yellow-400 text-black font-bold rounded-lg hover:bg-yellow-500 transition-all duration-200 text-center border-2 border-yellow-400 shadow-lg hover:shadow-xl",children:"Start Custom Quote"})]})]})})]})})},$w=()=>{const{service_slug:t}=bl(),s=Je();ae(g=>g.authentication_state.authentication_status.is_authenticated);const r="http://localhost:3000",{data:a,isLoading:n,error:l}=te({queryKey:["service",t],queryFn:async()=>{var f;const b=(f=(await $.get(`${r}/api/services`,{params:{query:t,is_active:!0,limit:1}})).data.services)==null?void 0:f.find(v=>v.slug===t);if(!b||!b.is_active)throw new Error("Service not found or inactive");return b},enabled:!!t,staleTime:5*60*1e3,retry:1}),{data:i,isLoading:o}=te({queryKey:["service-options",a==null?void 0:a.id],queryFn:async()=>((await $.get(`${r}/api/services/${a.id}/options`)).data.options||[]).sort((f,v)=>f.sort_order-v.sort_order),enabled:!!(a!=null&&a.id),staleTime:5*60*1e3}),{data:c,isLoading:d}=te({queryKey:["gallery-items",a==null?void 0:a.id],queryFn:async()=>(await $.get(`${r}/api/gallery-items`,{params:{service_id:a.id,is_visible:!0,limit:6,sort_by:"sort_order"}})).data.items||[],enabled:!!(a!=null&&a.id),staleTime:5*60*1e3}),h=()=>{a&&s(`/app/quotes/new?service_id=${a.id}`)},m=n,u=!!l;return e.jsxs(e.Fragment,{children:[m&&e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-64 mb-8"}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-12",children:[e.jsx("div",{className:"h-10 bg-gray-200 rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-6"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-4/6"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-12",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-6"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"h-20 bg-gray-200 rounded"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded"})]})]})]})})}),u&&!m&&e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-3xl mx-auto text-center",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12",children:[e.jsx("svg",{className:"mx-auto h-24 w-24 text-gray-400 mb-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Service Not Found"}),e.jsx("p",{className:"text-lg text-gray-600 mb-8",children:"Sorry, we couldn't find the service you're looking for. It may have been removed or is currently unavailable."}),e.jsxs("div",{className:"space-x-4",children:[e.jsx(ie,{to:"/services",className:"inline-block px-8 py-3 bg-black text-white font-semibold rounded-lg hover:bg-gray-800 transition-colors duration-200",children:"View All Services"}),e.jsx(ie,{to:"/",className:"inline-block px-8 py-3 bg-gray-100 text-black font-semibold rounded-lg hover:bg-gray-200 transition-colors duration-200",children:"Go Home"})]})]})})}),a&&!m&&!u&&e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-24",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("nav",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(ie,{to:"/",className:"hover:text-gray-900",children:"Home"}),e.jsx("span",{children:"/"}),e.jsx(ie,{to:"/services",className:"hover:text-gray-900",children:"Services"}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"text-gray-900 font-medium",children:a.name})]})})}),e.jsx("div",{className:"bg-gradient-to-br from-white to-gray-100 py-12 lg:py-16",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8 lg:p-12",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-8",children:[e.jsxs("div",{className:"flex-1",children:[a.is_top_seller&&e.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-yellow-400 text-black font-bold rounded-lg mb-4",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),"Top Seller"]}),e.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-gray-900 mb-6 leading-tight",children:a.name}),e.jsx("p",{className:"text-lg text-gray-700 leading-relaxed mb-6",children:a.description}),e.jsxs("div",{className:"flex flex-wrap gap-3 mb-8",children:[a.requires_booking&&e.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-900 rounded-lg border border-gray-300",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{className:"font-medium",children:"Booking Required"})]}),a.requires_proof&&e.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-900 rounded-lg border border-gray-300",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"font-medium",children:"Proof Approval Process"})]})]}),e.jsx("div",{className:"hidden lg:block",children:e.jsx("button",{onClick:h,className:"px-8 py-4 bg-yellow-400 text-black font-bold rounded-lg hover:bg-yellow-500 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:"Build Your Quote"})})]}),e.jsxs("div",{className:"hidden lg:block lg:w-80 bg-gray-50 rounded-lg p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Quick Facts"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Service Category"}),e.jsx("p",{className:"font-semibold text-gray-900",children:"Professional Printing"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Options Available"}),e.jsx("p",{className:"font-semibold text-gray-900",children:i?i.length:"Loading..."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Portfolio Examples"}),e.jsx("p",{className:"font-semibold text-gray-900",children:c?c.length:"Loading..."})]})]})]})]})})})}),i&&i.length>0&&e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8 lg:p-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Configuration Options"}),e.jsx("p",{className:"text-lg text-gray-600 mb-8",children:"These are some of the options you'll be able to configure when building your custom quote:"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.slice(0,6).map(g=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:g.label}),g.required&&e.jsx("span",{className:"text-xs font-bold text-red-600 bg-red-100 px-2 py-1 rounded",children:"Required"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["Type: ",e.jsx("span",{className:"capitalize font-medium",children:g.field_type})]}),g.choices&&g.choices.length>0&&e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("p",{className:"font-medium mb-2",children:"Available choices:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[g.choices.slice(0,3).map((b,f)=>e.jsx("span",{className:"inline-block px-2 py-1 bg-white border border-gray-300 rounded text-xs",children:b},f)),g.choices.length>3&&e.jsxs("span",{className:"inline-block px-2 py-1 text-xs text-gray-500",children:["+",g.choices.length-3," more"]})]})]})]},g.id))}),i.length>6&&e.jsxs("p",{className:"text-gray-600 mt-6 text-center",children:["And ",i.length-6," more configuration options available in the quote builder..."]})]})}),o&&e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8 lg:p-12",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-6"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"h-32 bg-gray-200 rounded"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded"})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8 lg:p-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"File Requirements"}),e.jsx("p",{className:"text-lg text-gray-600 mb-8",children:"To ensure the best quality results, please prepare your files according to these guidelines:"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsxs("svg",{className:"w-6 h-6 mr-2 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:[e.jsx("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),e.jsx("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"})]}),"Resolution & Quality"]}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mr-3 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Minimum 300 DPI for print-ready files"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mr-3 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"CMYK color mode (not RGB)"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mr-3 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Outlined fonts or embedded typefaces"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mr-3 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Include 3mm bleed on all sides"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("svg",{className:"w-6 h-6 mr-2 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})}),"Accepted File Formats"]}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mr-3 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsxs("span",{className:"text-gray-700",children:[e.jsx("strong",{children:".AI"})," (Adobe Illustrator) - Preferred"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mr-3 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsxs("span",{className:"text-gray-700",children:[e.jsx("strong",{children:".PDF"})," (High Quality Print)"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mr-3 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsxs("span",{className:"text-gray-700",children:[e.jsx("strong",{children:".PSD"})," (Adobe Photoshop)"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mr-3 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsxs("span",{className:"text-gray-700",children:[e.jsx("strong",{children:".EPS"})," (Encapsulated PostScript)"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-yellow-600 mr-3 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsxs("span",{className:"text-gray-700",children:[e.jsx("strong",{children:".PNG / .JPG"})," - May require adjustment"]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("svg",{className:"w-6 h-6 mr-2 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),"File Size & Compression"]}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mr-3 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Maximum file size: 100MB per file"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mr-3 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Compress large files using ZIP or RAR"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mr-3 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Multiple files accepted in quote builder"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("svg",{className:"w-6 h-6 mr-2 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"Important Notes"]}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 mr-3 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Files below 300 DPI will show a quality warning"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 mr-3 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"We'll review your files and provide feedback before printing"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 mr-3 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Contact us if you need help preparing your files"})]})]})]})]})]})}),c&&c.length>0&&e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8 lg:p-12",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Portfolio Examples"}),e.jsx("p",{className:"text-lg text-gray-600",children:"See what we've created for other clients with this service"})]}),e.jsxs(ie,{to:`/gallery?service_id=${a.id}`,className:"hidden lg:inline-flex items-center px-6 py-3 bg-gray-100 text-black font-semibold rounded-lg hover:bg-gray-200 transition-colors duration-200",children:["View More Examples",e.jsx("svg",{className:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(g=>e.jsxs("div",{className:"group relative bg-gray-100 rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-all duration-200 cursor-pointer",children:[e.jsx("div",{className:"aspect-w-16 aspect-h-12 bg-gray-200",children:e.jsx("img",{src:g.image_url,alt:g.title||"Gallery example",className:"w-full h-64 object-cover group-hover:scale-105 transition-transform duration-200"})}),g.title&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",children:e.jsx("h3",{className:"text-white font-semibold text-lg",children:g.title})}),g.tag&&e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("span",{className:"inline-block px-3 py-1 bg-yellow-400 text-black text-xs font-bold rounded-full",children:g.tag})})]},g.id))}),e.jsx("div",{className:"mt-8 text-center lg:hidden",children:e.jsxs(ie,{to:`/gallery?service_id=${a.id}`,className:"inline-flex items-center px-6 py-3 bg-gray-100 text-black font-semibold rounded-lg hover:bg-gray-200 transition-colors duration-200",children:["View More Examples",e.jsx("svg",{className:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})]})}),d&&e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8 lg:p-12",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-6"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"h-64 bg-gray-200 rounded"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-black rounded-xl shadow-2xl p-8 lg:p-12 text-center",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-white mb-4",children:"Ready to Get Started?"}),e.jsx("p",{className:"text-xl text-gray-300 mb-8 max-w-2xl mx-auto",children:"Build your custom quote in minutes and get professional results that exceed expectations."}),e.jsxs("button",{onClick:h,className:"inline-flex items-center px-10 py-4 bg-yellow-400 text-black font-bold text-lg rounded-lg hover:bg-yellow-500 transition-all duration-200 shadow-lg hover:shadow-2xl transform hover:scale-105",children:["Build Your Quote Now",e.jsx("svg",{className:"w-6 h-6 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})}),e.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-2xl z-50 p-4 pb-safe",children:e.jsx("button",{onClick:h,className:"w-full px-6 py-4 bg-yellow-400 text-black font-bold text-lg rounded-lg hover:bg-yellow-500 transition-all duration-200 shadow-lg active:scale-95",children:"Build Your Quote"})})]})]})},qw=async()=>(await $.get("http://localhost:3000/api/tier-packages",{params:{is_active:!0}})).data.tiers,Iw=async t=>(await $.get(`http://localhost:3000/api/tier-packages/${t}/features`)).data.features,zw=()=>{const t=Je(),[s]=Ye(),r=s.get("section"),a=ae(f=>f.authentication_state.authentication_status.is_authenticated),{data:n=[],isLoading:l,error:i}=te({queryKey:["tier-packages"],queryFn:qw,staleTime:5*60*1e3,retry:2}),o=te({queryKey:["tier-features",n.map(f=>f.id)],queryFn:async()=>{if(n.length===0)return[];const f=n.map(y=>Iw(y.id));return(await Promise.all(f)).flat()},enabled:n.length>0,staleTime:5*60*1e3,retry:2}),c=o.data||[],d=o.isLoading,h=o.error,m=j.useMemo(()=>{const f={};return c.forEach(v=>{f[v.group_name]||(f[v.group_name]={}),f[v.group_name][v.tier_id]||(f[v.group_name][v.tier_id]=[]),f[v.group_name][v.tier_id].push(v)}),Object.keys(f).forEach(v=>{Object.keys(f[v]).forEach(y=>{f[v][y].sort((p,x)=>p.sort_order-x.sort_order)})}),f},[c]),u=()=>{t(a?"/app/quotes/new":"/login?redirect_url=/app/quotes/new")};ht.useEffect(()=>{if(r){const f=document.getElementById(r);f&&f.scrollIntoView({behavior:"smooth"})}},[r]);const g=l||d,b=i||h;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("section",{className:"bg-gradient-to-br from-gray-900 to-black py-16 md:py-24",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center max-w-3xl mx-auto",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-6 leading-tight",children:"Transparent, Custom Pricing for Every Project"}),e.jsx("p",{className:"text-xl text-gray-300 mb-8 leading-relaxed",children:"At SultanStamp, every project is unique. We don't believe in one-size-fits-all pricing. Instead, we offer custom quotes tailored to your specific needs, with clear tier-based service levels to match your requirements."}),e.jsxs("button",{onClick:u,className:"inline-flex items-center gap-2 bg-yellow-400 text-black px-8 py-4 rounded-lg font-bold text-lg hover:bg-yellow-300 transition-all duration-200 shadow-lg hover:shadow-xl hover:scale-105",children:["Get Your Custom Quote",e.jsx(xt,{className:"w-5 h-5"})]})]})})}),b&&e.jsx("section",{className:"py-12 bg-red-50 border-b border-red-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center gap-3 text-red-800",children:[e.jsx(we,{className:"w-6 h-6 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Unable to load pricing information"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Please try refreshing the page or contact us directly for pricing details."})]})]})})}),g&&e.jsx("section",{className:"py-16",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(tt,{className:"w-12 h-12 text-yellow-400 animate-spin mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading pricing information..."})]})})}),!g&&!b&&e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"py-16 bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 border-2 border-yellow-400 rounded-xl p-8 md:p-10",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-black mb-4",children:"Why Custom Pricing?"}),e.jsx("p",{className:"text-lg text-gray-800 mb-4 leading-relaxed",children:"Every project has unique requirementsfrom materials and complexity to quantity and timeline. Custom pricing ensures you only pay for what you need, with transparent cost breakdowns and no hidden fees."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-yellow-400 rounded-full p-2 flex-shrink-0",children:e.jsx(Lt,{className:"w-5 h-5 text-black"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-black",children:"No Surprises"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Detailed quotes before you commit"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-yellow-400 rounded-full p-2 flex-shrink-0",children:e.jsx(Lt,{className:"w-5 h-5 text-black"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-black",children:"Pay for What You Need"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Tailored pricing for your requirements"})]})]})]})]})})}),e.jsx("section",{id:"tiers",className:"py-16 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-black mb-4",children:"Service Tier Comparison"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Choose the service level that matches your project needs. All tiers include professional design and productionthe differences are in turnaround time, revisions, and additional features."})]}),e.jsx("div",{className:"md:hidden space-y-4",children:n.map(f=>{const v=m,y=Object.keys(v);return e.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden shadow-lg",children:[e.jsxs("div",{className:"bg-gradient-to-br from-black to-gray-900 p-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:f.name}),f.description&&e.jsx("p",{className:"text-gray-300 text-sm mb-4",children:f.description}),e.jsxs("div",{className:"flex items-center gap-4 text-yellow-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(kt,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-semibold",children:[f.turnaround_days," day",f.turnaround_days!==1?"s":""]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fx,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:f.revision_limit===0?"Unlimited":`${f.revision_limit} revision${f.revision_limit!==1?"s":""}`})]})]})]}),e.jsx("div",{className:"p-6 space-y-4",children:y.map(p=>{const x=v[p][f.id]||[];return x.length===0?null:e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-black text-sm uppercase tracking-wide mb-2 pb-2 border-b border-gray-200",children:p}),e.jsx("ul",{className:"space-y-2",children:x.map(w=>e.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[w.is_included?e.jsx(Lt,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}):e.jsx(je,{className:"w-5 h-5 text-gray-400 flex-shrink-0 mt-0.5"}),e.jsxs("span",{className:w.is_included?"text-gray-900":"text-gray-400 line-through",children:[w.feature_label,": ",w.feature_value]})]},w.id))})]},p)})})]},f.id)})}),e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"w-full bg-white rounded-xl border-2 border-gray-200 overflow-hidden shadow-lg",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-br from-black to-gray-900",children:[e.jsx("th",{className:"text-left p-6 text-white font-bold text-lg w-1/4",children:"Features"}),n.map(f=>e.jsx("th",{className:"text-center p-6 border-l border-gray-700 w-1/4",children:e.jsxs("div",{className:"text-white",children:[e.jsx("p",{className:"text-xl font-bold mb-2",children:f.name}),f.description&&e.jsx("p",{className:"text-sm text-gray-300 mb-3",children:f.description}),e.jsxs("div",{className:"flex flex-col gap-2 text-yellow-400 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(kt,{className:"w-4 h-4"}),e.jsxs("span",{className:"font-semibold",children:[f.turnaround_days," day",f.turnaround_days!==1?"s":""]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(fx,{className:"w-4 h-4"}),e.jsx("span",{className:"font-semibold",children:f.revision_limit===0?"Unlimited":`${f.revision_limit} revision${f.revision_limit!==1?"s":""}`})]})]})]})},f.id))]})}),e.jsx("tbody",{children:Object.keys(m).map((f,v)=>{const y=m[f],p=[];return Object.values(y).forEach(x=>{x.forEach(w=>{p.find(R=>R.feature_key===w.feature_key)||p.push(w)})}),p.sort((x,w)=>x.sort_order-w.sort_order),e.jsxs(ht.Fragment,{children:[e.jsx("tr",{className:"bg-gray-100 border-t-2 border-gray-300",children:e.jsx("td",{colSpan:n.length+1,className:"p-4 font-bold text-black text-sm uppercase tracking-wide",children:f})}),p.map((x,w)=>e.jsxs("tr",{className:w%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"p-4 text-gray-900 font-medium border-r border-gray-200",children:x.feature_label}),n.map(R=>{var k;const N=(k=y[R.id])==null?void 0:k.find(L=>L.feature_key===x.feature_key);return e.jsx("td",{className:"p-4 text-center border-l border-gray-200",children:N?N.is_included?e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx(Lt,{className:"w-6 h-6 text-green-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:N.feature_value})]}):e.jsx(je,{className:"w-6 h-6 text-gray-400 mx-auto"}):e.jsx("span",{className:"text-gray-400 text-sm",children:""})},R.id)})]},x.feature_key))]},f)})})]})})]})}),e.jsx("section",{id:"factors",className:"py-16 bg-white border-t border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-black mb-4",children:"What Affects Your Price?"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Understanding the factors that influence pricing helps you make informed decisions about your project."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-8 border border-gray-200",children:[e.jsx("div",{className:"bg-yellow-400 w-12 h-12 rounded-lg flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-2xl font-bold text-black",children:"1"})}),e.jsx("h3",{className:"text-2xl font-bold text-black mb-3",children:"Quantity"}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Larger print runs typically result in lower per-unit costs due to economies of scale. We offer volume discounts for bulk orders."})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-8 border border-gray-200",children:[e.jsx("div",{className:"bg-yellow-400 w-12 h-12 rounded-lg flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-2xl font-bold text-black",children:"2"})}),e.jsx("h3",{className:"text-2xl font-bold text-black mb-3",children:"Design Complexity"}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Projects with intricate designs, multiple colors, special effects, or custom shapes may require additional production time and specialized techniques."})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-8 border border-gray-200",children:[e.jsx("div",{className:"bg-yellow-400 w-12 h-12 rounded-lg flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-2xl font-bold text-black",children:"3"})}),e.jsx("h3",{className:"text-2xl font-bold text-black mb-3",children:"Materials & Finishes"}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Premium materials, special coatings, or unique substrates impact both material costs and production processes."})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-8 border border-gray-200",children:[e.jsx("div",{className:"bg-yellow-400 w-12 h-12 rounded-lg flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-2xl font-bold text-black",children:"4"})}),e.jsx("h3",{className:"text-2xl font-bold text-black mb-3",children:"Timeline"}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Your chosen service tier determines turnaround time. Rush orders or emergency bookings may incur additional fees."})]})]})]})}),e.jsx("section",{id:"terms",className:"py-16 bg-gray-50 border-t border-gray-200",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-black mb-4",children:"Payment Terms & Fees"}),e.jsx("p",{className:"text-lg text-gray-600",children:"We believe in transparency. Here's what you need to know about payments."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-xl p-8 border-2 border-gray-200 shadow-lg",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"bg-yellow-400 rounded-lg p-3 flex-shrink-0",children:e.jsx("svg",{className:"w-6 h-6 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-black mb-2",children:"50% Deposit Required"}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:"We require a 50% deposit to begin production on all projects. This deposit secures your spot in our production schedule and covers initial material costs."}),e.jsxs("ul",{className:"space-y-2 text-gray-700",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Lt,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:"Deposit due upon quote approval before production begins"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Lt,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:"Remaining balance due upon project completion"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Lt,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:"Secure payment processing via credit/debit card or bank transfer"})]})]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl p-8 border-2 border-yellow-400 shadow-lg",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"bg-yellow-400 rounded-lg p-3 flex-shrink-0",children:e.jsx(we,{className:"w-6 h-6 text-black"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-black mb-2",children:"Emergency Booking Fee: +20%"}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:"Need your project completed urgently? Our emergency booking service prioritizes your project and adjusts our production schedule to meet tight deadlines."}),e.jsxs("ul",{className:"space-y-2 text-gray-700",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(xt,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:"20% urgent fee added to total project cost for priority scheduling"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(xt,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:"Available only when production capacity allowssubject to approval"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(xt,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:"Guaranteed rush turnaround based on your chosen tier"})]})]})]})]})}),e.jsxs("div",{className:"bg-gray-100 rounded-xl p-6 border border-gray-300",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{className:"text-black",children:"Payment Methods:"})," We accept all major credit cards, debit cards, and bank transfers. For large B2B accounts, NET-30 payment terms may be available upon approval."]}),e.jsxs("p",{className:"text-sm text-gray-700 mt-3",children:["For detailed information about refunds, cancellations, and file requirements, please review our"," ",e.jsx(ie,{to:"/policies",className:"text-yellow-600 hover:text-yellow-700 font-semibold underline",children:"full policies"}),"."]})]})]})]})}),e.jsx("section",{className:"py-16 bg-gradient-to-br from-black to-gray-900",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Ready to Get Started?"}),e.jsx("p",{className:"text-xl text-gray-300 mb-8 leading-relaxed",children:"Request your custom quote today. It's fast, free, and there's no obligation. Our team will review your requirements and provide a detailed quote within 24 hours."}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsxs("button",{onClick:u,className:"inline-flex items-center gap-2 bg-yellow-400 text-black px-8 py-4 rounded-lg font-bold text-lg hover:bg-yellow-300 transition-all duration-200 shadow-lg hover:shadow-xl hover:scale-105 w-full sm:w-auto",children:["Get Your Custom Quote",e.jsx(xt,{className:"w-5 h-5"})]}),e.jsx(ie,{to:"/contact",className:"inline-flex items-center gap-2 bg-white text-black px-8 py-4 rounded-lg font-bold text-lg hover:bg-gray-100 transition-all duration-200 border-2 border-white w-full sm:w-auto",children:"Contact Us"})]}),e.jsxs("p",{className:"text-gray-400 text-sm mt-6",children:["Questions? Our team is here to help."," ",e.jsx(ie,{to:"/contact",className:"text-yellow-400 hover:text-yellow-300 underline font-semibold",children:"Get in touch"})]})]})})]})]})})},Bw=()=>{const[t,s]=j.useState(null),[r,a]=j.useState(new Set),n=j.useRef({}),l=j.useRef(null),i=[{id:"payment-terms",title:"Payment Terms",icon:Ae,contentKey:"payment_terms"},{id:"tax-vat",title:"Tax & VAT",icon:Ae,contentKey:"tax_vat"},{id:"file-requirements",title:"File Requirements",icon:Ae,contentKey:"file_requirements"},{id:"refunds-cancellations",title:"Refunds & Cancellations",icon:Ae,contentKey:"refunds_cancellations"},{id:"turnaround-disclaimers",title:"Turnaround Disclaimers",icon:Ae,contentKey:"turnaround_disclaimers"},{id:"installation-terms",title:"Installation Terms",icon:Ae,contentKey:"installation_terms"}],{data:o,isLoading:c,error:d}=te({queryKey:["policies-content"],queryFn:async()=>(await $.get("http://localhost:3000/api/content-pages/policies",{headers:{"Content-Type":"application/json"}})).data,staleTime:6e4,retry:1,refetchOnWindowFocus:!1,select:u=>{var g,b,f,v,y,p;return{payment_terms:((g=u.content)==null?void 0:g.payment_terms)||"<p>Payment terms content coming soon.</p>",tax_vat:((b=u.content)==null?void 0:b.tax_vat)||"<p>Tax & VAT information coming soon.</p>",file_requirements:((f=u.content)==null?void 0:f.file_requirements)||"<p>File requirements coming soon.</p>",refunds_cancellations:((v=u.content)==null?void 0:v.refunds_cancellations)||"<p>Refund & cancellation policy coming soon.</p>",turnaround_disclaimers:((y=u.content)==null?void 0:y.turnaround_disclaimers)||"<p>Turnaround disclaimers coming soon.</p>",installation_terms:((p=u.content)==null?void 0:p.installation_terms)||"<p>Installation terms coming soon.</p>"}}}),h=j.useCallback(u=>{const g=n.current[u];if(g){const v=g.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:v,behavior:"smooth"}),window.history.pushState(null,"",`#${u}`),s(u)}},[]),m=j.useCallback(u=>{a(g=>{const b=new Set(g);return b.has(u)?b.delete(u):b.add(u),b})},[]);return j.useEffect(()=>(l.current=new IntersectionObserver(u=>{u.forEach(g=>{if(g.isIntersecting&&g.intersectionRatio>.5){const b=g.target.getAttribute("data-section-id");b&&s(b)}})},{root:null,rootMargin:"-100px 0px -50% 0px",threshold:[0,.5,1]}),Object.values(n.current).forEach(u=>{u&&l.current&&l.current.observe(u)}),()=>{l.current&&l.current.disconnect()}),[c]),j.useEffect(()=>{if(!c&&o){const u=window.location.hash.replace("#","");u&&n.current[u]&&setTimeout(()=>{h(u)},100)}},[c,o,h]),c?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-yellow-400"}),e.jsx("p",{className:"text-gray-900 text-lg font-semibold",children:"Loading policies..."})]})})}):d?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8",children:[e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsx(we,{className:"w-16 h-16 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 text-center mb-4",children:"Failed to Load Policies"}),e.jsx("p",{className:"text-gray-600 text-center mb-6",children:"We couldn't load the policy content. Please try again later."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-6 py-3 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-colors duration-200",children:"Retry"})]})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-gradient-to-br from-gray-900 to-black text-white py-16 lg:py-24",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold mb-6",children:"Policies & Terms"}),e.jsx("p",{className:"text-xl md:text-2xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:"Complete transparency on our payment terms, file requirements, refund policies, and service commitments."})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 lg:py-20",children:e.jsxs("div",{className:"lg:grid lg:grid-cols-12 lg:gap-12",children:[e.jsx("aside",{className:"hidden lg:block lg:col-span-3",children:e.jsxs("nav",{className:"sticky top-24 bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4 pb-3 border-b border-gray-200",children:"Table of Contents"}),e.jsx("ul",{className:"space-y-2",children:i.map(u=>{const g=u.icon,b=t===u.id;return e.jsx("li",{children:e.jsxs("button",{onClick:()=>h(u.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-all duration-200 ${b?"bg-yellow-400 text-black font-semibold shadow-md":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(g,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:u.title})]})},u.id)})})]})}),e.jsx("div",{className:"lg:hidden mb-8 -mx-4 sm:mx-0",children:e.jsx("div",{className:"bg-white border-y lg:border lg:rounded-xl border-gray-200 p-4 overflow-x-auto",children:e.jsx("div",{className:"flex gap-2 min-w-max",children:i.map(u=>{const g=t===u.id;return e.jsx("button",{onClick:()=>h(u.id),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-all duration-200 ${g?"bg-yellow-400 text-black shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:u.title},u.id)})})})}),e.jsxs("main",{className:"lg:col-span-9",children:[e.jsx("div",{className:"hidden md:block space-y-12",children:i.map(u=>e.jsxs("article",{ref:g=>{n.current[u.id]=g},"data-section-id":u.id,className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-900 to-black px-8 py-6",children:e.jsxs("h2",{className:"text-2xl lg:text-3xl font-bold text-white flex items-center gap-3",children:[e.jsx(u.icon,{className:"w-8 h-8 text-yellow-400"}),u.title]})}),e.jsx("div",{className:"p-8 lg:p-12",children:e.jsx("div",{className:"prose prose-lg max-w-none prose-headings:text-gray-900 prose-p:text-gray-700 prose-a:text-blue-600 prose-strong:text-gray-900 prose-ul:text-gray-700 prose-ol:text-gray-700",dangerouslySetInnerHTML:{__html:(o==null?void 0:o[u.contentKey])||"<p>Content coming soon.</p>"}})})]},u.id))}),e.jsx("div",{className:"md:hidden space-y-4",children:i.map(u=>{const g=r.has(u.id);return e.jsxs("div",{ref:b=>{n.current[u.id]=b},"data-section-id":u.id,className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsxs("button",{onClick:()=>m(u.id),className:"w-full flex items-center justify-between gap-3 px-6 py-5 bg-gradient-to-r from-gray-900 to-black text-white",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u.icon,{className:"w-6 h-6 text-yellow-400 flex-shrink-0"}),e.jsx("span",{className:"text-lg font-bold text-left",children:u.title})]}),g?e.jsx(rw,{className:"w-6 h-6 flex-shrink-0"}):e.jsx(uo,{className:"w-6 h-6 flex-shrink-0"})]}),g&&e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"prose max-w-none prose-headings:text-gray-900 prose-p:text-gray-700 prose-a:text-blue-600 prose-strong:text-gray-900 prose-ul:text-gray-700 prose-ol:text-gray-700",dangerouslySetInnerHTML:{__html:(o==null?void 0:o[u.contentKey])||"<p>Content coming soon.</p>"}})})]},u.id)})}),e.jsx("div",{className:"mt-12 bg-gray-100 rounded-xl p-6 border border-gray-200",children:e.jsxs("p",{className:"text-sm text-gray-600 text-center",children:[e.jsx("strong",{className:"text-gray-900",children:"Note:"})," These policies were last updated on"," ",new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),". We reserve the right to modify these terms at any time. Continued use of our services constitutes acceptance of any changes."]})})]})]})})]})})},Uw=async()=>(await $.get("http://localhost:3000/api/services",{params:{is_active:!0,limit:100}})).data.services.map(s=>({id:s.id,name:s.name})),Qw=async t=>(await $.post("http://localhost:3000/api/inquiry-forms",{name:t.name,email:t.email,phone:t.phone||null,service_interest:t.service_interest||null,message:t.message},{headers:{"Content-Type":"application/json"}})).data,Vw=()=>{const t=ae(p=>p.system_config.company_info),[s,r]=j.useState({name:"",email:"",phone:null,service_interest:null,message:""}),[a,n]=j.useState({}),[l,i]=j.useState(!1),[o,c]=j.useState(null),{data:d=[],isLoading:h,isError:m}=te({queryKey:["services-list-contact"],queryFn:Uw,staleTime:10*60*1e3,retry:1,refetchOnWindowFocus:!1}),u=me({mutationFn:Qw,onSuccess:p=>{i(!0),c(null),n({}),r({name:"",email:"",phone:null,service_interest:null,message:""})},onError:p=>{var w,R,N,k;const x=((R=(w=p.response)==null?void 0:w.data)==null?void 0:R.message)||p.message||"Failed to send message. Please try again or contact us directly via WhatsApp.";if(c(x),(k=(N=p.response)==null?void 0:N.data)!=null&&k.errors){const L={},E=p.response.data.errors;E.name&&(L.name=E.name),E.email&&(L.email=E.email),E.message&&(L.message=E.message),n(L)}}}),g=()=>{const p={};return s.name.trim()||(p.name="Name is required"),s.email.trim()?/\S+@\S+\.\S+/.test(s.email)||(p.email="Please enter a valid email address"):p.email="Email is required",s.message.trim()||(p.message="Message is required"),n(p),Object.keys(p).length===0},b=(p,x)=>{r(w=>({...w,[p]:x})),a[p]&&n(w=>{const R={...w};return delete R[p],R}),o&&c(null)},f=p=>{p.preventDefault(),g()&&u.mutate(s)},v=()=>{i(!1)},y=()=>{const p=t.phone.replace(/\s/g,"").replace("+",""),x=encodeURIComponent("Hi SultanStamp, I'm interested in your services.");window.open(`https://wa.me/${p}?text=${x}`,"_blank")};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-[#F7F7F7] py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-black mb-4",children:"Contact Us"}),e.jsx("p",{className:"text-lg text-gray-700 max-w-2xl mx-auto",children:"Get in touch with us for inquiries, quotes, or support. We're here to help bring your vision to life."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 hover:shadow-xl transition-shadow duration-200",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-black rounded-full p-3",children:e.jsx(nn,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"ml-4 text-lg font-semibold text-black",children:"Email"})]}),e.jsx("p",{className:"text-sm font-semibold text-gray-700 uppercase mb-2",children:"Send us an email"}),e.jsx("a",{href:`mailto:${t.email}`,className:"text-lg text-black hover:text-gray-700 transition-colors underline",children:t.email})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 hover:shadow-xl transition-shadow duration-200",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-black rounded-full p-3",children:e.jsx(ho,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"ml-4 text-lg font-semibold text-black",children:"Phone"})]}),e.jsx("p",{className:"text-sm font-semibold text-gray-700 uppercase mb-2",children:"Give us a call"}),e.jsx("a",{href:`tel:${t.phone.replace(/\s/g,"")}`,className:"text-lg text-black hover:text-gray-700 transition-colors underline",children:t.phone})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 hover:shadow-xl transition-shadow duration-200 md:col-span-2 lg:col-span-1",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-[#FFD300] rounded-full p-3",children:e.jsx($i,{className:"w-6 h-6 text-black"})}),e.jsx("h3",{className:"ml-4 text-lg font-semibold text-black",children:"WhatsApp"})]}),e.jsx("p",{className:"text-sm font-semibold text-gray-700 uppercase mb-2",children:"Preferred channel"}),e.jsx("p",{className:"text-lg text-black mb-4",children:t.phone}),e.jsxs("button",{onClick:y,className:"w-full bg-[#FFD300] text-black font-bold px-6 py-3 rounded-lg hover:bg-[#e6bd00] transition-colors duration-200 flex items-center justify-center gap-2",children:[e.jsx($i,{className:"w-5 h-5"}),"Chat on WhatsApp"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 lg:p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-black mb-6",children:"Send us a Message"}),l&&e.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-lg p-8 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"bg-green-600 rounded-full p-4",children:e.jsx(rt,{className:"w-12 h-12 text-white"})})}),e.jsx("h3",{className:"text-2xl font-bold text-green-800 mb-2",children:"Thank You!"}),e.jsx("p",{className:"text-green-700 mb-6",children:"Your message has been received. We'll get back to you as soon as possible."}),e.jsx("button",{onClick:v,className:"bg-black text-white font-semibold px-6 py-3 rounded-lg hover:bg-gray-800 transition-colors duration-200",children:"Send Another Message"})]}),!l&&e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o&&e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(je,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-red-700 text-sm font-medium",children:o})}),e.jsx("button",{type:"button",onClick:()=>c(null),className:"text-red-600 hover:text-red-800",children:e.jsx(je,{className:"w-4 h-4"})})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-semibold text-black mb-2",children:["Full Name ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"name",value:s.name,onChange:p=>b("name",p.target.value),className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none transition-colors ${a.name?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-black"}`,placeholder:"John Doe","aria-invalid":!!a.name,"aria-describedby":a.name?"name-error":void 0}),a.name&&e.jsx("p",{id:"name-error",className:"text-red-600 text-sm mt-1",children:a.name})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-semibold text-black mb-2",children:["Email Address ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"email",id:"email",value:s.email,onChange:p=>b("email",p.target.value),className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none transition-colors ${a.email?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-black"}`,placeholder:"john@example.com","aria-invalid":!!a.email,"aria-describedby":a.email?"email-error":void 0}),a.email&&e.jsx("p",{id:"email-error",className:"text-red-600 text-sm mt-1",children:a.email})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"phone",className:"block text-sm font-semibold text-black mb-2",children:["Phone Number ",e.jsx("span",{className:"text-gray-500 text-xs",children:"(Optional)"})]}),e.jsx("input",{type:"tel",id:"phone",value:s.phone||"",onChange:p=>b("phone",p.target.value||null),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-black transition-colors",placeholder:"+353 87 123 4567"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"service_interest",className:"block text-sm font-semibold text-black mb-2",children:["Service Interest ",e.jsx("span",{className:"text-gray-500 text-xs",children:"(Optional)"})]}),e.jsxs("select",{id:"service_interest",value:s.service_interest||"",onChange:p=>b("service_interest",p.target.value||null),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-black transition-colors bg-white",disabled:h,children:[e.jsx("option",{value:"",children:"Select a service (optional)"}),h&&e.jsx("option",{value:"",disabled:!0,children:"Loading services..."}),m&&e.jsx("option",{value:"",disabled:!0,children:"Unable to load services"}),d.map(p=>e.jsx("option",{value:p.name,children:p.name},p.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"message",className:"block text-sm font-semibold text-black mb-2",children:["Message ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("textarea",{id:"message",rows:6,value:s.message,onChange:p=>b("message",p.target.value),className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none transition-colors resize-none ${a.message?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-black"}`,placeholder:"Tell us about your project or inquiry...","aria-invalid":!!a.message,"aria-describedby":a.message?"message-error":void 0}),a.message&&e.jsx("p",{id:"message-error",className:"text-red-600 text-sm mt-1",children:a.message})]}),e.jsx("button",{type:"submit",disabled:u.isPending,className:"w-full bg-black text-white font-semibold px-6 py-3 rounded-lg hover:bg-gray-800 transition-colors duration-200 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:u.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(po,{className:"w-5 h-5"}),"Send Message"]})})]})]})}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-black mb-4",children:"Connect With Us"}),e.jsx("p",{className:"text-gray-700 text-sm mb-6",children:"Follow us on social media for updates, portfolio showcases, and special offers."}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("a",{href:"https://instagram.com/sultanstamp",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-12 h-12 rounded-full bg-black text-white hover:bg-[#FFD300] hover:text-black transition-all duration-200","aria-label":"Instagram",children:e.jsx(Kp,{className:"w-6 h-6"})}),e.jsx("a",{href:"https://facebook.com/sultanstamp",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-12 h-12 rounded-full bg-black text-white hover:bg-[#FFD300] hover:text-black transition-all duration-200","aria-label":"Facebook",children:e.jsx(Qp,{className:"w-6 h-6"})}),e.jsx("a",{href:"https://linkedin.com/company/sultanstamp",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-12 h-12 rounded-full bg-black text-white hover:bg-[#FFD300] hover:text-black transition-all duration-200","aria-label":"LinkedIn",children:e.jsx(Wp,{className:"w-6 h-6"})})]})]}),t.address&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-black rounded-full p-3",children:e.jsx($a,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"ml-4 text-xl font-bold text-black",children:"Location"})]}),e.jsx("p",{className:"text-gray-700 text-sm",children:t.address})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-black mb-4",children:"Business Hours"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Monday - Friday"}),e.jsx("span",{className:"text-black",children:"9:00 AM - 6:00 PM"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Saturday"}),e.jsx("span",{className:"text-black",children:"10:00 AM - 4:00 PM"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Sunday"}),e.jsx("span",{className:"text-black",children:"Closed"})]})]}),e.jsx("p",{className:"text-gray-600 text-xs mt-4",children:"Emergency bookings available with priority scheduling."})]})]})]})]})})})},Kw=()=>{const t=Je(),[s]=Ye(),[r,a]=j.useState({email:"",password:"",selected_role:"CUSTOMER"}),[n,l]=j.useState(!1),[i,o]=j.useState(null),c=ae(y=>y.authentication_state.authentication_status.is_loading),d=ae(y=>y.authentication_state.error_message),h=ae(y=>y.login_user),m=ae(y=>y.clear_auth_error);j.useEffect(()=>{const y=s.get("role"),p=s.get("redirect_url");if(y){const x=y.toUpperCase();(x==="CUSTOMER"||x==="STAFF"||x==="ADMIN")&&a(w=>({...w,selected_role:x}))}p&&o(decodeURIComponent(p))},[s]);const u=(y,p)=>{a(x=>({...x,[y]:p})),d&&m()},g=()=>{l(y=>!y)},b=async y=>{y.preventDefault(),m();try{await h(r.email,r.password);const p=r.selected_role==="CUSTOMER"?"/app":r.selected_role==="STAFF"?"/staff":"/admin";t(i||p,{replace:!0})}catch(p){console.error("Login error:",p)}},f=()=>{const y=i?`/register?redirect_url=${encodeURIComponent(i)}`:"/register";t(y)},v=()=>{t("/forgot-password")};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-2xl border border-gray-200 overflow-hidden",children:e.jsxs("div",{className:"p-8 sm:p-10",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-black mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-600",children:"Sign in to access your account"})]}),d&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",role:"alert","aria-live":"polite",children:e.jsx("p",{className:"text-sm font-medium",children:d})}),e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-bold text-black mb-2",children:"Login As"}),e.jsxs("select",{id:"role",name:"role",value:r.selected_role,onChange:y=>u("selected_role",y.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg text-black bg-white focus:outline-none focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all duration-200",children:[e.jsx("option",{value:"CUSTOMER",children:"Customer"}),e.jsx("option",{value:"STAFF",children:"Staff"}),e.jsx("option",{value:"ADMIN",children:"Admin"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-bold text-black mb-2",children:"Email Address"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:r.email,onChange:y=>u("email",y.target.value),placeholder:"you@example.com",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg text-black placeholder-gray-400 focus:outline-none focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all duration-200"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-bold text-black mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:n?"text":"password",autoComplete:"current-password",required:!0,value:r.password,onChange:y=>u("password",y.target.value),placeholder:"Enter your password",className:"w-full px-4 py-3 pr-12 border-2 border-gray-200 rounded-lg text-black placeholder-gray-400 focus:outline-none focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all duration-200"}),e.jsx("button",{type:"button",onClick:g,"aria-label":n?"Hide password":"Show password",className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-black transition-colors duration-200",children:n?e.jsx(In,{className:"h-5 w-5"}):e.jsx(zn,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",onClick:v,className:"text-sm text-gray-600 hover:text-black underline transition-colors duration-200",children:"Forgot password?"})}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:c,className:"w-full bg-yellow-400 text-black font-bold py-3 px-6 rounded-lg hover:bg-yellow-500 focus:outline-none focus:ring-4 focus:ring-yellow-200 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center",children:c?e.jsxs(e.Fragment,{children:[e.jsx(tt,{className:"animate-spin -ml-1 mr-2 h-5 w-5"}),"Signing in..."]}):"Sign In"})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx("button",{type:"button",onClick:f,className:"text-black font-semibold hover:underline transition-all duration-200",children:"Register as Customer"})]})})]})}),e.jsxs("div",{className:"mt-6 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Staff and Admin accounts are created by system administrators."}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Need help?"," ",e.jsx(ie,{to:"/contact",className:"text-black hover:underline font-medium",children:"Contact Support"})]})]})]})})})},Ww=()=>{const t=Je(),[s]=Ye(),r=s.get("redirect_url")||"/app",a=ae(O=>O.register_user),n=ae(O=>O.authentication_state.error_message),l=ae(O=>O.clear_auth_error),i=ae(O=>O.authentication_state.authentication_status.is_authenticated),[o,c]=j.useState({email:"",password:"",confirm_password:"",name:"",phone:"",company_name:"",address:""}),[d,h]=j.useState(!1),[m,u]=j.useState(null),[g,b]=j.useState({}),[f,v]=j.useState(!1),[y,p]=j.useState(!1),[x,w]=j.useState(!1);j.useEffect(()=>{i&&t(r)},[i,t,r]);const R=O=>{if(!O)return null;const Y=O.length,q=/[a-z]/.test(O),A=/[A-Z]/.test(O),M=/\d/.test(O),P=/[!@#$%^&*(),.?":{}|<>]/.test(O);if(Y<8)return"weak";const C=[q,A,M,P].filter(Boolean).length;return Y>=12&&C>=3?"strong":Y>=8&&C>=2?"medium":"weak"},N=(O,Y)=>{switch(O){case"name":return Y.trim()?Y.length>255?"Name must be less than 255 characters":null:"Name is required";case"email":return Y.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Y)?Y.length>255?"Email must be less than 255 characters":null:"Please enter a valid email address":"Email is required";case"password":return Y?Y.length<8?"Password must be at least 8 characters":Y.length>100?"Password must be less than 100 characters":null:"Password is required";case"confirm_password":return Y?Y!==o.password?"Passwords do not match":null:"Please confirm your password";case"phone":return Y&&Y.length>50?"Phone must be less than 50 characters":null;case"company_name":return Y&&Y.length>255?"Company name must be less than 255 characters":null;case"address":return Y&&Y.length>500?"Address must be less than 500 characters":null;default:return null}},k=(O,Y)=>{if(c(q=>({...q,[O]:Y})),g[O]&&b(q=>{const A={...q};return delete A[O],A}),n&&l(),O==="password"&&u(R(Y)),O==="password"&&o.confirm_password){const q=N("confirm_password",o.confirm_password);b(q?A=>({...A,confirm_password:q}):A=>{const M={...A};return delete M.confirm_password,M})}},L=(O,Y)=>{const q=N(O,Y);q&&b(A=>({...A,[O]:q}))},E=()=>{const O={};if(["name","email","password","confirm_password"].forEach(q=>{const A=N(q,o[q]);A&&(O[q]=A)}),o.phone){const q=N("phone",o.phone);q&&(O.phone=q)}if(o.company_name){const q=N("company_name",o.company_name);q&&(O.company_name=q)}if(o.address){const q=N("address",o.address);q&&(O.address=q)}return f||(O.terms="You must agree to the terms and conditions"),b(O),Object.keys(O).length===0},z=async O=>{if(O.preventDefault(),l(),!!E()){h(!0);try{await a(o.email,o.password,o.name,o.phone||void 0,o.company_name||void 0,o.address||void 0)}catch(Y){console.error("Registration error:",Y)}finally{h(!1)}}},_=()=>{if(!m)return null;const Y={weak:{color:"bg-red-500",text:"Weak password",width:"w-1/3"},medium:{color:"bg-yellow-400",text:"Medium password",width:"w-2/3"},strong:{color:"bg-green-500",text:"Strong password",width:"w-full"}}[m];return e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${Y.color} transition-all duration-300`,style:{width:Y.width==="w-1/3"?"33%":Y.width==="w-2/3"?"66%":"100%"}})}),e.jsx("p",{className:`text-xs mt-1 ${m==="weak"?"text-red-600":m==="medium"?"text-yellow-600":"text-green-600"}`,children:Y.text})]})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create Your Account"}),e.jsx("p",{className:"text-gray-600",children:"Join SultanStamp to start your project"})]}),n&&e.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(we,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-700",children:n})]}),e.jsxs("form",{onSubmit:z,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-900 uppercase tracking-wide",children:"Required Information"}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-900 mb-2",children:["Full Name ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Or,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",id:"name",name:"name",value:o.name,onChange:O=>k("name",O.target.value),onBlur:O=>L("name",O.target.value),placeholder:"John Doe",className:`w-full pl-11 pr-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 transition-all ${g.name?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-black focus:ring-gray-100"}`})]}),g.name&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(we,{className:"w-4 h-4"}),g.name]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-900 mb-2",children:["Email Address ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(nn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",id:"email",name:"email",value:o.email,onChange:O=>k("email",O.target.value),onBlur:O=>L("email",O.target.value),placeholder:"john@example.com",className:`w-full pl-11 pr-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 transition-all ${g.email?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-black focus:ring-gray-100"}`})]}),g.email&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(we,{className:"w-4 h-4"}),g.email]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-900 mb-2",children:["Password ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Di,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:y?"text":"password",id:"password",name:"password",value:o.password,onChange:O=>k("password",O.target.value),onBlur:O=>L("password",O.target.value),placeholder:"Min. 8 characters",className:`w-full pl-11 pr-12 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 transition-all ${g.password?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-black focus:ring-gray-100"}`}),e.jsx("button",{type:"button",onClick:()=>p(!y),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 text-xs font-medium",children:y?"Hide":"Show"})]}),g.password&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(we,{className:"w-4 h-4"}),g.password]}),_()]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"confirm_password",className:"block text-sm font-medium text-gray-900 mb-2",children:["Confirm Password ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Di,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:x?"text":"password",id:"confirm_password",name:"confirm_password",value:o.confirm_password,onChange:O=>k("confirm_password",O.target.value),onBlur:O=>L("confirm_password",O.target.value),placeholder:"Re-enter password",className:`w-full pl-11 pr-12 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 transition-all ${g.confirm_password?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-black focus:ring-gray-100"}`}),e.jsx("button",{type:"button",onClick:()=>w(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 text-xs font-medium",children:x?"Hide":"Show"})]}),g.confirm_password&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(we,{className:"w-4 h-4"}),g.confirm_password]})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-200",children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-900 uppercase tracking-wide",children:"Optional Information"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-900 mb-2",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(ho,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:o.phone,onChange:O=>k("phone",O.target.value),onBlur:O=>L("phone",O.target.value),placeholder:"+353 87 123 4567",className:`w-full pl-11 pr-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 transition-all ${g.phone?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-black focus:ring-gray-100"}`})]}),g.phone&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(we,{className:"w-4 h-4"}),g.phone]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"company_name",className:"block text-sm font-medium text-gray-900 mb-2",children:"Company Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(tw,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",id:"company_name",name:"company_name",value:o.company_name,onChange:O=>k("company_name",O.target.value),onBlur:O=>L("company_name",O.target.value),placeholder:"Your Company Ltd.",className:`w-full pl-11 pr-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 transition-all ${g.company_name?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-black focus:ring-gray-100"}`})]}),g.company_name&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(we,{className:"w-4 h-4"}),g.company_name]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-900 mb-2",children:"Address"}),e.jsxs("div",{className:"relative",children:[e.jsx($a,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),e.jsx("textarea",{id:"address",name:"address",rows:3,value:o.address,onChange:O=>k("address",O.target.value),onBlur:O=>L("address",O.target.value),placeholder:"123 Main Street, Dublin, Ireland",className:`w-full pl-11 pr-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 transition-all resize-none ${g.address?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-black focus:ring-gray-100"}`})]}),g.address&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(we,{className:"w-4 h-4"}),g.address]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[e.jsxs("div",{className:"relative flex items-center justify-center mt-0.5",children:[e.jsx("input",{type:"checkbox",checked:f,onChange:O=>v(O.target.checked),className:"sr-only peer"}),e.jsx("div",{className:`w-5 h-5 border-2 rounded transition-all ${f?"bg-black border-black":"border-gray-300 group-hover:border-gray-400"}`,children:f&&e.jsx(Lt,{className:"w-full h-full text-white p-0.5",strokeWidth:3})})]}),e.jsxs("span",{className:"text-sm text-gray-700 leading-relaxed",children:["I agree to the"," ",e.jsx(ie,{to:"/policies",className:"text-black font-medium underline hover:text-gray-700",target:"_blank",children:"Terms of Service"})," ","and"," ",e.jsx(ie,{to:"/policies#privacy",className:"text-black font-medium underline hover:text-gray-700",target:"_blank",children:"Privacy Policy"})]})]}),g.terms&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(we,{className:"w-4 h-4"}),g.terms]})]}),e.jsx("button",{type:"submit",disabled:d||!f,className:"w-full bg-yellow-400 text-black font-bold py-3 px-6 rounded-lg hover:bg-yellow-500 focus:outline-none focus:ring-4 focus:ring-yellow-300 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl disabled:hover:shadow-lg flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-black",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Account..."]}):"Create Account"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx(ie,{to:"/login",className:"text-black font-semibold hover:underline",children:"Sign in"})]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-xs text-gray-500",children:"By creating an account, you can submit quotes, track orders, and manage your projects with SultanStamp."})})]})})})},Hw=()=>{const[t,s]=j.useState(""),[r,a]=j.useState(!1),[n,l]=j.useState(null),[i,o]=j.useState(null),c=h=>{s(h.target.value),i&&o(null)},d=async h=>{var u,g;h.preventDefault(),l(null),o(null);const m=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!t.trim()){o("Please enter your email address");return}if(!m.test(t)){o("Please enter a valid email address");return}a(!0);try{const b=await $.post("http://localhost:3000/api/auth/forgot-password",{email:t.trim()},{headers:{"Content-Type":"application/json"}});b.data&&b.status===200&&(l("If an account with that email exists, we've sent a password reset link. Please check your inbox."),s(""))}catch(b){const f=((g=(u=b.response)==null?void 0:u.data)==null?void 0:g.message)||b.message||"Unable to send reset email. Please try again later.";o(f)}finally{a(!1)}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-16 w-16 flex items-center justify-center rounded-full bg-blue-100 mb-4",children:e.jsx(nn,{className:"h-8 w-8 text-blue-600"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Forgot Password"}),e.jsx("p",{className:"text-gray-600",children:"Enter your email and we'll send you a reset link"})]}),n&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-start space-x-3",role:"alert","aria-live":"polite",children:[e.jsx(rt,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-green-700 font-medium",children:n}),e.jsx("p",{className:"text-sm text-green-600 mt-2",children:"Please check your spam folder if you don't see the email within a few minutes."})]})]}),i&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start space-x-3",role:"alert","aria-live":"assertive",children:[e.jsx(Gt,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-red-700 font-medium",children:i})})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:d,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(nn,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:c,disabled:r||!!n,placeholder:"Enter your email address",className:"appearance-none relative block w-full pl-10 pr-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed transition-colors","aria-describedby":i?"email-error":void 0})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:r||!!n,className:"group relative w-full flex justify-center items-center py-3 px-6 border border-transparent text-sm font-semibold rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200","aria-busy":r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(tt,{className:"animate-spin h-4 w-4 mr-2"}),"Sending..."]}):n?"Email Sent":"Send Reset Link"})})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsxs(ie,{to:"/login",className:"text-blue-600 hover:text-blue-500 text-sm font-medium inline-flex items-center transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Login"]}),n&&e.jsx("div",{className:"pt-2",children:e.jsxs(ie,{to:"/login",className:"text-gray-600 hover:text-gray-900 text-sm transition-colors",children:["Remember your password? ",e.jsx("span",{className:"font-medium text-blue-600 hover:text-blue-500",children:"Sign in"})]})})]}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xs text-gray-500",children:"For security reasons, reset links expire after 1 hour"})})]})})})},Gw=()=>{const{reset_token:t}=bl(),s=Je(),[r]=j.useState(t||""),[a,n]=j.useState(""),[l,i]=j.useState(""),[o,c]=j.useState(null),[d,h]=j.useState(!1),[m,u]=j.useState(null),[g,b]=j.useState(null);j.useEffect(()=>{if(!r){u("Invalid reset link"),b(!1),setTimeout(()=>{s("/forgot-password?error=invalid_token")},2e3);return}b(!0)},[r,s]);const f=N=>{if(N.length<8)return"weak";let k=0;return N.length>=12&&k++,/[a-z]/.test(N)&&/[A-Z]/.test(N)&&k++,/[0-9]/.test(N)&&k++,/[^a-zA-Z0-9]/.test(N)&&k++,k<=1?"weak":k<=2?"medium":"strong"},v=N=>{const k=N.target.value;n(k),u(null),k.length>0?c(f(k)):c(null)},y=N=>{i(N.target.value),u(null)},p=async N=>{var k,L;if(N.preventDefault(),u(null),a.length<8){u("Password must be at least 8 characters long");return}if(a!==l){u("Passwords do not match");return}if(o==="weak"){u("Please choose a stronger password");return}h(!0);try{await $.post("http://localhost:3000/api/auth/reset-password",{token:r,password:a},{headers:{"Content-Type":"application/json"}}),s("/login?message=password_reset_success")}catch(E){const z=((L=(k=E.response)==null?void 0:k.data)==null?void 0:L.message)||E.message||"Password reset failed. Please try again.";z.toLowerCase().includes("token")||z.toLowerCase().includes("expired")||z.toLowerCase().includes("invalid")?(u("Reset link is invalid or expired"),setTimeout(()=>{s("/forgot-password?error=expired_token")},2e3)):u(z),h(!1)}};if(g===!1)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-md w-full space-y-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-16 w-16 flex items-center justify-center rounded-full bg-red-100",children:e.jsx("svg",{className:"h-8 w-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Invalid Reset Link"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"This password reset link is invalid or has expired."}),e.jsx("div",{className:"mt-6",children:e.jsx(ie,{to:"/forgot-password",className:"text-gray-900 hover:text-gray-700 font-semibold underline transition-colors",children:"Request a new reset link"})})]})})})});if(g===null)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-black"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Validating reset link..."})]})})});const x=()=>{if(!o)return"";switch(o){case"weak":return"bg-red-500";case"medium":return"bg-yellow-500";case"strong":return"bg-green-500"}},w=()=>{if(!o)return"w-0";switch(o){case"weak":return"w-1/3";case"medium":return"w-2/3";case"strong":return"w-full"}},R=()=>o?o.charAt(0).toUpperCase()+o.slice(1):"";return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 leading-tight",children:"Reset Your Password"}),e.jsx("p",{className:"mt-3 text-base text-gray-600 leading-relaxed",children:"Enter your new password below"})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:p,children:[m&&e.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"ml-3 text-sm text-red-700 font-medium",children:m})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-bold text-gray-900 mb-2",children:"New Password"}),e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:a,onChange:v,placeholder:"Enter new password (min 8 characters)",className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:border-black focus:ring-4 focus:ring-gray-100 transition-all"}),a.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-600",children:"Password Strength:"}),e.jsx("span",{className:`text-xs font-bold ${o==="weak"?"text-red-600":o==="medium"?"text-yellow-600":"text-green-600"}`,children:R()})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-300 ${x()} ${w()}`})}),e.jsx("p",{className:"mt-2 text-xs text-gray-500 leading-relaxed",children:"Use 12+ characters with a mix of letters, numbers & symbols"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm_password",className:"block text-sm font-bold text-gray-900 mb-2",children:"Confirm Password"}),e.jsx("input",{id:"confirm_password",name:"confirm_password",type:"password",autoComplete:"new-password",required:!0,value:l,onChange:y,placeholder:"Re-enter your password",className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:border-black focus:ring-4 focus:ring-gray-100 transition-all"}),l.length>0&&e.jsx("div",{className:"mt-2 flex items-center",children:a===l?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{className:"ml-2 text-xs text-green-600 font-semibold",children:"Passwords match"})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),e.jsx("span",{className:"ml-2 text-xs text-red-600 font-semibold",children:"Passwords do not match"})]})})]})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{type:"submit",disabled:d||!a||!l||a!==l||o==="weak",className:"w-full flex justify-center items-center px-6 py-3 bg-yellow-400 text-black font-bold rounded-lg hover:bg-yellow-500 focus:outline-none focus:ring-4 focus:ring-yellow-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:d?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-black",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Resetting Password..."]}):"Reset Password"})}),e.jsx("div",{className:"text-center pt-4",children:e.jsxs(ie,{to:"/login",className:"text-sm text-gray-600 hover:text-gray-900 font-semibold transition-colors inline-flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Login"]})})]})]})})})},Jw=async t=>(await $.get("http://localhost:3000/api/customer/dashboard-summary",{headers:{Authorization:`Bearer ${t}`}})).data,Yw=()=>{const t=Je(),s=ae(d=>d.authentication_state.current_user),r=ae(d=>d.authentication_state.auth_token),{data:a,isLoading:n,error:l,refetch:i}=te({queryKey:["dashboard-summary"],queryFn:()=>Jw(r),enabled:!!r,staleTime:6e4,refetchOnWindowFocus:!0,retry:1}),o=d=>new Date(d).toLocaleDateString("en-IE",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),c=()=>{i()};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 leading-tight",children:["Welcome back, ",s==null?void 0:s.name,"!"]}),e.jsx("p",{className:"mt-2 text-base md:text-lg text-gray-600 leading-relaxed",children:"Here's an overview of your projects and activities"})]}),e.jsx("button",{onClick:c,disabled:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border-2 border-gray-200 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Refresh dashboard",children:n?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-gray-700",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Refreshing..."]}):"Refresh"})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l&&e.jsx("div",{className:"mb-6 bg-red-50 border-2 border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium text-red-800",children:"Failed to load dashboard data. Please try refreshing."})})]})}),!n&&a&&Number(a.outstanding_balance||0)>0&&e.jsx("div",{className:"mb-6 bg-yellow-50 border-2 border-yellow-400 rounded-xl p-6 shadow-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Outstanding Balance"}),e.jsxs("p",{className:"mt-1 text-2xl font-bold text-yellow-600",children:["",Number(a.outstanding_balance||0).toFixed(2)]}),e.jsx("p",{className:"mt-2 text-sm text-gray-700 leading-relaxed",children:"You have pending payments. Please review your orders and complete any outstanding payments."}),e.jsxs(ie,{to:"/app/orders",className:"mt-4 inline-flex items-center px-6 py-3 bg-black text-white text-sm font-semibold rounded-lg hover:bg-gray-800 focus:outline-none focus:ring-4 focus:ring-gray-200 transition-all duration-200 hover:scale-105",children:["View Orders",e.jsx("svg",{className:"ml-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(ie,{to:"/app/quotes/new",className:"flex items-center justify-between p-6 bg-gradient-to-br from-yellow-400 to-yellow-500 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 focus:outline-none focus:ring-4 focus:ring-yellow-200",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-black",children:"Create New Quote"}),e.jsx("p",{className:"mt-1 text-sm text-gray-800",children:"Start a new project"})]}),e.jsx("svg",{className:"h-8 w-8 text-black",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})]}),e.jsxs(ie,{to:"/app/quotes",className:"flex items-center justify-between p-6 bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 border-2 border-gray-200 focus:outline-none focus:ring-4 focus:ring-blue-100",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"View Quotes"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage your quotes"})]}),e.jsx("svg",{className:"h-8 w-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})]}),e.jsxs(ie,{to:"/app/orders",className:"flex items-center justify-between p-6 bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 border-2 border-gray-200 focus:outline-none focus:ring-4 focus:ring-blue-100",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Track Orders"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Check order status"})]}),e.jsx("svg",{className:"h-8 w-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})]})]})]}),n&&e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-yellow-400"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading your dashboard..."})]})}),!n&&a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600",children:"Active Orders"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:a.active_orders_count})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx("svg",{className:"h-8 w-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs(ie,{to:"/app/orders",className:"text-sm font-semibold text-blue-600 hover:text-blue-700 flex items-center transition-colors",children:["View all orders",e.jsx("svg",{className:"ml-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600",children:"Pending Quotes"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:a.pending_quotes_count})]}),e.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:e.jsx("svg",{className:"h-8 w-8 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs(ie,{to:"/app/quotes",className:"text-sm font-semibold text-yellow-600 hover:text-yellow-700 flex items-center transition-colors",children:["View all quotes",e.jsx("svg",{className:"ml-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600",children:"Upcoming Bookings"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:a.upcoming_bookings.length})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx("svg",{className:"h-8 w-8 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs(ie,{to:"/app/bookings",className:"text-sm font-semibold text-green-600 hover:text-green-700 flex items-center transition-colors",children:["View all bookings",e.jsx("svg",{className:"ml-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600",children:"Unread Messages"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:a.unread_messages_count})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx("svg",{className:"h-8 w-8 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("button",{onClick:()=>t("/app/orders"),className:"text-sm font-semibold text-purple-600 hover:text-purple-700 flex items-center transition-colors",children:["View messages",e.jsx("svg",{className:"ml-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})]}),a.upcoming_bookings.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Upcoming Bookings"}),e.jsxs(ie,{to:"/app/bookings",className:"text-sm font-semibold text-blue-600 hover:text-blue-700 flex items-center transition-colors",children:["View all",e.jsx("svg",{className:"ml-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),e.jsx("div",{className:"space-y-4",children:a.upcoming_bookings.slice(0,3).map(d=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border-2 border-gray-200 hover:bg-gray-100 transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-2 bg-white rounded-lg border-2 border-gray-200",children:e.jsx("svg",{className:"h-6 w-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:d.service_name}),e.jsx("p",{className:"text-sm text-gray-600",children:o(d.start_at)})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[d.is_emergency&&e.jsx("span",{className:"px-3 py-1 text-xs font-bold text-red-700 bg-red-100 rounded-full",children:"Emergency"}),e.jsx("span",{className:`px-3 py-1 text-xs font-bold rounded-full ${d.status==="CONFIRMED"?"bg-green-100 text-green-700":d.status==="PENDING"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:d.status})]})]},d.id))})]}),a.upcoming_bookings.length===0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12 text-center",children:[e.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("h3",{className:"mt-4 text-lg font-bold text-gray-900",children:"No upcoming bookings"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 leading-relaxed",children:"You don't have any scheduled bookings at the moment."}),e.jsxs(ie,{to:"/app/quotes/new",className:"mt-6 inline-flex items-center px-6 py-3 bg-yellow-400 text-black font-bold rounded-lg hover:bg-yellow-500 focus:outline-none focus:ring-4 focus:ring-yellow-200 transition-all duration-200 hover:scale-105",children:["Create New Quote",e.jsx("svg",{className:"ml-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})]})]})]})]})]})})},Xw=async(t,s,r,a,n=20,l=0)=>{const i=new URLSearchParams;return i.append("customer_id",s),r!=="all"&&i.append("status",r.toUpperCase()),a&&i.append("service_id",a),i.append("limit",n.toString()),i.append("offset",l.toString()),i.append("sort_order","desc"),(await $.get(`http://localhost:3000/api/quotes?${i.toString()}`,{headers:{Authorization:`Bearer ${t}`}})).data},Zw=async t=>(await $.get("http://localhost:3000/api/services?is_active=true",{headers:{Authorization:`Bearer ${t}`}})).data,eN=()=>{const t=ae(P=>P.authentication_state.current_user),s=ae(P=>P.authentication_state.auth_token),[r,a]=Ye(),n=r.get("status")||"all",l=r.get("service_id")||null,[i,o]=ht.useState(0),c=20,d=i*c,{data:h,isLoading:m,error:u,refetch:g}=te({queryKey:["quotes",t==null?void 0:t.id,n,l,d,c],queryFn:()=>Xw(s,t.id,n,l,c,d),enabled:!!s&&!!t,staleTime:6e4,refetchOnWindowFocus:!1}),{data:b}=te({queryKey:["services","active"],queryFn:()=>Zw(s),enabled:!!s,staleTime:3e5,refetchOnWindowFocus:!1}),f=(h==null?void 0:h.quotes)||[],v=(h==null?void 0:h.total)||0,y=Math.ceil(v/c),p=j.useMemo(()=>b!=null&&b.services?new Map(b.services.map(P=>[P.id,P.name])):new Map,[b]),x=[{value:"all",label:"All Quotes",count:v},{value:"requested",label:"Pending Review",count:0},{value:"pending",label:"Awaiting Info",count:0},{value:"approved",label:"Finalized",count:0},{value:"rejected",label:"Declined",count:0},{value:"expired",label:"Expired",count:0}],w=P=>{const C=new URLSearchParams(r);P==="all"?C.delete("status"):C.set("status",P),a(C),o(0)},R=P=>{const C=new URLSearchParams(r);P==="all"?C.delete("service_id"):C.set("service_id",P),a(C),o(0)},N=()=>{a({}),o(0)},k=P=>{o(P),window.scrollTo({top:0,behavior:"smooth"})},L=P=>{const C="inline-flex items-center px-3 py-1 rounded-lg text-sm font-semibold";switch(P){case"REQUESTED":return`${C} bg-yellow-100 text-yellow-900 border border-yellow-300`;case"PENDING":return`${C} bg-blue-100 text-blue-900 border border-blue-300`;case"APPROVED":return`${C} bg-green-100 text-green-900 border border-green-300`;case"REJECTED":return`${C} bg-red-100 text-red-900 border border-red-300`;case"EXPIRED":return`${C} bg-gray-100 text-gray-900 border border-gray-300`;default:return`${C} bg-gray-100 text-gray-900 border border-gray-300`}},E=P=>{switch(P){case"REQUESTED":return"Pending Review";case"PENDING":return"Awaiting Info";case"APPROVED":return"Finalized";case"REJECTED":return"Declined";case"EXPIRED":return"Expired";default:return P}},z=P=>new Date(P).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),_=P=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(P),O=P=>P.status==="REQUESTED"&&!P.estimate_subtotal&&!P.final_subtotal,Y=()=>e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(P=>e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-6"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]},P))}),q=()=>{const P=n!=="all"||l;return e.jsxs("div",{className:"text-center py-16 px-4",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-gray-100 mb-6",children:e.jsx(Ae,{className:"w-10 h-10 text-gray-400"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:P?"No quotes found":"No quotes yet"}),e.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:P?"Try adjusting your filters to see more quotes.":"Start by creating your first quote to get custom pricing for your project."}),P?e.jsxs("button",{onClick:N,className:"inline-flex items-center gap-2 px-6 py-3 bg-gray-900 text-white rounded-lg font-semibold hover:bg-gray-800 transition-colors",children:[e.jsx(je,{className:"w-5 h-5"}),"Clear Filters"]}):e.jsxs(ie,{to:"/app/quotes/new",className:"inline-flex items-center gap-2 px-8 py-4 bg-yellow-400 text-gray-900 rounded-lg font-bold hover:bg-yellow-500 transition-all shadow-lg hover:shadow-xl",children:[e.jsx(Nt,{className:"w-5 h-5"}),"Create Your First Quote"]})]})},A=()=>e.jsxs("div",{className:"text-center py-16 px-4",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-red-100 mb-6",children:e.jsx(je,{className:"w-10 h-10 text-red-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Failed to load quotes"}),e.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:u instanceof Error?u.message:"Something went wrong. Please try again."}),e.jsx("button",{onClick:()=>g(),className:"inline-flex items-center gap-2 px-6 py-3 bg-gray-900 text-white rounded-lg font-semibold hover:bg-gray-800 transition-colors",children:"Try Again"})]}),M=P=>{const C=p.get(P.service_id)||"Unknown Service",V=O(P);return e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 hover:shadow-lg hover:border-gray-300 transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:C}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(gt,{className:"w-4 h-4"}),e.jsx("span",{children:z(P.created_at)})]})]}),e.jsx("span",{className:L(P.status),children:E(P.status)})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[P.estimate_subtotal&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx(Gs,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm",children:[e.jsx("span",{className:"font-semibold",children:"Estimate:"})," ",_(P.estimate_subtotal)]})]}),P.final_subtotal&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx(Gs,{className:"w-4 h-4 text-green-600"}),e.jsxs("span",{className:"text-sm",children:[e.jsx("span",{className:"font-semibold",children:"Final Price:"})," ",e.jsx("span",{className:"text-green-600 font-bold",children:_(P.final_subtotal)})]})]}),P.expires_at&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx(gt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm",children:[e.jsx("span",{className:"font-semibold",children:"Expires:"})," ",z(P.expires_at)]})]}),P.notes&&e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:P.notes})]}),e.jsx("div",{className:"flex gap-3",children:V?e.jsxs(ie,{to:`/app/quotes/new?draft_id=${P.id}`,className:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2 bg-yellow-400 text-gray-900 rounded-lg font-semibold hover:bg-yellow-500 transition-colors",children:["Continue",e.jsx(an,{className:"w-4 h-4"})]}):e.jsxs(ie,{to:`/app/quotes/${P.id}`,className:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-lg font-semibold hover:bg-gray-800 transition-colors",children:["View Details",e.jsx(an,{className:"w-4 h-4"})]})})]},P.id)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Quotes"}),e.jsx("p",{className:"text-gray-600",children:"Track and manage your quote requests"})]}),e.jsxs(ie,{to:"/app/quotes/new",className:"inline-flex items-center justify-center gap-2 px-8 py-4 bg-yellow-400 text-gray-900 rounded-lg font-bold hover:bg-yellow-500 transition-all shadow-lg hover:shadow-xl",children:[e.jsx(Nt,{className:"w-5 h-5"}),"Create New Quote"]})]})}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(pn,{className:"w-4 h-4"}),"Filter by Status"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(P=>e.jsx("button",{onClick:()=>w(P.value),className:`px-4 py-2 rounded-lg font-semibold text-sm transition-colors ${n===P.value?"bg-gray-900 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:P.label},P.value))})]}),b&&b.services.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Filter by Service"}),e.jsxs("select",{value:l||"all",onChange:P=>R(P.target.value),className:"w-full sm:w-64 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Services"}),b.services.map(P=>e.jsx("option",{value:P.id,children:P.name},P.id))]})]}),(n!=="all"||l)&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Active filters applied"}),e.jsxs("button",{onClick:N,className:"text-sm text-gray-900 font-semibold hover:text-gray-700 flex items-center gap-1",children:[e.jsx(je,{className:"w-4 h-4"}),"Clear All"]})]})})]}),!m&&f.length>0&&e.jsx("div",{className:"mb-6",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",f.length," of ",v," quote",v!==1?"s":""]})}),m?Y():u?A():f.length===0?q():e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:f.map(M)}),y>1&&e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>k(i-1),disabled:i===0,className:"px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 font-semibold hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),e.jsx("div",{className:"flex items-center gap-2",children:Array.from({length:y},(P,C)=>C).map(P=>P===0||P===y-1||Math.abs(P-i)<=1?e.jsx("button",{onClick:()=>k(P),className:`w-10 h-10 rounded-lg font-semibold transition-colors ${i===P?"bg-gray-900 text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:P+1},P):P===1||P===y-2?e.jsx("span",{className:"px-2 text-gray-500",children:"..."},P):null)}),e.jsx("button",{onClick:()=>k(i+1),disabled:i===y-1,className:"px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 font-semibold hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})]})})})},tN=()=>{const t=Je(),[s]=Ye(),r=et(),a=s.get("service_id"),n=s.get("step"),l=s.get("draft_id"),i=ae(K=>K.authentication_state.current_user),o=ae(K=>K.authentication_state.auth_token),c=ae(K=>K.authentication_state.authentication_status.is_authenticated),[d,h]=j.useState(n?parseInt(n):1),[m,u]=j.useState(null),[g,b]=j.useState([]),[f,v]=j.useState({}),[y,p]=j.useState([]),[x,w]=j.useState([]),[R,N]=j.useState(null),[k,L]=j.useState(""),[E,z]=j.useState(l),[_,O]=j.useState({}),[Y,q]=j.useState(null),[A,M]=j.useState(!1),P="http://localhost:3000",{data:C,isLoading:V}=te({queryKey:["services","active"],queryFn:async()=>(await $.get(`${P}/api/services`,{params:{is_active:!0}})).data,staleTime:3e5,enabled:d===1}),{data:T}=te({queryKey:["service-categories","active"],queryFn:async()=>(await $.get(`${P}/api/service-categories`,{params:{is_active:!0}})).data,staleTime:3e5,enabled:d===1}),{data:Z,isLoading:se}=te({queryKey:["service-options",m==null?void 0:m.id],queryFn:async()=>(await $.get(`${P}/api/services/${m==null?void 0:m.id}/options`)).data,enabled:!!m&&d===2,staleTime:3e5}),{data:B,isLoading:ee}=te({queryKey:["tier-packages","active"],queryFn:async()=>(await $.get(`${P}/api/tier-packages`,{params:{is_active:!0}})).data,enabled:d===4,staleTime:3e5}),{data:S}=te({queryKey:["quote",E],queryFn:async()=>(await $.get(`${P}/api/quotes/${E}`,{headers:{Authorization:`Bearer ${o}`}})).data,enabled:!!E&&!!o,staleTime:6e4}),re=me({mutationFn:async K=>E?(await $.put(`${P}/api/quotes/${E}`,K,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}})).data:(await $.post(`${P}/api/quotes`,K,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}})).data,onSuccess:K=>{E||z(K.id),r.invalidateQueries({queryKey:["quote",K.id]})}}),le=me({mutationFn:async K=>(await $.post(`${P}/api/quotes/${E}/answers`,{answers:K},{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}})).data}),Te=me({mutationFn:async K=>{const ge=new FormData;return ge.append("file",K),ge.append("owner_id",(i==null?void 0:i.id)||""),E&&ge.append("quote_id",E),(await $.post(`${P}/api/uploads`,ge,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"multipart/form-data"}})).data},onSuccess:K=>{p(ge=>[...ge,{id:K.id,file_name:K.file_name,file_type:K.file_type,file_size:K.file_size,file_url:K.file_url,dpi_warning:K.dpi_warning,upload_progress:100,upload_status:"completed"}]),q({type:"success",message:"File uploaded successfully!"}),setTimeout(()=>q(null),3e3)},onError:()=>{q({type:"error",message:"File upload failed. Please try again."}),setTimeout(()=>q(null),3e3)}}),ke=me({mutationFn:async K=>{await $.delete(`${P}/api/uploads/${K}`,{headers:{Authorization:`Bearer ${o}`}})},onSuccess:(K,ge)=>{p(De=>De.filter(Qt=>Qt.id!==ge)),q({type:"success",message:"File removed successfully!"}),setTimeout(()=>q(null),3e3)}}),We=me({mutationFn:async()=>(await $.put(`${P}/api/quotes/${E}`,{status:"REQUESTED",notes:k},{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}})).data,onSuccess:K=>{q({type:"success",message:"Quote submitted successfully!"}),setTimeout(()=>{t(`/app/quotes/${K.id}`)},1500)},onError:()=>{q({type:"error",message:"Failed to submit quote. Please try again."}),setTimeout(()=>q(null),3e3)}});j.useEffect(()=>{if(a&&(C!=null&&C.services)){const K=C.services.find(ge=>ge.id===a);K&&(u(K),h(2))}},[a,C]),j.useEffect(()=>{if(Z!=null&&Z.options){const K=[...Z.options].sort((De,Qt)=>De.sort_order-Qt.sort_order);b(K);const ge={};K.forEach(De=>{ge[De.key]=De.field_type==="checkbox"?!1:""}),v(ge)}},[Z]),j.useEffect(()=>{B!=null&&B.tiers&&w(B.tiers)},[B]),j.useEffect(()=>{S&&L(S.notes||"")},[S]),j.useEffect(()=>{if(c&&m&&d>=2){const K=setTimeout(()=>{Ut()},5e3);return()=>clearTimeout(K)}},[f,R,k]);const F=K=>{u(K),h(2),O({})},H=(K,ge)=>{v(De=>({...De,[K]:ge})),_[K]&&O(De=>{const Qt={...De};return delete Qt[K],Qt})},ce=async K=>{if(!(!K||K.length===0)){if(!c){q({type:"error",message:"Please log in to upload files."}),setTimeout(()=>q(null),3e3);return}for(let ge=0;ge<K.length;ge++){const De=K[ge];if(!["application/pdf","image/png","image/jpeg"].includes(De.type)){q({type:"error",message:"Only PDF, PNG, and JPEG files are allowed."}),setTimeout(()=>q(null),3e3);continue}if(De.size>10*1024*1024){q({type:"error",message:"File size must be less than 10MB."}),setTimeout(()=>q(null),3e3);continue}Te.mutate(De)}}},D=K=>{ke.mutate(K)},X=K=>{K.preventDefault(),M(!0)},fe=()=>{M(!1)},ve=K=>{K.preventDefault(),M(!1),ce(K.dataTransfer.files)},qe=K=>{N(K),O({})},Ut=async()=>{if(!c||!i||!m)return;const K={customer_id:i.id,service_id:m.id,tier_id:(R==null?void 0:R.id)||null,notes:k||null};if(re.mutate(K),E&&Object.keys(f).length>0){const ge=Object.entries(f).map(([De,Qt])=>({option_key:De,value:Qt}));le.mutate(ge)}},us=K=>{const ge={};switch(K){case 1:m||(ge.service="Please select a service");break;case 2:g.forEach(De=>{De.required&&!f[De.key]&&(ge[De.key]=`${De.label} is required`)});break;case 3:break;case 4:R||(ge.tier="Please select a tier package");break}return O(ge),Object.keys(ge).length===0},es=()=>{us(d)?d<5&&h(d+1):(q({type:"error",message:"Please fix the errors before continuing."}),setTimeout(()=>q(null),3e3))},As=()=>{d>1&&h(d-1)},W=K=>{K<=d&&h(K)},de=async()=>{if(!c){q({type:"error",message:"Please log in to submit your quote."}),setTimeout(()=>{t("/login?redirect_url=/app/quotes/new")},1500);return}us(5)&&(await Ut(),We.mutate())},ye=K=>K<1024?K+" B":K<1024*1024?(K/1024).toFixed(1)+" KB":(K/(1024*1024)).toFixed(1)+" MB",pe=()=>!(C!=null&&C.services)||!(T!=null&&T.categories)?[]:T.categories.map(K=>({category:K,services:C.services.filter(ge=>ge.category_id===K.id)})).filter(K=>K.services.length>0);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:"Build Your Quote"}),e.jsx("p",{className:"text-gray-600",children:"Follow the steps below to configure your custom quote"})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:[1,2,3,4,5].map(K=>e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>W(K),disabled:K>d,className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold transition-all ${K<d?"bg-yellow-400 text-gray-900":K===d?"bg-gray-900 text-white ring-4 ring-yellow-400":"bg-gray-200 text-gray-400"} ${K<=d?"cursor-pointer":"cursor-not-allowed"}`,children:K<d?e.jsx(Lt,{className:"w-5 h-5"}):K}),e.jsx("div",{className:"absolute top-12 left-1/2 transform -translate-x-1/2 whitespace-nowrap",children:e.jsxs("p",{className:`text-xs font-medium ${K===d?"text-gray-900":"text-gray-500"}`,children:[K===1&&"Service",K===2&&"Details",K===3&&"Files",K===4&&"Tier",K===5&&"Review"]})})]}),K<5&&e.jsx("div",{className:`flex-1 h-1 mx-2 ${K<d?"bg-yellow-400":"bg-gray-200"}`})]})},K))})}),Y&&e.jsxs("div",{className:`fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg flex items-center gap-3 ${Y.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:[Y.type==="success"?e.jsx(Lt,{className:"w-5 h-5"}):e.jsx(we,{className:"w-5 h-5"}),e.jsx("span",{children:Y.message})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 md:p-8 mb-6",children:[d===1&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Select Your Service"}),V?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Is,{className:"w-8 h-8 animate-spin text-gray-400"})}):e.jsx("div",{className:"space-y-8",children:pe().map(K=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:K.category.name}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:K.services.map(ge=>e.jsx("button",{onClick:()=>F(ge),className:`text-left p-4 rounded-lg border-2 transition-all ${(m==null?void 0:m.id)===ge.id?"border-yellow-400 bg-yellow-50":"border-gray-200 hover:border-gray-300 bg-white"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:ge.name}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:ge.description})]}),(m==null?void 0:m.id)===ge.id&&e.jsx(rt,{className:"w-6 h-6 text-yellow-400 ml-2 flex-shrink-0"})]})},ge.id))})]},K.category.id))}),_.service&&e.jsxs("p",{className:"text-red-600 text-sm mt-4 flex items-center gap-2",children:[e.jsx(we,{className:"w-4 h-4"}),_.service]})]}),d===2&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Project Details"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Selected Service: ",e.jsx("span",{className:"font-semibold",children:m==null?void 0:m.name})]}),se?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Is,{className:"w-8 h-8 animate-spin text-gray-400"})}):e.jsx("div",{className:"space-y-6",children:g.map(K=>e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:[K.label,K.required&&e.jsx("span",{className:"text-red-600 ml-1",children:"*"})]}),K.field_type==="text"&&e.jsx("input",{type:"text",value:f[K.key]||"",onChange:ge=>H(K.key,ge.target.value),className:`w-full px-4 py-3 rounded-lg border-2 focus:outline-none focus:ring-4 focus:ring-yellow-100 ${_[K.key]?"border-red-500":"border-gray-200 focus:border-yellow-400"}`,placeholder:K.label}),K.field_type==="number"&&e.jsx("input",{type:"number",value:f[K.key]||"",onChange:ge=>H(K.key,ge.target.value),className:`w-full px-4 py-3 rounded-lg border-2 focus:outline-none focus:ring-4 focus:ring-yellow-100 ${_[K.key]?"border-red-500":"border-gray-200 focus:border-yellow-400"}`,placeholder:K.label}),K.field_type==="select"&&K.choices&&e.jsxs("select",{value:f[K.key]||"",onChange:ge=>H(K.key,ge.target.value),className:`w-full px-4 py-3 rounded-lg border-2 focus:outline-none focus:ring-4 focus:ring-yellow-100 ${_[K.key]?"border-red-500":"border-gray-200 focus:border-yellow-400"}`,children:[e.jsxs("option",{value:"",children:["Select ",K.label]}),K.choices.map(ge=>e.jsx("option",{value:ge,children:ge},ge))]}),K.field_type==="textarea"&&e.jsx("textarea",{value:f[K.key]||"",onChange:ge=>H(K.key,ge.target.value),rows:4,className:`w-full px-4 py-3 rounded-lg border-2 focus:outline-none focus:ring-4 focus:ring-yellow-100 ${_[K.key]?"border-red-500":"border-gray-200 focus:border-yellow-400"}`,placeholder:K.label}),K.field_type==="checkbox"&&e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:f[K.key]||!1,onChange:ge=>H(K.key,ge.target.checked),className:"w-5 h-5 rounded border-gray-300 text-yellow-400 focus:ring-yellow-400"}),e.jsx("span",{className:"text-gray-700",children:K.label})]}),_[K.key]&&e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center gap-2",children:[e.jsx(we,{className:"w-4 h-4"}),_[K.key]]})]},K.id))})]}),d===3&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Upload Your Files"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Upload design files, logos, or reference materials (Optional)"}),e.jsxs("div",{onDragOver:X,onDragLeave:fe,onDrop:ve,className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${A?"border-yellow-400 bg-yellow-50":"border-gray-300 bg-gray-50"}`,children:[e.jsx(ju,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-700 font-medium mb-2",children:"Drag and drop files here, or click to browse"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Accepted formats: PDF, PNG, JPEG (Max 10MB per file)"}),e.jsx("input",{type:"file",multiple:!0,accept:".pdf,.png,.jpg,.jpeg",onChange:K=>ce(K.target.files),className:"hidden",id:"file-upload"}),e.jsx("label",{htmlFor:"file-upload",className:"inline-block px-6 py-3 bg-gray-900 text-white font-medium rounded-lg hover:bg-gray-800 cursor-pointer transition-colors",children:"Choose Files"})]}),y.length>0&&e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Uploaded Files (",y.length,")"]}),y.map(K=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(Ae,{className:"w-6 h-6 text-gray-400"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 truncate",children:K.file_name}),e.jsx("p",{className:"text-sm text-gray-500",children:ye(K.file_size)})]}),K.dpi_warning&&e.jsxs("div",{className:"flex items-center gap-1 text-yellow-600 text-sm",children:[e.jsx(we,{className:"w-4 h-4"}),e.jsx("span",{children:"Low DPI"})]})]}),e.jsx("button",{onClick:()=>D(K.id),disabled:ke.isPending,className:"ml-4 p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(je,{className:"w-5 h-5"})})]},K.id))]}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"File Requirements"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:" Minimum 300 DPI for print quality"}),e.jsx("li",{children:" CMYK color mode preferred"}),e.jsx("li",{children:" Include bleed area if applicable"}),e.jsx("li",{children:" Vector formats recommended for logos"})]})]})]}),d===4&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Choose Your Package"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Select a service tier that best fits your needs"}),ee?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Is,{className:"w-8 h-8 animate-spin text-gray-400"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:x.map(K=>e.jsxs("button",{onClick:()=>qe(K),className:`text-left p-6 rounded-xl border-2 transition-all ${(R==null?void 0:R.id)===K.id?"border-yellow-400 bg-yellow-50 ring-4 ring-yellow-100":"border-gray-200 hover:border-gray-300 bg-white hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:K.name}),(R==null?void 0:R.id)===K.id&&e.jsx(rt,{className:"w-6 h-6 text-yellow-400"})]}),K.description&&e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:K.description}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(mx,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-700",children:[e.jsx("strong",{children:K.revision_limit})," revisions included"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(mx,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-700",children:[e.jsx("strong",{children:K.turnaround_days})," day turnaround"]})]})]})]},K.id))}),_.tier&&e.jsxs("p",{className:"text-red-600 text-sm mt-4 flex items-center gap-2",children:[e.jsx(we,{className:"w-4 h-4"}),_.tier]})]}),d===5&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Review Your Quote"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"pb-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-500 mb-2",children:"SERVICE"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:m==null?void 0:m.name})]}),e.jsxs("div",{className:"pb-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-500 mb-3",children:"PROJECT DETAILS"}),e.jsx("div",{className:"space-y-2",children:g.map(K=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("span",{className:"text-gray-600 min-w-[120px]",children:[K.label,":"]}),e.jsx("span",{className:"font-medium text-gray-900",children:K.field_type==="checkbox"?f[K.key]?"Yes":"No":f[K.key]||"-"})]},K.id))})]}),y.length>0&&e.jsxs("div",{className:"pb-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-500 mb-3",children:"UPLOADED FILES"}),e.jsx("div",{className:"space-y-2",children:y.map(K=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-700 text-sm",children:K.file_name})]},K.id))})]}),e.jsxs("div",{className:"pb-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-500 mb-2",children:"PACKAGE"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:R==null?void 0:R.name}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[R==null?void 0:R.revision_limit," revisions  ",R==null?void 0:R.turnaround_days," day turnaround"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-500 mb-2",children:"SPECIAL REQUESTS (OPTIONAL)"}),e.jsx("textarea",{value:k,onChange:K=>L(K.target.value),rows:4,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:outline-none focus:ring-4 focus:ring-yellow-100",placeholder:"Any special requirements or notes for your project..."})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-yellow-900",children:[e.jsx("strong",{children:"Note:"})," Final pricing will be provided by our team after reviewing your requirements. You'll receive a detailed quote within 24 hours."]})})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:As,disabled:d===1,className:"flex items-center gap-2 px-6 py-3 bg-white border-2 border-gray-900 text-gray-900 font-semibold rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(mo,{className:"w-5 h-5"}),"Back"]}),d<5?e.jsxs("button",{onClick:es,className:"flex items-center gap-2 px-6 py-3 bg-yellow-400 text-gray-900 font-semibold rounded-lg hover:bg-yellow-500 transition-colors",children:["Next",e.jsx(an,{className:"w-5 h-5"})]}):e.jsx("button",{onClick:de,disabled:We.isPending,className:"flex items-center gap-2 px-6 py-3 bg-yellow-400 text-gray-900 font-semibold rounded-lg hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:We.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Is,{className:"w-5 h-5 animate-spin"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:["Submit Quote",e.jsx(Lt,{className:"w-5 h-5"})]})})]}),re.isPending&&e.jsx("div",{className:"text-center mt-4",children:e.jsxs("p",{className:"text-sm text-gray-500 flex items-center justify-center gap-2",children:[e.jsx(Is,{className:"w-4 h-4 animate-spin"}),"Saving draft..."]})})]})})})},sN=async(t,s)=>(await $.get(`http://localhost:3000/api/quotes/${t}`,{headers:{Authorization:`Bearer ${s}`}})).data,rN=async(t,s)=>(await $.get(`http://localhost:3000/api/quotes/${t}/answers`,{headers:{Authorization:`Bearer ${s}`}})).data.answers||[],aN=async(t,s,r)=>(await $.get("http://localhost:3000/api/uploads",{params:{quote_id:t,owner_id:s},headers:{Authorization:`Bearer ${r}`}})).data.uploads||[],nN=async t=>(await $.get(`http://localhost:3000/api/services/${t}`)).data,lN=async t=>(await $.get(`http://localhost:3000/api/tier-packages/${t}`)).data,iN=async(t,s)=>{var l;let a=(l=(await $.get("http://localhost:3000/api/message-threads",{headers:{Authorization:`Bearer ${s}`}})).data.threads)==null?void 0:l.find(i=>i.quote_id===t);a||(a=(await $.post("http://localhost:3000/api/message-threads",{quote_id:t,order_id:null},{headers:{Authorization:`Bearer ${s}`}})).data);const n=await $.get(`http://localhost:3000/api/message-threads/${a.id}/messages`,{headers:{Authorization:`Bearer ${s}`}});return{thread:a,messages:n.data.messages||[]}},oN=async(t,s,r)=>(await $.post(`http://localhost:3000/api/message-threads/${t}/messages`,{body:s},{headers:{Authorization:`Bearer ${r}`}})).data,cN=t=>{if(t===0)return"0 Bytes";const s=1024,r=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(t)/Math.log(s));return Math.round(t/Math.pow(s,a)*100)/100+" "+r[a]},Go=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),dN=t=>{const s="inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold";switch(t){case"REQUESTED":return`${s} bg-yellow-100 text-yellow-800 border-2 border-yellow-300`;case"PENDING":return`${s} bg-blue-100 text-blue-800 border-2 border-blue-300`;case"APPROVED":return`${s} bg-green-100 text-green-800 border-2 border-green-300`;case"REJECTED":return`${s} bg-red-100 text-red-800 border-2 border-red-300`;case"EXPIRED":return`${s} bg-gray-100 text-gray-800 border-2 border-gray-300`;default:return`${s} bg-gray-100 text-gray-800`}},uN=t=>{switch(t){case"REQUESTED":return"Quote Requested";case"PENDING":return"Admin Reviewing";case"APPROVED":return"Quote Approved";case"REJECTED":return"Quote Rejected";case"EXPIRED":return"Quote Expired";default:return t}},mN=()=>{const{quote_id:t}=bl(),s=Je(),r=et(),a=ae(_=>_.authentication_state.current_user),n=ae(_=>_.authentication_state.auth_token),[l,i]=j.useState("");j.useEffect(()=>{(!n||!a)&&s("/login?redirect_url=/app/quotes"),t||s("/app/quotes")},[n,a,t,s]);const{data:o,isLoading:c,error:d}=te({queryKey:["quote",t],queryFn:()=>sN(t,n),enabled:!!t&&!!n,staleTime:6e4,refetchOnWindowFocus:!1}),{data:h,isLoading:m}=te({queryKey:["quote-answers",t],queryFn:()=>rN(t,n),enabled:!!t&&!!n,staleTime:6e4,refetchOnWindowFocus:!1}),{data:u,isLoading:g}=te({queryKey:["quote-files",t],queryFn:()=>aN(t,a==null?void 0:a.id,n),enabled:!!t&&!!a&&!!n,staleTime:6e4,refetchOnWindowFocus:!1}),{data:b,isLoading:f}=te({queryKey:["service",o==null?void 0:o.service_id],queryFn:()=>nN(o.service_id),enabled:!!(o!=null&&o.service_id),staleTime:3e5}),{data:v,isLoading:y}=te({queryKey:["tier-package",o==null?void 0:o.tier_id],queryFn:()=>lN(o.tier_id),enabled:!!(o!=null&&o.tier_id),staleTime:3e5}),{data:p,isLoading:x}=te({queryKey:["message-thread",t],queryFn:()=>iN(t,n),enabled:!!t&&!!n,staleTime:3e4,refetchOnWindowFocus:!1}),w=me({mutationFn:_=>oN(p.thread.id,_,n),onSuccess:()=>{r.invalidateQueries({queryKey:["message-thread",t]}),i("")}}),R=_=>{_.preventDefault(),l.trim()&&p&&w.mutate(l.trim())},N=()=>{s("/app/bookings")};if(c)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-black"}),e.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"Loading quote details..."})]})})})})});if(d||!o)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-red-800 mb-4",children:"Quote Not Found"}),e.jsx("p",{className:"text-red-600 mb-6",children:"The quote you're looking for doesn't exist or you don't have permission to view it."}),e.jsx(ie,{to:"/app/quotes",className:"inline-block bg-black text-white px-6 py-3 rounded-lg font-semibold hover:bg-gray-800 transition-colors",children:"Back to Quotes"})]})})})});const k=.15,L=o.final_subtotal||o.estimate_subtotal||0,E=L*k,z=L+E;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("nav",{className:"mb-6",children:e.jsxs("ol",{className:"flex items-center space-x-2 text-sm",children:[e.jsx("li",{children:e.jsx(ie,{to:"/app",className:"text-gray-600 hover:text-black transition-colors",children:"Dashboard"})}),e.jsx("li",{className:"text-gray-400",children:"/"}),e.jsx("li",{children:e.jsx(ie,{to:"/app/quotes",className:"text-gray-600 hover:text-black transition-colors",children:"Quotes"})}),e.jsx("li",{className:"text-gray-400",children:"/"}),e.jsxs("li",{className:"text-black font-semibold",children:["Quote #",o.id.slice(0,8)]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 sm:p-8 mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-black mb-2",children:["Quote #",o.id.slice(0,8)]}),e.jsxs("p",{className:"text-gray-600",children:["Created on ",Go(o.created_at)]})]}),e.jsx("div",{children:e.jsx("span",{className:dN(o.status),children:uN(o.status)})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 sm:p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-black mb-6",children:"Service Details"}),f?e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]}):b?e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-black mb-3",children:b.name}),e.jsx("p",{className:"text-gray-600 leading-relaxed mb-4",children:b.description}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[b.requires_booking&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 border border-blue-300",children:"Requires Booking"}),b.requires_proof&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-800 border border-purple-300",children:"Requires Proof Approval"})]})]}):e.jsx("p",{className:"text-gray-500",children:"Service details not available"})]}),o.tier_id&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 sm:p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-black mb-6",children:"Selected Tier"}),y?e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"})]}):v?e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-black mb-3",children:v.name}),v.description&&e.jsx("p",{className:"text-gray-600 mb-4",children:v.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Revision Limit"}),e.jsx("p",{className:"text-2xl font-bold text-black",children:v.revision_limit})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Turnaround Time"}),e.jsxs("p",{className:"text-2xl font-bold text-black",children:[v.turnaround_days," days"]})]})]})]}):e.jsx("p",{className:"text-gray-500",children:"Tier details not available"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 sm:p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-black mb-6",children:"Your Configuration"}),m?e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(_=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-2/3"})]},_))}):h&&h.length>0?e.jsx("div",{className:"space-y-4",children:h.map(_=>e.jsxs("div",{className:"border-b border-gray-200 pb-4 last:border-b-0 last:pb-0",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-1",children:_.option_key.replace(/_/g," ").replace(/\b\w/g,O=>O.toUpperCase())}),e.jsx("p",{className:"text-base text-black",children:typeof _.value=="object"?JSON.stringify(_.value):String(_.value)})]},_.id))}):e.jsx("p",{className:"text-gray-500",children:"No configuration details available"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 sm:p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-black mb-6",children:"Uploaded Files"}),g?e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2].map(_=>e.jsx("div",{className:"h-20 bg-gray-200 rounded-lg"},_))}):u&&u.length>0?e.jsx("div",{className:"space-y-4",children:u.map(_=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200 hover:border-black transition-colors",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-base font-semibold text-black truncate",children:_.file_name}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("p",{className:"text-sm text-gray-600",children:cN(_.file_size)}),e.jsx("span",{className:"text-gray-400",children:""}),e.jsx("p",{className:"text-sm text-gray-600",children:_.file_type}),_.dpi_warning&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-400",children:""}),e.jsx("span",{className:"text-sm text-red-600 font-medium",children:"Low DPI Warning"})]})]})]}),e.jsx("a",{href:_.file_url,download:_.file_name,target:"_blank",rel:"noopener noreferrer",className:"ml-4 px-4 py-2 bg-black text-white rounded-lg font-medium hover:bg-gray-800 transition-colors",children:"Download"})]},_.id))}):e.jsx("p",{className:"text-gray-500",children:"No files uploaded"})]}),o.admin_notes&&e.jsxs("div",{className:"bg-yellow-50 rounded-xl border-2 border-yellow-300 p-6 sm:p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-black mb-4",children:"Admin Notes"}),e.jsx("p",{className:"text-gray-800 leading-relaxed",children:o.admin_notes})]})]}),e.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[(o.status==="APPROVED"||o.status==="PENDING")&&L>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 sticky top-8",children:[e.jsx("h2",{className:"text-xl font-bold text-black mb-6",children:"Pricing Breakdown"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center pb-3 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-700",children:"Subtotal"}),e.jsxs("span",{className:"text-lg font-semibold text-black",children:["",L.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center pb-3 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-700",children:"Tax (15%)"}),e.jsxs("span",{className:"text-lg font-semibold text-black",children:["",E.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsx("span",{className:"text-xl font-bold text-black",children:"Total"}),e.jsxs("span",{className:"text-2xl font-bold text-black",children:["",z.toFixed(2)]})]})]}),o.status==="APPROVED"&&e.jsx("button",{onClick:N,className:"w-full mt-6 bg-yellow-400 text-black px-6 py-4 rounded-lg font-bold text-lg hover:bg-yellow-500 transition-colors",children:"Proceed to Booking"}),o.expires_at&&e.jsxs("p",{className:"text-sm text-gray-600 text-center mt-4",children:["Expires on ",Go(o.expires_at)]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-black mb-6",children:"Messages"}),x?e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2].map(_=>e.jsx("div",{className:"h-20 bg-gray-200 rounded-lg"},_))}):p&&p.messages.length>0?e.jsx("div",{className:"space-y-4 mb-6 max-h-96 overflow-y-auto",children:p.messages.map(_=>e.jsxs("div",{className:`p-4 rounded-lg ${_.sender_id===(a==null?void 0:a.id)?"bg-black text-white ml-8":"bg-gray-100 text-black mr-8"}`,children:[e.jsx("p",{className:"text-sm leading-relaxed",children:_.body}),e.jsx("p",{className:`text-xs mt-2 ${_.sender_id===(a==null?void 0:a.id)?"text-gray-400":"text-gray-600"}`,children:Go(_.created_at)})]},_.id))}):e.jsx("p",{className:"text-gray-500 mb-6 text-center",children:"No messages yet"}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsx("textarea",{value:l,onChange:_=>i(_.target.value),placeholder:"Type your message to admin...",rows:4,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-black focus:ring-4 focus:ring-gray-200 focus:outline-none transition-all resize-none"}),e.jsx("button",{type:"submit",disabled:!l.trim()||w.isPending,className:"w-full bg-black text-white px-6 py-3 rounded-lg font-semibold hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:w.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):"Send Message"})]}),w.isError&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:"Failed to send message. Please try again."})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(ie,{to:"/app/quotes",className:"block w-full text-center bg-gray-100 text-black px-6 py-3 rounded-lg font-semibold hover:bg-gray-200 transition-colors border-2 border-gray-300",children:"Back to Quotes"})})]})]})]})})})},xN=async(t,s,r)=>{const a={customer_id:t,limit:50,offset:0,sort_by:"start_at",sort_order:"asc"};return r&&(a.status=r),(await $.get("http://localhost:3000/api/bookings",{params:a,headers:{Authorization:`Bearer ${s}`}})).data},hN=async(t,s)=>(await $.put(`http://localhost:3000/api/bookings/${t}`,{status:"CANCELLED"},{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,pN=t=>new Date(t).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),jx=t=>new Date(t).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),gN=t=>{if(t.status!=="PENDING"&&t.status!=="CONFIRMED")return!1;const s=new Date(t.start_at),r=new Date;return(s.getTime()-r.getTime())/(1e3*60*60)>24},fN=t=>{switch(t){case"PENDING":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"CONFIRMED":return"bg-green-100 text-green-800 border-green-200";case"COMPLETED":return"bg-blue-100 text-blue-800 border-blue-200";case"CANCELLED":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},yN=t=>{const s=new Date;return{upcoming:t.filter(r=>(r.status==="PENDING"||r.status==="CONFIRMED")&&new Date(r.start_at)>=s),past:t.filter(r=>r.status==="COMPLETED"||new Date(r.start_at)<s&&r.status!=="CANCELLED"),cancelled:t.filter(r=>r.status==="CANCELLED")}},bN=()=>{var E,z;const t=ae(_=>_.authentication_state.current_user),s=ae(_=>_.authentication_state.auth_token),[r,a]=Ye(),n=Je(),l=et(),[i,o]=j.useState(r.get("status")||null),[c,d]=j.useState(null),[h,m]=j.useState(null),{data:u,isLoading:g,error:b,refetch:f}=te({queryKey:["bookings",t==null?void 0:t.id,i],queryFn:()=>xN(t.id,s,i),enabled:!!t&&!!s,staleTime:5*60*1e3,retry:1,refetchOnWindowFocus:!1}),v=me({mutationFn:_=>hN(_,s),onSuccess:()=>{l.invalidateQueries({queryKey:["bookings"]}),m({type:"success",message:"Booking cancelled successfully"}),setTimeout(()=>m(null),3e3),d(null)},onError:_=>{var Y,q;const O=((q=(Y=_.response)==null?void 0:Y.data)==null?void 0:q.message)||"Failed to cancel booking";m({type:"error",message:O}),setTimeout(()=>m(null),5e3)}}),y=j.useMemo(()=>(u==null?void 0:u.bookings)||[],[u]),p=j.useMemo(()=>yN(y),[y]),x=_=>{o(_),a(_?{status:_}:{})},w=_=>{d(_)},R=()=>{c&&v.mutate(c)},N=_=>{_.order_id?n(`/app/orders/${_.order_id}`):console.log("View booking details:",_.id)};j.useEffect(()=>{const _=r.get("status");_!==i&&o(_)},[r]);const k=_=>{const O=gN(_),Y=new Date(_.start_at),q=new Date,A=(Y.getTime()-q.getTime())/(1e3*60*60);return e.jsx("article",{className:"bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow duration-200 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[_.is_emergency&&e.jsxs("div",{className:"mb-4 inline-flex items-center gap-2 px-3 py-1.5 bg-red-600 text-white rounded-lg text-sm font-semibold",children:[e.jsx(os,{className:"w-4 h-4"}),e.jsx("span",{children:"EMERGENCY BOOKING"})]}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:_.service_name||"Service Booking"}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx(gt,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:"font-medium",children:pN(_.start_at)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx(kt,{className:"w-5 h-5 text-gray-400"}),e.jsxs("span",{children:[jx(_.start_at)," - ",jx(_.end_at)]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-semibold border ${fN(_.status)}`,children:[_.status==="COMPLETED"&&e.jsx(rt,{className:"w-4 h-4"}),_.status==="CANCELLED"&&e.jsx(Gt,{className:"w-4 h-4"}),_.status.replace("_"," ")]})}),_.is_emergency&&_.urgent_fee_amt&&e.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-900",children:[e.jsx("span",{className:"font-semibold",children:"Urgent Fee:"})," ",Number(_.urgent_fee_amt||0).toFixed(2),_.urgent_fee_pct&&` (${_.urgent_fee_pct}%)`]})}),!O&&(_.status==="PENDING"||_.status==="CONFIRMED")&&A>0&&e.jsx("div",{className:"mb-4 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx(os,{className:"w-4 h-4 inline mr-1 text-yellow-600"}),"Cannot cancel within 24 hours of booking"]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-5",children:[e.jsxs("button",{onClick:()=>N(_),className:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2.5 bg-black text-white rounded-lg font-semibold hover:bg-gray-800 transition-colors duration-200",children:[e.jsx(cl,{className:"w-4 h-4"}),"View Details"]}),(_.status==="PENDING"||_.status==="CONFIRMED")&&e.jsxs("button",{onClick:()=>w(_.id),disabled:!O,className:`flex-1 inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg font-semibold transition-colors duration-200 ${O?"bg-red-600 text-white hover:bg-red-700":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,title:O?"Cancel booking":"Cannot cancel within 24 hours of booking",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Cancel"]})]})]})},_.id)},L=()=>{const _=()=>i==="PENDING"?"You don't have any pending bookings.":i==="CONFIRMED"?"You don't have any confirmed bookings.":i==="COMPLETED"?"You haven't completed any bookings yet.":i==="CANCELLED"?"You don't have any cancelled bookings.":"You don't have any bookings yet.";return e.jsxs("div",{className:"text-center py-20",children:[e.jsx(gt,{className:"w-20 h-20 text-gray-300 mx-auto mb-6"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:_()}),e.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:!i&&"Ready to schedule a service? Start by creating a custom quote for your project."}),!i&&e.jsx(ie,{to:"/app/quotes/new",className:"inline-flex items-center gap-2 px-6 py-3 bg-yellow-400 text-black rounded-lg font-bold hover:bg-yellow-500 transition-colors duration-200",children:"Create New Quote"})]})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:"My Bookings"}),e.jsx("p",{className:"text-gray-600",children:"Manage your scheduled appointments and booking history"})]})})})}),h&&e.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg animate-slide-in ${h.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[h.type==="success"?e.jsx(rt,{className:"w-5 h-5"}):e.jsx(Gt,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:h.message})]})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex gap-1 overflow-x-auto",children:[e.jsxs("button",{onClick:()=>x(null),className:`px-6 py-4 font-semibold whitespace-nowrap transition-colors duration-200 border-b-2 ${i===null?"border-yellow-400 text-gray-900":"border-transparent text-gray-600 hover:text-gray-900"}`,children:["All Bookings (",y.length,")"]}),e.jsxs("button",{onClick:()=>x("PENDING"),className:`px-6 py-4 font-semibold whitespace-nowrap transition-colors duration-200 border-b-2 ${i==="PENDING"?"border-yellow-400 text-gray-900":"border-transparent text-gray-600 hover:text-gray-900"}`,children:["Upcoming (",p.upcoming.length,")"]}),e.jsxs("button",{onClick:()=>x("COMPLETED"),className:`px-6 py-4 font-semibold whitespace-nowrap transition-colors duration-200 border-b-2 ${i==="COMPLETED"?"border-yellow-400 text-gray-900":"border-transparent text-gray-600 hover:text-gray-900"}`,children:["Past (",p.past.length,")"]}),e.jsxs("button",{onClick:()=>x("CANCELLED"),className:`px-6 py-4 font-semibold whitespace-nowrap transition-colors duration-200 border-b-2 ${i==="CANCELLED"?"border-yellow-400 text-gray-900":"border-transparent text-gray-600 hover:text-gray-900"}`,children:["Cancelled (",p.cancelled.length,")"]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[g&&e.jsxs("div",{className:"flex items-center justify-center py-20",children:[e.jsx(tt,{className:"w-10 h-10 text-gray-400 animate-spin"}),e.jsx("span",{className:"ml-3 text-gray-600 text-lg",children:"Loading bookings..."})]}),b&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[e.jsx(Gt,{className:"w-12 h-12 text-red-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-red-900 mb-2",children:"Failed to Load Bookings"}),e.jsx("p",{className:"text-red-700 mb-4",children:((z=(E=b==null?void 0:b.response)==null?void 0:E.data)==null?void 0:z.message)||"An error occurred while fetching your bookings."}),e.jsx("button",{onClick:()=>f(),className:"px-6 py-2.5 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 transition-colors duration-200",children:"Try Again"})]}),!g&&!b&&y.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(_=>k(_))}),!g&&!b&&y.length===0&&L()]}),c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx(os,{className:"w-6 h-6 text-red-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Cancel Booking?"})]}),e.jsx("p",{className:"text-gray-700 mb-6",children:"Are you sure you want to cancel this booking? This action cannot be undone."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>d(null),disabled:v.isPending,className:"flex-1 px-4 py-2.5 bg-gray-200 text-gray-900 rounded-lg font-semibold hover:bg-gray-300 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Keep Booking"}),e.jsx("button",{onClick:R,disabled:v.isPending,className:"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:v.isPending?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(tt,{className:"w-4 h-4 animate-spin"}),"Cancelling..."]}):"Yes, Cancel"})]})]})})]})})},vN=[{label:"All",value:null},{label:"Awaiting Deposit",value:"awaiting_deposit"},{label:"In Progress",value:"in_progress"},{label:"Awaiting Approval",value:"awaiting_approval"},{label:"Ready",value:"ready"},{label:"Completed",value:"completed"},{label:"Cancelled",value:"cancelled"}],jN=t=>{switch(t){case"QUOTE_REQUESTED":case"QUOTE_APPROVED":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"IN_PRODUCTION":case"REVISION_REQUESTED":return"bg-blue-100 text-blue-800 border-blue-300";case"PROOF_SENT":return"bg-purple-100 text-purple-800 border-purple-300";case"COMPLETED":return"bg-green-100 text-green-800 border-green-300";case"CANCELLED":return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},wN=t=>{switch(t){case"QUOTE_REQUESTED":return"Quote Requested";case"QUOTE_APPROVED":return"Quote Approved";case"IN_PRODUCTION":return"In Production";case"PROOF_SENT":return"Proof Sent";case"REVISION_REQUESTED":return"Revision Requested";case"COMPLETED":return"Completed";case"CANCELLED":return"Cancelled";default:return t}},wx=t=>{if(!t)return"N/A";const s=new Date(t);return new Intl.DateTimeFormat("en-IE",{year:"numeric",month:"short",day:"numeric"}).format(s)},Jo=t=>`${Number(t||0).toFixed(2)}`,NN=(t,s)=>s?t.filter(r=>{const a=Number(r.balance_due||0);switch(s){case"awaiting_deposit":return r.status==="QUOTE_APPROVED"&&a>0;case"in_progress":return["IN_PRODUCTION","REVISION_REQUESTED"].includes(r.status);case"awaiting_approval":return r.status==="PROOF_SENT";case"ready":return r.status==="QUOTE_APPROVED"&&a===0;case"completed":return r.status==="COMPLETED";case"cancelled":return r.status==="CANCELLED";default:return!0}}):t,_N=()=>{const[t,s]=Ye();Je();const r=ae(w=>w.authentication_state.current_user),a=ae(w=>w.authentication_state.auth_token),[n,l]=j.useState(null),i=t.get("status")||null,o=t.get("date_range")||null,{data:c,isLoading:d,error:h,refetch:m}=te({queryKey:["orders",r==null?void 0:r.id,i,o],queryFn:async()=>{if(!(r!=null&&r.id))throw new Error("User not authenticated");const w={customer_id:r.id,limit:"50",offset:"0",sort_by:"created_at",sort_order:"desc"};return(await $.get("http://localhost:3000/api/orders",{params:w,headers:{Authorization:`Bearer ${a}`}})).data},enabled:!!(r!=null&&r.id)&&!!a,staleTime:6e4,refetchOnWindowFocus:!1,retry:1}),{data:u}=te({queryKey:["services"],queryFn:async()=>(await $.get("http://localhost:3000/api/services",{params:{is_active:!0,limit:100}})).data,staleTime:3e5,refetchOnWindowFocus:!1}),{data:g}=te({queryKey:["tier-packages"],queryFn:async()=>(await $.get("http://localhost:3000/api/tier-packages",{params:{is_active:!0}})).data,staleTime:3e5,refetchOnWindowFocus:!1}),b=ht.useMemo(()=>u!=null&&u.services?u.services.reduce((w,R)=>(w[R.id]=R.name,w),{}):{},[u]),f=ht.useMemo(()=>g!=null&&g.tiers?g.tiers.reduce((w,R)=>(w[R.id]=R.name,w),{}):{},[g]),v=ht.useMemo(()=>c!=null&&c.orders?c.orders.map(w=>({...w,subtotal:Number(w.subtotal||0),tax_rate:Number(w.tax_rate||0),tax_amount:Number(w.tax_amount||0),total_amount:Number(w.total_amount||0),deposit_pct:Number(w.deposit_pct||0),deposit_amount:Number(w.deposit_amount||0),balance_due:Number(w.balance_due||0)})):[],[c]),y=ht.useMemo(()=>NN(v,i),[v,i]),p=w=>{const R=new URLSearchParams(t);w?R.set("status",w):R.delete("status"),s(R)},x=()=>{l(null),m()};return ht.useEffect(()=>{if(n){const w=setTimeout(()=>{l(null)},5e3);return()=>clearTimeout(w)}},[n]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"My Orders"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:vN.map(w=>e.jsx("button",{onClick:()=>p(w.value),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${i===w.value?"bg-black text-white shadow-md":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:w.label},w.value||"all"))})]})}),n&&e.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-xl ${n.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"}`,role:"alert","aria-live":"polite",children:e.jsxs("div",{className:"flex items-center gap-2",children:[n.type==="success"?e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("p",{className:"font-medium",children:n.message})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[d&&e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-black"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading your orders..."})]})}),h&&!d&&e.jsx("div",{className:"max-w-md mx-auto mt-12",children:e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Failed to Load Orders"}),e.jsx("p",{className:"text-gray-600 mb-6",children:h instanceof Error?h.message:"An error occurred while loading your orders."}),e.jsx("button",{onClick:x,className:"bg-black text-white px-6 py-3 rounded-lg font-medium hover:bg-gray-800 transition-colors",children:"Try Again"})]})}),!d&&!h&&y.length===0&&e.jsx("div",{className:"max-w-md mx-auto mt-12",children:e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:i?"No Orders Found":"No Orders Yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:i?"No orders match the selected filter. Try a different filter or view all orders.":"Start by requesting a quote for your first project!"}),!i&&e.jsx(ie,{to:"/app/quotes/new",className:"inline-block bg-yellow-400 text-black px-6 py-3 rounded-lg font-bold hover:bg-yellow-500 transition-colors",children:"Create Your First Quote"}),i&&e.jsx("button",{onClick:()=>p(null),className:"bg-black text-white px-6 py-3 rounded-lg font-medium hover:bg-gray-800 transition-colors",children:"View All Orders"})]})}),!d&&!h&&y.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(w=>{const R=b[w.service_id]||"Unknown Service",N=f[w.tier_id]||"Unknown Tier",k=Number(w.balance_due||0),L=k>0;return e.jsxs("div",{className:`bg-white rounded-xl shadow-lg border overflow-hidden transition-all duration-200 hover:shadow-xl ${L?"border-red-300":"border-gray-200"}`,children:[e.jsx("div",{className:`px-6 py-4 border-b ${L?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Order Number"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900 truncate",children:["#",w.order_number]})]}),e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-bold border ${jN(w.status)}`,children:wN(w.status)})]})}),e.jsxs("div",{className:"px-6 py-5 space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-bold text-gray-900 mb-2",children:R}),e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-lg text-sm font-medium bg-gray-100 text-gray-800 border border-gray-300",children:[N," Tier"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 mb-1",children:"Created"}),e.jsx("p",{className:"font-semibold text-gray-900",children:wx(w.created_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 mb-1",children:"Due Date"}),e.jsx("p",{className:"font-semibold text-gray-900",children:wx(w.due_at)})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),e.jsx("span",{className:"font-semibold text-gray-900",children:Jo(w.total_amount)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Deposit Paid:"}),e.jsx("span",{className:"font-semibold text-gray-900",children:Jo(w.deposit_amount)})]}),L&&e.jsxs("div",{className:"flex justify-between items-center bg-red-50 -mx-6 px-6 py-3 border-t border-red-200",children:[e.jsx("span",{className:"font-bold text-red-900",children:"Balance Due:"}),e.jsx("span",{className:"text-xl font-bold text-red-600",children:Jo(k)})]})]})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:e.jsx(ie,{to:`/app/orders/${w.id}`,className:"block w-full bg-black text-white text-center px-4 py-3 rounded-lg font-medium hover:bg-gray-800 transition-colors",children:"View Details"})})]},w.id)})})]})]})})},kN=()=>{const{order_id:t}=bl();Je();const s=et(),r=ae(T=>T.authentication_state.current_user),a=ae(T=>T.authentication_state.auth_token),[n,l]=j.useState(""),[i,o]=j.useState(""),[c,d]=j.useState(!1),[h,m]=j.useState(null);j.useEffect(()=>{if(h){const T=setTimeout(()=>m(null),5e3);return()=>clearTimeout(T)}},[h]);const{data:u,isLoading:g,error:b}=te({queryKey:["order",t],queryFn:async()=>{const T=await $.get(`http://localhost:3000/api/orders/${t}`,{headers:{Authorization:`Bearer ${a}`}});return{...T.data,subtotal:Number(T.data.subtotal||0),tax_rate:Number(T.data.tax_rate||0),tax_amount:Number(T.data.tax_amount||0),total_amount:Number(T.data.total_amount||0),deposit_pct:Number(T.data.deposit_pct||0),deposit_amount:Number(T.data.deposit_amount||0),balance_due:Number(T.data.balance_due||0),revision_count:Number(T.data.revision_count||0)}},enabled:!!t&&!!a,staleTime:3e4,refetchOnWindowFocus:!1}),{data:f}=te({queryKey:["service",u==null?void 0:u.service_id],queryFn:async()=>(await $.get(`http://localhost:3000/api/services/${u==null?void 0:u.service_id}`,{headers:{Authorization:`Bearer ${a}`}})).data,enabled:!!(u!=null&&u.service_id)&&!!a,staleTime:3e5}),{data:v}=te({queryKey:["tier",u==null?void 0:u.tier_id],queryFn:async()=>{const T=await $.get(`http://localhost:3000/api/tier-packages/${u==null?void 0:u.tier_id}`,{headers:{Authorization:`Bearer ${a}`}});return{...T.data,revision_limit:Number(T.data.revision_limit||0),turnaround_days:Number(T.data.turnaround_days||0)}},enabled:!!(u!=null&&u.tier_id)&&!!a,staleTime:3e5}),{data:y=[]}=te({queryKey:["proofs",t],queryFn:async()=>((await $.get(`http://localhost:3000/api/orders/${t}/proofs`,{headers:{Authorization:`Bearer ${a}`}})).data.proofs||[]).sort((Z,se)=>se.version_number-Z.version_number),enabled:!!t&&!!a,staleTime:3e4}),{data:p=[]}=te({queryKey:["payments",t],queryFn:async()=>((await $.get("http://localhost:3000/api/payments",{params:{order_id:t,sort_by:"created_at",sort_order:"desc"},headers:{Authorization:`Bearer ${a}`}})).data.payments||[]).map(Z=>({...Z,amount:Number(Z.amount||0)})),enabled:!!t&&!!a,staleTime:3e4}),{data:x=[]}=te({queryKey:["invoices",t],queryFn:async()=>((await $.get("http://localhost:3000/api/invoices",{params:{order_id:t},headers:{Authorization:`Bearer ${a}`}})).data.invoices||[]).map(Z=>({...Z,amount_due:Number(Z.amount_due||0)})),enabled:!!t&&!!a,staleTime:6e4}),{data:w}=te({queryKey:["booking",t],queryFn:async()=>{const Z=(await $.get("http://localhost:3000/api/bookings",{params:{order_id:t},headers:{Authorization:`Bearer ${a}`}})).data.bookings||[];if(Z.length>0){const se=Z[0];return{...se,urgent_fee_pct:se.urgent_fee_pct?Number(se.urgent_fee_pct):null,urgent_fee_amt:se.urgent_fee_amt?Number(se.urgent_fee_amt):null}}return null},enabled:!!t&&!!a,staleTime:6e4}),{data:R=[]}=te({queryKey:["uploads",t],queryFn:async()=>((await $.get("http://localhost:3000/api/uploads",{params:{order_id:t},headers:{Authorization:`Bearer ${a}`}})).data.uploads||[]).map(Z=>({...Z,file_size:Number(Z.file_size||0)})),enabled:!!t&&!!a,staleTime:6e4}),{data:N}=te({queryKey:["messageThread",t],queryFn:async()=>{const Z=(await $.get("http://localhost:3000/api/message-threads",{params:{order_id:t},headers:{Authorization:`Bearer ${a}`}})).data.threads||[];if(Z.length>0){const se=Z[0],B=await $.get(`http://localhost:3000/api/message-threads/${se.id}/messages`,{headers:{Authorization:`Bearer ${a}`}});return{...se,messages:B.data.messages||[]}}return null},enabled:!!t&&!!a,staleTime:1e4}),k=me({mutationFn:async T=>(await $.post(`http://localhost:3000/api/proof-versions/${T}/approve`,{},{headers:{Authorization:`Bearer ${a}`}})).data,onSuccess:()=>{s.invalidateQueries({queryKey:["order",t]}),s.invalidateQueries({queryKey:["proofs",t]}),m({type:"success",message:"Proof approved! Your order will now proceed to production."})},onError:T=>{var Z,se;m({type:"error",message:((se=(Z=T.response)==null?void 0:Z.data)==null?void 0:se.message)||"Failed to approve proof. Please try again."})}}),L=me({mutationFn:async({proofId:T,comment:Z})=>(await $.post(`http://localhost:3000/api/proof-versions/${T}/request-changes`,{customer_comment:Z},{headers:{Authorization:`Bearer ${a}`}})).data,onSuccess:()=>{s.invalidateQueries({queryKey:["order",t]}),s.invalidateQueries({queryKey:["proofs",t]}),o(""),d(!1),m({type:"success",message:"Change request submitted. Our team will review and upload a revised proof."})},onError:T=>{var Z,se;m({type:"error",message:((se=(Z=T.response)==null?void 0:Z.data)==null?void 0:se.message)||"Failed to submit change request. Please try again."})}}),E=me({mutationFn:async T=>{if(!(N!=null&&N.id))throw new Error("No message thread found");return(await $.post(`http://localhost:3000/api/message-threads/${N.id}/messages`,{body:T},{headers:{Authorization:`Bearer ${a}`}})).data},onSuccess:()=>{s.invalidateQueries({queryKey:["messageThread",t]}),l(""),m({type:"success",message:"Message sent successfully!"})},onError:T=>{var Z,se;m({type:"error",message:((se=(Z=T.response)==null?void 0:Z.data)==null?void 0:se.message)||"Failed to send message. Please try again."})}}),z=j.useMemo(()=>y.find(T=>T.status==="SENT")||y[0]||null,[y]),_=j.useMemo(()=>!u||!v?!1:u.revision_count<v.revision_limit,[u,v]),O=j.useMemo(()=>u?[{key:"QUOTE_REQUESTED",label:"Quote Requested",completed:!0},{key:"QUOTE_APPROVED",label:"Quote Approved",completed:["QUOTE_APPROVED","IN_PRODUCTION","PROOF_SENT","REVISION_REQUESTED","COMPLETED"].includes(u.status)},{key:"IN_PRODUCTION",label:"In Production",completed:["IN_PRODUCTION","PROOF_SENT","REVISION_REQUESTED","COMPLETED"].includes(u.status)},{key:"PROOF_SENT",label:"Proof Sent",completed:["PROOF_SENT","REVISION_REQUESTED","COMPLETED"].includes(u.status)},{key:"COMPLETED",label:"Completed",completed:u.status==="COMPLETED"}]:[],[u]),Y=()=>{z&&k.mutate(z.id)},q=()=>{if(!(!z||!i.trim())){if(!_){m({type:"error",message:`Revision limit reached (${u==null?void 0:u.revision_count}/${v==null?void 0:v.revision_limit}). Please contact support for additional revisions.`});return}L.mutate({proofId:z.id,comment:i.trim()})}},A=T=>{T.preventDefault(),n.trim()&&E.mutate(n.trim())},M=T=>T?new Date(T).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",P=T=>new Intl.NumberFormat("en-IE",{style:"currency",currency:"EUR"}).format(T),C=T=>T<1024?T+" B":T<1024*1024?(T/1024).toFixed(1)+" KB":(T/(1024*1024)).toFixed(1)+" MB",V=T=>({QUOTE_REQUESTED:"bg-gray-100 text-gray-800",QUOTE_APPROVED:"bg-blue-100 text-blue-800",IN_PRODUCTION:"bg-yellow-100 text-yellow-800",PROOF_SENT:"bg-purple-100 text-purple-800",REVISION_REQUESTED:"bg-orange-100 text-orange-800",COMPLETED:"bg-green-100 text-green-800",CANCELLED:"bg-red-100 text-red-800"})[T]||"bg-gray-100 text-gray-800";return g?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-black"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Loading order details..."})]})})}):b||!u?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center",children:[e.jsx(Gt,{className:"w-16 h-16 text-red-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Order Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We couldn't find the order you're looking for. It may have been deleted or you may not have access to it."}),e.jsx(ie,{to:"/app/orders",className:"inline-block px-6 py-3 bg-black text-white font-semibold rounded-lg hover:bg-gray-800 transition-colors",children:"Back to Orders"})]})})}):r&&u.customer_id!==r.id?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center",children:[e.jsx(we,{className:"w-16 h-16 text-red-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to view this order."}),e.jsx(ie,{to:"/app/orders",className:"inline-block px-6 py-3 bg-black text-white font-semibold rounded-lg hover:bg-gray-800 transition-colors",children:"Back to Orders"})]})})}):e.jsxs(e.Fragment,{children:[h&&e.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-md animate-fade-in",children:e.jsx("div",{className:`rounded-lg shadow-lg px-6 py-4 ${h.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[h.type==="success"?e.jsx(rt,{className:"w-5 h-5 flex-shrink-0"}):e.jsx(Gt,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm font-medium",children:h.message})]})})}),e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(ie,{to:"/app/orders",className:"inline-flex items-center text-gray-600 hover:text-black font-medium transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Orders"]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Order #",u.order_number]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${V(u.status)}`,children:u.status.replace(/_/g," ")})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-lg text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Service:"})," ",(f==null?void 0:f.name)||"Loading..."]}),e.jsxs("p",{className:"text-lg text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Tier:"})," ",(v==null?void 0:v.name)||"Loading..."]})]})]}),e.jsxs("div",{className:"text-left lg:text-right space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(kt,{className:"w-5 h-5"}),e.jsxs("span",{children:["Created: ",M(u.created_at)]})]}),u.due_at&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(gt,{className:"w-5 h-5"}),e.jsxs("span",{children:["Due: ",M(u.due_at)]})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Order Progress"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-5 left-0 right-0 h-1 bg-gray-200",children:e.jsx("div",{className:"h-full bg-black transition-all duration-500",style:{width:`${O.filter(T=>T.completed).length/O.length*100}%`}})}),e.jsx("div",{className:"relative flex justify-between",children:O.map((T,Z)=>e.jsxs("div",{className:"flex flex-col items-center",style:{width:`${100/O.length}%`},children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-4 ${T.completed?"bg-black border-black":"bg-white border-gray-300"}`,children:T.completed?e.jsx(rt,{className:"w-6 h-6 text-white"}):e.jsx("div",{className:"w-4 h-4 rounded-full bg-gray-300"})}),e.jsx("p",{className:`mt-3 text-sm font-medium text-center ${T.completed?"text-black":"text-gray-500"}`,children:T.label})]},T.key))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[(f==null?void 0:f.requires_proof)&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Pr,{className:"w-6 h-6"}),"Proofs & Approvals"]}),y.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Pr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No proofs uploaded yet. Your design team will upload proofs for your review."})]}):e.jsxs(e.Fragment,{children:[z&&z.status==="SENT"&&e.jsx("div",{className:"bg-yellow-50 border-2 border-yellow-400 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx(os,{className:"w-6 h-6 text-yellow-600 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-900 mb-1",children:["Proof Version ",z.version_number," - Awaiting Your Approval"]}),e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Please review the proof below and approve it or request changes."}),z.staff_note&&e.jsxs("div",{className:"bg-white rounded p-3 mb-3",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Note from Design Team:"}),e.jsx("p",{className:"text-sm text-gray-700",children:z.staff_note})]}),e.jsx("div",{className:"mb-4",children:e.jsx("a",{href:z.file_url,target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsx("img",{src:z.file_url,alt:`Proof version ${z.version_number}`,className:"w-full rounded-lg border-2 border-gray-200 hover:border-black transition-colors cursor-pointer"})})}),c?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"What changes would you like?"}),e.jsx("textarea",{value:i,onChange:T=>o(T.target.value),rows:4,placeholder:"Please describe the changes you'd like to see...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-black focus:ring-4 focus:ring-gray-100 transition-all"})]}),v&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Revisions used: ",u.revision_count," / ",v.revision_limit]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:q,disabled:L.isPending||!i.trim(),className:"flex-1 px-6 py-3 bg-black text-white font-semibold rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:L.isPending?"Submitting...":"Submit Request"}),e.jsx("button",{onClick:()=>{d(!1),o("")},className:"px-6 py-3 bg-gray-200 text-gray-900 font-semibold rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]}):e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:Y,disabled:k.isPending,className:"flex-1 px-6 py-3 bg-black text-white font-semibold rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:k.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white"}),"Approving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(hw,{className:"w-5 h-5"}),"Approve Proof"]})}),e.jsxs("button",{onClick:()=>d(!0),disabled:!_,className:"flex-1 px-6 py-3 bg-white text-black border-2 border-black font-semibold rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Request Changes ",!_&&"(Limit Reached)"]})]})]})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:"Proof History"}),e.jsx("div",{className:"space-y-3",children:y.map(T=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:["Version ",T.version_number]}),e.jsx("p",{className:"text-sm text-gray-600",children:M(T.created_at)})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${T.status==="APPROVED"?"bg-green-100 text-green-800":T.status==="NEEDS_REVISION"?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:T.status.replace(/_/g," ")})]}),T.staff_note&&e.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("span",{className:"font-semibold",children:"Staff Note:"})," ",T.staff_note]}),T.customer_comment&&e.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("span",{className:"font-semibold",children:"Your Comment:"})," ",T.customer_comment]}),e.jsxs("a",{href:T.file_url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-black hover:underline font-medium inline-flex items-center gap-1",children:[e.jsx(Da,{className:"w-4 h-4"}),"View Proof"]})]},T.id))})]})]})]}),R.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Ae,{className:"w-6 h-6"}),"Your Uploaded Files"]}),e.jsx("div",{className:"space-y-3",children:R.map(T=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:border-black transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ae,{className:"w-8 h-8 text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:T.file_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[T.file_type,"  ",C(T.file_size)]}),T.dpi_warning&&e.jsx("p",{className:"text-xs text-orange-600 font-medium mt-1",children:" Low DPI warning - may affect print quality"})]})]}),e.jsxs("a",{href:T.file_url,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors text-sm font-medium flex items-center gap-2",children:[e.jsx(Da,{className:"w-4 h-4"}),"Download"]})]},T.id))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(sa,{className:"w-6 h-6"}),"Messages"]}),N&&N.messages.length>0?e.jsx("div",{className:"space-y-4 mb-6",children:N.messages.map(T=>{const Z=T.sender_id===(r==null?void 0:r.id);return e.jsx("div",{className:`flex ${Z?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-lg px-4 py-3 rounded-lg ${Z?"bg-black text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsx("p",{className:"text-sm font-semibold mb-1",children:Z?"You":"Staff"}),e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:T.body}),e.jsx("p",{className:`text-xs mt-2 ${Z?"text-gray-300":"text-gray-600"}`,children:M(T.created_at)})]})},T.id)})}):e.jsx("p",{className:"text-gray-500 text-center py-6",children:"No messages yet. Start a conversation with our team!"}),e.jsxs("form",{onSubmit:A,className:"space-y-3",children:[e.jsx("textarea",{value:n,onChange:T=>l(T.target.value),rows:3,placeholder:"Type your message here...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-black focus:ring-4 focus:ring-gray-100 transition-all"}),e.jsx("button",{type:"submit",disabled:E.isPending||!n.trim(),className:"px-6 py-3 bg-black text-white font-semibold rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:E.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(po,{className:"w-4 h-4"}),"Send Message"]})})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(pd,{className:"w-6 h-6"}),"Payment Details"]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Subtotal:"}),e.jsx("span",{className:"font-semibold",children:P(u.subtotal)})]}),e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsxs("span",{children:["Tax (",(u.tax_rate*100).toFixed(1),"%):"]}),e.jsx("span",{className:"font-semibold",children:P(u.tax_amount)})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold text-gray-900 pt-3 border-t",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{children:P(u.total_amount)})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsxs("span",{className:"text-gray-700",children:["Deposit (",u.deposit_pct,"%):"]}),e.jsx("span",{className:"font-semibold text-green-700",children:P(u.deposit_amount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Balance Due:"}),e.jsx("span",{className:"font-bold text-lg text-black",children:P(u.balance_due)})]})]}),u.balance_due>0&&e.jsxs("button",{className:"w-full px-6 py-3 bg-yellow-400 text-black font-bold rounded-lg hover:bg-yellow-500 transition-colors flex items-center justify-center gap-2",children:[e.jsx(pd,{className:"w-5 h-5"}),"Make Payment"]}),p.length>0&&e.jsxs("div",{className:"mt-6 pt-6 border-t",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:"Payment History"}),e.jsx("div",{className:"space-y-2",children:p.map(T=>e.jsxs("div",{className:"flex justify-between items-start text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:P(T.amount)}),e.jsx("p",{className:"text-gray-600",children:M(T.created_at)}),e.jsx("p",{className:"text-gray-600",children:T.method.replace(/_/g," ")})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${T.status==="COMPLETED"?"bg-green-100 text-green-800":T.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:T.status})]},T.id))})]})]}),w&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(gt,{className:"w-6 h-6"}),"Appointment"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Date & Time"}),e.jsxs("p",{className:"font-semibold text-gray-900",children:[M(w.start_at)," - ",new Date(w.end_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-semibold ${w.status==="CONFIRMED"?"bg-green-100 text-green-800":w.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:w.status})]}),w.is_emergency&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:[e.jsxs("p",{className:"text-sm font-semibold text-orange-900 flex items-center gap-2",children:[e.jsx(os,{className:"w-4 h-4"}),"Emergency Booking"]}),w.urgent_fee_amt&&e.jsxs("p",{className:"text-sm text-orange-800 mt-1",children:["Urgent fee: ",P(w.urgent_fee_amt)]})]})]})]}),x.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Ae,{className:"w-6 h-6"}),"Invoices"]}),e.jsx("div",{className:"space-y-3",children:x.map(T=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:["#",T.invoice_number]}),e.jsx("p",{className:"text-sm text-gray-600",children:M(T.issued_at)})]}),e.jsx("p",{className:"font-bold text-gray-900",children:P(T.amount_due)})]}),T.paid_at&&e.jsxs("p",{className:"text-sm text-green-700 font-medium mb-2",children:[" Paid on ",M(T.paid_at)]}),e.jsxs("button",{className:"text-sm text-black hover:underline font-medium flex items-center gap-1",children:[e.jsx(Da,{className:"w-4 h-4"}),"Download Invoice"]})]},T.id))})]})]})]})]})})]})},SN=()=>{var Z,se;const t=et();ae(B=>B.authentication_state.current_user);const s=ae(B=>B.authentication_state.auth_token),r=ae(B=>B.update_user_profile),[a,n]=j.useState({name:"",email:"",phone:null,address:null,company_name:null}),[l,i]=j.useState({name:"",email:"",phone:null,address:null,company_name:null}),[o,c]=j.useState(!1),[d,h]=j.useState(!1),[m,u]=j.useState({current_password:"",new_password:"",confirm_password:""}),[g,b]=j.useState(!1),[f,v]=j.useState(!1),[y,p]=j.useState(!1),[x,w]=j.useState({}),[R,N]=j.useState(null),k=te({queryKey:["userProfile"],queryFn:async()=>(await $.get("http://localhost:3000/api/users/me",{headers:{Authorization:`Bearer ${s}`}})).data,enabled:!!s,staleTime:6e4,refetchOnWindowFocus:!1,retry:1});j.useEffect(()=>{if(k.data){const{user:B,customer_profile:ee}=k.data,S={name:B.name,email:B.email,phone:(ee==null?void 0:ee.phone)||null,address:(ee==null?void 0:ee.address)||null,company_name:(ee==null?void 0:ee.company_name)||null};n(S),i(S)}},[k.data]);const L=me({mutationFn:async B=>(await $.put("http://localhost:3000/api/users/me",B,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,onSuccess:B=>{var S,re,le;r({name:B.user.name,email:B.user.email},B.customer_profile?{phone:B.customer_profile.phone,address:B.customer_profile.address,company_name:B.customer_profile.company_name}:void 0);const ee={name:B.user.name,email:B.user.email,phone:((S=B.customer_profile)==null?void 0:S.phone)||null,address:((re=B.customer_profile)==null?void 0:re.address)||null,company_name:((le=B.customer_profile)==null?void 0:le.company_name)||null};n(ee),i(ee),t.invalidateQueries({queryKey:["userProfile"]}),N({type:"success",message:"Profile updated successfully!"}),c(!1),w({})},onError:B=>{var S,re;const ee=((re=(S=B.response)==null?void 0:S.data)==null?void 0:re.message)||B.message||"Failed to update profile. Please try again.";N({type:"error",message:ee})}}),E=()=>{const B={};return!a.name||a.name.trim().length===0?B.name="Name is required":a.name.length>255&&(B.name="Name must be less than 255 characters"),!a.email||a.email.trim().length===0?B.email="Email is required":/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)?a.email.length>255&&(B.email="Email must be less than 255 characters"):B.email="Please enter a valid email address",a.phone&&a.phone.length>50&&(B.phone="Phone must be less than 50 characters"),a.address&&a.address.length>500&&(B.address="Address must be less than 500 characters"),a.company_name&&a.company_name.length>255&&(B.company_name="Company name must be less than 255 characters"),w(B),Object.keys(B).length===0},z=()=>{const B={};return m.current_password||(B.current_password="Current password is required"),m.new_password?m.new_password.length<8?B.new_password="Password must be at least 8 characters":m.new_password.length>100&&(B.new_password="Password must be less than 100 characters"):B.new_password="New password is required",m.confirm_password?m.new_password!==m.confirm_password&&(B.confirm_password="Passwords do not match"):B.confirm_password="Please confirm your new password",w(B),Object.keys(B).length===0},_=(B,ee)=>{n(S=>({...S,[B]:ee||null})),x[B]&&w(S=>{const re={...S};return delete re[B],re})},O=(B,ee)=>{u(S=>({...S,[B]:ee})),x[B]&&w(S=>{const re={...S};return delete re[B],re})},Y=()=>{c(!0),w({}),N(null)},q=()=>{n(l),c(!1),w({}),N(null)},A=()=>{E()&&L.mutate(a)},M=()=>{h(!0),u({current_password:"",new_password:"",confirm_password:""}),w({})},P=()=>{h(!1),u({current_password:"",new_password:"",confirm_password:""}),w({}),b(!1),v(!1),p(!1)},C=()=>{z()&&(N({type:"error",message:"Password change functionality requires backend implementation. Please contact support."}),P())};if(j.useEffect(()=>{if(R&&R.type==="success"){const B=setTimeout(()=>{N(null)},3e3);return()=>clearTimeout(B)}},[R]),k.isLoading)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-black"}),e.jsx("p",{className:"text-gray-700 text-lg font-medium",children:"Loading profile..."})]})})});if(k.isError)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg border border-gray-200 p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(we,{className:"w-8 h-8 text-red-600"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Error Loading Profile"})]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Failed to load your profile information. Please try again."}),e.jsx("button",{onClick:()=>k.refetch(),className:"w-full px-6 py-3 bg-black text-white rounded-lg font-semibold hover:bg-gray-800 transition-all duration-200",children:"Retry"})]})})});const V=(Z=k.data)==null?void 0:Z.user,T=(se=k.data)==null?void 0:se.customer_profile;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:"My Profile"}),e.jsx("p",{className:"text-gray-600 text-base leading-relaxed",children:"Manage your personal information and account settings"})]}),R&&e.jsxs("div",{className:`mb-6 px-6 py-4 rounded-lg shadow-lg flex items-start gap-3 ${R.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:[R.type==="success"?e.jsx(rt,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}):e.jsx(we,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-medium",children:R.message})}),R.type==="error"&&e.jsx("button",{onClick:()=>N(null),className:"text-white hover:text-gray-200 transition-colors",children:e.jsx(je,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 px-6 lg:px-8 py-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-black rounded-full flex items-center justify-center",children:e.jsx(Or,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:V==null?void 0:V.name}),e.jsx("p",{className:"text-sm text-gray-600",children:V==null?void 0:V.email})]})]}),!o&&e.jsxs("button",{onClick:Y,className:"px-6 py-3 bg-white border-2 border-black text-black rounded-lg font-semibold hover:bg-gray-50 transition-all duration-200 flex items-center gap-2",children:[e.jsx(Os,{className:"w-4 h-4"}),"Edit Profile"]})]})}),e.jsxs("div",{className:"px-6 lg:px-8 py-8 space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Full Name *"}),e.jsx("input",{type:"text",id:"name",value:a.name,onChange:B=>_("name",B.target.value),disabled:!o,className:`w-full px-4 py-3 rounded-lg border-2 ${x.name?"border-red-500 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} ${o?"bg-white text-gray-900":"bg-gray-50 text-gray-600 cursor-not-allowed"} focus:outline-none focus:ring-4 transition-all duration-200`}),x.name&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(we,{className:"w-4 h-4"}),x.name]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",id:"email",value:a.email,onChange:B=>_("email",B.target.value),disabled:!o,className:`w-full px-4 py-3 rounded-lg border-2 ${x.email?"border-red-500 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} ${o?"bg-white text-gray-900":"bg-gray-50 text-gray-600 cursor-not-allowed"} focus:outline-none focus:ring-4 transition-all duration-200`}),x.email&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(we,{className:"w-4 h-4"}),x.email]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Details"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",id:"phone",value:a.phone||"",onChange:B=>_("phone",B.target.value),disabled:!o,placeholder:"+353 87 123 4567",className:`w-full px-4 py-3 rounded-lg border-2 ${x.phone?"border-red-500 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} ${o?"bg-white text-gray-900":"bg-gray-50 text-gray-600 cursor-not-allowed"} focus:outline-none focus:ring-4 transition-all duration-200`}),x.phone&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(we,{className:"w-4 h-4"}),x.phone]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Business Information"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"company_name",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Company Name"}),e.jsx("input",{type:"text",id:"company_name",value:a.company_name||"",onChange:B=>_("company_name",B.target.value),disabled:!o,placeholder:"Your Company Ltd.",className:`w-full px-4 py-3 rounded-lg border-2 ${x.company_name?"border-red-500 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} ${o?"bg-white text-gray-900":"bg-gray-50 text-gray-600 cursor-not-allowed"} focus:outline-none focus:ring-4 transition-all duration-200`}),x.company_name&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(we,{className:"w-4 h-4"}),x.company_name]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"address",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Business Address"}),e.jsx("textarea",{id:"address",value:a.address||"",onChange:B=>_("address",B.target.value),disabled:!o,rows:3,placeholder:"123 Main Street, Dublin, Ireland",className:`w-full px-4 py-3 rounded-lg border-2 ${x.address?"border-red-500 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} ${o?"bg-white text-gray-900":"bg-gray-50 text-gray-600 cursor-not-allowed"} focus:outline-none focus:ring-4 transition-all duration-200 resize-none`}),x.address&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(we,{className:"w-4 h-4"}),x.address]})]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Account Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Account Status:"}),e.jsx("span",{className:"ml-2 px-2 py-1 bg-green-100 text-green-800 rounded-md font-semibold",children:V==null?void 0:V.status})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Member Since:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:V&&new Date(V.created_at).toLocaleDateString("en-IE",{year:"numeric",month:"long",day:"numeric"})})]}),(T==null?void 0:T.b2b_account_id)&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"B2B Account ID:"}),e.jsx("span",{className:"ml-2 text-gray-900 font-mono",children:T.b2b_account_id})]})]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-6",children:o?e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("button",{onClick:A,disabled:L.isPending,className:"flex-1 px-6 py-3 bg-yellow-400 text-black rounded-lg font-semibold hover:bg-yellow-500 focus:outline-none focus:ring-4 focus:ring-yellow-100 transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:L.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-black"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ps,{className:"w-5 h-5"}),"Save Changes"]})}),e.jsxs("button",{onClick:q,disabled:L.isPending,className:"flex-1 px-6 py-3 bg-gray-100 text-gray-900 rounded-lg font-semibold hover:bg-gray-200 border-2 border-gray-300 focus:outline-none focus:ring-4 focus:ring-gray-100 transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(je,{className:"w-5 h-5"}),"Cancel"]})]}):e.jsxs("button",{onClick:M,className:"w-full sm:w-auto px-6 py-3 text-black font-semibold hover:underline transition-all duration-200 flex items-center justify-center gap-2",children:[e.jsx(Di,{className:"w-5 h-5"}),"Change Password"]})})]})]})]})}),d&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Di,{className:"w-5 h-5"}),"Change Password"]}),e.jsx("button",{onClick:P,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(je,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"px-6 py-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"current_password",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Current Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:g?"text":"password",id:"current_password",value:m.current_password,onChange:B=>O("current_password",B.target.value),className:`w-full px-4 py-3 pr-12 rounded-lg border-2 ${x.current_password?"border-red-500 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} bg-white text-gray-900 focus:outline-none focus:ring-4 transition-all duration-200`}),e.jsx("button",{type:"button",onClick:()=>b(!g),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:g?e.jsx(In,{className:"w-5 h-5"}):e.jsx(zn,{className:"w-5 h-5"})})]}),x.current_password&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(we,{className:"w-4 h-4"}),x.current_password]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"new_password",className:"block text-sm font-semibold text-gray-900 mb-2",children:"New Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:f?"text":"password",id:"new_password",value:m.new_password,onChange:B=>O("new_password",B.target.value),className:`w-full px-4 py-3 pr-12 rounded-lg border-2 ${x.new_password?"border-red-500 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} bg-white text-gray-900 focus:outline-none focus:ring-4 transition-all duration-200`}),e.jsx("button",{type:"button",onClick:()=>v(!f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:f?e.jsx(In,{className:"w-5 h-5"}):e.jsx(zn,{className:"w-5 h-5"})})]}),x.new_password&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(we,{className:"w-4 h-4"}),x.new_password]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Must be at least 8 characters long"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm_password",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Confirm New Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:y?"text":"password",id:"confirm_password",value:m.confirm_password,onChange:B=>O("confirm_password",B.target.value),className:`w-full px-4 py-3 pr-12 rounded-lg border-2 ${x.confirm_password?"border-red-500 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} bg-white text-gray-900 focus:outline-none focus:ring-4 transition-all duration-200`}),e.jsx("button",{type:"button",onClick:()=>p(!y),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:y?e.jsx(In,{className:"w-5 h-5"}):e.jsx(zn,{className:"w-5 h-5"})})]}),x.confirm_password&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(we,{className:"w-4 h-4"}),x.confirm_password]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(we,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Note:"})," Password change functionality requires backend implementation. This feature is coming soon."]})]})})]}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200 flex gap-4",children:[e.jsx("button",{onClick:C,className:"flex-1 px-6 py-3 bg-black text-white rounded-lg font-semibold hover:bg-gray-800 focus:outline-none focus:ring-4 focus:ring-gray-200 transition-all duration-200",children:"Change Password"}),e.jsx("button",{onClick:P,className:"flex-1 px-6 py-3 bg-white text-gray-900 rounded-lg font-semibold hover:bg-gray-100 border-2 border-gray-300 focus:outline-none focus:ring-4 focus:ring-gray-100 transition-all duration-200",children:"Cancel"})]})]})})]})},CN=async(t,s)=>(await $.get("http://localhost:3000/api/orders",{params:{assigned_staff_id:t,limit:50},headers:{Authorization:`Bearer ${s}`}})).data.orders,EN=async t=>{const s=new Date().toISOString().split("T")[0];return(await $.get("http://localhost:3000/api/bookings",{params:{start_date:s,end_date:s,status:"CONFIRMED"},headers:{Authorization:`Bearer ${t}`}})).data.bookings},FN=()=>{const t=ae(p=>p.authentication_state.current_user),s=ae(p=>p.authentication_state.auth_token),r=ae(p=>p.notification_state.unread_counts.messages),a=(t==null?void 0:t.id)||"",{data:n=[],isLoading:l,error:i,refetch:o}=te({queryKey:["staff-orders",a],queryFn:()=>CN(a,s||""),enabled:!!a&&!!s,staleTime:5*60*1e3,refetchInterval:5*60*1e3}),{data:c=[],isLoading:d,error:h,refetch:m}=te({queryKey:["todays-bookings"],queryFn:()=>EN(s||""),enabled:!!s,staleTime:5*60*1e3,refetchInterval:5*60*1e3}),u=l||d,g=ht.useMemo(()=>{if(!n.length)return{total_assigned:0,in_design:0,awaiting_approval:0,in_production:0,completed_today:0};const p=new Date().toISOString().split("T")[0];return{total_assigned:n.length,in_design:n.filter(x=>x.status==="IN_PRODUCTION").length,awaiting_approval:n.filter(x=>x.status==="PROOF_SENT").length,in_production:n.filter(x=>x.status==="IN_PRODUCTION").length,completed_today:n.filter(x=>x.status==="COMPLETED"&&x.updated_at.startsWith(p)).length}},[n]),b=ht.useMemo(()=>{const p=new Date;return{proofs_to_upload:n.filter(x=>x.status==="IN_PRODUCTION").length,overdue_jobs:n.filter(x=>x.due_at?new Date(x.due_at)<p&&x.status!=="COMPLETED"&&x.status!=="CANCELLED":!1).length,unread_messages:r}},[n,r]),f=ht.useMemo(()=>c.map(p=>({id:p.id,start_at:p.start_at,end_at:p.end_at,customer_name:"Customer",service_name:"Service",is_emergency:p.is_emergency,order_id:p.order_id})),[c]),v=p=>new Date(p).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),y=()=>{o(),m()};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Welcome back, ",(t==null?void 0:t.name)||"Staff Member"]}),e.jsx("p",{className:"text-gray-600",children:"Here's what's happening with your jobs today"})]}),(i||h)&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-800 font-semibold mb-1",children:"Error loading dashboard data"}),e.jsxs("p",{className:"text-red-600 text-sm",children:[i?"Failed to load orders. ":"",h?"Failed to load bookings.":""]})]}),e.jsx("button",{onClick:y,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium",children:"Retry"})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Job Summary"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:u?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-3"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded w-16"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-600 text-sm font-semibold uppercase tracking-wide mb-2",children:"Total Assigned"}),e.jsx("p",{className:"text-4xl font-bold text-gray-900",children:g.total_assigned})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:u?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-3"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded w-16"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-600 text-sm font-semibold uppercase tracking-wide mb-2",children:"In Design"}),e.jsx("p",{className:"text-4xl font-bold text-blue-600",children:g.in_design})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:u?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-3"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded w-16"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-600 text-sm font-semibold uppercase tracking-wide mb-2",children:"Awaiting Approval"}),e.jsx("p",{className:"text-4xl font-bold text-yellow-500",children:g.awaiting_approval})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:u?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-3"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded w-16"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-600 text-sm font-semibold uppercase tracking-wide mb-2",children:"In Production"}),e.jsx("p",{className:"text-4xl font-bold text-orange-600",children:g.in_production})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:u?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-3"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded w-16"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-600 text-sm font-semibold uppercase tracking-wide mb-2",children:"Completed Today"}),e.jsx("p",{className:"text-4xl font-bold text-green-600",children:g.completed_today})]})})]})]}),(b.proofs_to_upload>0||b.overdue_jobs>0||b.unread_messages>0)&&e.jsxs("div",{className:"mb-8 bg-yellow-50 border-2 border-yellow-400 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-yellow-900 font-bold text-lg mb-4 flex items-center",children:[e.jsx("svg",{className:"w-6 h-6 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Action Required"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[b.proofs_to_upload>0&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-yellow-400 text-yellow-900 font-bold mr-3",children:b.proofs_to_upload}),e.jsx("span",{className:"text-yellow-900 font-medium",children:"Proofs to Upload"})]}),b.overdue_jobs>0&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-red-500 text-white font-bold mr-3",children:b.overdue_jobs}),e.jsx("span",{className:"text-yellow-900 font-medium",children:"Overdue Jobs"})]}),b.unread_messages>0&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-blue-500 text-white font-bold mr-3",children:b.unread_messages}),e.jsx("span",{className:"text-yellow-900 font-medium",children:"Unread Messages"})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Today's Schedule"}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:u?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(p=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-16 w-16 bg-gray-200 rounded"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},p))})}):f.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("p",{className:"text-gray-600 font-medium",children:"No bookings scheduled for today"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Check your calendar for upcoming appointments"})]}):e.jsx("div",{className:"divide-y divide-gray-100",children:f.map(p=>e.jsx("div",{className:`p-6 hover:bg-gray-50 transition-colors ${p.is_emergency?"bg-red-50 border-l-4 border-red-500":""}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsxs("span",{className:"text-lg font-bold text-gray-900",children:[v(p.start_at)," - ",v(p.end_at)]}),p.is_emergency&&e.jsxs("span",{className:"ml-3 inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-red-500 text-white",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"EMERGENCY"]})]}),e.jsx("p",{className:"text-gray-900 font-semibold mb-1",children:p.service_name}),e.jsxs("p",{className:"text-gray-600 text-sm",children:["Customer: ",p.customer_name]})]}),p.order_id&&e.jsx(ie,{to:`/staff/jobs/${p.order_id}`,className:"ml-4 px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors font-medium text-sm",children:"View Job"})]})},p.id))})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(ie,{to:"/staff/jobs",className:"group bg-gradient-to-br from-black to-gray-800 rounded-xl shadow-xl p-8 hover:shadow-2xl transition-all duration-200 transform hover:scale-105",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"View Job Queue"}),e.jsx("p",{className:"text-gray-300",children:"Manage all your assigned jobs"})]}),e.jsx("svg",{className:"w-12 h-12 text-yellow-400 group-hover:translate-x-2 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})}),e.jsx(ie,{to:"/staff/calendar",className:"group bg-gradient-to-br from-blue-600 to-blue-800 rounded-xl shadow-xl p-8 hover:shadow-2xl transition-all duration-200 transform hover:scale-105",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Check Calendar"}),e.jsx("p",{className:"text-blue-100",children:"View your full schedule"})]}),e.jsx("svg",{className:"w-12 h-12 text-white group-hover:translate-x-2 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})]})})]}),e.jsxs("div",{className:"mt-8 text-center",children:[e.jsxs("p",{className:"text-gray-500 text-sm",children:["Last updated: ",new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})]}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Dashboard auto-refreshes every 5 minutes"})]})]})})})},PN=()=>{var L;const t=ae(E=>E.authentication_state.current_user),s=ae(E=>E.authentication_state.auth_token),r=(t==null?void 0:t.id)||"";(L=t==null?void 0:t.staff_profile)!=null&&L.permissions;const[a,n]=Ye(),[l,i]=j.useState(!1),[o,c]=j.useState({sort_by:"due_at",sort_order:"asc"}),d=j.useMemo(()=>({assigned_to:a.get("assigned_to")||null,status:a.get("status")||null,priority:a.get("priority")||null,due_date:a.get("due_date")||null}),[a]),{data:h,isLoading:m,error:u,refetch:g}=te({queryKey:["staff-jobs",d,o,r],queryFn:async()=>{const E={limit:"100",sort_by:o.sort_by,sort_order:o.sort_order};return d.assigned_to==="me"?E.assigned_staff_id=r:d.assigned_to&&d.assigned_to!=="all"&&(E.assigned_staff_id=d.assigned_to),d.status&&(E.status=d.status),(await $.get("http://localhost:3000/api/orders",{params:E,headers:{Authorization:`Bearer ${s}`}})).data.orders.map(O=>({id:O.id,order_number:O.order_number,customer_id:O.customer_id,customer_name:O.customer_name||"Unknown Customer",service_id:O.service_id,service_name:O.service_name||"Unknown Service",tier_id:O.tier_id,tier_name:O.tier_name||"Unknown Tier",assigned_staff_id:O.assigned_staff_id,status:O.status,due_at:O.due_at,total_amount:Number(O.total_amount||0),is_emergency:O.is_emergency||!1,created_at:O.created_at,updated_at:O.updated_at}))},enabled:!!s&&!!r,staleTime:6e4,refetchOnWindowFocus:!0}),{data:b}=te({queryKey:["job-filter-options"],queryFn:async()=>{const[E,z]=await Promise.all([$.get("http://localhost:3000/api/services",{params:{is_active:!0},headers:{Authorization:`Bearer ${s}`}}),$.get("http://localhost:3000/api/users",{params:{role:"STAFF",status:"ACTIVE"},headers:{Authorization:`Bearer ${s}`}})]);return{services:E.data.services.map(O=>({id:O.id,name:O.name})),staff_members:z.data.users.map(O=>({id:O.id,name:O.name}))}},enabled:!!s,staleTime:3e5}),f=j.useMemo(()=>{if(!h)return[];let E=[...h];if(d.priority==="emergency"&&(E=E.filter(z=>z.is_emergency)),d.due_date){const z=new Date;E=E.filter(_=>{if(!_.due_at)return!1;const O=new Date(_.due_at);switch(d.due_date){case"overdue":return O<z;case"today":return O.toDateString()===z.toDateString();case"this_week":const Y=new Date(z);return Y.setDate(z.getDate()+7),O<=Y;case"this_month":return O.getMonth()===z.getMonth()&&O.getFullYear()===z.getFullYear();default:return!0}})}return E.sort((z,_)=>{if(z.is_emergency&&!_.is_emergency)return-1;if(!z.is_emergency&&_.is_emergency)return 1;if(o.sort_by==="due_at"){if(!z.due_at)return 1;if(!_.due_at)return-1;const O=new Date(z.due_at).getTime()-new Date(_.due_at).getTime();return o.sort_order==="asc"?O:-O}else{const O=new Date(z.created_at).getTime()-new Date(_.created_at).getTime();return o.sort_order==="asc"?O:-O}}),E},[h,d,o]),v=j.useMemo(()=>{if(!h)return{total:0,assigned:0,overdue:0,emergency:0};const E=new Date;return{total:h.length,assigned:h.filter(z=>z.assigned_staff_id===r).length,overdue:h.filter(z=>z.due_at&&new Date(z.due_at)<E).length,emergency:h.filter(z=>z.is_emergency).length}},[h,r]),y=(E,z)=>{const _=new URLSearchParams(a);z?_.set(E,z):_.delete(E),n(_)},p=()=>{n(new URLSearchParams)},x=E=>{c(z=>({sort_by:E,sort_order:z.sort_by===E&&z.sort_order==="asc"?"desc":"asc"}))},w=E=>{if(!E)return"No deadline";const z=new Date,O=new Date(E).getTime()-z.getTime(),Y=Math.ceil(O/(1e3*60*60*24));return Y<0?`${Math.abs(Y)} days overdue`:Y===0?"Due today":Y===1?"Due tomorrow":`Due in ${Y} days`},R=E=>({QUOTE_REQUESTED:"bg-gray-100 text-gray-800 border-gray-300",QUOTE_APPROVED:"bg-blue-100 text-blue-800 border-blue-300",IN_PRODUCTION:"bg-yellow-100 text-yellow-800 border-yellow-300",PROOF_SENT:"bg-purple-100 text-purple-800 border-purple-300",REVISION_REQUESTED:"bg-orange-100 text-orange-800 border-orange-300",COMPLETED:"bg-green-100 text-green-800 border-green-300",CANCELLED:"bg-red-100 text-red-800 border-red-300"})[E]||"bg-gray-100 text-gray-800 border-gray-300",N=E=>E.replace(/_/g," ").toLowerCase().split(" ").map(z=>z.charAt(0).toUpperCase()+z.slice(1)).join(" "),k=d.assigned_to||d.status||d.priority||d.due_date;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Job Queue"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Manage your assigned jobs and track deadlines"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-2 rounded-lg border border-gray-200",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Total Jobs"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:v.total})]}),e.jsxs("div",{className:"bg-blue-50 px-4 py-2 rounded-lg border border-blue-200",children:[e.jsx("div",{className:"text-xs text-blue-600",children:"Assigned to Me"}),e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:v.assigned})]}),v.emergency>0&&e.jsxs("div",{className:"bg-yellow-50 px-4 py-2 rounded-lg border border-yellow-300",children:[e.jsx("div",{className:"text-xs text-yellow-800",children:"Emergency"}),e.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:v.emergency})]}),v.overdue>0&&e.jsxs("div",{className:"bg-red-50 px-4 py-2 rounded-lg border border-red-200",children:[e.jsx("div",{className:"text-xs text-red-600",children:"Overdue"}),e.jsx("div",{className:"text-2xl font-bold text-red-900",children:v.overdue})]})]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10 shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[e.jsxs("button",{onClick:()=>i(!l),className:"sm:hidden flex items-center justify-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-900 rounded-lg font-medium transition-colors",children:[e.jsx(pn,{className:"w-5 h-5"}),e.jsx("span",{children:"Filters"}),k&&e.jsx("span",{className:"bg-yellow-400 text-black text-xs font-bold px-2 py-0.5 rounded-full",children:"Active"})]}),e.jsxs("div",{className:"hidden sm:flex flex-wrap items-center gap-3 flex-1",children:[e.jsxs("select",{value:d.assigned_to||"all",onChange:E=>y("assigned_to",E.target.value==="all"?null:E.target.value),className:"px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-900 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-yellow-400",children:[e.jsx("option",{value:"all",children:"All Jobs"}),e.jsx("option",{value:"me",children:"Assigned to Me"}),b==null?void 0:b.staff_members.map(E=>e.jsx("option",{value:E.id,children:E.name},E.id))]}),e.jsxs("select",{value:d.status||"",onChange:E=>y("status",E.target.value||null),className:"px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-900 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-yellow-400",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"QUOTE_APPROVED",children:"Quote Approved"}),e.jsx("option",{value:"IN_PRODUCTION",children:"In Production"}),e.jsx("option",{value:"PROOF_SENT",children:"Proof Sent"}),e.jsx("option",{value:"REVISION_REQUESTED",children:"Revision Requested"}),e.jsx("option",{value:"COMPLETED",children:"Completed"})]}),e.jsxs("select",{value:d.priority||"",onChange:E=>y("priority",E.target.value||null),className:"px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-900 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-yellow-400",children:[e.jsx("option",{value:"",children:"All Priorities"}),e.jsx("option",{value:"emergency",children:"Emergency Only"})]}),e.jsxs("select",{value:d.due_date||"",onChange:E=>y("due_date",E.target.value||null),className:"px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-900 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-yellow-400",children:[e.jsx("option",{value:"",children:"All Due Dates"}),e.jsx("option",{value:"overdue",children:"Overdue"}),e.jsx("option",{value:"today",children:"Due Today"}),e.jsx("option",{value:"this_week",children:"This Week"}),e.jsx("option",{value:"this_month",children:"This Month"})]}),k&&e.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-4 py-2 bg-red-50 hover:bg-red-100 text-red-700 rounded-lg text-sm font-medium transition-colors",children:[e.jsx(je,{className:"w-4 h-4"}),"Clear"]})]}),e.jsxs("select",{value:o.sort_by,onChange:E=>x(E.target.value),className:"px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-900 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-yellow-400",children:[e.jsx("option",{value:"due_at",children:"Sort by Due Date"}),e.jsx("option",{value:"created_at",children:"Sort by Created Date"})]})]}),l&&e.jsxs("div",{className:"sm:hidden mt-4 pt-4 border-t border-gray-200 space-y-3",children:[e.jsxs("select",{value:d.assigned_to||"all",onChange:E=>y("assigned_to",E.target.value==="all"?null:E.target.value),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-900",children:[e.jsx("option",{value:"all",children:"All Jobs"}),e.jsx("option",{value:"me",children:"Assigned to Me"}),b==null?void 0:b.staff_members.map(E=>e.jsx("option",{value:E.id,children:E.name},E.id))]}),e.jsxs("select",{value:d.status||"",onChange:E=>y("status",E.target.value||null),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-900",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"QUOTE_APPROVED",children:"Quote Approved"}),e.jsx("option",{value:"IN_PRODUCTION",children:"In Production"}),e.jsx("option",{value:"PROOF_SENT",children:"Proof Sent"}),e.jsx("option",{value:"REVISION_REQUESTED",children:"Revision Requested"}),e.jsx("option",{value:"COMPLETED",children:"Completed"})]}),e.jsxs("select",{value:d.priority||"",onChange:E=>y("priority",E.target.value||null),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-900",children:[e.jsx("option",{value:"",children:"All Priorities"}),e.jsx("option",{value:"emergency",children:"Emergency Only"})]}),e.jsxs("select",{value:d.due_date||"",onChange:E=>y("due_date",E.target.value||null),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-900",children:[e.jsx("option",{value:"",children:"All Due Dates"}),e.jsx("option",{value:"overdue",children:"Overdue"}),e.jsx("option",{value:"today",children:"Due Today"}),e.jsx("option",{value:"this_week",children:"This Week"}),e.jsx("option",{value:"this_month",children:"This Month"})]}),k&&e.jsxs("button",{onClick:p,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-50 hover:bg-red-100 text-red-700 rounded-lg text-sm font-medium transition-colors",children:[e.jsx(je,{className:"w-4 h-4"}),"Clear All Filters"]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[m&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-yellow-400"}),e.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading jobs..."})]}),u&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(os,{className:"w-12 h-12 text-red-600"})}),e.jsx("h3",{className:"text-lg font-bold text-red-900 mb-2",children:"Failed to Load Jobs"}),e.jsx("p",{className:"text-red-700 mb-4",children:u instanceof Error?u.message:"An error occurred while fetching jobs."}),e.jsx("button",{onClick:()=>g(),className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:"Try Again"})]}),!m&&!u&&f.length===0&&!k&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-12 text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx(qi,{className:"w-16 h-16 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No Jobs Yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have any jobs assigned to you at the moment."}),e.jsx(ie,{to:"/staff",className:"inline-block px-6 py-3 bg-black hover:bg-gray-800 text-white rounded-lg font-medium transition-colors",children:"Return to Dashboard"})]}),!m&&!u&&f.length===0&&k&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-12 text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx(qi,{className:"w-16 h-16 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No Matching Jobs"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"No jobs match your current filters. Try adjusting your search criteria."}),e.jsx("button",{onClick:p,className:"inline-block px-6 py-3 bg-black hover:bg-gray-800 text-white rounded-lg font-medium transition-colors",children:"Clear All Filters"})]}),!m&&!u&&f.length>0&&e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:f.map(E=>e.jsxs("div",{className:`bg-white rounded-xl border-2 overflow-hidden transition-all duration-200 hover:shadow-xl ${E.is_emergency?"border-yellow-400 shadow-lg shadow-yellow-100":"border-gray-200 hover:border-yellow-400"}`,children:[E.is_emergency&&e.jsxs("div",{className:"bg-yellow-400 px-4 py-2 flex items-center justify-center gap-2",children:[e.jsx(os,{className:"w-5 h-5 text-black"}),e.jsx("span",{className:"text-black font-bold text-sm uppercase tracking-wide",children:"Emergency Job"})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:E.order_number}),e.jsx("p",{className:"text-sm text-gray-600",children:E.customer_name})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold border ${R(E.status)}`,children:N(E.status)})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-900 rounded-full text-xs font-medium border border-gray-300",children:E.service_name}),e.jsx("span",{className:"px-3 py-1 bg-black text-white rounded-full text-xs font-medium",children:E.tier_name})]}),E.due_at&&e.jsxs("div",{className:"flex items-center gap-2 mb-4 pb-4 border-b border-gray-200",children:[e.jsx(kt,{className:`w-5 h-5 ${new Date(E.due_at)<new Date?"text-red-600":"text-gray-600"}`}),e.jsx("span",{className:`text-sm font-medium ${new Date(E.due_at)<new Date?"text-red-600":"text-gray-900"}`,children:w(E.due_at)})]}),e.jsx(ie,{to:`/staff/jobs/${E.id}`,className:"block w-full px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-black rounded-lg font-bold text-center transition-colors",children:"View Job Details"})]})]},E.id))})]})]})})},TN=async(t,s)=>(await $.get(`http://localhost:3000/api/orders/${t}`,{headers:{Authorization:`Bearer ${s}`}})).data,RN=async(t,s)=>(await $.get(`http://localhost:3000/api/users/${t}`,{headers:{Authorization:`Bearer ${s}`}})).data,ON=async(t,s)=>(await $.get("http://localhost:3000/api/uploads",{params:{order_id:t},headers:{Authorization:`Bearer ${s}`}})).data.uploads||[],AN=async(t,s)=>(await $.get(`http://localhost:3000/api/orders/${t}/proofs`,{headers:{Authorization:`Bearer ${s}`}})).data.proofs||[],LN=async(t,s)=>(await $.get(`http://localhost:3000/api/orders/${t}/deliverables-progress`,{headers:{Authorization:`Bearer ${s}`}})).data.progress||[],MN=async(t,s)=>{const n=((await $.get("http://localhost:3000/api/message-threads",{headers:{Authorization:`Bearer ${s}`}})).data.threads||[]).find(i=>i.order_id===t);if(!n)return null;const l=await $.get(`http://localhost:3000/api/message-threads/${n.id}/messages`,{headers:{Authorization:`Bearer ${s}`}});return{id:n.id,order_id:n.order_id,messages:l.data.messages||[]}},DN=()=>{var Z,se;const{order_id:t}=bl(),[s]=Ye(),r=et(),a=ae(B=>B.authentication_state.current_user),n=ae(B=>B.authentication_state.auth_token),[l,i]=j.useState({file:null,staff_note:"",is_uploading:!1}),[o,c]=j.useState({new_status:"",notes:"",is_updating:!1}),[d,h]=j.useState(""),[m,u]=j.useState(null);j.useEffect(()=>{if(m){const B=setTimeout(()=>u(null),3e3);return()=>clearTimeout(B)}},[m]),j.useEffect(()=>{const B=s.get("section");if(B){const ee=document.getElementById(B);ee&&ee.scrollIntoView({behavior:"smooth"})}},[s]);const{data:g,isLoading:b}=te({queryKey:["order",t],queryFn:()=>TN(t,n),enabled:!!t&&!!n,staleTime:6e4}),{data:f,isLoading:v}=te({queryKey:["customer",g==null?void 0:g.customer_id],queryFn:()=>RN(g.customer_id,n),enabled:!!(g!=null&&g.customer_id)&&!!n,staleTime:6e4}),{data:y=[],isLoading:p}=te({queryKey:["uploads",t],queryFn:()=>ON(t,n),enabled:!!t&&!!n,staleTime:6e4}),{data:x=[],isLoading:w}=te({queryKey:["proofs",t],queryFn:()=>AN(t,n),enabled:!!t&&!!n,staleTime:6e4}),{data:R=[],isLoading:N}=te({queryKey:["deliverables",t],queryFn:()=>LN(t,n),enabled:!!t&&!!n,staleTime:6e4}),{data:k,isLoading:L}=te({queryKey:["messages",t],queryFn:()=>MN(t,n),enabled:!!t&&!!n,staleTime:3e4}),E=me({mutationFn:async B=>(await $.post(`http://localhost:3000/api/orders/${t}/proofs`,B,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"multipart/form-data"}})).data,onSuccess:()=>{r.invalidateQueries({queryKey:["proofs",t]}),i({file:null,staff_note:"",is_uploading:!1}),u({type:"success",message:"Proof uploaded successfully!"})},onError:B=>{var ee,S;u({type:"error",message:((S=(ee=B.response)==null?void 0:ee.data)==null?void 0:S.message)||"Failed to upload proof"}),i(re=>({...re,is_uploading:!1}))}}),z=me({mutationFn:async B=>(await $.put(`http://localhost:3000/api/orders/${t}`,{status:B},{headers:{Authorization:`Bearer ${n}`}})).data,onSuccess:()=>{r.invalidateQueries({queryKey:["order",t]}),c({new_status:"",notes:"",is_updating:!1}),u({type:"success",message:"Order status updated successfully!"})},onError:B=>{var ee,S;u({type:"error",message:((S=(ee=B.response)==null?void 0:ee.data)==null?void 0:S.message)||"Failed to update status"}),c(re=>({...re,is_updating:!1}))}}),_=me({mutationFn:async({progressId:B,isComplete:ee})=>(await $.put(`http://localhost:3000/api/order-deliverables-progress/${B}`,{is_complete:ee,completed_by_staff_id:ee?a==null?void 0:a.id:null,completed_at:ee?new Date().toISOString():null},{headers:{Authorization:`Bearer ${n}`}})).data,onSuccess:()=>{r.invalidateQueries({queryKey:["deliverables",t]})},onError:B=>{var ee,S;u({type:"error",message:((S=(ee=B.response)==null?void 0:ee.data)==null?void 0:S.message)||"Failed to update deliverable"})}}),O=me({mutationFn:async B=>(await $.post(`http://localhost:3000/api/message-threads/${k==null?void 0:k.id}/messages`,{body:B},{headers:{Authorization:`Bearer ${n}`}})).data,onSuccess:()=>{r.invalidateQueries({queryKey:["messages",t]}),h(""),u({type:"success",message:"Message sent successfully!"})},onError:B=>{var ee,S;u({type:"error",message:((S=(ee=B.response)==null?void 0:ee.data)==null?void 0:S.message)||"Failed to send message"})}}),Y=B=>{if(B.preventDefault(),!l.file){u({type:"error",message:"Please select a file to upload"});return}i(S=>({...S,is_uploading:!0}));const ee=new FormData;ee.append("file",l.file),ee.append("staff_note",l.staff_note),E.mutate(ee)},q=B=>{if(B.preventDefault(),!o.new_status){u({type:"error",message:"Please select a status"});return}c(ee=>({...ee,is_updating:!0})),z.mutate(o.new_status)},A=(B,ee)=>{_.mutate({progressId:B,isComplete:!ee})},M=B=>{if(B.preventDefault(),!d.trim()){u({type:"error",message:"Please enter a message"});return}O.mutate(d)},P=B=>`${Number(B||0).toFixed(2)}`,C=B=>B<1024?`${B} B`:B<1024*1024?`${(B/1024).toFixed(1)} KB`:`${(B/(1024*1024)).toFixed(1)} MB`,V=B=>new Date(B).toLocaleDateString("en-IE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),T=B=>({QUOTE_REQUESTED:"bg-gray-100 text-gray-800",QUOTE_APPROVED:"bg-blue-100 text-blue-800",IN_PRODUCTION:"bg-yellow-100 text-black",PROOF_SENT:"bg-purple-100 text-purple-800",REVISION_REQUESTED:"bg-orange-100 text-orange-800",COMPLETED:"bg-green-100 text-green-800",CANCELLED:"bg-red-100 text-red-800"})[B]||"bg-gray-100 text-gray-800";return b?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-black mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading job details..."})]})})}):g?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[m&&e.jsx("div",{className:"fixed top-4 right-4 z-50 animate-slide-in",children:e.jsx("div",{className:`px-6 py-4 rounded-lg shadow-lg ${m.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:m.message})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Job #",g.order_number]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${T(g.status)}`,children:g.status.replace(/_/g," ")})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(kt,{className:"w-4 h-4"}),"Created: ",V(g.created_at)]}),g.due_at&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(kt,{className:"w-4 h-4 text-red-600"}),"Due: ",V(g.due_at)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Amount"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:P(g.total_amount)}),Number(g.balance_due||0)>0&&e.jsxs("p",{className:"text-sm text-red-600",children:["Balance Due: ",P(g.balance_due)]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",id:"customer",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Or,{className:"w-5 h-5"}),"Customer Information"]}),v?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-black mx-auto"})}):f?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Name"}),e.jsx("p",{className:"font-semibold text-gray-900",children:f.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(nn,{className:"w-4 h-4 text-gray-600"}),e.jsx("a",{href:`mailto:${f.email}`,className:"text-blue-600 hover:underline",children:f.email})]}),((Z=f.customer_profile)==null?void 0:Z.phone)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ho,{className:"w-4 h-4 text-gray-600"}),e.jsx("a",{href:`tel:${f.customer_profile.phone}`,className:"text-blue-600 hover:underline",children:f.customer_profile.phone})]}),((se=f.customer_profile)==null?void 0:se.company_name)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pa,{className:"w-4 h-4 text-gray-600"}),e.jsx("p",{className:"text-gray-900",children:f.customer_profile.company_name})]})]}):null]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",id:"deliverables",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(rt,{className:"w-5 h-5"}),"Tier Deliverables"]}),N?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-black mx-auto"})}):R.length>0?e.jsx("div",{className:"space-y-4",children:Object.entries(R.reduce((B,ee)=>{const S=ee.deliverable_group;return B[S]||(B[S]=[]),B[S].push(ee),B},{})).map(([B,ee])=>e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:B}),e.jsx("div",{className:"space-y-2",children:ee.map(S=>e.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:S.is_complete,onChange:()=>A(S.progress_id,S.is_complete),className:"mt-1 w-5 h-5 rounded border-gray-300 text-black focus:ring-yellow-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`font-medium ${S.is_complete?"text-gray-600 line-through":"text-gray-900"}`,children:S.deliverable_label}),S.completed_at&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Completed: ",V(S.completed_at)]})]})]},S.id))})]},B))}):e.jsx("p",{className:"text-gray-600 text-center py-8",children:"No deliverables found for this tier"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",id:"files",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5"}),"Project Files"]}),p?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-black mx-auto"})}):y.length>0?e.jsx("div",{className:"space-y-3",children:y.map(B=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-gray-200 hover:border-gray-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(Ae,{className:"w-5 h-5 text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:B.file_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[C(B.file_size),"  Uploaded"," ",V(B.created_at)]}),B.dpi_warning&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:" Low DPI warning"})]})]}),e.jsxs("a",{href:B.file_url,download:!0,className:"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors flex items-center gap-2",children:[e.jsx(Da,{className:"w-4 h-4"}),"Download"]})]},B.id))}):e.jsx("p",{className:"text-gray-600 text-center py-8",children:"No files uploaded yet"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",id:"proofs",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Pr,{className:"w-5 h-5"}),"Proofs Management"]}),e.jsxs("form",{onSubmit:Y,className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Upload New Proof"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-1",children:"Proof File"}),e.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:B=>i(ee=>{var S;return{...ee,file:((S=B.target.files)==null?void 0:S[0])||null}}),className:"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-white focus:outline-none focus:border-black"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-1",children:"Staff Note (Optional)"}),e.jsx("textarea",{value:l.staff_note,onChange:B=>i(ee=>({...ee,staff_note:B.target.value})),rows:2,placeholder:"Add notes about this proof...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-black"})]}),e.jsx("button",{type:"submit",disabled:!l.file||l.is_uploading,className:"w-full px-6 py-3 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:l.is_uploading?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-black"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ju,{className:"w-5 h-5"}),"Upload Proof"]})})]})]}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Proof History"}),w?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-black mx-auto"})}):x.length>0?e.jsx("div",{className:"space-y-3",children:x.sort((B,ee)=>ee.version_number-B.version_number).map(B=>e.jsxs("div",{className:"p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"px-3 py-1 bg-black text-white text-xs font-semibold rounded-full",children:["V",B.version_number]}),e.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${B.status==="APPROVED"?"bg-green-100 text-green-800":B.status==="NEEDS_REVISION"?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"}`,children:B.status.replace(/_/g," ")})]}),e.jsxs("a",{href:B.file_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm flex items-center gap-1",children:["View File",e.jsx(Da,{className:"w-4 h-4"})]})]}),B.staff_note&&e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[e.jsx("strong",{children:"Staff Note:"})," ",B.staff_note]}),B.customer_comment&&e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[e.jsx("strong",{children:"Customer Comment:"})," ",B.customer_comment]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Uploaded: ",V(B.created_at)]})]},B.id))}):e.jsx("p",{className:"text-gray-600 text-center py-8",children:"No proofs uploaded yet"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Update Status"}),e.jsxs("form",{onSubmit:q,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-1",children:"New Status"}),e.jsxs("select",{value:o.new_status,onChange:B=>c(ee=>({...ee,new_status:B.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-black",children:[e.jsx("option",{value:"",children:"Select status..."}),e.jsx("option",{value:"QUOTE_APPROVED",children:"Quote Approved"}),e.jsx("option",{value:"IN_PRODUCTION",children:"In Production"}),e.jsx("option",{value:"PROOF_SENT",children:"Proof Sent"}),e.jsx("option",{value:"REVISION_REQUESTED",children:"Revision Requested"}),e.jsx("option",{value:"COMPLETED",children:"Completed"}),e.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]}),e.jsx("button",{type:"submit",disabled:!o.new_status||o.is_updating,className:"w-full px-6 py-3 bg-black text-white font-semibold rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:o.is_updating?"Updating...":"Update Status"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",id:"messages",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(sa,{className:"w-5 h-5"}),"Messages"]}),L?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-black mx-auto"})}):k?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3 mb-4 max-h-96 overflow-y-auto",children:k.messages.length>0?k.messages.map(B=>e.jsxs("div",{className:`p-3 rounded-lg ${B.sender_id===(a==null?void 0:a.id)?"bg-black text-white ml-8":"bg-gray-100 text-gray-900 mr-8"}`,children:[e.jsx("p",{className:"text-sm",children:B.body}),e.jsx("p",{className:"text-xs opacity-70 mt-1",children:V(B.created_at)})]},B.id)):e.jsx("p",{className:"text-gray-600 text-center py-4",children:"No messages yet"})}),e.jsxs("form",{onSubmit:M,className:"flex gap-2",children:[e.jsx("input",{type:"text",value:d,onChange:B=>h(B.target.value),placeholder:"Type a message...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-black"}),e.jsx("button",{type:"submit",disabled:!d.trim()||O.isPending,className:"px-6 py-2 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:e.jsx(po,{className:"w-5 h-5"})})]})]}):e.jsx("p",{className:"text-gray-600 text-center py-8",children:"No message thread found"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Job Stats"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Revision Count"}),e.jsx("span",{className:"font-semibold text-gray-900",children:g.revision_count})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Deposit Paid"}),e.jsx("span",{className:"font-semibold text-gray-900",children:P(g.deposit_amount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal"}),e.jsx("span",{className:"font-semibold text-gray-900",children:P(g.subtotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Tax"}),e.jsx("span",{className:"font-semibold text-gray-900",children:P(g.tax_amount)})]}),e.jsxs("div",{className:"flex justify-between pt-3 border-t border-gray-200",children:[e.jsx("span",{className:"text-gray-900 font-semibold",children:"Total"}),e.jsx("span",{className:"font-bold text-gray-900",children:P(g.total_amount)})]})]})]})]})]})]})})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(we,{className:"w-12 h-12 text-red-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-900 font-semibold text-lg",children:"Job not found"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"The job you're looking for doesn't exist."})]})})})},Nu=t=>{const s=new Date(t),r=s.getDay(),a=s.getDate()-r+(r===0?-6:1);return new Date(s.setDate(a))},Jp=t=>{const s=Nu(t);return new Date(s.getTime()+6*24*60*60*1e3)},Yp=t=>new Date(t.getFullYear(),t.getMonth(),1),Xp=t=>new Date(t.getFullYear(),t.getMonth()+1,0),ga=(t,s)=>{const r=new Date(t);return r.setDate(r.getDate()+s),r},ut=t=>t.toISOString().split("T")[0],kn=t=>new Date(t).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),$N=(t,s)=>{switch(s){case"month":return{start:Yp(t),end:Xp(t)};case"day":return{start:t,end:t};case"week":default:return{start:Nu(t),end:Jp(t)}}},qN=()=>{var M;const[t,s]=Ye();Je();const r=ae(P=>P.authentication_state.auth_token),a=ae(P=>P.authentication_state.current_user);(M=a==null?void 0:a.staff_profile)!=null&&M.permissions;const n=t.get("view")||"week",l=t.get("date")||ut(new Date),i=t.get("service_type")||null,[o,c]=j.useState(n),[d,h]=j.useState(new Date(l)),[m,u]=j.useState(i),[g,b]=j.useState(null),f=j.useMemo(()=>$N(d,o),[d,o]),{data:v,isLoading:y,error:p}=te({queryKey:["calendar_bookings",ut(f.start),ut(f.end),m],queryFn:async()=>(await $.get("http://localhost:3000/api/bookings",{params:{start_date:ut(f.start),end_date:ut(f.end),status:"CONFIRMED",...m&&{service_id:m}},headers:{Authorization:`Bearer ${r}`}})).data.bookings.map(C=>({id:C.id,start_at:C.start_at,end_at:C.end_at,customer_id:C.customer_id,customer_name:C.customer_name||"Unknown Customer",order_id:C.order_id,service_name:C.service_name||"Service",status:C.status,is_emergency:C.is_emergency,urgent_fee_pct:C.urgent_fee_pct,location_id:C.location_id})),enabled:!!r,staleTime:6e4,refetchOnWindowFocus:!1}),{data:x}=te({queryKey:["calendar_capacity"],queryFn:async()=>{const P=await $.get("http://localhost:3000/api/calendar-capacity",{headers:{Authorization:`Bearer ${r}`}}),C={},V=P.data.capacity||[];let T=new Date(f.start);for(;T<=f.end;){const Z=T.getDay(),se=ut(T),B=V.find(ee=>ee.day_of_week===Z&&ee.is_active);B?C[se]={date:se,max_standard_slots:Number(B.max_standard_slots||0),max_emergency_slots:Number(B.max_emergency_slots||0),standard_slots_used:0,emergency_slots_used:0}:C[se]={date:se,max_standard_slots:0,max_emergency_slots:0,standard_slots_used:0,emergency_slots_used:0},T=ga(T,1)}return v&&v.forEach(Z=>{const se=ut(new Date(Z.start_at));C[se]&&(Z.is_emergency?C[se].emergency_slots_used+=1:C[se].standard_slots_used+=1)}),C},enabled:!!r&&!!v,staleTime:3e5,refetchOnWindowFocus:!1}),{data:w}=te({queryKey:["services_list"],queryFn:async()=>(await $.get("http://localhost:3000/api/services",{params:{is_active:!0}})).data.services,staleTime:3e5,refetchOnWindowFocus:!1}),R=P=>{c(P);const C=new URLSearchParams(t);C.set("view",P),s(C)},N=P=>{let C;switch(o){case"month":C=new Date(d),C.setMonth(d.getMonth()+(P==="next"?1:-1));break;case"day":C=ga(d,P==="next"?1:-1);break;case"week":default:C=ga(d,P==="next"?7:-7);break}h(C);const V=new URLSearchParams(t);V.set("date",ut(C)),s(V)},k=P=>{const C=new Date(P);h(C);const V=new URLSearchParams(t);V.set("date",ut(C)),s(V)},L=P=>{u(P);const C=new URLSearchParams(t);P?C.set("service_type",P):C.delete("service_type"),s(C)},E=P=>{b(P)},z=()=>{b(null)},_=P=>{if(P.is_emergency)return"bg-red-100 border-red-500 text-red-900";switch(P.status){case"CONFIRMED":return"bg-green-100 border-green-500 text-green-900";case"PENDING":return"bg-yellow-100 border-yellow-500 text-yellow-900";default:return"bg-gray-100 border-gray-500 text-gray-900"}},O=()=>{const P=[];let C=new Date(f.start);for(let V=0;V<7;V++)P.push(new Date(C)),C=ga(C,1);return e.jsx("div",{className:"grid grid-cols-7 gap-2",children:P.map((V,T)=>{const Z=ut(V),se=(v||[]).filter(ee=>ut(new Date(ee.start_at))===Z),B=x==null?void 0:x[Z];return e.jsxs("div",{className:"border border-gray-200 rounded-lg bg-white min-h-[300px]",children:[e.jsxs("div",{className:"p-3 border-b border-gray-200 bg-gray-50",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:V.toLocaleDateString("en-US",{weekday:"short"})}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:V.getDate()}),B&&e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[B.standard_slots_used+B.emergency_slots_used,"/",B.max_standard_slots+B.max_emergency_slots," slots"]})]}),e.jsx("div",{className:"p-2 space-y-2",children:se.length===0?e.jsx("div",{className:"text-xs text-gray-500 text-center py-4",children:"No bookings"}):se.map(ee=>e.jsxs("button",{onClick:()=>E(ee),className:`w-full text-left p-2 rounded border-l-4 text-xs transition-all hover:shadow-md ${_(ee)}`,children:[e.jsx("div",{className:"font-semibold truncate",children:kn(ee.start_at)}),e.jsx("div",{className:"truncate",children:ee.customer_name}),e.jsx("div",{className:"truncate text-[10px] opacity-75",children:ee.service_name}),ee.is_emergency&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(os,{className:"h-3 w-3"}),e.jsx("span",{className:"text-[10px] font-bold",children:"EMERGENCY"})]})]},ee.id))})]},T)})})},Y=()=>{const P=Yp(d),C=Xp(d),V=Nu(P),T=Jp(C),Z=[];let se=new Date(V);for(;se<=T;){const B=[];for(let ee=0;ee<7;ee++)B.push(ga(se,ee));Z.push(B),se=ga(se,7)}return e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(B=>e.jsx("div",{className:"text-center text-sm font-semibold text-gray-700",children:B},B))}),Z.map((B,ee)=>e.jsx("div",{className:"grid grid-cols-7 gap-2",children:B.map((S,re)=>{const le=ut(S),Te=S.getMonth()===d.getMonth(),ke=(v||[]).filter(We=>ut(new Date(We.start_at))===le);return e.jsxs("button",{onClick:()=>k(le),className:`border border-gray-200 rounded-lg p-3 min-h-[80px] text-left transition-all hover:border-black ${Te?"bg-white":"bg-gray-50 opacity-50"}`,children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:S.getDate()}),ke.length>0&&e.jsx("div",{className:"mt-1",children:e.jsxs("div",{className:"text-xs bg-black text-white rounded px-1 py-0.5 inline-block",children:[ke.length," booking",ke.length!==1?"s":""]})})]},re)})},ee))]})},q=()=>{const P=ut(d),C=(v||[]).filter(T=>ut(new Date(T.start_at))===P),V=x==null?void 0:x[P];return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:d.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})}),V&&e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Capacity"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[V.standard_slots_used+V.emergency_slots_used,"/",V.max_standard_slots+V.max_emergency_slots]}),e.jsx("div",{className:"text-xs text-gray-500",children:"slots used"})]})]})}),e.jsx("div",{className:"space-y-3",children:C.length===0?e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-8 text-center",children:[e.jsx(gt,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No bookings for this day"})]}):C.map(T=>e.jsx("button",{onClick:()=>E(T),className:`w-full text-left p-6 rounded-lg border-l-4 transition-all hover:shadow-lg ${_(T)}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(kt,{className:"h-5 w-5"}),e.jsxs("span",{className:"text-lg font-bold",children:[kn(T.start_at)," - ",kn(T.end_at)]})]}),e.jsx("div",{className:"text-xl font-bold mb-1",children:T.customer_name}),e.jsx("div",{className:"text-sm opacity-75",children:T.service_name}),T.location_id&&e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs",children:[e.jsx($a,{className:"h-3 w-3"}),e.jsx("span",{children:"Location booking"})]})]}),T.is_emergency&&e.jsxs("div",{className:"bg-red-600 text-white px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[e.jsx(os,{className:"h-3 w-3"}),"EMERGENCY"]})]})},T.id))})]})},A=y;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-6 lg:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Staff Calendar"}),e.jsx("p",{className:"text-gray-600",children:"View and manage bookings and capacity"})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>N("prev"),className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors","aria-label":"Previous",children:e.jsx(mo,{className:"h-5 w-5"})}),e.jsx("input",{type:"date",value:ut(d),onChange:P=>k(P.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"}),e.jsx("button",{onClick:()=>N("next"),className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors","aria-label":"Next",children:e.jsx(an,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>k(ut(new Date)),className:"px-4 py-2 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Today"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:m||"",onChange:P=>L(P.target.value||null),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Services"}),(w||[]).map(P=>e.jsx("option",{value:P.id,children:P.name},P.id))]}),e.jsx("div",{className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1",children:["Day","Week","Month"].map(P=>e.jsx("button",{onClick:()=>R(P.toLowerCase()),className:`px-4 py-2 rounded-md font-medium transition-colors ${o===P.toLowerCase()?"bg-black text-white":"text-gray-700 hover:bg-gray-200"}`,children:P},P))})]})]})}),A?e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-black mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading calendar..."})]}):p?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:e.jsx("p",{className:"text-red-700",children:"Failed to load calendar data. Please try again."})}):e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[o==="day"&&q(),o==="week"&&O(),o==="month"&&Y()]}),e.jsx("div",{className:"mt-6 bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Legend:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-100 border-2 border-green-500 rounded"}),e.jsx("span",{className:"text-gray-700",children:"Confirmed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-100 border-2 border-yellow-500 rounded"}),e.jsx("span",{className:"text-gray-700",children:"Pending"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-100 border-2 border-red-500 rounded"}),e.jsx("span",{className:"text-gray-700",children:"Emergency"})]})]})})]})}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:z,children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full p-6",onClick:P=>P.stopPropagation(),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Booking Details"}),e.jsx("button",{onClick:z,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Customer"}),e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:g.customer_name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Service"}),e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:g.service_name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Time"}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-900",children:[e.jsx(kt,{className:"h-5 w-5"}),e.jsxs("span",{children:[kn(g.start_at)," - ",kn(g.end_at)]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${g.is_emergency?"bg-red-600 text-white":g.status==="CONFIRMED"?"bg-green-600 text-white":"bg-yellow-600 text-white"}`,children:g.is_emergency?"EMERGENCY":g.status}),g.is_emergency&&g.urgent_fee_pct&&e.jsxs("span",{className:"text-sm text-gray-600",children:["(+",Number(g.urgent_fee_pct||0).toFixed(0),"% fee)"]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[e.jsx(ie,{to:`/staff/jobs/${g.order_id}`,className:"flex-1 bg-black text-white px-4 py-3 rounded-lg font-semibold text-center hover:bg-gray-800 transition-colors",children:"View Job"}),e.jsx("button",{onClick:z,className:"flex-1 bg-gray-100 text-gray-900 px-4 py-3 rounded-lg font-semibold hover:bg-gray-200 transition-colors",children:"Close"})]})]})]})})]})},IN=async t=>{var r;return((r=(await $.get("http://localhost:3000/api/message-threads",{headers:{Authorization:`Bearer ${t}`}})).data.threads)==null?void 0:r.map(a=>{var n,l,i;return{id:a.id,quote_id:a.quote_id||null,order_id:a.order_id||null,customer_name:a.customer_name||"Unknown Customer",order_number:a.order_number||"N/A",last_message_preview:((l=(n=a.last_message)==null?void 0:n.body)==null?void 0:l.substring(0,100))||"",last_message_timestamp:((i=a.last_message)==null?void 0:i.created_at)||a.created_at,unread_count:a.unread_count||0,created_at:a.created_at}}))||[]},zN=async(t,s)=>{var a;return((a=(await $.get(`http://localhost:3000/api/message-threads/${s}/messages`,{headers:{Authorization:`Bearer ${t}`},params:{limit:100,sort_order:"asc"}})).data.messages)==null?void 0:a.map(n=>({id:n.id,sender_id:n.sender_id,sender_name:n.sender_name||"Unknown",sender_role:n.sender_role||"USER",body:n.body,is_read:n.is_read,created_at:n.created_at})))||[]},BN=async(t,s,r)=>(await $.post(`http://localhost:3000/api/message-threads/${s}/messages`,r,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,UN=async(t,s)=>{await Promise.all(s.map(r=>$.put(`http://localhost:3000/api/messages/${r}`,{is_read:!0},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})))},QN=()=>{const t=Je(),[s]=Ye(),r=et(),a=ae(A=>A.authentication_state.current_user),n=ae(A=>A.authentication_state.auth_token),[l,i]=j.useState(s.get("thread_id")),[o,c]=j.useState(""),[d,h]=j.useState(!1),[m,u]=j.useState(null),[g,b]=j.useState(!1),f=j.useRef(null),{data:v=[],isLoading:y,error:p}=te({queryKey:["message-threads"],queryFn:()=>IN(n||""),enabled:!!n,staleTime:5*60*1e3,refetchInterval:3e4}),{data:x=[],isLoading:w,error:R}=te({queryKey:["messages",l],queryFn:()=>zN(n||"",l||""),enabled:!!n&&!!l,staleTime:60*1e3}),N=me({mutationFn:A=>BN(n||"",l||"",A),onSuccess:()=>{r.invalidateQueries({queryKey:["messages",l]}),r.invalidateQueries({queryKey:["message-threads"]}),c(""),u({type:"success",message:"Message sent successfully"}),setTimeout(()=>u(null),3e3)},onError:A=>{var M,P;u({type:"error",message:((P=(M=A.response)==null?void 0:M.data)==null?void 0:P.message)||"Failed to send message"}),setTimeout(()=>u(null),5e3)}}),k=d?v.filter(A=>A.unread_count>0):v,L=v.find(A=>A.id===l);j.useEffect(()=>{f.current&&f.current.scrollIntoView({behavior:"smooth"})},[x]),j.useEffect(()=>{if(l&&x.length>0){const A=x.filter(M=>!M.is_read&&M.sender_id!==(a==null?void 0:a.id)).map(M=>M.id);A.length>0&&n&&UN(n,A).then(()=>{r.invalidateQueries({queryKey:["message-threads"]})}).catch(M=>{console.error("Failed to mark messages as read:",M)})}},[l,x,n,a==null?void 0:a.id,r]);const E=A=>{i(A),b(!0)},z=A=>{A.preventDefault(),o.trim()&&l&&N.mutate({body:o.trim()})},_=()=>{L!=null&&L.order_id&&t(`/staff/jobs/${L.order_id}`)},O=()=>{b(!1),i(null)},Y=A=>{const M=new Date(A),C=new Date().getTime()-M.getTime(),V=C/(1e3*60*60);return V<1?`${Math.floor(C/6e4)}m ago`:V<24?`${Math.floor(V)}h ago`:M.toLocaleDateString("en-US",{month:"short",day:"numeric"})},q=A=>new Date(A).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return e.jsxs(e.Fragment,{children:[m&&e.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg transition-all duration-300 ${m.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:m.message}),e.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(sa,{className:"w-6 h-6 text-black"}),e.jsx("h1",{className:"text-2xl font-bold text-black",children:"Messages"})]}),e.jsxs("button",{onClick:()=>h(!d),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200 ${d?"bg-yellow-400 text-black":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(pn,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:d?"Show All":"Unread Only"})]})]})}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:`w-full lg:w-96 bg-white border-r border-gray-200 flex flex-col ${g?"hidden lg:flex":"flex"}`,children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-semibold text-black",children:["Conversations (",k.length,")"]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:y?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-yellow-400"})}):p?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 px-6",children:[e.jsx(we,{className:"w-12 h-12 text-red-600 mb-4"}),e.jsx("p",{className:"text-red-600 text-center",children:"Failed to load conversations"})]}):k.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 px-6",children:[e.jsx(sa,{className:"w-12 h-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 text-center",children:d?"No unread conversations":"No conversations yet"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:k.map(A=>e.jsxs("button",{onClick:()=>E(A.id),className:`w-full text-left px-6 py-4 hover:bg-gray-50 transition-colors ${l===A.id?"bg-gray-100":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-black truncate",children:A.customer_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Order: ",A.order_number]})]}),A.unread_count>0&&e.jsx("span",{className:"ml-2 flex-shrink-0 bg-yellow-400 text-black text-xs font-bold px-2 py-1 rounded-full",children:A.unread_count})]}),e.jsx("p",{className:"text-sm text-gray-600 truncate mb-1",children:A.last_message_preview||"No messages yet"}),e.jsx("p",{className:"text-xs text-gray-500",children:Y(A.last_message_timestamp)})]},A.id))})})]}),e.jsx("div",{className:`flex-1 flex flex-col bg-white ${g?"flex":"hidden lg:flex"}`,children:l?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:O,className:"lg:hidden p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(mo,{className:"w-5 h-5 text-gray-700"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-black",children:(L==null?void 0:L.customer_name)||"Unknown Customer"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Order: ",(L==null?void 0:L.order_number)||"N/A"]})]})]}),(L==null?void 0:L.order_id)&&e.jsx("button",{onClick:_,className:"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors font-medium text-sm",children:"View Job"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:w?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-yellow-400"})}):R?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[e.jsx(we,{className:"w-12 h-12 text-red-600 mb-4"}),e.jsx("p",{className:"text-red-600 text-center",children:"Failed to load messages"})]}):x.length===0?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-gray-600",children:"No messages in this conversation"})}):e.jsxs("div",{className:"space-y-4",children:[x.map(A=>{const M=A.sender_id===(a==null?void 0:a.id);return e.jsx("div",{className:`flex ${M?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] rounded-lg px-4 py-3 ${M?"bg-black text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[e.jsx("p",{className:`text-sm font-semibold ${M?"text-yellow-400":"text-black"}`,children:A.sender_name}),e.jsx("p",{className:`text-xs ${M?"text-gray-400":"text-gray-600"}`,children:q(A.created_at)})]}),e.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:A.body})]})},A.id)}),e.jsx("div",{ref:f})]})}),e.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:e.jsxs("form",{onSubmit:z,className:"flex gap-3",children:[e.jsx("input",{type:"text",value:o,onChange:A=>c(A.target.value),placeholder:"Type your message...",disabled:N.isPending,className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-black focus:ring-4 focus:ring-gray-100 transition-all disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("button",{type:"submit",disabled:!o.trim()||N.isPending,className:"px-6 py-3 bg-yellow-400 text-black rounded-lg font-semibold hover:bg-yellow-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:N.isPending?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-black"}):e.jsxs(e.Fragment,{children:[e.jsx(po,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Send"})]})})]})})]}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(sa,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Select a conversation to view messages"})]})})})]})]})]})},VN=async t=>(await $.get("http://localhost:3000/api/users/me",{headers:{Authorization:`Bearer ${t}`}})).data,KN=async(t,s)=>(await $.put("http://localhost:3000/api/users/me",t,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,WN=()=>{var w,R,N,k;const t=ae(L=>L.authentication_state.auth_token);ae(L=>L.authentication_state.current_user);const s=ae(L=>L.update_user_profile),[r,a]=j.useState({name:"",email:"",phone:""}),[n,l]=j.useState({job_assignments:!0,customer_messages:!0,order_updates:!0,proof_requests:!0}),[i,o]=j.useState(!1),[c,d]=j.useState(null),h=et(),{data:m,isLoading:u,error:g,refetch:b}=te({queryKey:["staffProfile",t],queryFn:()=>VN(t),enabled:!!t,staleTime:6e4,retry:1,refetchOnWindowFocus:!1}),f=me({mutationFn:L=>KN(L,t),onSuccess:L=>{s(L.user,void 0,L.staff_profile),h.invalidateQueries({queryKey:["staffProfile"]}),d("Profile updated successfully!"),setTimeout(()=>d(null),3e3)},onError:L=>{console.error("Profile update error:",L)}});j.useEffect(()=>{var L,E;m!=null&&m.user&&(a({name:m.user.name||"",email:m.user.email||"",phone:((L=m.staff_profile)==null?void 0:L.phone)||""}),(E=m.staff_profile)!=null&&E.permissions&&l({job_assignments:m.staff_profile.permissions.job_assignments??!0,customer_messages:m.staff_profile.permissions.customer_messages??!0,order_updates:m.staff_profile.permissions.order_updates??!0,proof_requests:m.staff_profile.permissions.proof_requests??!0}))},[m]);const v=L=>{const{name:E,value:z}=L.target;a(_=>({..._,[E]:z}))},y=L=>{l(E=>({...E,[L]:!E[L]}))},p=L=>{L.preventDefault();const E={name:r.name,email:r.email,...r.phone&&{phone:r.phone}};f.mutate(E)},x=()=>{d("Notification preferences saved locally. Backend integration pending."),setTimeout(()=>d(null),3e3)};return t?u?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-6"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-4/6"})]})]})})})})}):g?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-red-900 mb-2",children:"Error Loading Profile"}),e.jsx("p",{className:"text-red-700 text-sm mb-4",children:"Failed to load your profile data. Please try again."}),e.jsx("button",{onClick:()=>b(),className:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors",children:"Retry"})]})})})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Staff Profile"}),e.jsx("p",{className:"mt-2 text-base text-gray-600",children:"Manage your account information and notification preferences"})]}),c&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsx("p",{className:"text-green-700 font-medium text-sm",children:c})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 px-8 py-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Profile Information"}),e.jsx("p",{className:"text-gray-300 text-sm mt-1",children:"Update your personal details"})]}),e.jsxs("form",{onSubmit:p,className:"p-8 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-bold text-gray-900 mb-2",children:"Full Name *"}),e.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:v,required:!0,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all text-gray-900",placeholder:"Enter your full name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-bold text-gray-900 mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:v,required:!0,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all text-gray-900",placeholder:"your.email@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-bold text-gray-900 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:r.phone,onChange:v,maxLength:50,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all text-gray-900",placeholder:"+353 87 123 4567"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Department"}),e.jsxs("div",{className:"inline-flex items-center px-4 py-2 rounded-lg bg-gray-100 border border-gray-300",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:((w=m==null?void 0:m.staff_profile)==null?void 0:w.department)||"Not Assigned"}),e.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(Admin controlled)"})]})]}),f.isError&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-700 text-sm",children:"Failed to update profile. Please try again."})}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:f.isPending,className:"px-6 py-3 bg-yellow-400 text-gray-900 rounded-lg font-bold hover:bg-yellow-500 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:f.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Profile"})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 px-8 py-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Password & Security"}),e.jsx("p",{className:"text-gray-300 text-sm mt-1",children:"Manage your password settings"})]}),e.jsxs("div",{className:"p-8",children:[e.jsxs("button",{onClick:()=>o(!i),className:"flex items-center justify-between w-full px-4 py-3 rounded-lg bg-gray-100 hover:bg-gray-200 transition-colors border border-gray-300",children:[e.jsx("span",{className:"font-bold text-gray-900",children:"Change Password"}),e.jsx("svg",{className:`w-5 h-5 text-gray-600 transition-transform ${i?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i&&e.jsx("div",{className:"mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-6 h-6 text-yellow-600 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-yellow-900 mb-1",children:"Backend Integration Pending"}),e.jsxs("p",{className:"text-yellow-800 text-sm",children:["The password change functionality requires a backend endpoint (",e.jsx("code",{className:"bg-yellow-100 px-1 rounded",children:"POST /auth/change-password"}),") which is not yet implemented. Please contact your system administrator to change your password."]})]})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 px-8 py-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Notification Preferences"}),e.jsx("p",{className:"text-gray-300 text-sm mt-1",children:"Choose which notifications you want to receive"})]}),e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"job_assignments",checked:n.job_assignments,onChange:()=>y("job_assignments"),className:"mt-1 h-5 w-5 rounded border-gray-300 text-yellow-400 focus:ring-yellow-400 focus:ring-offset-0"}),e.jsxs("label",{htmlFor:"job_assignments",className:"ml-3",children:[e.jsx("span",{className:"block font-bold text-gray-900",children:"Job Assignments"}),e.jsx("span",{className:"block text-sm text-gray-600 mt-1",children:"Receive notifications when new jobs are assigned to you"})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"customer_messages",checked:n.customer_messages,onChange:()=>y("customer_messages"),className:"mt-1 h-5 w-5 rounded border-gray-300 text-yellow-400 focus:ring-yellow-400 focus:ring-offset-0"}),e.jsxs("label",{htmlFor:"customer_messages",className:"ml-3",children:[e.jsx("span",{className:"block font-bold text-gray-900",children:"Customer Messages"}),e.jsx("span",{className:"block text-sm text-gray-600 mt-1",children:"Get alerts when customers send messages related to their orders"})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"order_updates",checked:n.order_updates,onChange:()=>y("order_updates"),className:"mt-1 h-5 w-5 rounded border-gray-300 text-yellow-400 focus:ring-yellow-400 focus:ring-offset-0"}),e.jsxs("label",{htmlFor:"order_updates",className:"ml-3",children:[e.jsx("span",{className:"block font-bold text-gray-900",children:"Order Updates"}),e.jsx("span",{className:"block text-sm text-gray-600 mt-1",children:"Receive notifications about status changes on assigned orders"})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"proof_requests",checked:n.proof_requests,onChange:()=>y("proof_requests"),className:"mt-1 h-5 w-5 rounded border-gray-300 text-yellow-400 focus:ring-yellow-400 focus:ring-offset-0"}),e.jsxs("label",{htmlFor:"proof_requests",className:"ml-3",children:[e.jsx("span",{className:"block font-bold text-gray-900",children:"Proof Requests"}),e.jsx("span",{className:"block text-sm text-gray-600 mt-1",children:"Get alerts when customers request changes or approve proofs"})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 mr-2 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("p",{className:"text-blue-800 text-sm",children:[e.jsx("strong",{className:"font-bold",children:"Note:"})," Notification preferences are currently saved locally. Backend integration for persisting these settings to ",e.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"staff_profile.permissions"})," is pending."]})]})}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{onClick:x,className:"px-6 py-3 bg-yellow-400 text-gray-900 rounded-lg font-bold hover:bg-yellow-500 transition-all duration-200 shadow-lg hover:shadow-xl",children:"Save Preferences"})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Account Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Account Status"}),e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-green-100 text-green-800",children:((R=m==null?void 0:m.user)==null?void 0:R.status)||"ACTIVE"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Role"}),e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-gray-100 text-gray-800",children:((N=m==null?void 0:m.user)==null?void 0:N.role)||"STAFF"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Account Created"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:(k=m==null?void 0:m.user)!=null&&k.created_at?new Date(m.user.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]})]})]})]})})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md w-full",children:[e.jsx("h2",{className:"text-lg font-bold text-red-900 mb-2",children:"Authentication Required"}),e.jsx("p",{className:"text-red-700 text-sm",children:"You must be logged in to access your profile. Please log in and try again."})]})})})},HN=async t=>{const r=(await $.get("http://localhost:3000/api/quotes",{headers:{Authorization:`Bearer ${t}`},params:{limit:100,sort_by:"created_at",sort_order:"desc"}})).data.quotes||[],a={requested:r.filter(l=>l.status==="REQUESTED").length,pending:r.filter(l=>l.status==="PENDING").length,approved:r.filter(l=>l.status==="APPROVED").length,rejected:r.filter(l=>l.status==="REJECTED").length,expired:r.filter(l=>l.status==="EXPIRED").length},n=r.filter(l=>l.status==="REQUESTED"||l.status==="PENDING").slice(0,5).map(l=>({id:l.id,customer_id:l.customer_id,service_id:l.service_id,tier_id:l.tier_id,status:l.status,estimate_subtotal:l.estimate_subtotal?Number(l.estimate_subtotal):null,created_at:l.created_at,customer_name:l.customer_name||"Unknown",service_name:l.service_name||"Unknown Service"}));return{quotes_metrics:a,pending_quotes_list:n}},GN=async t=>{const r=(await $.get("http://localhost:3000/api/orders",{headers:{Authorization:`Bearer ${t}`},params:{limit:500,sort_by:"created_at",sort_order:"desc"}})).data.orders||[],a={};r.forEach(h=>{const m=h.status;a[m]=(a[m]||0)+1});const n={quote_requested:a.QUOTE_REQUESTED||0,quote_approved:a.QUOTE_APPROVED||0,in_production:a.IN_PRODUCTION||0,completed:a.COMPLETED||0,cancelled:a.CANCELLED||0},l=r.reduce((h,m)=>{const u=Number(m.total_amount||0),g=Number(m.balance_due||0);return h+(u-g)},0),i=r.reduce((h,m)=>h+Number(m.balance_due||0),0),o=new Date,c=new Date(o.getFullYear(),o.getMonth(),1),d=r.filter(h=>new Date(h.created_at)>=c).reduce((h,m)=>{const u=Number(m.total_amount||0),g=Number(m.balance_due||0);return h+(u-g)},0);return{orders_metrics:n,revenue_metrics:{total_revenue_paid:l,outstanding_amount:i,current_month_revenue:d}}},JN=async t=>{var n;const s=new Date,r=new Date(s.getTime()+7*24*60*60*1e3);return((n=(await $.get("http://localhost:3000/api/bookings",{headers:{Authorization:`Bearer ${t}`},params:{start_date:s.toISOString().split("T")[0],end_date:r.toISOString().split("T")[0],status:"CONFIRMED",limit:100}})).data.bookings)==null?void 0:n.length)||0},YN=async t=>((await $.get("http://localhost:3000/api/audit-logs",{headers:{Authorization:`Bearer ${t}`},params:{limit:10,sort_by:"created_at",sort_order:"desc"}})).data.logs||[]).map(a=>({id:a.id,action:a.action,user_id:a.user_id,created_at:a.created_at,order_id:a.order_id})),XN=async t=>((await $.get("http://localhost:3000/api/payments",{headers:{Authorization:`Bearer ${t}`},params:{limit:10,sort_by:"created_at",sort_order:"desc"}})).data.payments||[]).map(a=>({id:a.id,order_id:a.order_id,amount:Number(a.amount||0),method:a.method,status:a.status,created_at:a.created_at,order_number:a.order_number||a.order_id})),ZN=async t=>{var r;return((r=(await $.get("http://localhost:3000/api/inventory-items",{headers:{Authorization:`Bearer ${t}`},params:{low_stock:!0,limit:100}})).data.items)==null?void 0:r.length)||0},e2=()=>{const t=ae(M=>M.authentication_state.auth_token),s=ae(M=>M.authentication_state.current_user),r=ae(M=>M.feature_flags),{data:a,isLoading:n,error:l,refetch:i}=te({queryKey:["admin-dashboard-quotes"],queryFn:()=>HN(t),staleTime:2*60*1e3,refetchInterval:2*60*1e3,retry:1}),{data:o,isLoading:c,error:d,refetch:h}=te({queryKey:["admin-dashboard-orders"],queryFn:()=>GN(t),staleTime:2*60*1e3,refetchInterval:2*60*1e3,retry:1}),{data:m,isLoading:u,error:g,refetch:b}=te({queryKey:["admin-dashboard-bookings"],queryFn:()=>JN(t),staleTime:2*60*1e3,refetchInterval:2*60*1e3,retry:1}),{data:f,isLoading:v,error:y,refetch:p}=te({queryKey:["admin-dashboard-activity"],queryFn:()=>YN(t),staleTime:2*60*1e3,refetchInterval:2*60*1e3,retry:1}),{data:x,isLoading:w,error:R,refetch:N}=te({queryKey:["admin-dashboard-payments"],queryFn:()=>XN(t),staleTime:2*60*1e3,refetchInterval:2*60*1e3,retry:1}),{data:k,isLoading:L,error:E,refetch:z}=te({queryKey:["admin-dashboard-inventory"],queryFn:()=>ZN(t),staleTime:2*60*1e3,refetchInterval:2*60*1e3,retry:1,enabled:r.inventory_management===!0}),_=()=>{i(),h(),b(),p(),N(),r.inventory_management&&z()},O=M=>new Intl.NumberFormat("en-IE",{style:"currency",currency:"EUR"}).format(M),Y=M=>{const P=new Date(M);return new Intl.DateTimeFormat("en-IE",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(P)},q=M=>{const P=M.toLowerCase();return P.includes("complete")||P.includes("approved")?"text-green-600 bg-green-50":P.includes("pending")||P.includes("requested")?"text-yellow-600 bg-yellow-50":P.includes("rejected")||P.includes("cancelled")?"text-red-600 bg-red-50":P.includes("production")?"text-blue-600 bg-blue-50":"text-gray-600 bg-gray-50"},A=n||c||u;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Welcome back, ",(s==null?void 0:s.name)||"Admin"]})]}),e.jsxs("button",{onClick:_,disabled:A,className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(uw,{className:`h-4 w-4 ${A?"animate-spin":""}`}),"Refresh"]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Ae,{className:"h-6 w-6 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Quotes"})]})}),n?e.jsx("div",{className:"flex items-center justify-center h-24",children:e.jsx(tt,{className:"h-6 w-6 text-gray-400 animate-spin"})}):l?e.jsx("div",{className:"text-sm text-red-600 p-4 bg-red-50 rounded-lg",children:"Failed to load quotes data"}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Requested"}),e.jsx("span",{className:"text-lg font-bold text-yellow-600",children:(a==null?void 0:a.quotes_metrics.requested)||0})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Pending"}),e.jsx("span",{className:"text-lg font-bold text-orange-600",children:(a==null?void 0:a.quotes_metrics.pending)||0})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Approved"}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:(a==null?void 0:a.quotes_metrics.approved)||0})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-gray-100 pt-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Total"}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:((a==null?void 0:a.quotes_metrics.requested)||0)+((a==null?void 0:a.quotes_metrics.pending)||0)+((a==null?void 0:a.quotes_metrics.approved)||0)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(Hp,{className:"h-6 w-6 text-purple-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Orders"})]})}),c?e.jsx("div",{className:"flex items-center justify-center h-24",children:e.jsx(tt,{className:"h-6 w-6 text-gray-400 animate-spin"})}):d?e.jsx("div",{className:"text-sm text-red-600 p-4 bg-red-50 rounded-lg",children:"Failed to load orders data"}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"In Production"}),e.jsx("span",{className:"text-lg font-bold text-blue-600",children:(o==null?void 0:o.orders_metrics.in_production)||0})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Quote Approved"}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:(o==null?void 0:o.orders_metrics.quote_approved)||0})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Completed"}),e.jsx("span",{className:"text-lg font-bold text-gray-600",children:(o==null?void 0:o.orders_metrics.completed)||0})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-gray-100 pt-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Active"}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:((o==null?void 0:o.orders_metrics.in_production)||0)+((o==null?void 0:o.orders_metrics.quote_approved)||0)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Gs,{className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Revenue"})]})}),c?e.jsx("div",{className:"flex items-center justify-center h-24",children:e.jsx(tt,{className:"h-6 w-6 text-gray-400 animate-spin"})}):d?e.jsx("div",{className:"text-sm text-red-600 p-4 bg-red-50 rounded-lg",children:"Failed to load revenue data"}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Paid"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 mt-1",children:O((o==null?void 0:o.revenue_metrics.total_revenue_paid)||0)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Outstanding"}),e.jsx("p",{className:"text-xl font-semibold text-orange-600 mt-1",children:O((o==null?void 0:o.revenue_metrics.outstanding_amount)||0)})]}),e.jsxs("div",{className:"border-t border-gray-100 pt-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"This Month"}),e.jsx("p",{className:"text-lg font-semibold text-blue-600 mt-1",children:O((o==null?void 0:o.revenue_metrics.current_month_revenue)||0)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:e.jsx(gt,{className:"h-6 w-6 text-indigo-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Upcoming Bookings"})]})}),u?e.jsx("div",{className:"flex items-center justify-center h-24",children:e.jsx(tt,{className:"h-6 w-6 text-gray-400 animate-spin"})}):g?e.jsx("div",{className:"text-sm text-red-600 p-4 bg-red-50 rounded-lg",children:"Failed to load bookings data"}):e.jsxs("div",{className:"pt-4",children:[e.jsx("p",{className:"text-5xl font-bold text-indigo-600 mb-2",children:m||0}),e.jsx("p",{className:"text-sm text-gray-600",children:"Next 7 days (confirmed)"}),e.jsxs(ie,{to:"/admin/calendar",className:"mt-4 inline-flex items-center text-sm font-medium text-indigo-600 hover:text-indigo-700",children:["View calendar",e.jsx(gw,{className:"ml-1 h-4 w-4"})]})]})]}),r.inventory_management&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(Wt,{className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Low Stock"})]})}),L?e.jsx("div",{className:"flex items-center justify-center h-24",children:e.jsx(tt,{className:"h-6 w-6 text-gray-400 animate-spin"})}):E?e.jsx("div",{className:"text-sm text-red-600 p-4 bg-red-50 rounded-lg",children:"Failed to load inventory data"}):e.jsxs("div",{className:"pt-4",children:[e.jsx("p",{className:"text-5xl font-bold text-red-600 mb-2",children:k||0}),e.jsx("p",{className:"text-sm text-gray-600",children:"Items below reorder point"}),(k||0)>0&&e.jsxs(ie,{to:"/admin/inventory",className:"mt-4 inline-flex items-center text-sm font-medium text-red-600 hover:text-red-700",children:["Manage inventory",e.jsx(os,{className:"ml-1 h-4 w-4"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:e.jsx(Jj,{className:"h-6 w-6 text-gray-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"System Activity"})]})}),v?e.jsx("div",{className:"flex items-center justify-center h-24",children:e.jsx(tt,{className:"h-6 w-6 text-gray-400 animate-spin"})}):y?e.jsx("div",{className:"text-sm text-red-600 p-4 bg-red-50 rounded-lg",children:"Failed to load activity data"}):e.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto",children:f&&f.length>0?f.slice(0,5).map(M=>e.jsxs("div",{className:"flex items-start gap-3 py-2 border-b border-gray-100 last:border-0",children:[e.jsx(kt,{className:"h-4 w-4 text-gray-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-900 truncate",children:M.action}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:Y(M.created_at)})]})]},M.id)):e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No recent activity"})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(ie,{to:"/admin/quotes?status=requested",className:"flex items-center gap-3 px-6 py-4 bg-gradient-to-r from-yellow-400 to-yellow-500 rounded-lg text-black font-semibold hover:from-yellow-500 hover:to-yellow-600 transition-all duration-200 shadow-md hover:shadow-lg",children:[e.jsx(Ae,{className:"h-5 w-5"}),"Finalize Quotes"]}),e.jsxs(ie,{to:"/admin/calendar",className:"flex items-center gap-3 px-6 py-4 bg-white border-2 border-black rounded-lg text-black font-semibold hover:bg-gray-50 transition-colors",children:[e.jsx(gt,{className:"h-5 w-5"}),"Manage Calendar"]}),e.jsxs(ie,{to:"/admin/orders?payment_status=partial",className:"flex items-center gap-3 px-6 py-4 bg-white border-2 border-black rounded-lg text-black font-semibold hover:bg-gray-50 transition-colors",children:[e.jsx(Gs,{className:"h-5 w-5"}),"Review Payments"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Quotes Requiring Finalization"}),e.jsx(ie,{to:"/admin/quotes",className:"text-sm font-medium text-blue-600 hover:text-blue-700",children:"View all "})]}),n?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx(tt,{className:"h-6 w-6 text-gray-400 animate-spin"})}):l?e.jsx("div",{className:"text-sm text-red-600 p-4 bg-red-50 rounded-lg",children:"Failed to load pending quotes"}):a!=null&&a.pending_quotes_list&&a.pending_quotes_list.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estimate"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:a.pending_quotes_list.map(M=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:M.customer_name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:M.service_name}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${q(M.status)}`,children:M.status})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:M.estimate_subtotal!==null?O(M.estimate_subtotal):""}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:Y(M.created_at)}),e.jsx("td",{className:"px-4 py-3 text-right text-sm",children:e.jsx(ie,{to:`/admin/quotes?edit_id=${M.id}`,className:"text-blue-600 hover:text-blue-700 font-medium",children:"Finalize"})})]},M.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(rt,{className:"h-12 w-12 text-green-500 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No quotes requiring finalization"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Payments"}),e.jsx(ie,{to:"/admin/orders",className:"text-sm font-medium text-blue-600 hover:text-blue-700",children:"View all "})]}),w?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx(tt,{className:"h-6 w-6 text-gray-400 animate-spin"})}):R?e.jsx("div",{className:"text-sm text-red-600 p-4 bg-red-50 rounded-lg",children:"Failed to load payments data"}):x&&x.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Method"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:x.slice(0,5).map(M=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium",children:M.order_number}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-semibold",children:O(M.amount)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:M.method.replace("_"," ")}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${q(M.status)}`,children:[M.status==="COMPLETED"&&e.jsx(rt,{className:"mr-1 h-3 w-3"}),M.status==="FAILED"&&e.jsx(Gt,{className:"mr-1 h-3 w-3"}),M.status]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:Y(M.created_at)})]},M.id))})]})}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No recent payments"})})]})]})]})})},t2=()=>{var ce;const[t,s]=Ye(),r=t.get("tab"),a=ae(D=>D.authentication_state.auth_token);ae(D=>D.authentication_state.current_user);const n=et(),[l,i]=j.useState(r==="categories"?"categories":"services"),[o,c]=j.useState(null),[d,h]=j.useState({is_open:!1,category_data:{id:null,name:"",slug:"",sort_order:0,is_active:!0},is_saving:!1,error:null}),[m,u]=j.useState({is_open:!1,service_data:{id:null,category_id:"",name:"",slug:"",description:"",requires_booking:!1,requires_proof:!1,is_top_seller:!1,is_active:!0},is_saving:!1,error:null}),[g,b]=j.useState(null),[f,v]=j.useState({is_open:!1,option_data:{key:"",label:"",field_type:"text",required:!1,choices:null,pricing_impact:null,sort_order:0},is_saving:!1}),[y,p]=j.useState(null),[x,w]=j.useState("");j.useEffect(()=>{r&&(r==="categories"||r==="services")&&i(r)},[r]),j.useEffect(()=>{if(o){const D=setTimeout(()=>{c(null)},5e3);return()=>clearTimeout(D)}},[o]);const{data:R=[],isLoading:N}=te({queryKey:["service-categories"],queryFn:async()=>(await $.get("http://localhost:3000/api/service-categories",{headers:{Authorization:`Bearer ${a}`}})).data.categories,enabled:!!a,staleTime:6e4,refetchOnWindowFocus:!1}),{data:k=[],isLoading:L}=te({queryKey:["services"],queryFn:async()=>(await $.get("http://localhost:3000/api/services",{headers:{Authorization:`Bearer ${a}`}})).data.services.map(fe=>{var ve;return{...fe,category_name:((ve=R.find(qe=>qe.id===fe.category_id))==null?void 0:ve.name)||"Unknown"}}),enabled:!!a&&R.length>0,staleTime:6e4,refetchOnWindowFocus:!1}),{data:E=[],isLoading:z}=te({queryKey:["service-options",g],queryFn:async()=>g?(await $.get(`http://localhost:3000/api/services/${g}/options`,{headers:{Authorization:`Bearer ${a}`}})).data.options:[],enabled:!!a&&!!g,staleTime:6e4,refetchOnWindowFocus:!1}),_=me({mutationFn:async D=>(await $.post("http://localhost:3000/api/service-categories",D,{headers:{Authorization:`Bearer ${a}`}})).data,onSuccess:()=>{n.invalidateQueries({queryKey:["service-categories"]}),c({type:"success",message:"Category created successfully!"}),h({is_open:!1,category_data:{id:null,name:"",slug:"",sort_order:0,is_active:!0},is_saving:!1,error:null})},onError:D=>{var fe,ve;const X=((ve=(fe=D.response)==null?void 0:fe.data)==null?void 0:ve.message)||"Failed to create category";h(qe=>({...qe,error:X,is_saving:!1}))}}),O=me({mutationFn:async D=>(await $.put(`http://localhost:3000/api/service-categories/${D.id}`,{name:D.name,slug:D.slug,sort_order:D.sort_order,is_active:D.is_active},{headers:{Authorization:`Bearer ${a}`}})).data,onSuccess:()=>{n.invalidateQueries({queryKey:["service-categories"]}),c({type:"success",message:"Category updated successfully!"}),h({is_open:!1,category_data:{id:null,name:"",slug:"",sort_order:0,is_active:!0},is_saving:!1,error:null})},onError:D=>{var fe,ve;const X=((ve=(fe=D.response)==null?void 0:fe.data)==null?void 0:ve.message)||"Failed to update category";h(qe=>({...qe,error:X,is_saving:!1}))}}),Y=me({mutationFn:async D=>{await $.delete(`http://localhost:3000/api/service-categories/${D}`,{headers:{Authorization:`Bearer ${a}`}})},onSuccess:()=>{n.invalidateQueries({queryKey:["service-categories"]}),c({type:"success",message:"Category deleted successfully!"})},onError:D=>{var fe,ve;const X=((ve=(fe=D.response)==null?void 0:fe.data)==null?void 0:ve.message)||"Failed to delete category";c({type:"error",message:X})}}),q=me({mutationFn:async D=>(await $.post("http://localhost:3000/api/services",D,{headers:{Authorization:`Bearer ${a}`}})).data,onSuccess:()=>{n.invalidateQueries({queryKey:["services"]}),c({type:"success",message:"Service created successfully!"}),u({is_open:!1,service_data:{id:null,category_id:"",name:"",slug:"",description:"",requires_booking:!1,requires_proof:!1,is_top_seller:!1,is_active:!0},is_saving:!1,error:null})},onError:D=>{var fe,ve;const X=((ve=(fe=D.response)==null?void 0:fe.data)==null?void 0:ve.message)||"Failed to create service";u(qe=>({...qe,error:X,is_saving:!1}))}}),A=me({mutationFn:async D=>(await $.put(`http://localhost:3000/api/services/${D.id}`,{category_id:D.category_id,name:D.name,slug:D.slug,description:D.description,requires_booking:D.requires_booking,requires_proof:D.requires_proof,is_top_seller:D.is_top_seller,is_active:D.is_active},{headers:{Authorization:`Bearer ${a}`}})).data,onSuccess:()=>{n.invalidateQueries({queryKey:["services"]}),c({type:"success",message:"Service updated successfully!"}),u({is_open:!1,service_data:{id:null,category_id:"",name:"",slug:"",description:"",requires_booking:!1,requires_proof:!1,is_top_seller:!1,is_active:!0},is_saving:!1,error:null})},onError:D=>{var fe,ve;const X=((ve=(fe=D.response)==null?void 0:fe.data)==null?void 0:ve.message)||"Failed to update service";u(qe=>({...qe,error:X,is_saving:!1}))}}),M=me({mutationFn:async D=>{await $.delete(`http://localhost:3000/api/services/${D}`,{headers:{Authorization:`Bearer ${a}`}})},onSuccess:()=>{n.invalidateQueries({queryKey:["services"]}),c({type:"success",message:"Service deleted successfully!"}),g&&b(null)},onError:D=>{var fe,ve;const X=((ve=(fe=D.response)==null?void 0:fe.data)==null?void 0:ve.message)||"Failed to delete service";c({type:"error",message:X})}}),P=me({mutationFn:async D=>{if(!g)throw new Error("No service selected");return(await $.post(`http://localhost:3000/api/services/${g}/options`,D,{headers:{Authorization:`Bearer ${a}`}})).data},onSuccess:()=>{n.invalidateQueries({queryKey:["service-options",g]}),c({type:"success",message:"Service option created successfully!"}),v({is_open:!1,option_data:{key:"",label:"",field_type:"text",required:!1,choices:null,pricing_impact:null,sort_order:0},is_saving:!1}),w("")},onError:D=>{var fe,ve;const X=((ve=(fe=D.response)==null?void 0:fe.data)==null?void 0:ve.message)||"Failed to create option";c({type:"error",message:X}),v(qe=>({...qe,is_saving:!1}))}}),C=me({mutationFn:async({optionId:D,data:X})=>(await $.put(`http://localhost:3000/api/service-options/${D}`,X,{headers:{Authorization:`Bearer ${a}`}})).data,onSuccess:()=>{n.invalidateQueries({queryKey:["service-options",g]}),c({type:"success",message:"Service option updated successfully!"}),p(null),v({is_open:!1,option_data:{key:"",label:"",field_type:"text",required:!1,choices:null,pricing_impact:null,sort_order:0},is_saving:!1}),w("")},onError:D=>{var fe,ve;const X=((ve=(fe=D.response)==null?void 0:fe.data)==null?void 0:ve.message)||"Failed to update option";c({type:"error",message:X}),v(qe=>({...qe,is_saving:!1}))}}),V=me({mutationFn:async D=>{await $.delete(`http://localhost:3000/api/service-options/${D}`,{headers:{Authorization:`Bearer ${a}`}})},onSuccess:()=>{n.invalidateQueries({queryKey:["service-options",g]}),c({type:"success",message:"Service option deleted successfully!"})},onError:D=>{var fe,ve;const X=((ve=(fe=D.response)==null?void 0:fe.data)==null?void 0:ve.message)||"Failed to delete option";c({type:"error",message:X})}}),T=D=>{i(D),s({tab:D}),b(null)},Z=()=>{h({is_open:!0,category_data:{id:null,name:"",slug:"",sort_order:R.length,is_active:!0},is_saving:!1,error:null})},se=D=>{h({is_open:!0,category_data:{id:D.id,name:D.name,slug:D.slug,sort_order:D.sort_order,is_active:D.is_active},is_saving:!1,error:null})},B=async D=>{if(D.preventDefault(),h(X=>({...X,error:null,is_saving:!0})),!d.category_data.name.trim()){h(X=>({...X,error:"Category name is required",is_saving:!1}));return}if(!d.category_data.slug.trim()||!/^[a-z0-9-]+$/.test(d.category_data.slug)){h(X=>({...X,error:"Slug must contain only lowercase letters, numbers, and hyphens",is_saving:!1}));return}if(d.category_data.id)O.mutate(d.category_data);else{const{id:X,...fe}=d.category_data;_.mutate(fe)}},ee=async D=>{window.confirm("Are you sure you want to delete this category? This action cannot be undone.")&&Y.mutate(D)},S=()=>{var D;u({is_open:!0,service_data:{id:null,category_id:((D=R[0])==null?void 0:D.id)||"",name:"",slug:"",description:"",requires_booking:!1,requires_proof:!1,is_top_seller:!1,is_active:!0},is_saving:!1,error:null})},re=D=>{u({is_open:!0,service_data:{id:D.id,category_id:D.category_id,name:D.name,slug:D.slug,description:D.description,requires_booking:D.requires_booking,requires_proof:D.requires_proof,is_top_seller:D.is_top_seller,is_active:D.is_active},is_saving:!1,error:null})},le=async D=>{if(D.preventDefault(),u(X=>({...X,error:null,is_saving:!0})),!m.service_data.name.trim()){u(X=>({...X,error:"Service name is required",is_saving:!1}));return}if(!m.service_data.slug.trim()||!/^[a-z0-9-]+$/.test(m.service_data.slug)){u(X=>({...X,error:"Slug must contain only lowercase letters, numbers, and hyphens",is_saving:!1}));return}if(!m.service_data.description.trim()){u(X=>({...X,error:"Description is required",is_saving:!1}));return}if(!m.service_data.category_id){u(X=>({...X,error:"Please select a category",is_saving:!1}));return}if(m.service_data.id)A.mutate(m.service_data);else{const{id:X,...fe}=m.service_data;q.mutate(fe)}},Te=async D=>{window.confirm("Are you sure you want to delete this service? This action cannot be undone.")&&M.mutate(D)},ke=()=>{v({is_open:!0,option_data:{key:"",label:"",field_type:"text",required:!1,choices:null,pricing_impact:null,sort_order:E.length},is_saving:!1}),w(""),p(null)},We=D=>{v({is_open:!0,option_data:{key:D.key,label:D.label,field_type:D.field_type,required:D.required,choices:D.choices,pricing_impact:D.pricing_impact,sort_order:D.sort_order},is_saving:!1}),w(D.choices?D.choices.join(", "):""),p(D.id)},F=async D=>{if(D.preventDefault(),v(fe=>({...fe,is_saving:!0})),!f.option_data.key.trim()||!/^[a-z_]+$/.test(f.option_data.key)){c({type:"error",message:"Key must contain only lowercase letters and underscores"}),v(fe=>({...fe,is_saving:!1}));return}if(!f.option_data.label.trim()){c({type:"error",message:"Label is required"}),v(fe=>({...fe,is_saving:!1}));return}let X={...f.option_data};if(X.field_type==="select"){if(!x.trim()){c({type:"error",message:"Choices are required for select fields"}),v(fe=>({...fe,is_saving:!1}));return}X.choices=x.split(",").map(fe=>fe.trim()).filter(fe=>fe)}else X.choices=null;y?C.mutate({optionId:y,data:X}):P.mutate(X)},H=async D=>{window.confirm("Are you sure you want to delete this option? This action cannot be undone.")&&V.mutate(D)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Service Management"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Configure service catalog, categories, and options"})]}),l==="categories"&&e.jsxs("button",{onClick:Z,className:"inline-flex items-center px-6 py-3 bg-yellow-400 text-gray-900 font-semibold rounded-lg hover:bg-yellow-500 transition-all duration-200 shadow-lg hover:shadow-xl hover:scale-105",children:[e.jsx(Nt,{className:"h-5 w-5 mr-2"}),"Add Category"]}),l==="services"&&!g&&e.jsxs("button",{onClick:S,className:"inline-flex items-center px-6 py-3 bg-yellow-400 text-gray-900 font-semibold rounded-lg hover:bg-yellow-500 transition-all duration-200 shadow-lg hover:shadow-xl hover:scale-105",children:[e.jsx(Nt,{className:"h-5 w-5 mr-2"}),"Add Service"]}),g&&e.jsxs("button",{onClick:()=>b(null),className:"inline-flex items-center px-6 py-3 bg-gray-100 text-gray-900 font-semibold rounded-lg hover:bg-gray-200 transition-all duration-200 border border-gray-300",children:[e.jsx(je,{className:"h-5 w-5 mr-2"}),"Close Options Editor"]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex space-x-8",children:[e.jsx("button",{onClick:()=>T("categories"),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${l==="categories"?"border-yellow-400 text-yellow-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(xx,{className:"h-5 w-5 mr-2"}),"Categories"]})}),e.jsx("button",{onClick:()=>T("services"),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${l==="services"?"border-yellow-400 text-yellow-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(px,{className:"h-5 w-5 mr-2"}),"Services"]})})]})})}),o&&e.jsx("div",{className:"fixed top-4 right-4 z-50 animate-fade-in",children:e.jsxs("div",{className:`px-6 py-4 rounded-lg shadow-lg flex items-center space-x-3 ${o.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:[o.type==="success"?e.jsx(Lt,{className:"h-5 w-5 flex-shrink-0"}):e.jsx(we,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("p",{className:"font-medium",children:o.message}),e.jsx("button",{onClick:()=>c(null),className:"ml-4 text-white hover:text-gray-200",children:e.jsx(je,{className:"h-5 w-5"})})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l==="categories"&&e.jsx("div",{className:"space-y-6",children:N?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-yellow-400"})}):R.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(xx,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"No categories yet"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Create your first service category to get started"})]}):e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Slug"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sort Order"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.sort((D,X)=>D.sort_order-X.sort_order).map(D=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(hx,{className:"h-5 w-5 text-gray-400 mr-2"}),e.jsx("div",{className:"text-sm font-medium text-gray-900",children:D.name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-600",children:D.slug})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-600",children:D.sort_order})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:D.is_active?e.jsx("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Active"}):e.jsx("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsxs("button",{onClick:()=>se(D),className:"text-yellow-600 hover:text-yellow-900 mr-4 inline-flex items-center",children:[e.jsx(Os,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsxs("button",{onClick:()=>ee(D.id),className:"text-red-600 hover:text-red-900 inline-flex items-center",children:[e.jsx(ra,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]},D.id))})]})})}),l==="services"&&!g&&e.jsx("div",{className:"space-y-6",children:L?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-yellow-400"})}):k.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(px,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"No services yet"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Create your first service to get started"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map(D=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 hover:shadow-xl transition-all duration-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:D.name}),e.jsx("p",{className:"text-sm text-gray-600",children:D.category_name})]}),D.is_top_seller&&e.jsx(Gp,{className:"h-5 w-5 text-yellow-400 fill-current flex-shrink-0 ml-2"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-3",children:D.description}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[D.requires_booking&&e.jsxs("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 flex items-center",children:[e.jsx(gt,{className:"h-3 w-3 mr-1"}),"Booking Required"]}),D.requires_proof&&e.jsxs("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-800 flex items-center",children:[e.jsx(Ae,{className:"h-3 w-3 mr-1"}),"Proof Required"]}),D.is_active?e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:"Active"}):e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800",children:"Inactive"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>b(D.id),className:"inline-flex items-center text-sm font-medium text-yellow-600 hover:text-yellow-700",children:[e.jsx(Ii,{className:"h-4 w-4 mr-1"}),"Configure Options"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>re(D),className:"p-2 text-gray-600 hover:text-yellow-600 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(Os,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Te(D.id),className:"p-2 text-gray-600 hover:text-red-600 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(ra,{className:"h-4 w-4"})})]})]})]},D.id))})}),l==="services"&&g&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Service Options Editor"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Configure form fields for ",(ce=k.find(D=>D.id===g))==null?void 0:ce.name]})]}),e.jsxs("button",{onClick:ke,className:"inline-flex items-center px-4 py-2 bg-yellow-400 text-gray-900 font-semibold rounded-lg hover:bg-yellow-500 transition-all duration-200",children:[e.jsx(Nt,{className:"h-5 w-5 mr-2"}),"Add Option"]})]})}),z?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-yellow-400"})}):E.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-12 text-center",children:[e.jsx(Ii,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"No options configured yet"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Add form fields that customers will fill in the quote builder"})]}):e.jsx("div",{className:"space-y-4",children:E.sort((D,X)=>D.sort_order-X.sort_order).map(D=>e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 hover:shadow-xl transition-all duration-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(hx,{className:"h-5 w-5 text-gray-400"}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:D.label}),D.required&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800",children:"Required"})]}),e.jsxs("div",{className:"ml-8 space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Key:"})," ",D.key]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Type:"})," ",D.field_type]}),D.choices&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Choices:"})," ",D.choices.join(", ")]}),D.pricing_impact&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Pricing Impact:"})," Configured"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx("button",{onClick:()=>We(D),className:"p-2 text-gray-600 hover:text-yellow-600 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(Os,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>H(D.id),className:"p-2 text-gray-600 hover:text-red-600 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(ra,{className:"h-4 w-4"})})]})]})},D.id))})]})]}),d.is_open&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-900 bg-opacity-75",onClick:()=>h(D=>({...D,is_open:!1}))}),e.jsx("div",{className:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:e.jsxs("form",{onSubmit:B,children:[e.jsxs("div",{className:"bg-white px-6 pt-6 pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:d.category_data.id?"Edit Category":"Add Category"}),e.jsx("button",{type:"button",onClick:()=>h(D=>({...D,is_open:!1})),className:"text-gray-400 hover:text-gray-600",children:e.jsx(je,{className:"h-6 w-6"})})]}),d.error&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center",children:[e.jsx(we,{className:"h-5 w-5 mr-2 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:d.error})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Category Name *"}),e.jsx("input",{type:"text",required:!0,value:d.category_data.name,onChange:D=>{h(X=>({...X,category_data:{...X.category_data,name:D.target.value},error:null}))},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",placeholder:"e.g., Vehicle Graphics"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Slug *"}),e.jsx("input",{type:"text",required:!0,value:d.category_data.slug,onChange:D=>{h(X=>({...X,category_data:{...X.category_data,slug:D.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"-")},error:null}))},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",placeholder:"e.g., vehicle-graphics"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Lowercase letters, numbers, and hyphens only"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Sort Order"}),e.jsx("input",{type:"number",min:"0",value:d.category_data.sort_order,onChange:D=>{h(X=>({...X,category_data:{...X.category_data,sort_order:parseInt(D.target.value)||0},error:null}))},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"category-active",checked:d.category_data.is_active,onChange:D=>{h(X=>({...X,category_data:{...X.category_data,is_active:D.target.checked},error:null}))},className:"h-5 w-5 text-yellow-400 border-gray-300 rounded focus:ring-yellow-400"}),e.jsx("label",{htmlFor:"category-active",className:"ml-3 text-sm font-medium text-gray-900",children:"Active"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>h(D=>({...D,is_open:!1})),className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-900 font-semibold rounded-lg hover:bg-gray-50 transition-all",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d.is_saving,className:"px-6 py-3 bg-yellow-400 text-gray-900 font-semibold rounded-lg hover:bg-yellow-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:d.is_saving?"Saving...":"Save Category"})]})]})})]})}),m.is_open&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-900 bg-opacity-75",onClick:()=>u(D=>({...D,is_open:!1}))}),e.jsx("div",{className:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full",children:e.jsxs("form",{onSubmit:le,children:[e.jsxs("div",{className:"bg-white px-6 pt-6 pb-4 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:m.service_data.id?"Edit Service":"Add Service"}),e.jsx("button",{type:"button",onClick:()=>u(D=>({...D,is_open:!1})),className:"text-gray-400 hover:text-gray-600",children:e.jsx(je,{className:"h-6 w-6"})})]}),m.error&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center",children:[e.jsx(we,{className:"h-5 w-5 mr-2 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:m.error})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Service Name *"}),e.jsx("input",{type:"text",required:!0,value:m.service_data.name,onChange:D=>{u(X=>({...X,service_data:{...X.service_data,name:D.target.value},error:null}))},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",placeholder:"e.g., Premium Business Cards"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Category *"}),e.jsxs("select",{required:!0,value:m.service_data.category_id,onChange:D=>{u(X=>({...X,service_data:{...X.service_data,category_id:D.target.value},error:null}))},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",children:[e.jsx("option",{value:"",children:"Select category"}),R.filter(D=>D.is_active).map(D=>e.jsx("option",{value:D.id,children:D.name},D.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Slug *"}),e.jsx("input",{type:"text",required:!0,value:m.service_data.slug,onChange:D=>{u(X=>({...X,service_data:{...X.service_data,slug:D.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"-")},error:null}))},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",placeholder:"e.g., premium-business-cards"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Lowercase letters, numbers, and hyphens only"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Description *"}),e.jsx("textarea",{required:!0,rows:4,value:m.service_data.description,onChange:D=>{u(X=>({...X,service_data:{...X.service_data,description:D.target.value},error:null}))},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all resize-none",placeholder:"Detailed service description..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"service-booking",checked:m.service_data.requires_booking,onChange:D=>{u(X=>({...X,service_data:{...X.service_data,requires_booking:D.target.checked},error:null}))},className:"h-5 w-5 text-yellow-400 border-gray-300 rounded focus:ring-yellow-400"}),e.jsx("label",{htmlFor:"service-booking",className:"ml-3 text-sm font-medium text-gray-900",children:"Requires Booking"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"service-proof",checked:m.service_data.requires_proof,onChange:D=>{u(X=>({...X,service_data:{...X.service_data,requires_proof:D.target.checked},error:null}))},className:"h-5 w-5 text-yellow-400 border-gray-300 rounded focus:ring-yellow-400"}),e.jsx("label",{htmlFor:"service-proof",className:"ml-3 text-sm font-medium text-gray-900",children:"Requires Proof"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"service-top-seller",checked:m.service_data.is_top_seller,onChange:D=>{u(X=>({...X,service_data:{...X.service_data,is_top_seller:D.target.checked},error:null}))},className:"h-5 w-5 text-yellow-400 border-gray-300 rounded focus:ring-yellow-400"}),e.jsx("label",{htmlFor:"service-top-seller",className:"ml-3 text-sm font-medium text-gray-900",children:"Top Seller"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"service-active",checked:m.service_data.is_active,onChange:D=>{u(X=>({...X,service_data:{...X.service_data,is_active:D.target.checked},error:null}))},className:"h-5 w-5 text-yellow-400 border-gray-300 rounded focus:ring-yellow-400"}),e.jsx("label",{htmlFor:"service-active",className:"ml-3 text-sm font-medium text-gray-900",children:"Active"})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>u(D=>({...D,is_open:!1})),className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-900 font-semibold rounded-lg hover:bg-gray-50 transition-all",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m.is_saving,className:"px-6 py-3 bg-yellow-400 text-gray-900 font-semibold rounded-lg hover:bg-yellow-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:m.is_saving?"Saving...":"Save Service"})]})]})})]})}),f.is_open&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-900 bg-opacity-75",onClick:()=>{v(D=>({...D,is_open:!1})),p(null)}}),e.jsx("div",{className:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:e.jsxs("form",{onSubmit:F,children:[e.jsxs("div",{className:"bg-white px-6 pt-6 pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:y?"Edit Service Option":"Add Service Option"}),e.jsx("button",{type:"button",onClick:()=>{v(D=>({...D,is_open:!1})),p(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx(je,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Field Key *"}),e.jsx("input",{type:"text",required:!0,value:f.option_data.key,onChange:D=>{v(X=>({...X,option_data:{...X.option_data,key:D.target.value.toLowerCase().replace(/[^a-z_]/g,"_")}}))},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",placeholder:"e.g., quantity"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Lowercase letters and underscores only"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Field Label *"}),e.jsx("input",{type:"text",required:!0,value:f.option_data.label,onChange:D=>{v(X=>({...X,option_data:{...X.option_data,label:D.target.value}}))},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",placeholder:"e.g., Quantity"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Field Type *"}),e.jsxs("select",{required:!0,value:f.option_data.field_type,onChange:D=>{v(X=>({...X,option_data:{...X.option_data,field_type:D.target.value,choices:D.target.value==="select"?X.option_data.choices:null}}))},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",children:[e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"select",children:"Select Dropdown"}),e.jsx("option",{value:"number",children:"Number"}),e.jsx("option",{value:"textarea",children:"Textarea"}),e.jsx("option",{value:"checkbox",children:"Checkbox"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Sort Order"}),e.jsx("input",{type:"number",min:"0",value:f.option_data.sort_order,onChange:D=>{v(X=>({...X,option_data:{...X.option_data,sort_order:parseInt(D.target.value)||0}}))},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all"})]})]}),f.option_data.field_type==="select"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Choices (comma-separated) *"}),e.jsx("input",{type:"text",required:!0,value:x,onChange:D=>w(D.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",placeholder:"e.g., Small, Medium, Large"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Separate options with commas"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"option-required",checked:f.option_data.required,onChange:D=>{v(X=>({...X,option_data:{...X.option_data,required:D.target.checked}}))},className:"h-5 w-5 text-yellow-400 border-gray-300 rounded focus:ring-yellow-400"}),e.jsx("label",{htmlFor:"option-required",className:"ml-3 text-sm font-medium text-gray-900",children:"Required Field"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{v(D=>({...D,is_open:!1})),p(null)},className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-900 font-semibold rounded-lg hover:bg-gray-50 transition-all",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f.is_saving,className:"px-6 py-3 bg-yellow-400 text-gray-900 font-semibold rounded-lg hover:bg-yellow-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:f.is_saving?"Saving...":"Save Option"})]})]})})]})})]})})},s2=async t=>(await $.get("http://localhost:3000/api/services",{headers:{Authorization:`Bearer ${t}`},params:{is_active:!0}})).data.services||[],r2=async t=>{var a,n,l;const r=(await $.get("http://localhost:3000/api/system-settings",{headers:{Authorization:`Bearer ${t}`}})).data.settings.reduce((i,o)=>(i[o.key]=o.value,i),{});return{deposit_percentage:Number(((a=r.deposit_percentage)==null?void 0:a.value)||50),tax_rate:Number(((n=r.tax_rate)==null?void 0:n.current_rate)||15),emergency_booking_fee_percentage:Number(((l=r.emergency_booking_fee)==null?void 0:l.percentage)||20)}},a2=async t=>(await $.get("http://localhost:3000/api/pricing-rules",{headers:{Authorization:`Bearer ${t}`}})).data.rules||[],n2=async(t,s)=>(await $.post("http://localhost:3000/api/pricing-rules",s,{headers:{Authorization:`Bearer ${t}`}})).data,l2=async(t,s,r)=>(await $.put(`http://localhost:3000/api/pricing-rules/${s}`,r,{headers:{Authorization:`Bearer ${t}`}})).data,i2=async(t,s)=>{await $.delete(`http://localhost:3000/api/pricing-rules/${s}`,{headers:{Authorization:`Bearer ${t}`}})},Yo=async(t,s,r)=>{await $.put(`http://localhost:3000/api/system-settings/${s}`,{value:r},{headers:{Authorization:`Bearer ${t}`}})},o2=()=>{const t=ae(M=>M.authentication_state.auth_token);ae(M=>M.authentication_state.current_user);const s=et(),{data:r=[]}=te({queryKey:["services"],queryFn:()=>s2(t),enabled:!!t,staleTime:5*60*1e3}),{data:a,isLoading:n}=te({queryKey:["system-settings"],queryFn:()=>r2(t),enabled:!!t,staleTime:5*60*1e3}),{data:l=[],isLoading:i}=te({queryKey:["pricing-rules"],queryFn:()=>a2(t),enabled:!!t,staleTime:5*60*1e3}),o=l.map(M=>{var P;return{...M,service_name:M.service_id?((P=r.find(C=>C.id===M.service_id))==null?void 0:P.name)||"Unknown Service":"Global Rule"}}),[c,d]=j.useState({deposit_percentage:50,tax_rate:15,emergency_booking_fee_percentage:20}),[h,m]=j.useState(!1);j.useEffect(()=>{a&&d(a)},[a]);const[u,g]=j.useState({isOpen:!1,mode:"create",ruleData:null}),[b,f]=j.useState({isOpen:!1,ruleId:null,ruleName:null}),[v,y]=j.useState({type:null,message:""});j.useEffect(()=>{if(v.type){const M=setTimeout(()=>{y({type:null,message:""})},3e3);return()=>clearTimeout(M)}},[v]);const p=me({mutationFn:M=>n2(t,M),onSuccess:()=>{s.invalidateQueries({queryKey:["pricing-rules"]}),g({isOpen:!1,mode:"create",ruleData:null}),y({type:"success",message:"Pricing rule created successfully"})},onError:M=>{var P,C;y({type:"error",message:((C=(P=M.response)==null?void 0:P.data)==null?void 0:C.message)||"Failed to create pricing rule"})}}),x=me({mutationFn:({id:M,data:P})=>l2(t,M,P),onSuccess:()=>{s.invalidateQueries({queryKey:["pricing-rules"]}),g({isOpen:!1,mode:"create",ruleData:null}),y({type:"success",message:"Pricing rule updated successfully"})},onError:M=>{var P,C;y({type:"error",message:((C=(P=M.response)==null?void 0:P.data)==null?void 0:C.message)||"Failed to update pricing rule"})}}),w=me({mutationFn:M=>i2(t,M),onSuccess:()=>{s.invalidateQueries({queryKey:["pricing-rules"]}),f({isOpen:!1,ruleId:null,ruleName:null}),y({type:"success",message:"Pricing rule deleted successfully"})},onError:M=>{var P,C;y({type:"error",message:((C=(P=M.response)==null?void 0:P.data)==null?void 0:C.message)||"Failed to delete pricing rule"})}}),R=me({mutationFn:async M=>{await Yo(t,"deposit_percentage",{value:M.deposit_percentage}),await Yo(t,"tax_rate",{current_rate:M.tax_rate}),await Yo(t,"emergency_booking_fee",{percentage:M.emergency_booking_fee_percentage})},onSuccess:()=>{s.invalidateQueries({queryKey:["system-settings"]}),m(!1),y({type:"success",message:"System pricing settings updated successfully"})},onError:M=>{var P,C;y({type:"error",message:((C=(P=M.response)==null?void 0:P.data)==null?void 0:C.message)||"Failed to update system settings"})}}),N=(M,P)=>{d(C=>({...C,[M]:P})),m(!0)},k=()=>{R.mutate(c)},L=()=>{g({isOpen:!0,mode:"create",ruleData:{service_id:null,rule_type:"VOLUME_DISCOUNT",rule_config:{},is_active:!0}})},E=M=>{g({isOpen:!0,mode:"edit",ruleData:M})},z=()=>{g({isOpen:!1,mode:"create",ruleData:null})},_=()=>{u.ruleData&&(u.mode==="create"?p.mutate(u.ruleData):x.mutate({id:u.ruleData.id,data:{rule_config:u.ruleData.rule_config,is_active:u.ruleData.is_active}}))},O=M=>{x.mutate({id:M.id,data:{is_active:!M.is_active}})},Y=M=>{f({isOpen:!0,ruleId:M.id,ruleName:M.service_name||"this rule"})},q=()=>{b.ruleId&&w.mutate(b.ruleId)},A=n||i;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Pricing Configuration"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage system-wide pricing settings and service-specific pricing rules"})]}),v.type&&e.jsx("div",{className:`mb-6 px-6 py-4 rounded-lg ${v.type==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:e.jsx("p",{className:"font-medium",children:v.message})}),A?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-yellow-400"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8 mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"System Pricing Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"deposit_percentage",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Deposit Percentage (%)"}),e.jsx("input",{type:"number",id:"deposit_percentage",min:"0",max:"100",step:"1",value:c.deposit_percentage,onChange:M=>N("deposit_percentage",Number(M.target.value)),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Required deposit before order starts"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tax_rate",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Tax/VAT Rate (%)"}),e.jsx("input",{type:"number",id:"tax_rate",min:"0",max:"100",step:"0.1",value:c.tax_rate,onChange:M=>N("tax_rate",Number(M.target.value)),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Applied to all orders"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"emergency_fee",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Emergency Booking Fee (%)"}),e.jsx("input",{type:"number",id:"emergency_fee",min:"0",max:"100",step:"1",value:c.emergency_booking_fee_percentage,onChange:M=>N("emergency_booking_fee_percentage",Number(M.target.value)),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Surcharge for urgent bookings"})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:k,disabled:!h||R.isPending,className:"px-6 py-3 bg-yellow-400 text-black font-bold rounded-lg hover:bg-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:R.isPending?"Saving...":"Save Settings"})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Pricing Rules"}),e.jsx("button",{onClick:L,className:"px-6 py-3 bg-yellow-400 text-black font-bold rounded-lg hover:bg-yellow-500 transition-all",children:"+ Add Pricing Rule"})]}),o.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("p",{className:"text-lg font-medium",children:"No pricing rules configured yet"}),e.jsx("p",{className:"text-sm mt-2",children:'Click "Add Pricing Rule" to create your first rule'})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b-2 border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-sm font-bold text-gray-900",children:"Rule Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-bold text-gray-900",children:"Service"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-bold text-gray-900",children:"Configuration"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-bold text-gray-900",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-sm font-bold text-gray-900",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:o.map(M=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:M.rule_type.replace("_"," ")}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:M.service_name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.jsxs("pre",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[JSON.stringify(M.rule_config,null,2).substring(0,50),"..."]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>O(M),className:`px-3 py-1 text-xs font-bold rounded-full ${M.is_active?"bg-yellow-400 text-black":"bg-gray-200 text-gray-600"}`,children:M.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[e.jsx("button",{onClick:()=>E(M),className:"px-4 py-2 text-sm font-medium text-black border border-black rounded-lg hover:bg-gray-100 transition-all",children:"Edit"}),e.jsx("button",{onClick:()=>Y(M),className:"px-4 py-2 text-sm font-medium text-red-600 border border-red-600 rounded-lg hover:bg-red-50 transition-all",children:"Delete"})]})]},M.id))})]})})]})]})]})}),u.isOpen&&u.ruleData&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:u.mode==="create"?"Create Pricing Rule":"Edit Pricing Rule"})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Service (Optional - leave blank for global rule)"}),e.jsxs("select",{value:u.ruleData.service_id||"",onChange:M=>g(P=>({...P,ruleData:{...P.ruleData,service_id:M.target.value||null}})),disabled:u.mode==="edit",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all disabled:bg-gray-100",children:[e.jsx("option",{value:"",children:"Global Rule (All Services)"}),r.map(M=>e.jsxs("option",{value:M.id,children:[M.name," (",M.category_name,")"]},M.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Rule Type"}),e.jsxs("select",{value:u.ruleData.rule_type,onChange:M=>g(P=>({...P,ruleData:{...P.ruleData,rule_type:M.target.value}})),disabled:u.mode==="edit",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all disabled:bg-gray-100",children:[e.jsx("option",{value:"VOLUME_DISCOUNT",children:"Volume Discount"}),e.jsx("option",{value:"RUSH_FEE",children:"Rush Fee"}),e.jsx("option",{value:"SEASONAL_PROMOTION",children:"Seasonal Promotion"}),e.jsx("option",{value:"CUSTOM",children:"Custom Rule"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Rule Configuration (JSON)"}),e.jsx("textarea",{value:JSON.stringify(u.ruleData.rule_config,null,2),onChange:M=>{try{const P=JSON.parse(M.target.value);g(C=>({...C,ruleData:{...C.ruleData,rule_config:P}}))}catch{}},rows:10,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 font-mono text-sm transition-all",placeholder:'{"discount_percentage": 10, "min_quantity": 100}'}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter rule configuration as valid JSON"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"rule_active",checked:u.ruleData.is_active,onChange:M=>g(P=>({...P,ruleData:{...P.ruleData,is_active:M.target.checked}})),className:"w-5 h-5 text-yellow-400 border-gray-300 rounded focus:ring-yellow-400"}),e.jsx("label",{htmlFor:"rule_active",className:"ml-3 text-sm font-medium text-gray-900",children:"Rule is active"})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end space-x-4",children:[e.jsx("button",{onClick:z,className:"px-6 py-3 text-black border-2 border-black rounded-lg font-medium hover:bg-gray-100 transition-all",children:"Cancel"}),e.jsx("button",{onClick:_,disabled:p.isPending||x.isPending,className:"px-6 py-3 bg-yellow-400 text-black font-bold rounded-lg hover:bg-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:p.isPending||x.isPending?"Saving...":u.mode==="create"?"Create Rule":"Save Changes"})]})]})}),b.isOpen&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Confirm Delete"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete the pricing rule for"," ",e.jsx("strong",{children:b.ruleName}),"? This action cannot be undone."]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{onClick:()=>f({isOpen:!1,ruleId:null,ruleName:null}),className:"px-6 py-3 text-black border-2 border-black rounded-lg font-medium hover:bg-gray-100 transition-all",children:"Cancel"}),e.jsx("button",{onClick:q,disabled:w.isPending,className:"px-6 py-3 bg-red-600 text-white font-bold rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:w.isPending?"Deleting...":"Delete Rule"})]})]})})]})},c2=()=>{ae(W=>W.authentication_state.current_user);const t=ae(W=>W.authentication_state.auth_token),[s,r]=Ye(),a=s.get("edit_tier"),n=et(),[l,i]=j.useState("packages"),[o,c]=j.useState({type:null,message:""}),[d,h]=j.useState(!1),[m,u]=j.useState({id:null,name:"",slug:"",description:null,revision_limit:0,turnaround_days:1,is_active:!0}),[g,b]=j.useState({}),[f,v]=j.useState(!1),[y,p]=j.useState({tier_id:"",group_name:"",feature_key:"",feature_label:"",feature_value:"",is_included:!0,sort_order:0}),[x,w]=j.useState(null),[R,N]=j.useState(!1),[k,L]=j.useState({tier_id:"",deliverable_group:"",deliverable_label:"",sort_order:0}),[E,z]=j.useState(null),_=["turnaround","rush_availability","minimum_order","design_service","materials","support_level","installation","revisions"],O="http://localhost:3000",Y=(W,de)=>{c({type:W,message:de}),setTimeout(()=>{c({type:null,message:""})},3e3)},{data:q=[],isLoading:A,error:M,refetch:P}=te({queryKey:["tier-packages"],queryFn:async()=>(await $.get(`${O}/api/tier-packages`,{headers:{Authorization:`Bearer ${t}`}})).data.tiers.map(de=>({...de,revision_limit:Number(de.revision_limit||0),turnaround_days:Number(de.turnaround_days||0)})),staleTime:6e4,enabled:!!t}),{data:C={},isLoading:V,refetch:T}=te({queryKey:["tier-features-all",q],queryFn:async()=>{if(!q||q.length===0)return{};const W=q.map(async pe=>{const K=await $.get(`${O}/api/tier-packages/${pe.id}/features`,{headers:{Authorization:`Bearer ${t}`}});return{tierId:pe.id,features:K.data.features}}),de=await Promise.all(W),ye={};return de.forEach(pe=>{ye[pe.tierId]=pe.features.map(K=>({...K,sort_order:Number(K.sort_order||0)}))}),ye},enabled:!!t&&q.length>0,staleTime:6e4}),{data:Z={},isLoading:se,refetch:B}=te({queryKey:["tier-deliverables-all",q],queryFn:async()=>{if(!q||q.length===0)return{};const W=q.map(async pe=>{const K=await $.get(`${O}/api/tier-packages/${pe.id}/deliverables`,{headers:{Authorization:`Bearer ${t}`}});return{tierId:pe.id,deliverables:K.data.deliverables}}),de=await Promise.all(W),ye={};return de.forEach(pe=>{ye[pe.tierId]=pe.deliverables.map(K=>({...K,sort_order:Number(K.sort_order||0)}))}),ye},enabled:!!t&&q.length>0,staleTime:6e4}),ee=me({mutationFn:async W=>(await $.post(`${O}/api/tier-packages`,W,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}})).data,onSuccess:()=>{n.invalidateQueries({queryKey:["tier-packages"]}),h(!1),H(),Y("success","Tier package created successfully")},onError:W=>{var ye,pe;const de=((pe=(ye=W.response)==null?void 0:ye.data)==null?void 0:pe.message)||"Failed to create tier package";Y("error",de)}}),S=me({mutationFn:async W=>{const{id:de,...ye}=W;return(await $.put(`${O}/api/tier-packages/${de}`,ye,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}})).data},onSuccess:()=>{n.invalidateQueries({queryKey:["tier-packages"]}),h(!1),H(),Y("success","Tier package updated successfully")},onError:W=>{var ye,pe;const de=((pe=(ye=W.response)==null?void 0:ye.data)==null?void 0:pe.message)||"Failed to update tier package";Y("error",de)}}),re=me({mutationFn:async W=>(await $.post(`${O}/api/tier-packages/${W.tier_id}/features`,{group_name:W.group_name,feature_key:W.feature_key,feature_label:W.feature_label,feature_value:W.feature_value,is_included:W.is_included,sort_order:W.sort_order},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}})).data,onSuccess:()=>{n.invalidateQueries({queryKey:["tier-features-all"]}),v(!1),ce(),Y("success","Feature created successfully")},onError:W=>{var ye,pe;const de=((pe=(ye=W.response)==null?void 0:ye.data)==null?void 0:pe.message)||"Failed to create feature";Y("error",de)}}),le=me({mutationFn:async({id:W,data:de})=>(await $.put(`${O}/api/tier-features/${W}`,de,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}})).data,onSuccess:()=>{n.invalidateQueries({queryKey:["tier-features-all"]}),v(!1),ce(),Y("success","Feature updated successfully")},onError:W=>{var ye,pe;const de=((pe=(ye=W.response)==null?void 0:ye.data)==null?void 0:pe.message)||"Failed to update feature";Y("error",de)}}),Te=me({mutationFn:async W=>{await $.delete(`${O}/api/tier-features/${W}`,{headers:{Authorization:`Bearer ${t}`}})},onSuccess:()=>{n.invalidateQueries({queryKey:["tier-features-all"]}),Y("success","Feature deleted successfully")},onError:W=>{var ye,pe;const de=((pe=(ye=W.response)==null?void 0:ye.data)==null?void 0:pe.message)||"Failed to delete feature";Y("error",de)}}),ke=me({mutationFn:async W=>(await $.post(`${O}/api/tier-packages/${W.tier_id}/deliverables`,{deliverable_group:W.deliverable_group,deliverable_label:W.deliverable_label,sort_order:W.sort_order},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}})).data,onSuccess:()=>{n.invalidateQueries({queryKey:["tier-deliverables-all"]}),N(!1),D(),Y("success","Deliverable created successfully")},onError:W=>{var ye,pe;const de=((pe=(ye=W.response)==null?void 0:ye.data)==null?void 0:pe.message)||"Failed to create deliverable";Y("error",de)}}),We=me({mutationFn:async({id:W,data:de})=>(await $.put(`${O}/api/tier-deliverables/${W}`,de,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}})).data,onSuccess:()=>{n.invalidateQueries({queryKey:["tier-deliverables-all"]}),N(!1),D(),Y("success","Deliverable updated successfully")},onError:W=>{var ye,pe;const de=((pe=(ye=W.response)==null?void 0:ye.data)==null?void 0:pe.message)||"Failed to update deliverable";Y("error",de)}}),F=me({mutationFn:async W=>{await $.delete(`${O}/api/tier-deliverables/${W}`,{headers:{Authorization:`Bearer ${t}`}})},onSuccess:()=>{n.invalidateQueries({queryKey:["tier-deliverables-all"]}),Y("success","Deliverable deleted successfully")},onError:W=>{var ye,pe;const de=((pe=(ye=W.response)==null?void 0:ye.data)==null?void 0:pe.message)||"Failed to delete deliverable";Y("error",de)}}),H=()=>{u({id:null,name:"",slug:"",description:null,revision_limit:0,turnaround_days:1,is_active:!0}),b({})},ce=()=>{p({tier_id:"",group_name:"",feature_key:"",feature_label:"",feature_value:"",is_included:!0,sort_order:0}),w(null)},D=()=>{L({tier_id:"",deliverable_group:"",deliverable_label:"",sort_order:0}),z(null)},X=W=>{W?u({id:W.id,name:W.name,slug:W.slug,description:W.description,revision_limit:W.revision_limit,turnaround_days:W.turnaround_days,is_active:W.is_active}):H(),h(!0)},fe=W=>{W.preventDefault(),b({});const de={};if(m.name.trim()||(de.name="Name is required"),m.slug.trim()||(de.slug="Slug is required"),m.revision_limit<0&&(de.revision_limit="Must be 0 or greater"),m.turnaround_days<1&&(de.turnaround_days="Must be at least 1 day"),Object.keys(de).length>0){b(de);return}if(m.id)S.mutate(m);else{const{id:ye,...pe}=m;ee.mutate(pe)}},ve=(W,de)=>{de?(p({tier_id:de.tier_id,group_name:de.group_name,feature_key:de.feature_key,feature_label:de.feature_label,feature_value:de.feature_value,is_included:de.is_included,sort_order:de.sort_order}),w(de.id)):(ce(),p(ye=>({...ye,tier_id:W}))),v(!0)},qe=W=>{W.preventDefault(),x?le.mutate({id:x,data:y}):re.mutate(y)},Ut=(W,de)=>{de?(L({tier_id:de.tier_id,deliverable_group:de.deliverable_group,deliverable_label:de.deliverable_label,sort_order:de.sort_order}),z(de.id)):(D(),L(ye=>({...ye,tier_id:W}))),N(!0)},us=W=>{W.preventDefault(),E?We.mutate({id:E,data:k}):ke.mutate(k)};j.useEffect(()=>{if(a&&q.length>0){const W=q.find(de=>de.slug===a);W&&(X(W),s.delete("edit_tier"),r(s))}},[a,q]);const es=()=>e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx(Is,{className:"w-8 h-8 animate-spin text-yellow-400"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Loading tier management..."})]})}),As=(W,de)=>{var ye,pe;return e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(we,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-red-900 mb-1",children:"Error Loading Data"}),e.jsx("p",{className:"text-sm text-red-700",children:((pe=(ye=W==null?void 0:W.response)==null?void 0:ye.data)==null?void 0:pe.message)||(W==null?void 0:W.message)||"An unexpected error occurred"})]}),e.jsx("button",{onClick:de,className:"px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-md hover:bg-red-700 transition-colors",children:"Retry"})]})})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Wt,{className:"w-8 h-8 text-black"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-black",children:"Tier Management"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Configure service tiers, features, and deliverables"})]})]}),e.jsxs("button",{onClick:()=>X(),className:"flex items-center gap-2 px-6 py-3 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-all duration-200 shadow-md hover:shadow-lg",children:[e.jsx(Ul,{className:"w-5 h-5"}),"Create New Tier"]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("nav",{className:"flex space-x-8","aria-label":"Tabs",children:[e.jsx("button",{onClick:()=>i("packages"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${l==="packages"?"border-yellow-400 text-black":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Tier Packages"}),e.jsx("button",{onClick:()=>i("features"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${l==="features"?"border-yellow-400 text-black":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Features"}),e.jsx("button",{onClick:()=>i("deliverables"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${l==="deliverables"?"border-yellow-400 text-black":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Deliverables"}),e.jsx("button",{onClick:()=>i("comparison"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${l==="comparison"?"border-yellow-400 text-black":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Comparison Table"})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l==="packages"&&e.jsx("div",{className:"space-y-6",children:A?es():M?As(M,P):q.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12 text-center",children:[e.jsx(Wt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Tier Packages Yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first service tier package to get started"}),e.jsxs("button",{onClick:()=>X(),className:"inline-flex items-center gap-2 px-6 py-3 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-colors",children:[e.jsx(Ul,{className:"w-5 h-5"}),"Create First Tier"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:q.map(W=>e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-shadow duration-200",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-black mb-1",children:W.name}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:W.slug})]}),W.is_active?e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md bg-green-50 text-green-700 text-xs font-medium",children:"Active"}):e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md bg-gray-100 text-gray-600 text-xs font-medium",children:"Inactive"})]}),W.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:W.description}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(kt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-700",children:[Number(W.turnaround_days||0)," day",Number(W.turnaround_days)!==1?"s":""," turnaround"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Gp,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-700",children:[Number(W.revision_limit||0)," revision",Number(W.revision_limit)!==1?"s":""]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:()=>X(W),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-black text-white text-sm font-medium rounded-md hover:bg-gray-800 transition-colors",children:[e.jsx(Os,{className:"w-4 h-4"}),"Edit"]})})]})},W.id))})}),l==="features"&&e.jsx("div",{className:"space-y-6",children:A||V?es():q.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12 text-center",children:[e.jsx(Wt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Tiers Available"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Create tier packages first before adding features"})]}):q.map(W=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-bold text-black",children:[W.name," Features"]}),e.jsxs("button",{onClick:()=>ve(W.id),className:"flex items-center gap-2 px-4 py-2 bg-yellow-400 text-black text-sm font-semibold rounded-md hover:bg-yellow-500 transition-colors",children:[e.jsx(Ul,{className:"w-4 h-4"}),"Add Feature"]})]})}),e.jsx("div",{className:"p-6",children:!C[W.id]||C[W.id].length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ae,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-gray-600",children:"No features defined for this tier"})]}):e.jsx("div",{className:"space-y-4",children:_.map(de=>{const ye=C[W.id].filter(pe=>pe.group_name===de);return ye.length===0?null:e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-2 capitalize",children:de.replace(/_/g," ")}),e.jsx("div",{className:"space-y-2",children:ye.sort((pe,K)=>Number(pe.sort_order||0)-Number(K.sort_order||0)).map(pe=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("input",{type:"checkbox",checked:pe.is_included,readOnly:!0,className:"w-4 h-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:pe.feature_label}),e.jsx("p",{className:"text-xs text-gray-600",children:pe.feature_value})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>ve(W.id,pe),className:"p-2 text-gray-600 hover:text-black transition-colors",title:"Edit feature",children:e.jsx(Os,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{window.confirm("Delete this feature?")&&Te.mutate(pe.id)},className:"p-2 text-red-600 hover:text-red-700 transition-colors",title:"Delete feature",children:e.jsx(ra,{className:"w-4 h-4"})})]})]},pe.id))})]},de)})})})]},W.id))}),l==="deliverables"&&e.jsx("div",{className:"space-y-6",children:A||se?es():q.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12 text-center",children:[e.jsx(Wt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Tiers Available"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Create tier packages first before adding deliverables"})]}):q.map(W=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-bold text-black",children:[W.name," Deliverables"]}),e.jsxs("button",{onClick:()=>Ut(W.id),className:"flex items-center gap-2 px-4 py-2 bg-yellow-400 text-black text-sm font-semibold rounded-md hover:bg-yellow-500 transition-colors",children:[e.jsx(Ul,{className:"w-4 h-4"}),"Add Deliverable"]})]})}),e.jsx("div",{className:"p-6",children:!Z[W.id]||Z[W.id].length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ae,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-gray-600",children:"No deliverables defined for this tier"})]}):e.jsx("div",{className:"space-y-2",children:Z[W.id].sort((de,ye)=>Number(de.sort_order||0)-Number(ye.sort_order||0)).map(de=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:de.deliverable_label}),e.jsxs("p",{className:"text-xs text-gray-600 mt-0.5",children:["Group: ",de.deliverable_group]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>Ut(W.id,de),className:"p-2 text-gray-600 hover:text-black transition-colors",title:"Edit deliverable",children:e.jsx(Os,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{window.confirm("Delete this deliverable?")&&F.mutate(de.id)},className:"p-2 text-red-600 hover:text-red-700 transition-colors",title:"Delete deliverable",children:e.jsx(ra,{className:"w-4 h-4"})})]})]},de.id))})})]},W.id))}),l==="comparison"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-bold text-black",children:"Service Package Comparison"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Customer-facing tier comparison preview"})]}),e.jsx("div",{className:"p-6 overflow-x-auto",children:A||V?es():q.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Wt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No tiers to compare yet"})]}):e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-200",children:[e.jsx("th",{className:"text-left py-4 px-4 font-semibold text-gray-900",children:"Feature"}),q.map(W=>e.jsx("th",{className:"text-center py-4 px-4 font-bold text-gray-900",children:W.name},W.id))]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 text-sm font-medium text-gray-900",children:"Turnaround Time"}),q.map(W=>e.jsxs("td",{className:"text-center py-3 px-4 text-sm text-gray-700",children:[Number(W.turnaround_days||0)," day",Number(W.turnaround_days)!==1?"s":""]},W.id))]}),e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"py-3 px-4 text-sm font-medium text-gray-900",children:"Revisions"}),q.map(W=>e.jsx("td",{className:"text-center py-3 px-4 text-sm text-gray-700",children:Number(W.revision_limit||0)===0?"Unlimited":Number(W.revision_limit||0)},W.id))]}),_.map(W=>q.some(ye=>{var pe;return(pe=C[ye.id])==null?void 0:pe.some(K=>K.group_name===W)})?e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"py-3 px-4 text-sm font-medium text-gray-900 capitalize",children:W.replace(/_/g," ")}),q.map(ye=>{var K;const pe=(K=C[ye.id])==null?void 0:K.find(ge=>ge.group_name===W);return e.jsx("td",{className:"text-center py-3 px-4 text-sm",children:pe?pe.is_included?e.jsx(rt,{className:"w-5 h-5 text-green-600 mx-auto"}):e.jsx(je,{className:"w-5 h-5 text-red-400 mx-auto"}):e.jsx("span",{className:"text-gray-400",children:""})},ye.id)})]},W):null)]})]})})]})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200 sticky top-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold text-black",children:m.id?"Edit Tier Package":"Create Tier Package"}),e.jsx("button",{onClick:()=>{h(!1),H()},className:"p-2 text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx(je,{className:"w-5 h-5"})})]})}),e.jsxs("form",{onSubmit:fe,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Tier Name *"}),e.jsx("input",{type:"text",value:m.name,onChange:W=>{u({...m,name:W.target.value}),b({...g,name:""})},className:`w-full px-4 py-3 rounded-lg border-2 ${g.name?"border-red-500":"border-gray-200"} focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all`,placeholder:"e.g., Basic, Standard, Gold"}),g.name&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:g.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Slug *"}),e.jsx("input",{type:"text",value:m.slug,onChange:W=>{u({...m,slug:W.target.value.toLowerCase().replace(/\s+/g,"-")}),b({...g,slug:""})},className:`w-full px-4 py-3 rounded-lg border-2 ${g.slug?"border-red-500":"border-gray-200"} focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all`,placeholder:"e.g., basic, standard, gold"}),g.slug&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:g.slug})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Description"}),e.jsx("textarea",{value:m.description||"",onChange:W=>{u({...m,description:W.target.value||null})},rows:3,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",placeholder:"Brief description of this tier"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Revision Limit *"}),e.jsx("input",{type:"number",min:"0",value:m.revision_limit,onChange:W=>{u({...m,revision_limit:parseInt(W.target.value)||0}),b({...g,revision_limit:""})},className:`w-full px-4 py-3 rounded-lg border-2 ${g.revision_limit?"border-red-500":"border-gray-200"} focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all`}),g.revision_limit&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:g.revision_limit}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Use 0 for unlimited"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Turnaround Days *"}),e.jsx("input",{type:"number",min:"1",value:m.turnaround_days,onChange:W=>{u({...m,turnaround_days:parseInt(W.target.value)||1}),b({...g,turnaround_days:""})},className:`w-full px-4 py-3 rounded-lg border-2 ${g.turnaround_days?"border-red-500":"border-gray-200"} focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all`}),g.turnaround_days&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:g.turnaround_days})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:m.is_active,onChange:W=>u({...m,is_active:W.target.checked}),className:"w-4 h-4 text-yellow-400 rounded focus:ring-yellow-400"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-gray-900",children:"Active (visible to customers)"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{h(!1),H()},className:"flex-1 px-6 py-3 bg-white border-2 border-gray-300 text-gray-900 font-semibold rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:ee.isPending||S.isPending,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:ee.isPending||S.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Is,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ps,{className:"w-5 h-5"}),m.id?"Update":"Create"," Tier"]})})]})]})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200 sticky top-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold text-black",children:x?"Edit Feature":"Add Feature"}),e.jsx("button",{onClick:()=>{v(!1),ce()},className:"p-2 text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx(je,{className:"w-5 h-5"})})]})}),e.jsxs("form",{onSubmit:qe,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Feature Group *"}),e.jsxs("select",{value:y.group_name,onChange:W=>p({...y,group_name:W.target.value}),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",required:!0,children:[e.jsx("option",{value:"",children:"Select a group"}),_.map(W=>e.jsx("option",{value:W,children:W.replace(/_/g," ").charAt(0).toUpperCase()+W.replace(/_/g," ").slice(1)},W))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Feature Key *"}),e.jsx("input",{type:"text",value:y.feature_key,onChange:W=>p({...y,feature_key:W.target.value}),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",placeholder:"e.g., express_delivery",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Feature Label *"}),e.jsx("input",{type:"text",value:y.feature_label,onChange:W=>p({...y,feature_label:W.target.value}),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",placeholder:"e.g., Express Delivery",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Feature Value *"}),e.jsx("input",{type:"text",value:y.feature_value,onChange:W=>p({...y,feature_value:W.target.value}),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",placeholder:"e.g., 2-3 business days",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Sort Order"}),e.jsx("input",{type:"number",min:"0",value:y.sort_order,onChange:W=>p({...y,sort_order:parseInt(W.target.value)||0}),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"is_included",checked:y.is_included,onChange:W=>p({...y,is_included:W.target.checked}),className:"w-4 h-4 text-yellow-400 rounded focus:ring-yellow-400"}),e.jsx("label",{htmlFor:"is_included",className:"text-sm font-medium text-gray-900",children:"Include this feature"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{v(!1),ce()},className:"flex-1 px-6 py-3 bg-white border-2 border-gray-300 text-gray-900 font-semibold rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:re.isPending||le.isPending,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:re.isPending||le.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Is,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ps,{className:"w-5 h-5"}),x?"Update":"Add"," Feature"]})})]})]})]})}),R&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200 sticky top-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold text-black",children:E?"Edit Deliverable":"Add Deliverable"}),e.jsx("button",{onClick:()=>{N(!1),D()},className:"p-2 text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx(je,{className:"w-5 h-5"})})]})}),e.jsxs("form",{onSubmit:us,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Deliverable Group *"}),e.jsx("input",{type:"text",value:k.deliverable_group,onChange:W=>L({...k,deliverable_group:W.target.value}),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",placeholder:"e.g., Design Files, Print Files, Installation",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Deliverable Label *"}),e.jsx("input",{type:"text",value:k.deliverable_label,onChange:W=>L({...k,deliverable_label:W.target.value}),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",placeholder:"e.g., High-resolution PDF",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Sort Order"}),e.jsx("input",{type:"number",min:"0",value:k.sort_order,onChange:W=>L({...k,sort_order:parseInt(W.target.value)||0}),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{N(!1),D()},className:"flex-1 px-6 py-3 bg-white border-2 border-gray-300 text-gray-900 font-semibold rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:ke.isPending||We.isPending,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:ke.isPending||We.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Is,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ps,{className:"w-5 h-5"}),E?"Update":"Add"," Deliverable"]})})]})]})]})}),o.type&&e.jsx("div",{className:"fixed top-4 right-4 z-50 animate-slide-in-right",children:e.jsxs("div",{className:`flex items-center gap-3 px-6 py-4 rounded-lg shadow-2xl ${o.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:[o.type==="success"?e.jsx(rt,{className:"w-5 h-5 flex-shrink-0"}):e.jsx(we,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("p",{className:"font-medium",children:o.message})]})})]})})},d2=()=>{const t=ae(F=>F.authentication_state.auth_token);ae(F=>F.authentication_state.current_user);const[s,r]=Ye(),a=s.get("section"),[n,l]=j.useState(a==="capacity"||a==="blackout"||a==="emergency"?a:"capacity"),[i,o]=j.useState([]),[c,d]=j.useState(!1),[h,m]=j.useState(null),[u,g]=j.useState({service_id:"",day_of_week:"0",start_time:"09:00",end_time:"17:00",max_standard_slots:"5",max_emergency_slots:"2",is_active:!0}),[b,f]=j.useState(!1),[v,y]=j.useState({date:"",reason:""}),[p,x]=j.useState({enabled:!1,urgent_fee_percentage:20,max_slots_per_day:2}),[w,R]=j.useState(null),N=et(),k="http://localhost:3000/api",{data:L=[],isLoading:E,error:z}=te({queryKey:["calendar-capacity"],queryFn:async()=>((await $.get(`${k}/calendar-capacity`,{headers:{Authorization:`Bearer ${t}`},params:{limit:50,offset:0}})).data.capacity||[]).map(H=>({...H,max_standard_slots:Number(H.max_standard_slots||0),max_emergency_slots:Number(H.max_emergency_slots||0),day_of_week:Number(H.day_of_week)})),enabled:n==="capacity"&&!!t,staleTime:6e4}),{data:_=[],isLoading:O,error:Y}=te({queryKey:["calendar-blackout-dates"],queryFn:async()=>(await $.get(`${k}/calendar-blackout-dates`,{headers:{Authorization:`Bearer ${t}`}})).data.dates||[],enabled:n==="blackout"&&!!t,staleTime:6e4}),{data:q=[]}=te({queryKey:["services-list"],queryFn:async()=>((await $.get(`${k}/services`,{headers:{Authorization:`Bearer ${t}`},params:{is_active:!0,limit:100}})).data.services||[]).map(H=>({id:H.id,name:H.name,slug:H.slug,category_id:H.category_id})),enabled:!!t,staleTime:3e5}),{data:A}=te({queryKey:["emergency-settings"],queryFn:async()=>{const ce=((await $.get(`${k}/system-settings`,{headers:{Authorization:`Bearer ${t}`}})).data.settings||[]).find(D=>D.key==="emergency_booking_settings");return(ce==null?void 0:ce.value)||{enabled:!1,urgent_fee_percentage:20,max_slots_per_day:2}},enabled:n==="emergency"&&!!t,staleTime:6e4,onSuccess:F=>{x({enabled:F.enabled||!1,urgent_fee_percentage:Number(F.urgent_fee_percentage||20),max_slots_per_day:Number(F.max_slots_per_day||2)})}}),M=me({mutationFn:async F=>await $.post(`${k}/calendar-capacity`,F,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),onSuccess:()=>{N.invalidateQueries(["calendar-capacity"]),se("success","Capacity rule created successfully"),d(!1),ee()},onError:F=>{var H,ce;se("error",((ce=(H=F.response)==null?void 0:H.data)==null?void 0:ce.message)||"Failed to create capacity rule")}}),P=me({mutationFn:async({id:F,data:H})=>await $.put(`${k}/calendar-capacity/${F}`,H,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),onSuccess:()=>{N.invalidateQueries(["calendar-capacity"]),se("success","Capacity rule updated successfully"),d(!1),m(null),ee()},onError:F=>{var H,ce;se("error",((ce=(H=F.response)==null?void 0:H.data)==null?void 0:ce.message)||"Failed to update capacity rule")}}),C=me({mutationFn:async F=>await $.delete(`${k}/calendar-capacity/${F}`,{headers:{Authorization:`Bearer ${t}`}}),onSuccess:()=>{N.invalidateQueries(["calendar-capacity"]),se("success","Capacity rule deleted successfully"),R(null)},onError:F=>{var H,ce;se("error",((ce=(H=F.response)==null?void 0:H.data)==null?void 0:ce.message)||"Failed to delete capacity rule")}}),V=me({mutationFn:async F=>await $.post(`${k}/calendar-blackout-dates`,F,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),onSuccess:()=>{N.invalidateQueries(["calendar-blackout-dates"]),se("success","Blackout date added successfully"),f(!1),y({date:"",reason:""})},onError:F=>{var H,ce;se("error",((ce=(H=F.response)==null?void 0:H.data)==null?void 0:ce.message)||"Failed to add blackout date")}}),T=me({mutationFn:async F=>await $.delete(`${k}/calendar-blackout-dates/${F}`,{headers:{Authorization:`Bearer ${t}`}}),onSuccess:()=>{N.invalidateQueries(["calendar-blackout-dates"]),se("success","Blackout date removed successfully"),R(null)},onError:F=>{var H,ce;se("error",((ce=(H=F.response)==null?void 0:H.data)==null?void 0:ce.message)||"Failed to remove blackout date")}}),Z=me({mutationFn:async F=>await $.put(`${k}/system-settings/emergency_booking_settings`,{value:F},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),onSuccess:()=>{N.invalidateQueries(["emergency-settings"]),se("success","Emergency settings updated successfully")},onError:F=>{var H,ce;se("error",((ce=(H=F.response)==null?void 0:H.data)==null?void 0:ce.message)||"Failed to update emergency settings")}}),se=(F,H)=>{const ce=Date.now().toString();o(D=>[...D,{id:ce,type:F,message:H}]),setTimeout(()=>{o(D=>D.filter(X=>X.id!==ce))},3e3)},B=F=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][F]||"Unknown",ee=()=>{g({service_id:"",day_of_week:"0",start_time:"09:00",end_time:"17:00",max_standard_slots:"5",max_emergency_slots:"2",is_active:!0})},S=F=>{l(F),r({section:F})},re=F=>{F.preventDefault();const H={service_id:u.service_id||null,day_of_week:parseInt(u.day_of_week),start_time:u.start_time,end_time:u.end_time,max_standard_slots:parseInt(u.max_standard_slots),max_emergency_slots:parseInt(u.max_emergency_slots),is_active:u.is_active};h?P.mutate({id:h,data:H}):M.mutate(H)},le=F=>{g({service_id:F.service_id||"",day_of_week:F.day_of_week.toString(),start_time:F.start_time,end_time:F.end_time,max_standard_slots:F.max_standard_slots.toString(),max_emergency_slots:F.max_emergency_slots.toString(),is_active:F.is_active}),m(F.id),d(!0)},Te=F=>{F.preventDefault(),V.mutate(v)},ke=F=>{F.preventDefault(),Z.mutate(p)},We=L.reduce((F,H)=>(F[H.day_of_week]||(F[H.day_of_week]=[]),F[H.day_of_week].push(H),F),{});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"max-w-7xl mx-auto mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Calendar & Capacity Management"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Configure booking hours, capacity limits, and blackout dates"})]})})}),e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:i.map(F=>e.jsxs("div",{className:`px-6 py-4 rounded-lg shadow-lg ${F.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"} flex items-center space-x-3`,children:[F.type==="success"?e.jsx(gt,{className:"w-5 h-5"}):e.jsx(we,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:F.message})]},F.id))}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsxs("button",{onClick:()=>S("capacity"),className:`${n==="capacity"?"border-black text-black":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors flex items-center space-x-2`,children:[e.jsx(kt,{className:"w-5 h-5"}),e.jsx("span",{children:"Capacity Rules"})]}),e.jsxs("button",{onClick:()=>S("blackout"),className:`${n==="blackout"?"border-black text-black":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors flex items-center space-x-2`,children:[e.jsx(gt,{className:"w-5 h-5"}),e.jsx("span",{children:"Blackout Dates"})]}),e.jsxs("button",{onClick:()=>S("emergency"),className:`${n==="emergency"?"border-black text-black":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors flex items-center space-x-2`,children:[e.jsx(Ii,{className:"w-5 h-5"}),e.jsx("span",{children:"Emergency Settings"})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[n==="capacity"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Capacity Rules"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Define working hours and booking limits by day of week"})]}),e.jsxs("button",{onClick:()=>{ee(),m(null),d(!0)},className:"flex items-center space-x-2 px-6 py-3 bg-black text-white rounded-lg font-medium hover:bg-gray-800 transition-colors",children:[e.jsx(Nt,{className:"w-5 h-5"}),e.jsx("span",{children:"Add Rule"})]})]}),E&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-black"})}),!E&&L.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(kt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No capacity rules configured yet"})]}),!E&&L.length>0&&e.jsx("div",{className:"space-y-6",children:[0,1,2,3,4,5,6].map(F=>{const H=We[F]||[];return H.length===0?null:e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:B(F)}),e.jsx("div",{className:"space-y-3",children:H.map(ce=>{var D;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Service"}),e.jsx("p",{className:"font-medium text-gray-900",children:ce.service_id?((D=q.find(X=>X.id===ce.service_id))==null?void 0:D.name)||"Unknown Service":"All Services"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Hours"}),e.jsxs("p",{className:"font-medium text-gray-900",children:[ce.start_time," - ",ce.end_time]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Standard Slots"}),e.jsx("p",{className:"font-medium text-gray-900",children:ce.max_standard_slots})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Emergency Slots"}),e.jsx("p",{className:"font-medium text-gray-900",children:ce.max_emergency_slots})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${ce.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:ce.is_active?"Active":"Inactive"}),e.jsx("button",{onClick:()=>le(ce),className:"p-2 text-gray-600 hover:text-black transition-colors",children:e.jsx(ii,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>R({type:"capacity",id:ce.id}),className:"p-2 text-gray-600 hover:text-red-600 transition-colors",children:e.jsx(bx,{className:"w-4 h-4"})})]})]},ce.id)})})]},F)})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:h?"Edit Capacity Rule":"Add Capacity Rule"}),e.jsx("button",{onClick:()=>{d(!1),m(null),ee()},className:"text-gray-400 hover:text-gray-600",children:e.jsx(je,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:re,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Service (optional - leave blank for all services)"}),e.jsxs("select",{value:u.service_id,onChange:F=>g(H=>({...H,service_id:F.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-black focus:ring-4 focus:ring-gray-100 transition-all",children:[e.jsx("option",{value:"",children:"All Services"}),q.map(F=>e.jsx("option",{value:F.id,children:F.name},F.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Day of Week"}),e.jsx("select",{value:u.day_of_week,onChange:F=>g(H=>({...H,day_of_week:F.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-black focus:ring-4 focus:ring-gray-100 transition-all",required:!0,children:[0,1,2,3,4,5,6].map(F=>e.jsx("option",{value:F,children:B(F)},F))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Start Time"}),e.jsx("input",{type:"time",value:u.start_time,onChange:F=>g(H=>({...H,start_time:F.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-black focus:ring-4 focus:ring-gray-100 transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"End Time"}),e.jsx("input",{type:"time",value:u.end_time,onChange:F=>g(H=>({...H,end_time:F.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-black focus:ring-4 focus:ring-gray-100 transition-all",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Max Standard Slots"}),e.jsx("input",{type:"number",min:"0",value:u.max_standard_slots,onChange:F=>g(H=>({...H,max_standard_slots:F.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-black focus:ring-4 focus:ring-gray-100 transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Max Emergency Slots"}),e.jsx("input",{type:"number",min:"0",value:u.max_emergency_slots,onChange:F=>g(H=>({...H,max_emergency_slots:F.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-black focus:ring-4 focus:ring-gray-100 transition-all",required:!0})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:u.is_active,onChange:F=>g(H=>({...H,is_active:F.target.checked})),className:"w-4 h-4 text-black border-gray-300 rounded focus:ring-black"}),e.jsx("label",{htmlFor:"is_active",className:"ml-2 text-sm font-medium text-gray-900",children:"Active"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:M.isLoading||P.isLoading,className:"flex-1 px-6 py-3 bg-black text-white rounded-lg font-medium hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:M.isLoading||P.isLoading?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):h?"Update Rule":"Create Rule"}),e.jsx("button",{type:"button",onClick:()=>{d(!1),m(null),ee()},className:"px-6 py-3 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"})]})]})]})})]}),n==="blackout"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Blackout Dates"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Block specific dates from booking"})]}),e.jsxs("button",{onClick:()=>f(!0),className:"flex items-center space-x-2 px-6 py-3 bg-black text-white rounded-lg font-medium hover:bg-gray-800 transition-colors",children:[e.jsx(Nt,{className:"w-5 h-5"}),e.jsx("span",{children:"Add Blackout Date"})]})]}),O&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-black"})}),!O&&_.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(gt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No blackout dates configured"})]}),!O&&_.length>0&&e.jsx("div",{className:"space-y-3",children:_.map(F=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900 mb-1",children:new Date(F.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsx("p",{className:"text-sm text-gray-600",children:F.reason})]}),e.jsx("button",{onClick:()=>R({type:"blackout",id:F.id}),className:"p-2 text-gray-600 hover:text-red-600 transition-colors",children:e.jsx(bx,{className:"w-5 h-5"})})]},F.id))}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Add Blackout Date"}),e.jsx("button",{onClick:()=>{f(!1),y({date:"",reason:""})},className:"text-gray-400 hover:text-gray-600",children:e.jsx(je,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:Te,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Date"}),e.jsx("input",{type:"date",value:v.date,onChange:F=>y(H=>({...H,date:F.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-black focus:ring-4 focus:ring-gray-100 transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Reason"}),e.jsx("textarea",{value:v.reason,onChange:F=>y(H=>({...H,reason:F.target.value})),rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-black focus:ring-4 focus:ring-gray-100 transition-all",placeholder:"e.g., Public Holiday, Staff Training",required:!0})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:V.isLoading,className:"flex-1 px-6 py-3 bg-black text-white rounded-lg font-medium hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:V.isLoading?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Adding..."]}):"Add Blackout Date"}),e.jsx("button",{type:"button",onClick:()=>{f(!1),y({date:"",reason:""})},className:"px-6 py-3 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"})]})]})]})})]}),n==="emergency"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Emergency Booking Settings"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Configure urgent booking fees and capacity limits"})]}),e.jsxs("form",{onSubmit:ke,className:"space-y-6",children:[e.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-lg p-4 flex items-start space-x-3",children:[e.jsx(os,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-yellow-800 font-medium mb-1",children:"About Emergency Bookings"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Emergency bookings allow customers to request urgent service with additional fees. These settings control availability and pricing for emergency slots."})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"emergency_enabled",checked:p.enabled,onChange:F=>x(H=>({...H,enabled:F.target.checked})),className:"w-5 h-5 text-black border-gray-300 rounded focus:ring-black"}),e.jsx("label",{htmlFor:"emergency_enabled",className:"ml-3 text-sm font-medium text-gray-900",children:"Enable Emergency Bookings"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Urgent Fee Percentage"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:"0",max:"100",step:"1",value:p.urgent_fee_percentage,onChange:F=>x(H=>({...H,urgent_fee_percentage:Number(F.target.value)})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-black focus:ring-4 focus:ring-gray-100 transition-all",required:!0,disabled:!p.enabled}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500",children:"%"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Additional fee percentage applied to emergency bookings (0-100%)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Max Emergency Slots Per Day"}),e.jsx("input",{type:"number",min:"0",step:"1",value:p.max_slots_per_day,onChange:F=>x(H=>({...H,max_slots_per_day:Number(F.target.value)})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-black focus:ring-4 focus:ring-gray-100 transition-all",required:!0,disabled:!p.enabled}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Maximum number of emergency bookings allowed per day (set to 0 for unlimited)"})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:Z.isLoading,className:"w-full px-6 py-3 bg-black text-white rounded-lg font-medium hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:Z.isLoading?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Saving Settings..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ps,{className:"w-5 h-5"}),e.jsx("span",{children:"Save Emergency Settings"})]})})})]})]})]}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(os,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Confirm Delete"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Are you sure you want to delete this ",w.type==="capacity"?"capacity rule":"blackout date","?"]})]})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-6",children:"This action cannot be undone."}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>{w.type==="capacity"?C.mutate(w.id):T.mutate(w.id)},disabled:C.isLoading||T.isLoading,className:"flex-1 px-6 py-3 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:C.isLoading||T.isLoading?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Deleting..."]}):"Delete"}),e.jsx("button",{onClick:()=>R(null),className:"px-6 py-3 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"})]})]})})]})})},u2=async(t,s)=>{const r={limit:20,offset:0,sort_by:"created_at",sort_order:"desc"};t.status&&(r.status=t.status),t.service_id&&(r.service_id=t.service_id);const a=await $.get("http://localhost:3000/api/quotes",{params:r,headers:{Authorization:`Bearer ${s}`}});return{quotes:(a.data.quotes||[]).map(n=>({...n,estimate_subtotal:n.estimate_subtotal?Number(n.estimate_subtotal):null,final_subtotal:n.final_subtotal?Number(n.final_subtotal):null})),total:a.data.total}},m2=async(t,s)=>{const r=await $.get(`http://localhost:3000/api/quotes/${t}`,{headers:{Authorization:`Bearer ${s}`}});return{...r.data,estimate_subtotal:r.data.estimate_subtotal?Number(r.data.estimate_subtotal):null,final_subtotal:r.data.final_subtotal?Number(r.data.final_subtotal):null}},x2=async(t,s)=>(await $.get(`http://localhost:3000/api/quotes/${t}/answers`,{headers:{Authorization:`Bearer ${s}`}})).data.answers||[],h2=async(t,s)=>((await $.get("http://localhost:3000/api/uploads",{params:{quote_id:t,limit:50},headers:{Authorization:`Bearer ${s}`}})).data.uploads||[]).map(a=>({...a,file_size:Number(a.file_size||0)})),p2=async t=>(await $.get("http://localhost:3000/api/services",{params:{is_active:!0,limit:100},headers:{Authorization:`Bearer ${t}`}})).data.services||[],g2=async(t,s,r)=>(await $.post(`http://localhost:3000/api/quotes/${t}/finalize`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,Ql=t=>t==null?"N/A":`${Number(t||0).toFixed(2)}`,f2=t=>{if(t===0)return"0 Bytes";const s=1024,r=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(t)/Math.log(s));return Math.round(t/Math.pow(s,a)*100)/100+" "+r[a]},Nx=t=>new Date(t).toLocaleDateString("en-IE",{year:"numeric",month:"short",day:"numeric"}),_x=t=>({REQUESTED:"bg-yellow-100 text-yellow-800 border-yellow-200",PENDING:"bg-gray-100 text-gray-800 border-gray-200",APPROVED:"bg-white text-black border-black",REJECTED:"bg-black text-white border-white",EXPIRED:"bg-gray-300 text-gray-700 border-gray-400"})[t]||"bg-gray-100 text-gray-800 border-gray-200",kx=t=>({REQUESTED:e.jsx(kt,{className:"w-4 h-4"}),PENDING:e.jsx(we,{className:"w-4 h-4"}),APPROVED:e.jsx(rt,{className:"w-4 h-4"}),REJECTED:e.jsx(Gt,{className:"w-4 h-4"}),EXPIRED:e.jsx(Gt,{className:"w-4 h-4"})})[t]||e.jsx(kt,{className:"w-4 h-4"}),y2=()=>{var Y,q;const t=ae(A=>A.authentication_state.auth_token),s=ae(A=>A.authentication_state.current_user),[r,a]=Ye(),[n,l]=j.useState({status:r.get("status"),service_id:r.get("service_id"),date_range:r.get("date_range")}),[i,o]=j.useState(null),[c,d]=j.useState(!1),[h,m]=j.useState({final_subtotal:"",admin_notes:""}),[u,g]=j.useState(null),b=et();j.useEffect(()=>{const A={};n.status&&(A.status=n.status),n.service_id&&(A.service_id=n.service_id),n.date_range&&(A.date_range=n.date_range),a(A)},[n,a]);const{data:f,isLoading:v,error:y}=te({queryKey:["quotes",n],queryFn:()=>u2(n,t),enabled:!!t,staleTime:6e4,refetchOnWindowFocus:!1,retry:1}),{data:p}=te({queryKey:["services","filter-options"],queryFn:()=>p2(t),enabled:!!t,staleTime:3e5,refetchOnWindowFocus:!1}),{data:x}=te({queryKey:["quote",i],queryFn:()=>m2(i,t),enabled:!!t&&!!i,staleTime:6e4,refetchOnWindowFocus:!1}),{data:w}=te({queryKey:["quote-answers",i],queryFn:()=>x2(i,t),enabled:!!t&&!!i,staleTime:6e4,refetchOnWindowFocus:!1}),{data:R}=te({queryKey:["quote-uploads",i],queryFn:()=>h2(i,t),enabled:!!t&&!!i,staleTime:6e4,refetchOnWindowFocus:!1}),N=me({mutationFn:A=>g2(A.quoteId,{final_subtotal:A.final_subtotal,admin_notes:A.admin_notes},t),onSuccess:()=>{b.invalidateQueries({queryKey:["quotes"]}),b.invalidateQueries({queryKey:["quote",i]}),g({type:"success",message:"Quote finalized successfully! Invoice created and customer notified."}),setTimeout(()=>g(null),5e3),d(!1),o(null),m({final_subtotal:"",admin_notes:""})},onError:A=>{var M,P;g({type:"error",message:((P=(M=A.response)==null?void 0:M.data)==null?void 0:P.message)||"Failed to finalize quote. Please try again."}),setTimeout(()=>g(null),5e3)}}),k=(A,M)=>{l(P=>({...P,[A]:M}))},L=()=>{l({status:null,service_id:null,date_range:null})},E=A=>{o(A),d(!0);const M=f==null?void 0:f.quotes.find(P=>P.id===A);M!=null&&M.estimate_subtotal&&m(P=>({...P,final_subtotal:M.estimate_subtotal.toString()}))},z=()=>{d(!1),o(null),m({final_subtotal:"",admin_notes:""})},_=(A,M)=>{m(P=>({...P,[A]:M}))},O=A=>{A.preventDefault();const M=parseFloat(h.final_subtotal);if(isNaN(M)||M<=0){g({type:"error",message:"Please enter a valid final subtotal amount."}),setTimeout(()=>g(null),3e3);return}N.mutate({quoteId:i,final_subtotal:M,admin_notes:h.admin_notes.trim()||null})};return!s||s.role!=="ADMIN"?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Gt,{className:"mx-auto h-12 w-12 text-red-600"}),e.jsx("h2",{className:"mt-4 text-xl font-bold text-gray-900",children:"Access Denied"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"You do not have permission to access this page."}),e.jsx(ie,{to:"/admin",className:"mt-4 inline-block px-6 py-3 bg-black text-white font-medium rounded-lg hover:bg-gray-800 transition-colors",children:"Back to Dashboard"})]})})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Quote Management"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Review, finalize, and manage customer quote requests"})]}),u&&e.jsxs("div",{className:`fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg flex items-center gap-3 ${u.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:[u.type==="success"?e.jsx(rt,{className:"w-5 h-5"}):e.jsx(Gt,{className:"w-5 h-5"}),e.jsx("span",{children:u.message}),e.jsx("button",{onClick:()=>g(null),className:"ml-4 hover:opacity-80",children:e.jsx(je,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(pn,{className:"w-5 h-5 text-gray-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{id:"status-filter",value:n.status||"",onChange:A=>k("status",A.target.value||null),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-black focus:ring-2 focus:ring-gray-200 focus:outline-none",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"REQUESTED",children:"Requested"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"APPROVED",children:"Approved"}),e.jsx("option",{value:"REJECTED",children:"Rejected"}),e.jsx("option",{value:"EXPIRED",children:"Expired"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"service-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Service"}),e.jsxs("select",{id:"service-filter",value:n.service_id||"",onChange:A=>k("service_id",A.target.value||null),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-black focus:ring-2 focus:ring-gray-200 focus:outline-none",children:[e.jsx("option",{value:"",children:"All Services"}),(p||[]).map(A=>e.jsx("option",{value:A.id,children:A.name},A.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),e.jsxs("select",{id:"date-filter",value:n.date_range||"",onChange:A=>k("date_range",A.target.value||null),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-black focus:ring-2 focus:ring-gray-200 focus:outline-none",children:[e.jsx("option",{value:"",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"Last 7 Days"}),e.jsx("option",{value:"month",children:"Last 30 Days"}),e.jsx("option",{value:"quarter",children:"Last 90 Days"})]})]})]}),(n.status||n.service_id||n.date_range)&&e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:L,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-lg hover:bg-gray-200 transition-colors",children:"Clear All Filters"})})]}),v?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(A=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]},A))}):y?e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[e.jsx(Gt,{className:"mx-auto h-12 w-12 text-red-600 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Error Loading Quotes"}),e.jsx("p",{className:"text-red-700",children:((q=(Y=y.response)==null?void 0:Y.data)==null?void 0:q.message)||"Failed to load quotes. Please try again."})]}):!(f!=null&&f.quotes)||f.quotes.length===0?e.jsxs("div",{className:"bg-white border-2 border-dashed border-gray-300 rounded-lg p-12 text-center",children:[e.jsx(Ae,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Quotes Found"}),e.jsx("p",{className:"text-gray-600",children:n.status||n.service_id||n.date_range?"Try adjusting your filters to see more results.":"No quote requests yet. Check back later."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:["Showing ",f.quotes.length," of ",f.total," quotes"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.quotes.map(A=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:A.id}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Created ",Nx(A.created_at)]})]}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold border ${_x(A.status)}`,children:[kx(A.status),A.status]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Or,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:"Customer:"}),e.jsx("span",{className:"font-medium text-gray-900",children:A.customer_id})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Wt,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:"Service:"}),e.jsx("span",{className:"font-medium text-gray-900",children:A.service_id})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Gs,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:"Estimate:"}),e.jsx("span",{className:"font-bold text-gray-900",children:Ql(A.estimate_subtotal)})]}),A.final_subtotal&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(rt,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-gray-600",children:"Final:"}),e.jsx("span",{className:"font-bold text-green-600",children:Ql(A.final_subtotal)})]})]}),e.jsx("button",{onClick:()=>E(A.id),className:"w-full px-4 py-2 bg-black text-white font-medium rounded-lg hover:bg-gray-800 transition-colors",children:"View Details"})]},A.id))})]}),c&&i&&x&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:z}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between z-10",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Quote Details - ",x.id]}),e.jsx("button",{onClick:z,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(je,{className:"w-6 h-6 text-gray-600"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm font-semibold border ${_x(x.status)}`,children:[kx(x.status),x.status]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Created ",Nx(x.created_at)]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(Or,{className:"w-5 h-5"}),"Customer Information"]}),e.jsx("div",{className:"space-y-2 text-sm",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Customer ID:"}),e.jsx("span",{className:"font-medium text-gray-900",children:x.customer_id})]})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(Wt,{className:"w-5 h-5"}),"Service Configuration"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Service ID:"}),e.jsx("span",{className:"font-medium text-gray-900",children:x.service_id})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Tier:"}),e.jsx("span",{className:"font-medium text-gray-900",children:x.tier_id||"Not selected"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Estimate:"}),e.jsx("span",{className:"font-bold text-gray-900",children:Ql(x.estimate_subtotal)})]})]})]}),w&&w.length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Configuration Answers"}),e.jsx("div",{className:"space-y-3",children:w.map(A=>e.jsxs("div",{className:"bg-white rounded p-3 border border-gray-200",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:A.option_key}),e.jsx("div",{className:"text-sm text-gray-900",children:typeof A.value=="object"?JSON.stringify(A.value,null,2):String(A.value)})]},A.id))})]}),R&&R.length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(lw,{className:"w-5 h-5"}),"Uploaded Files (",R.length,")"]}),e.jsx("div",{className:"space-y-2",children:R.map(A=>e.jsxs("div",{className:"bg-white rounded p-3 border border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ae,{className:"w-5 h-5 text-gray-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.file_name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[f2(A.file_size),"  ",A.file_type,A.dpi_warning&&e.jsx("span",{className:"ml-2 text-yellow-600 font-medium",children:" Low DPI"})]})]})]}),e.jsx("a",{href:A.file_url,target:"_blank",rel:"noopener noreferrer",className:"p-2 hover:bg-gray-100 rounded transition-colors",children:e.jsx(Da,{className:"w-5 h-5 text-gray-600"})})]},A.id))})]}),x.notes&&e.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 border border-yellow-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Customer Notes"}),e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:x.notes})]}),x.admin_notes&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Admin Notes (Internal)"}),e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:x.admin_notes})]}),(x.status==="REQUESTED"||x.status==="PENDING")&&e.jsxs("form",{onSubmit:O,className:"bg-green-50 rounded-lg p-6 border-2 border-green-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(rt,{className:"w-5 h-5 text-green-600"}),"Finalize Quote"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"final_subtotal",className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Subtotal () *"}),e.jsx("input",{type:"number",id:"final_subtotal",step:"0.01",min:"0",required:!0,value:h.final_subtotal,onChange:A=>_("final_subtotal",A.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-green-600 focus:ring-4 focus:ring-green-100 focus:outline-none",placeholder:"Enter final amount"}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Estimated: ",Ql(x.estimate_subtotal)]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"admin_notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Notes (Internal)"}),e.jsx("textarea",{id:"admin_notes",rows:3,value:h.admin_notes,onChange:A=>_("admin_notes",A.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-green-600 focus:ring-4 focus:ring-green-100 focus:outline-none",placeholder:"Optional notes for internal reference..."})]}),e.jsx("button",{type:"submit",disabled:N.isPending,className:"w-full px-6 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center gap-2",children:N.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Finalizing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(rt,{className:"w-5 h-5"}),"Finalize Quote & Create Invoice"]})}),e.jsx("p",{className:"text-xs text-gray-600 text-center",children:"This will approve the quote, create an invoice, and notify the customer"})]})]})]}),e.jsx("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end",children:e.jsx("button",{onClick:z,className:"px-6 py-2 bg-gray-200 text-gray-700 font-medium rounded-lg hover:bg-gray-300 transition-colors",children:"Close"})})]})]})})]})})})},b2=async(t,s,r=20,a=0)=>{const n={limit:r,offset:a,sort_by:"created_at",sort_order:"desc"};return s.status&&(n.status=s.status),s.assigned_staff&&(n.assigned_staff_id=s.assigned_staff),s.tier&&(n.tier_id=s.tier),(await $.get("http://localhost:3000/api/orders",{headers:{Authorization:`Bearer ${t}`},params:n})).data.orders||[]},v2=async(t,s)=>(await $.get("http://localhost:3000/api/payments",{headers:{Authorization:`Bearer ${t}`},params:{order_id:s,sort_by:"created_at",sort_order:"desc"}})).data.payments||[],j2=async t=>(await $.get("http://localhost:3000/api/users",{headers:{Authorization:`Bearer ${t}`},params:{role:"STAFF",status:"ACTIVE",limit:100}})).data.users.map(r=>{var a,n;return{id:((a=r.staff_profile)==null?void 0:a.id)||r.id,user_id:r.id,user_name:r.name,department:((n=r.staff_profile)==null?void 0:n.department)||null}}),w2=async t=>(await $.get("http://localhost:3000/api/tier-packages",{headers:{Authorization:`Bearer ${t}`},params:{is_active:!0}})).data.tiers.map(r=>({id:r.id,name:r.name,slug:r.slug})),N2=async(t,s,r)=>(await $.put(`http://localhost:3000/api/orders/${s}`,{assigned_staff_id:r},{headers:{Authorization:`Bearer ${t}`}})).data,_2=async(t,s,r)=>(await $.put(`http://localhost:3000/api/orders/${s}`,{status:r},{headers:{Authorization:`Bearer ${t}`}})).data,k2=async(t,s,r,a)=>(await $.post(`http://localhost:3000/api/payments/${s}/refund`,{amount:r,reason:a},{headers:{Authorization:`Bearer ${t}`}})).data,S2=()=>{const t=ae(S=>S.authentication_state.auth_token);ae(S=>S.authentication_state.current_user);const[s,r]=Ye(),[a,n]=j.useState({status:s.get("status"),assigned_staff:s.get("assigned_staff"),tier:s.get("tier"),payment_status:s.get("payment_status")}),[l,i]=j.useState([]),[o,c]=j.useState(null),[d,h]=j.useState(!1),[m,u]=j.useState(!1),[g,b]=j.useState({payment_id:null,amount:null,reason:null}),[f,v]=j.useState(null),[y,p]=j.useState("overview"),x=et();j.useEffect(()=>{const S={};a.status&&(S.status=a.status),a.assigned_staff&&(S.assigned_staff=a.assigned_staff),a.tier&&(S.tier=a.tier),a.payment_status&&(S.payment_status=a.payment_status),r(S)},[a,r]);const{data:w=[],isLoading:R}=te({queryKey:["orders",a],queryFn:()=>b2(t,a),enabled:!!t,staleTime:3e4}),{data:N=[]}=te({queryKey:["staff-list"],queryFn:()=>j2(t),enabled:!!t,staleTime:3e5}),{data:k=[]}=te({queryKey:["tier-packages"],queryFn:()=>w2(t),enabled:!!t,staleTime:3e5}),{data:L=[]}=te({queryKey:["order-payments",o==null?void 0:o.id],queryFn:()=>v2(t,o.id),enabled:!!t&&!!(o!=null&&o.id),staleTime:1e4}),E=me({mutationFn:({orderId:S,staffId:re})=>N2(t,S,re),onSuccess:()=>{x.invalidateQueries({queryKey:["orders"]}),v({type:"success",message:"Order assigned successfully"}),setTimeout(()=>v(null),3e3)},onError:S=>{var re,le;v({type:"error",message:((le=(re=S.response)==null?void 0:re.data)==null?void 0:le.message)||"Failed to assign order"}),setTimeout(()=>v(null),3e3)}}),z=me({mutationFn:({orderId:S,status:re})=>_2(t,S,re),onSuccess:()=>{x.invalidateQueries({queryKey:["orders"]}),v({type:"success",message:"Order status updated successfully"}),setTimeout(()=>v(null),3e3)},onError:S=>{var re,le;v({type:"error",message:((le=(re=S.response)==null?void 0:re.data)==null?void 0:le.message)||"Failed to update order status"}),setTimeout(()=>v(null),3e3)}}),_=me({mutationFn:()=>k2(t,g.payment_id,g.amount,g.reason),onSuccess:()=>{x.invalidateQueries({queryKey:["order-payments"]}),u(!1),b({payment_id:null,amount:null,reason:null}),v({type:"success",message:"Refund processed successfully"}),setTimeout(()=>v(null),3e3)},onError:S=>{var re,le;v({type:"error",message:((le=(re=S.response)==null?void 0:re.data)==null?void 0:le.message)||"Failed to process refund"}),setTimeout(()=>v(null),3e3)}}),O=(S,re)=>{n(le=>({...le,[S]:re}))},Y=()=>{n({status:null,assigned_staff:null,tier:null,payment_status:null})},q=async S=>{c(S),h(!0),p("overview")},A=()=>{h(!1),c(null)},M=S=>{i(re=>re.includes(S)?re.filter(le=>le!==S):[...re,S])},P=()=>{l.length===w.length?i([]):i(w.map(S=>S.id))},C=async S=>{if(l.length!==0)try{await Promise.all(l.map(re=>E.mutateAsync({orderId:re,staffId:S}))),i([])}catch{}},V=async S=>{if(l.length!==0)try{await Promise.all(l.map(re=>z.mutateAsync({orderId:re,status:S}))),i([])}catch{}},T=S=>{b({payment_id:S.id,amount:Number(S.amount),reason:null}),u(!0)},Z=()=>{g.payment_id&&g.amount&&g.reason&&_.mutate()},se=S=>({QUOTE_REQUESTED:"bg-yellow-100 text-yellow-800 border-yellow-300",QUOTE_APPROVED:"bg-blue-100 text-blue-800 border-blue-300",IN_PRODUCTION:"bg-purple-100 text-purple-800 border-purple-300",PROOF_SENT:"bg-indigo-100 text-indigo-800 border-indigo-300",REVISION_REQUESTED:"bg-orange-100 text-orange-800 border-orange-300",COMPLETED:"bg-green-100 text-green-800 border-green-300",CANCELLED:"bg-gray-100 text-gray-800 border-gray-300"})[S]||"bg-gray-100 text-gray-800 border-gray-300",B=S=>{const re=Number(S.total_amount||0)-Number(S.balance_due||0),le=Number(S.total_amount||0);return re>=le?"bg-green-100 text-green-800 border-green-300":re>0?"bg-yellow-100 text-yellow-800 border-yellow-300":"bg-red-100 text-red-800 border-red-300"},ee=S=>{const re=Number(S.total_amount||0)-Number(S.balance_due||0),le=Number(S.total_amount||0);return re>=le?"Paid":re>0?"Partial":"Unpaid"};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[f&&e.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg ${f.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:f.message}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Order Management"})})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Status"}),e.jsxs("select",{value:a.status||"",onChange:S=>O("status",S.target.value||null),className:"w-full px-4 py-2 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"QUOTE_REQUESTED",children:"Quote Requested"}),e.jsx("option",{value:"QUOTE_APPROVED",children:"Quote Approved"}),e.jsx("option",{value:"IN_PRODUCTION",children:"In Production"}),e.jsx("option",{value:"PROOF_SENT",children:"Proof Sent"}),e.jsx("option",{value:"REVISION_REQUESTED",children:"Revision Requested"}),e.jsx("option",{value:"COMPLETED",children:"Completed"}),e.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Assigned Staff"}),e.jsxs("select",{value:a.assigned_staff||"",onChange:S=>O("assigned_staff",S.target.value||null),className:"w-full px-4 py-2 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",children:[e.jsx("option",{value:"",children:"All Staff"}),e.jsx("option",{value:"unassigned",children:"Unassigned"}),N.map(S=>e.jsx("option",{value:S.id,children:S.user_name},S.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Service Tier"}),e.jsxs("select",{value:a.tier||"",onChange:S=>O("tier",S.target.value||null),className:"w-full px-4 py-2 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",children:[e.jsx("option",{value:"",children:"All Tiers"}),k.map(S=>e.jsx("option",{value:S.id,children:S.name},S.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Payment Status"}),e.jsxs("select",{value:a.payment_status||"",onChange:S=>O("payment_status",S.target.value||null),className:"w-full px-4 py-2 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",children:[e.jsx("option",{value:"",children:"All Payments"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"partial",children:"Partial"}),e.jsx("option",{value:"unpaid",children:"Unpaid"})]})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:Y,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Clear Filters"})})]})}),l.length>0&&e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-4",children:e.jsxs("div",{className:"bg-yellow-50 border border-yellow-300 rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[l.length," order",l.length!==1?"s":""," selected"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("select",{onChange:S=>{S.target.value&&(C(S.target.value==="unassign"?null:S.target.value),S.target.value="")},className:"px-4 py-2 text-sm rounded-lg border border-gray-300 bg-white",children:[e.jsx("option",{value:"",children:"Assign to Staff..."}),e.jsx("option",{value:"unassign",children:"Unassign"}),N.map(S=>e.jsx("option",{value:S.id,children:S.user_name},S.id))]}),e.jsxs("select",{onChange:S=>{S.target.value&&(V(S.target.value),S.target.value="")},className:"px-4 py-2 text-sm rounded-lg border border-gray-300 bg-white",children:[e.jsx("option",{value:"",children:"Update Status..."}),e.jsx("option",{value:"IN_PRODUCTION",children:"In Production"}),e.jsx("option",{value:"PROOF_SENT",children:"Proof Sent"}),e.jsx("option",{value:"COMPLETED",children:"Completed"}),e.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-8",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:R?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-yellow-400"})}):w.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500 text-lg",children:"No orders found"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-12 px-6 py-3",children:e.jsx("input",{type:"checkbox",checked:l.length===w.length,onChange:P,className:"h-4 w-4 rounded border-gray-300 text-yellow-400 focus:ring-yellow-400"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-900 uppercase tracking-wider",children:"Order #"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-900 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-900 uppercase tracking-wider",children:"Service"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-900 uppercase tracking-wider",children:"Tier"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-900 uppercase tracking-wider",children:"Staff"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-900 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-900 uppercase tracking-wider",children:"Due Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-900 uppercase tracking-wider",children:"Payment"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-900 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(S=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:l.includes(S.id),onChange:()=>M(S.id),className:"h-4 w-4 rounded border-gray-300 text-yellow-400 focus:ring-yellow-400"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:S.order_number})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:S.customer_name||"N/A"}),e.jsx("div",{className:"text-xs text-gray-500",children:S.customer_email||""})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:S.service_name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:S.tier_name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:S.staff_name||"Unassigned"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full border ${se(S.status)}`,children:S.status.replace(/_/g," ")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:S.due_at?new Date(S.due_at).toLocaleDateString():"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full border ${B(S)}`,children:ee(S)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("button",{onClick:()=>q(S),className:"text-yellow-600 hover:text-yellow-800 font-medium",children:"View Details"})})]},S.id))})]})})})}),d&&o&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:A}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Order ",o.order_number]}),e.jsx("button",{onClick:A,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:[e.jsx("button",{onClick:()=>p("overview"),className:`py-4 px-1 border-b-2 font-semibold text-sm ${y==="overview"?"border-yellow-400 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Overview"}),e.jsx("button",{onClick:()=>p("payments"),className:`py-4 px-1 border-b-2 font-semibold text-sm ${y==="payments"?"border-yellow-400 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Payment History"}),e.jsx("button",{onClick:()=>p("audit"),className:`py-4 px-1 border-b-2 font-semibold text-sm ${y==="audit"?"border-yellow-400 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Audit Log"})]})}),e.jsxs("div",{className:"px-6 py-6 max-h-96 overflow-y-auto",children:[y==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-1",children:"Status"}),e.jsx("span",{className:`inline-block px-3 py-1 text-xs font-semibold rounded-full border ${se(o.status)}`,children:o.status.replace(/_/g," ")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-1",children:"Due Date"}),e.jsx("p",{className:"text-sm text-gray-900",children:o.due_at?new Date(o.due_at).toLocaleDateString():"Not set"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-1",children:"Total Amount"}),e.jsxs("p",{className:"text-sm text-gray-900",children:["",Number(o.total_amount||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-1",children:"Balance Due"}),e.jsxs("p",{className:"text-sm text-gray-900",children:["",Number(o.balance_due||0).toFixed(2)]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-4",children:"Admin Controls"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Assign to Staff"}),e.jsxs("select",{value:o.assigned_staff_id||"",onChange:S=>E.mutate({orderId:o.id,staffId:S.target.value||null}),className:"w-full px-4 py-2 rounded-lg border-2 border-gray-200 focus:border-yellow-400",children:[e.jsx("option",{value:"",children:"Unassigned"}),N.map(S=>e.jsx("option",{value:S.id,children:S.user_name},S.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Update Status"}),e.jsxs("select",{value:o.status,onChange:S=>z.mutate({orderId:o.id,status:S.target.value}),className:"w-full px-4 py-2 rounded-lg border-2 border-gray-200 focus:border-yellow-400",children:[e.jsx("option",{value:"QUOTE_REQUESTED",children:"Quote Requested"}),e.jsx("option",{value:"QUOTE_APPROVED",children:"Quote Approved"}),e.jsx("option",{value:"IN_PRODUCTION",children:"In Production"}),e.jsx("option",{value:"PROOF_SENT",children:"Proof Sent"}),e.jsx("option",{value:"REVISION_REQUESTED",children:"Revision Requested"}),e.jsx("option",{value:"COMPLETED",children:"Completed"}),e.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]})]})]})]}),y==="payments"&&e.jsx("div",{className:"space-y-4",children:L.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No payments found"}):L.map(S=>e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["",Number(S.amount||0).toFixed(2)," - ",S.method.replace(/_/g," ")]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(S.created_at).toLocaleString()}),e.jsx("span",{className:`inline-block mt-2 px-2 py-1 text-xs font-semibold rounded-full ${S.status==="COMPLETED"?"bg-green-100 text-green-800":S.status==="REFUNDED"||S.status==="FAILED"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:S.status})]}),S.status==="COMPLETED"&&e.jsx("button",{onClick:()=>T(S),className:"px-4 py-2 text-sm font-medium text-red-700 hover:text-red-900",children:"Process Refund"})]})},S.id))}),y==="audit"&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Audit log coming soon"})})]})]})]})}),m&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>u(!1)}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Process Refund"})}),e.jsxs("div",{className:"px-6 py-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Refund Amount"}),e.jsx("input",{type:"number",step:"0.01",value:g.amount||"",onChange:S=>b(re=>({...re,amount:S.target.value?parseFloat(S.target.value):null})),className:"w-full px-4 py-2 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Reason for Refund"}),e.jsx("textarea",{value:g.reason||"",onChange:S=>b(re=>({...re,reason:S.target.value||null})),rows:4,className:"w-full px-4 py-2 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100",placeholder:"Explain the reason for this refund..."})]})]}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:Z,disabled:!g.amount||!g.reason||_.isPending,className:"px-6 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:_.isPending?"Processing...":"Process Refund"})]})]})]})})]})})},C2=()=>{const[t,s]=Ye(),r=ae(C=>C.authentication_state.auth_token),a=ae(C=>C.authentication_state.current_user),[n,l]=j.useState(null),[i,o]=j.useState(!1),[c,d]=j.useState(!1),[h,m]=j.useState(!1),[u,g]=j.useState(null),[b,f]=j.useState({role:t.get("role")||null,status:t.get("status")||null,search:t.get("search")||""}),[v,y]=j.useState({email:"",name:"",role:"CUSTOMER",phone:"",company_name:"",department:"",permissions:{}}),[p,x]=j.useState({name:"",email:"",role:"CUSTOMER",status:"ACTIVE"}),w=et();j.useEffect(()=>{if(u){const C=setTimeout(()=>g(null),5e3);return()=>clearTimeout(C)}},[u]),j.useEffect(()=>{const C=new URLSearchParams;b.role&&C.set("role",b.role),b.status&&C.set("status",b.status),b.search&&C.set("search",b.search),s(C)},[b,s]);const{data:R,isLoading:N,error:k}=te({queryKey:["users",b],queryFn:async()=>{const C=new URLSearchParams;return b.role&&C.append("role",b.role),b.status&&C.append("status",b.status),b.search&&C.append("query",b.search),C.append("limit","50"),C.append("offset","0"),C.append("sort_by","name"),C.append("sort_order","asc"),(await $.get(`http://localhost:3000/api/users?${C.toString()}`,{headers:{Authorization:`Bearer ${r}`}})).data.users},staleTime:6e4,refetchOnWindowFocus:!1,retry:1,enabled:!!r}),L=async C=>{var V,T;try{const Z=await $.get(`http://localhost:3000/api/users/${C}`,{headers:{Authorization:`Bearer ${r}`}});l(Z.data),x({name:Z.data.name,email:Z.data.email,role:Z.data.role,status:Z.data.status}),d(!0)}catch(Z){g({type:"error",message:((T=(V=Z.response)==null?void 0:V.data)==null?void 0:T.message)||"Failed to fetch user details"})}},E=me({mutationFn:async C=>{const V=`Temp${Math.random().toString(36).slice(2,10)}!`;return(await $.post("http://localhost:3000/api/auth/register",{...C,password:V},{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data},onSuccess:()=>{w.invalidateQueries({queryKey:["users"]}),o(!1),y({email:"",name:"",role:"CUSTOMER",phone:"",company_name:"",department:"",permissions:{}}),g({type:"success",message:"User created successfully. Temporary password sent to email."})},onError:C=>{var V,T;g({type:"error",message:((T=(V=C.response)==null?void 0:V.data)==null?void 0:T.message)||"Failed to create user"})}}),z=me({mutationFn:async({userId:C,payload:V})=>(await $.put(`http://localhost:3000/api/users/${C}`,V,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,onSuccess:()=>{w.invalidateQueries({queryKey:["users"]}),d(!1),l(null),g({type:"success",message:"User updated successfully"})},onError:C=>{var V,T;g({type:"error",message:((T=(V=C.response)==null?void 0:V.data)==null?void 0:T.message)||"Failed to update user"})}}),_=me({mutationFn:async C=>{await $.delete(`http://localhost:3000/api/users/${C}`,{headers:{Authorization:`Bearer ${r}`}})},onSuccess:()=>{w.invalidateQueries({queryKey:["users"]}),m(!1),l(null),g({type:"success",message:"User deleted successfully"})},onError:C=>{var V,T;g({type:"error",message:((T=(V=C.response)==null?void 0:V.data)==null?void 0:T.message)||"Failed to delete user"})}}),O=(C,V)=>{f(T=>({...T,[C]:V}))},Y=C=>{C.preventDefault();const V={email:v.email,name:v.name,role:v.role};v.role==="CUSTOMER"&&(v.phone&&(V.phone=v.phone),v.company_name&&(V.company_name=v.company_name)),E.mutate(V)},q=C=>{C.preventDefault(),n&&z.mutate({userId:n.id,payload:p})},A=()=>{n&&_.mutate(n.id)},M=C=>{const V={ADMIN:"bg-yellow-400 text-black",STAFF:"bg-gray-800 text-white",CUSTOMER:"bg-gray-200 text-gray-800"};return V[C]||V.CUSTOMER},P=C=>{const V={ACTIVE:"bg-green-600 text-white",INACTIVE:"bg-gray-400 text-white",SUSPENDED:"bg-red-600 text-white"};return V[C]||V.INACTIVE};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold text-black",children:"User Management"}),e.jsx("button",{onClick:()=>o(!0),className:"px-6 py-3 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-all duration-200 shadow-lg hover:shadow-xl",children:"Create New User"})]})})}),u&&e.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg ${u.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:u.message}),e.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-black mb-2",children:"Search Users"}),e.jsx("input",{type:"text",value:b.search,onChange:C=>O("search",C.target.value),placeholder:"Search by name or email...",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-black mb-2",children:"Filter by Role"}),e.jsxs("select",{value:b.role||"",onChange:C=>O("role",C.target.value||null),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",children:[e.jsx("option",{value:"",children:"All Roles"}),e.jsx("option",{value:"CUSTOMER",children:"Customer"}),e.jsx("option",{value:"STAFF",children:"Staff"}),e.jsx("option",{value:"ADMIN",children:"Admin"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-black mb-2",children:"Filter by Status"}),e.jsxs("select",{value:b.status||"",onChange:C=>O("status",C.target.value||null),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"}),e.jsx("option",{value:"SUSPENDED",children:"Suspended"})]})]})]}),(b.role||b.status||b.search)&&e.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-gray-200",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600",children:"Active Filters:"}),b.role&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-gray-800 text-white text-sm rounded-full",children:["Role: ",b.role,e.jsx("button",{onClick:()=>O("role",null),className:"hover:text-gray-300",children:""})]}),b.status&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-gray-800 text-white text-sm rounded-full",children:["Status: ",b.status,e.jsx("button",{onClick:()=>O("status",null),className:"hover:text-gray-300",children:""})]}),b.search&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-gray-800 text-white text-sm rounded-full",children:['Search: "',b.search,'"',e.jsx("button",{onClick:()=>O("search",""),className:"hover:text-gray-300",children:""})]}),e.jsx("button",{onClick:()=>f({role:null,status:null,search:""}),className:"ml-2 text-sm text-red-600 hover:text-red-700 font-medium",children:"Clear All"})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:N?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-yellow-400"})}):k?e.jsx("div",{className:"py-12 text-center",children:e.jsx("p",{className:"text-red-600",children:"Failed to load users. Please try again."})}):!R||R.length===0?e.jsx("div",{className:"py-12 text-center",children:e.jsx("p",{className:"text-gray-600",children:"No users found matching your criteria."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-900 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-900 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-900 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-900 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-gray-900 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map(C=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-black",children:C.name}),e.jsx("div",{className:"text-sm text-gray-600",children:C.email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${M(C.role)}`,children:C.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${P(C.status)}`,children:C.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:new Date(C.created_at).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>L(C.id),className:"text-yellow-600 hover:text-yellow-700 font-semibold mr-4",children:"Edit"}),e.jsx("button",{onClick:()=>{l(C),m(!0)},className:"text-red-600 hover:text-red-700 font-semibold disabled:opacity-50 disabled:cursor-not-allowed",disabled:C.id===(a==null?void 0:a.id),children:"Delete"})]})]},C.id))})]})})})]}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-black",children:"Create New User"}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("form",{onSubmit:Y,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-black mb-2",children:"User Role *"}),e.jsxs("select",{value:v.role,onChange:C=>y(V=>({...V,role:C.target.value})),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100",required:!0,children:[e.jsx("option",{value:"CUSTOMER",children:"Customer"}),e.jsx("option",{value:"STAFF",children:"Staff"}),e.jsx("option",{value:"ADMIN",children:"Admin"})]}),v.role==="ADMIN"&&e.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-700 font-semibold",children:" Warning: Admin users have full system access. Only create admin accounts for trusted personnel."})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-black mb-2",children:"Full Name *"}),e.jsx("input",{type:"text",value:v.name,onChange:C=>y(V=>({...V,name:C.target.value})),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-black mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",value:v.email,onChange:C=>y(V=>({...V,email:C.target.value})),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100",required:!0}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"A temporary password will be sent to this email address"})]}),v.role==="CUSTOMER"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-black mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",value:v.phone,onChange:C=>y(V=>({...V,phone:C.target.value})),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-black mb-2",children:"Company Name"}),e.jsx("input",{type:"text",value:v.company_name,onChange:C=>y(V=>({...V,company_name:C.target.value})),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100"})]})]}),v.role==="STAFF"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-black mb-2",children:"Department"}),e.jsx("input",{type:"text",value:v.department,onChange:C=>y(V=>({...V,department:C.target.value})),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100",placeholder:"e.g., Design, Production, Administration"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Permissions can be configured after user creation"})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{type:"submit",disabled:E.isPending,className:"flex-1 px-6 py-3 bg-yellow-400 text-black font-bold rounded-lg hover:bg-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:E.isPending?"Creating...":"Create User"}),e.jsx("button",{type:"button",onClick:()=>o(!1),className:"flex-1 px-6 py-3 bg-gray-200 text-black font-bold rounded-lg hover:bg-gray-300 transition-all duration-200",children:"Cancel"})]})]})]})}),c&&n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-black",children:"Edit User"}),e.jsx("button",{onClick:()=>{d(!1),l(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("form",{onSubmit:q,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-black mb-2",children:"Full Name *"}),e.jsx("input",{type:"text",value:p.name,onChange:C=>x(V=>({...V,name:C.target.value})),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-black mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",value:p.email,onChange:C=>x(V=>({...V,email:C.target.value})),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-black mb-2",children:"User Role *"}),e.jsxs("select",{value:p.role,onChange:C=>x(V=>({...V,role:C.target.value})),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100",required:!0,children:[e.jsx("option",{value:"CUSTOMER",children:"Customer"}),e.jsx("option",{value:"STAFF",children:"Staff"}),e.jsx("option",{value:"ADMIN",children:"Admin"})]}),p.role==="ADMIN"&&n.role!=="ADMIN"&&e.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-700 font-semibold",children:" Warning: Changing to Admin role grants full system access."})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-black mb-2",children:"Account Status *"}),e.jsxs("select",{value:p.status,onChange:C=>x(V=>({...V,status:C.target.value})),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100",required:!0,children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"}),e.jsx("option",{value:"SUSPENDED",children:"Suspended"})]}),p.status!=="ACTIVE"&&e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Note: Inactive/Suspended users cannot log in to the system"})]}),n.customer_profile&&e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("h3",{className:"text-sm font-bold text-black mb-2",children:"Customer Profile"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[n.customer_profile.phone&&e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",n.customer_profile.phone]}),n.customer_profile.company_name&&e.jsxs("p",{children:[e.jsx("strong",{children:"Company:"})," ",n.customer_profile.company_name]}),n.customer_profile.address&&e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",n.customer_profile.address]})]})]}),n.staff_profile&&e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("h3",{className:"text-sm font-bold text-black mb-2",children:"Staff Profile"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[n.staff_profile.department&&e.jsxs("p",{children:[e.jsx("strong",{children:"Department:"})," ",n.staff_profile.department]}),n.staff_profile.permissions&&e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:"Permissions:"}),e.jsx("ul",{className:"ml-4 list-disc",children:Object.entries(n.staff_profile.permissions).map(([C,V])=>e.jsxs("li",{children:[C,": ",V?"Enabled":"Disabled"]},C))})]})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{type:"submit",disabled:z.isPending,className:"flex-1 px-6 py-3 bg-yellow-400 text-black font-bold rounded-lg hover:bg-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:z.isPending?"Updating...":"Update User"}),e.jsx("button",{type:"button",onClick:()=>{d(!1),l(null)},className:"flex-1 px-6 py-3 bg-gray-200 text-black font-bold rounded-lg hover:bg-gray-300 transition-all duration-200",children:"Cancel"})]})]})]})}),h&&n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-black mb-4",children:"Delete User"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete ",e.jsx("strong",{children:n.name})," (",n.email,")? This action cannot be undone."]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:A,disabled:_.isPending,className:"flex-1 px-6 py-3 bg-red-600 text-white font-bold rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:_.isPending?"Deleting...":"Delete User"}),e.jsx("button",{onClick:()=>{m(!1),l(null)},className:"flex-1 px-6 py-3 bg-gray-200 text-black font-bold rounded-lg hover:bg-gray-300 transition-all duration-200",children:"Cancel"})]})]})})]})})},E2=async t=>(await $.get("http://localhost:3000/api/content-pages",{headers:{Authorization:`Bearer ${t}`}})).data.pages||[],F2=async(t,s)=>(await $.get(`http://localhost:3000/api/content-pages/${t}`,{headers:{Authorization:`Bearer ${s}`}})).data,P2=async(t,s,r)=>(await $.put(`http://localhost:3000/api/content-pages/${t}`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,T2=async t=>(await $.get("http://localhost:3000/api/gallery-items",{params:{limit:100,offset:0,sort_by:"sort_order",sort_order:"asc"},headers:{Authorization:`Bearer ${t}`}})).data.items||[],R2=async(t,s)=>(await $.post("http://localhost:3000/api/gallery-items",t,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,O2=async(t,s,r)=>(await $.put(`http://localhost:3000/api/gallery-items/${t}`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,A2=async(t,s)=>{await $.delete(`http://localhost:3000/api/gallery-items/${t}`,{headers:{Authorization:`Bearer ${s}`}})},L2=async t=>(await $.get("http://localhost:3000/api/case-studies",{params:{limit:100,sort_by:"created_at",sort_order:"desc"},headers:{Authorization:`Bearer ${t}`}})).data.case_studies||[],M2=async(t,s)=>(await $.post("http://localhost:3000/api/case-studies",t,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,D2=async(t,s,r)=>(await $.put(`http://localhost:3000/api/case-studies/${t}`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,$2=async t=>(await $.get("http://localhost:3000/api/services",{params:{is_active:!0,limit:100,sort_by:"name"},headers:{Authorization:`Bearer ${t}`}})).data.services.map(r=>({id:r.id,name:r.name,slug:r.slug,category_id:r.category_id})),q2=()=>{const[t,s]=Ye(),r=et(),a=ae(F=>F.authentication_state.auth_token);ae(F=>F.authentication_state.current_user);const n=t.get("tab")||"about_us",[l,i]=j.useState(n),[o,c]=j.useState(null),[d,h]=j.useState(!1),[m,u]=j.useState(null),[g,b]=j.useState({image_url:"",title:null,tag:null,category:null,service_id:null,case_study_id:null,is_visible:!0,sort_order:0}),[f,v]=j.useState(!1),[y,p]=j.useState(null),[x,w]=j.useState({title:"",slug:"",client_name:null,description:"",service_ids:[],tier_id:null,image_urls:[]}),[R,N]=j.useState(null);j.useEffect(()=>{const F=t.get("tab")||"about_us";i(F)},[t]);const{data:k=[],isLoading:L}=te({queryKey:["content-pages"],queryFn:()=>E2(a),staleTime:5*60*1e3,enabled:!!a}),{data:E,isLoading:z}=te({queryKey:["content-page-detail",l],queryFn:()=>F2(l,a),staleTime:5*60*1e3,enabled:!!a&&(l==="about_us"||l==="how_it_works"||l==="footer")}),{data:_=[],isLoading:O}=te({queryKey:["gallery-items"],queryFn:()=>T2(a),staleTime:5*60*1e3,enabled:!!a&&l==="gallery"}),{data:Y=[]}=te({queryKey:["case-studies"],queryFn:()=>L2(a),staleTime:5*60*1e3,enabled:!!a&&l==="gallery"}),{data:q=[]}=te({queryKey:["services-for-association"],queryFn:()=>$2(a),staleTime:10*60*1e3,enabled:!!a&&l==="gallery"}),A=me({mutationFn:F=>P2(F.pageKey,{title:F.title,content:F.content},a),onSuccess:()=>{r.invalidateQueries({queryKey:["content-page-detail"]}),N({type:"success",message:"Content updated successfully!"}),setTimeout(()=>N(null),3e3)},onError:F=>{var H,ce;N({type:"error",message:((ce=(H=F.response)==null?void 0:H.data)==null?void 0:ce.message)||"Failed to update content"}),setTimeout(()=>N(null),5e3)}}),M=me({mutationFn:F=>R2(F,a),onSuccess:()=>{r.invalidateQueries({queryKey:["gallery-items"]}),h(!1),se(),N({type:"success",message:"Gallery item created successfully!"}),setTimeout(()=>N(null),3e3)},onError:F=>{var H,ce;N({type:"error",message:((ce=(H=F.response)==null?void 0:H.data)==null?void 0:ce.message)||"Failed to create gallery item"}),setTimeout(()=>N(null),5e3)}}),P=me({mutationFn:F=>O2(F.id,F.updates,a),onSuccess:()=>{r.invalidateQueries({queryKey:["gallery-items"]}),h(!1),u(null),se(),N({type:"success",message:"Gallery item updated successfully!"}),setTimeout(()=>N(null),3e3)},onError:F=>{var H,ce;N({type:"error",message:((ce=(H=F.response)==null?void 0:H.data)==null?void 0:ce.message)||"Failed to update gallery item"}),setTimeout(()=>N(null),5e3)}}),C=me({mutationFn:F=>A2(F,a),onSuccess:()=>{r.invalidateQueries({queryKey:["gallery-items"]}),N({type:"success",message:"Gallery item deleted successfully!"}),setTimeout(()=>N(null),3e3)},onError:F=>{var H,ce;N({type:"error",message:((ce=(H=F.response)==null?void 0:H.data)==null?void 0:ce.message)||"Failed to delete gallery item"}),setTimeout(()=>N(null),5e3)}}),V=me({mutationFn:F=>M2(F,a),onSuccess:()=>{r.invalidateQueries({queryKey:["case-studies"]}),v(!1),B(),N({type:"success",message:"Case study created successfully!"}),setTimeout(()=>N(null),3e3)},onError:F=>{var H,ce;N({type:"error",message:((ce=(H=F.response)==null?void 0:H.data)==null?void 0:ce.message)||"Failed to create case study"}),setTimeout(()=>N(null),5e3)}}),T=me({mutationFn:F=>D2(F.id,F.updates,a),onSuccess:()=>{r.invalidateQueries({queryKey:["case-studies"]}),v(!1),p(null),B(),N({type:"success",message:"Case study updated successfully!"}),setTimeout(()=>N(null),3e3)},onError:F=>{var H,ce;N({type:"error",message:((ce=(H=F.response)==null?void 0:H.data)==null?void 0:ce.message)||"Failed to update case study"}),setTimeout(()=>N(null),5e3)}}),Z=F=>{s({tab:F}),i(F)},se=()=>{b({image_url:"",title:null,tag:null,category:null,service_id:null,case_study_id:null,is_visible:!0,sort_order:0})},B=()=>{w({title:"",slug:"",client_name:null,description:"",service_ids:[],tier_id:null,image_urls:[]})},ee=F=>{F?(u(F),b({image_url:F.image_url,title:F.title,tag:F.tag,category:F.category,service_id:F.service_id,case_study_id:F.case_study_id,is_visible:F.is_visible,sort_order:F.sort_order})):(u(null),se()),h(!0)},S=()=>{m?P.mutate({id:m.id,updates:g}):M.mutate(g)},re=F=>{window.confirm("Are you sure you want to delete this gallery item?")&&C.mutate(F)},le=F=>{P.mutate({id:F.id,updates:{is_visible:!F.is_visible}})},Te=F=>{F?(p(F),w({title:F.title,slug:F.slug,client_name:F.client_name,description:F.description,service_ids:F.service_ids,tier_id:F.tier_id,image_urls:F.image_urls})):(p(null),B()),v(!0)},ke=()=>{y?T.mutate({id:y.id,updates:x}):V.mutate(x)},We=()=>{E&&o&&A.mutate({pageKey:l,title:o.title||E.title,content:o.content||E.content})};return j.useEffect(()=>{E&&c({title:E.title,content:E.content})},[E]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[R&&e.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg transition-all ${R.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[R.type==="success"?e.jsx(Lt,{className:"w-5 h-5"}):e.jsx(we,{className:"w-5 h-5"}),e.jsx("p",{className:"font-medium",children:R.message})]})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Content Management"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Manage website content, gallery, and marketing materials"})]}),e.jsx(ie,{to:"/admin",className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Back to Dashboard"})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("nav",{className:"flex space-x-8","aria-label":"Tabs",children:[e.jsx("button",{onClick:()=>Z("about_us"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${l==="about_us"?"border-yellow-400 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(iw,{className:"w-4 h-4"}),"About Us"]})}),e.jsx("button",{onClick:()=>Z("how_it_works"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${l==="how_it_works"?"border-yellow-400 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-4 h-4"}),"How It Works"]})}),e.jsx("button",{onClick:()=>Z("gallery"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${l==="gallery"?"border-yellow-400 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pr,{className:"w-4 h-4"}),"Gallery"]})}),e.jsx("button",{onClick:()=>Z("footer"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${l==="footer"?"border-yellow-400 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dw,{className:"w-4 h-4"}),"Footer"]})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l==="about_us"&&e.jsx("div",{className:"space-y-6",children:z?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"About Us Content"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Page Title"}),e.jsx("input",{type:"text",value:(o==null?void 0:o.title)||"",onChange:F=>c(H=>({...H,title:F.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content (JSON)"}),e.jsx("textarea",{value:JSON.stringify((o==null?void 0:o.content)||{},null,2),onChange:F=>{try{const H=JSON.parse(F.target.value);c(ce=>({...ce,content:H}))}catch{}},rows:20,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent font-mono text-sm"}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Edit the JSON content for the About Us page. Be careful with formatting."})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:We,disabled:A.isPending,className:"px-6 py-3 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:A.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-black"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ps,{className:"w-4 h-4"}),"Save Changes"]})})})]})})}),l==="how_it_works"&&e.jsx("div",{className:"space-y-6",children:z?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"How It Works Content"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Page Title"}),e.jsx("input",{type:"text",value:(o==null?void 0:o.title)||"",onChange:F=>c(H=>({...H,title:F.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content (JSON)"}),e.jsx("textarea",{value:JSON.stringify((o==null?void 0:o.content)||{},null,2),onChange:F=>{try{const H=JSON.parse(F.target.value);c(ce=>({...ce,content:H}))}catch{}},rows:20,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent font-mono text-sm"}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Edit the JSON content for the How It Works page. Include steps array with title, description, and icon."})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:We,disabled:A.isPending,className:"px-6 py-3 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:A.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-black"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ps,{className:"w-4 h-4"}),"Save Changes"]})})})]})})}),l==="gallery"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Gallery Items"}),e.jsxs("button",{onClick:()=>ee(),className:"px-4 py-2 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-colors flex items-center gap-2",children:[e.jsx(Nt,{className:"w-4 h-4"}),"Add Gallery Item"]})]}),O?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):_.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Pr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No gallery items yet. Add your first one!"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(F=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"relative aspect-video bg-gray-100",children:[F.image_url?e.jsx("img",{src:F.image_url,alt:F.title||"Gallery item",className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(Pr,{className:"w-12 h-12 text-gray-400"})}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("button",{onClick:()=>le(F),className:`p-2 rounded-full ${F.is_visible?"bg-green-600 text-white":"bg-red-600 text-white"}`,title:F.is_visible?"Visible":"Hidden",children:F.is_visible?e.jsx(zn,{className:"w-4 h-4"}):e.jsx(In,{className:"w-4 h-4"})})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:F.title||"Untitled"}),F.tag&&e.jsx("span",{className:"inline-block px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded",children:F.tag}),F.category&&e.jsx("span",{className:"inline-block ml-2 px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded",children:F.category}),e.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>ee(F),className:"flex-1 px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Os,{className:"w-4 h-4"}),"Edit"]}),e.jsx("button",{onClick:()=>re(F.id),className:"px-3 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 transition-colors",children:e.jsx(ra,{className:"w-4 h-4"})})]})]})]},F.id))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Case Studies"}),e.jsxs("button",{onClick:()=>Te(),className:"px-4 py-2 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-colors flex items-center gap-2",children:[e.jsx(Nt,{className:"w-4 h-4"}),"Add Case Study"]})]}),Y.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ae,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No case studies yet. Add your first one!"})]}):e.jsx("div",{className:"space-y-4",children:Y.map(F=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:F.title}),F.client_name&&e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Client: ",F.client_name]}),e.jsx("p",{className:"text-sm text-gray-700 line-clamp-2 mb-3",children:F.description}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[F.service_ids.length," services"]}),e.jsx("span",{className:"text-xs text-gray-500",children:""}),e.jsxs("span",{className:"text-xs text-gray-500",children:[F.image_urls.length," images"]})]})]}),e.jsx("div",{className:"flex items-center gap-2 ml-4",children:e.jsx("button",{onClick:()=>Te(F),className:"px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:e.jsx(Os,{className:"w-4 h-4"})})})]})},F.id))})]})]}),l==="footer"&&e.jsx("div",{className:"space-y-6",children:z?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Footer Content"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content (JSON)"}),e.jsx("textarea",{value:JSON.stringify((o==null?void 0:o.content)||{},null,2),onChange:F=>{try{const H=JSON.parse(F.target.value);c(ce=>({...ce,content:H}))}catch{}},rows:20,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent font-mono text-sm"}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Edit footer content including contact info, social links, and office hours."})]})}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:We,disabled:A.isPending,className:"px-6 py-3 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:A.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-black"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ps,{className:"w-4 h-4"}),"Save Changes"]})})})]})})})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:m?"Edit Gallery Item":"Add Gallery Item"}),e.jsx("button",{onClick:()=>{h(!1),u(null),se()},className:"text-gray-400 hover:text-gray-600",children:e.jsx(je,{className:"w-6 h-6"})})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image URL *"}),e.jsx("input",{type:"url",required:!0,value:g.image_url,onChange:F=>b(H=>({...H,image_url:F.target.value})),placeholder:"https://example.com/image.jpg",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),e.jsx("input",{type:"text",value:g.title||"",onChange:F=>b(H=>({...H,title:F.target.value||null})),placeholder:"Optional title",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tag"}),e.jsx("input",{type:"text",value:g.tag||"",onChange:F=>b(H=>({...H,tag:F.target.value||null})),placeholder:"e.g., premium",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsx("input",{type:"text",value:g.category||"",onChange:F=>b(H=>({...H,category:F.target.value||null})),placeholder:"e.g., vehicle-graphics",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Associated Service"}),e.jsxs("select",{value:g.service_id||"",onChange:F=>b(H=>({...H,service_id:F.target.value||null})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",children:[e.jsx("option",{value:"",children:"None"}),q.map(F=>e.jsx("option",{value:F.id,children:F.name},F.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Case Study"}),e.jsxs("select",{value:g.case_study_id||"",onChange:F=>b(H=>({...H,case_study_id:F.target.value||null})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",children:[e.jsx("option",{value:"",children:"None"}),Y.map(F=>e.jsx("option",{value:F.id,children:F.title},F.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort Order"}),e.jsx("input",{type:"number",value:g.sort_order,onChange:F=>b(H=>({...H,sort_order:parseInt(F.target.value)||0})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Visibility"}),e.jsxs("div",{className:"flex items-center h-10",children:[e.jsx("input",{type:"checkbox",checked:g.is_visible,onChange:F=>b(H=>({...H,is_visible:F.target.checked})),className:"w-4 h-4 text-yellow-400 border-gray-300 rounded focus:ring-yellow-400"}),e.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Visible on website"})]})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{h(!1),u(null),se()},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:S,disabled:!g.image_url||M.isPending||P.isPending,className:"px-6 py-2 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:M.isPending||P.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-black"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ps,{className:"w-4 h-4"}),m?"Update":"Create"]})})]})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:y?"Edit Case Study":"Add Case Study"}),e.jsx("button",{onClick:()=>{v(!1),p(null),B()},className:"text-gray-400 hover:text-gray-600",children:e.jsx(je,{className:"w-6 h-6"})})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),e.jsx("input",{type:"text",required:!0,value:x.title,onChange:F=>w(H=>({...H,title:F.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Slug *"}),e.jsx("input",{type:"text",required:!0,value:x.slug,onChange:F=>w(H=>({...H,slug:F.target.value.toLowerCase().replace(/\s+/g,"-")})),placeholder:"case-study-slug",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client Name"}),e.jsx("input",{type:"text",value:x.client_name||"",onChange:F=>w(H=>({...H,client_name:F.target.value||null})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),e.jsx("textarea",{required:!0,value:x.description,onChange:F=>w(H=>({...H,description:F.target.value})),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image URLs (comma-separated) *"}),e.jsx("textarea",{required:!0,value:x.image_urls.join(", "),onChange:F=>w(H=>({...H,image_urls:F.target.value.split(",").map(ce=>ce.trim())})),rows:3,placeholder:"https://example.com/image1.jpg, https://example.com/image2.jpg",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{v(!1),p(null),B()},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:ke,disabled:!x.title||!x.slug||!x.description||x.image_urls.length===0||V.isPending||T.isPending,className:"px-6 py-2 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:V.isPending||T.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-black"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ps,{className:"w-4 h-4"}),y?"Update":"Create"]})})]})]})})]})})},I2=()=>{const t=ae(q=>q.authentication_state.auth_token);ae(q=>q.authentication_state.current_user);const s=ae(q=>q.load_system_config),r=ae(q=>q.load_feature_flags),[a,n]=j.useState("company_info"),[l,i]=j.useState({name:"",email:"",phone:"",address:null}),[o,c]=j.useState({b2b_accounts:!1,inventory_management:!1,analytics_dashboard:!1,sla_scheduling:!1}),[d,h]=j.useState({enabled:!1,test_mode:!0,publishable_key:"",secret_key:""}),[m,u]=j.useState({smtp_enabled:!1,smtp_host:"",smtp_port:587,notification_templates:{}}),[g,b]=j.useState({rate_limit_requests_per_minute:60,audit_log_retention_days:90}),[f,v]=j.useState({}),[y,p]=j.useState(null),[x,w]=j.useState({show:!1,action:"",callback:()=>{}}),R=et(),{isLoading:N}=te({queryKey:["systemSettings"],queryFn:async()=>(await $.get("http://localhost:3000/api/system-settings",{headers:{Authorization:`Bearer ${t}`}})).data,enabled:!!t,staleTime:5*60*1e3,onSuccess:q=>{const A=q.settings.find(T=>T.key==="company_info"),M=q.settings.find(T=>T.key==="feature_flags"),P=q.settings.find(T=>T.key==="stripe_config"),C=q.settings.find(T=>T.key==="email_settings"),V=q.settings.find(T=>T.key==="security_settings");A&&i(A.value),M&&c(M.value),P&&h(P.value),C&&u(C.value),V&&b(V.value)}}),k=me({mutationFn:async({key:q,value:A})=>(await $.put(`http://localhost:3000/api/system-settings/${q}`,{value:A},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,onSuccess:(q,A)=>{R.invalidateQueries({queryKey:["systemSettings"]}),A.key==="feature_flags"?r(A.value):(A.key==="company_info"||A.key==="stripe_config")&&s({...A.key==="company_info"&&{company_info:A.value},...A.key==="stripe_config"&&{stripe_enabled:A.value.enabled}}),p({type:"success",message:"Settings saved successfully"}),setTimeout(()=>p(null),3e3),v({})},onError:q=>{var A,M;p({type:"error",message:((M=(A=q.response)==null?void 0:A.data)==null?void 0:M.message)||"Failed to save settings"}),setTimeout(()=>p(null),5e3)}}),L=()=>{const q={};if(l.name.trim()||(q.name="Company name is required"),l.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)||(q.email="Invalid email format"):q.email="Email is required",l.phone.trim()||(q.phone="Phone is required"),Object.keys(q).length>0){v(q);return}k.mutate({key:"company_info",value:l})},E=q=>{const A=!o[q];w({show:!0,action:`${A?"Enable":"Disable"} ${q.replace(/_/g," ")}?`,callback:()=>{const M={...o,[q]:A};c(M),k.mutate({key:"feature_flags",value:M}),w({show:!1,action:"",callback:()=>{}})}})},z=()=>{const q={};if(d.enabled&&(d.publishable_key.trim()||(q.publishable_key="Publishable key is required"),d.secret_key.trim()||(q.secret_key="Secret key is required")),Object.keys(q).length>0){v(q);return}d.enabled&&!d.test_mode?w({show:!0,action:"Switch to LIVE payment mode? This will process real transactions.",callback:()=>{k.mutate({key:"stripe_config",value:d}),w({show:!1,action:"",callback:()=>{}})}}):k.mutate({key:"stripe_config",value:d})},_=()=>{const q={};if(m.smtp_enabled&&(m.smtp_host.trim()||(q.smtp_host="SMTP host is required"),(m.smtp_port<1||m.smtp_port>65535)&&(q.smtp_port="Invalid port number")),Object.keys(q).length>0){v(q);return}k.mutate({key:"email_settings",value:m})},O=()=>{const q={};if(g.rate_limit_requests_per_minute<1&&(q.rate_limit="Rate limit must be at least 1"),g.audit_log_retention_days<1&&(q.audit_retention="Retention period must be at least 1 day"),Object.keys(q).length>0){v(q);return}k.mutate({key:"security_settings",value:g})},Y=q=>q?q.length<=4?"":""+q.slice(-4):"";return N?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-yellow-400"}),e.jsx("p",{className:"text-gray-900 text-lg font-medium",children:"Loading settings..."})]})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Settings"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage global system configuration and feature flags"})]})}),y&&e.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg ${y.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:e.jsx("p",{className:"font-medium",children:y.message})}),x.show&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6 shadow-xl",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Confirm Action"}),e.jsx("p",{className:"text-gray-600 mb-6",children:x.action}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>w({show:!1,action:"",callback:()=>{}}),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:x.callback,className:"px-4 py-2 text-white bg-yellow-400 rounded-lg hover:bg-yellow-500 transition-colors font-medium",children:"Confirm"})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"lg:w-64 flex-shrink-0",children:e.jsxs("nav",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("button",{onClick:()=>n("company_info"),className:`w-full text-left px-6 py-4 border-l-4 ${a==="company_info"?"border-yellow-400 bg-yellow-50 text-gray-900 font-semibold":"border-transparent hover:bg-gray-50 text-gray-700"} transition-all`,children:"Company Information"}),e.jsxs("button",{onClick:()=>n("feature_flags"),className:`w-full text-left px-6 py-4 border-l-4 ${a==="feature_flags"?"border-yellow-400 bg-yellow-50 text-gray-900 font-semibold":"border-transparent hover:bg-gray-50 text-gray-700"} transition-all`,children:["Feature Flags",e.jsx("span",{className:"ml-2 text-xs bg-yellow-400 text-black px-2 py-1 rounded",children:"Phase 2"})]}),e.jsx("button",{onClick:()=>n("payments"),className:`w-full text-left px-6 py-4 border-l-4 ${a==="payments"?"border-yellow-400 bg-yellow-50 text-gray-900 font-semibold":"border-transparent hover:bg-gray-50 text-gray-700"} transition-all`,children:"Payment Settings"}),e.jsx("button",{onClick:()=>n("email"),className:`w-full text-left px-6 py-4 border-l-4 ${a==="email"?"border-yellow-400 bg-yellow-50 text-gray-900 font-semibold":"border-transparent hover:bg-gray-50 text-gray-700"} transition-all`,children:"Email Settings"}),e.jsx("button",{onClick:()=>n("security"),className:`w-full text-left px-6 py-4 border-l-4 ${a==="security"?"border-yellow-400 bg-yellow-50 text-gray-900 font-semibold":"border-transparent hover:bg-gray-50 text-gray-700"} transition-all`,children:"Security"})]})}),e.jsxs("div",{className:"flex-1",children:[a==="company_info"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Company Information"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"company_name",className:"block text-sm font-bold text-gray-900 mb-2",children:"Company Name *"}),e.jsx("input",{id:"company_name",type:"text",value:l.name,onChange:q=>{i({...l,name:q.target.value}),v({...f,name:""})},className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-yellow-100 ${f.name?"border-red-500":"border-gray-200 focus:border-black"}`,placeholder:"SultanStamp"}),f.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"company_email",className:"block text-sm font-bold text-gray-900 mb-2",children:"Email *"}),e.jsx("input",{id:"company_email",type:"email",value:l.email,onChange:q=>{i({...l,email:q.target.value}),v({...f,email:""})},className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-yellow-100 ${f.email?"border-red-500":"border-gray-200 focus:border-black"}`,placeholder:"info@sultanstamp.com"}),f.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"company_phone",className:"block text-sm font-bold text-gray-900 mb-2",children:"Phone *"}),e.jsx("input",{id:"company_phone",type:"tel",value:l.phone,onChange:q=>{i({...l,phone:q.target.value}),v({...f,phone:""})},className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-yellow-100 ${f.phone?"border-red-500":"border-gray-200 focus:border-black"}`,placeholder:"+353 87 470 0356"}),f.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.phone})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"company_address",className:"block text-sm font-bold text-gray-900 mb-2",children:"Address (Optional)"}),e.jsx("textarea",{id:"company_address",value:l.address||"",onChange:q=>i({...l,address:q.target.value||null}),rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-yellow-100 focus:border-black",placeholder:"Dublin, Ireland"})]}),e.jsx("button",{onClick:L,disabled:k.isLoading,className:"px-6 py-3 bg-yellow-400 text-black font-bold rounded-lg hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:k.isLoading?"Saving...":"Save Company Information"})]})]}),a==="feature_flags"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Phase 2 Feature Flags"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Enable or disable advanced features (Phase 2)"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"B2B Accounts Management"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Enable corporate account management with contract pricing"})]}),e.jsx("button",{onClick:()=>E("b2b_accounts"),className:`relative inline-flex h-8 w-16 items-center rounded-full transition-colors ${o.b2b_accounts?"bg-yellow-400":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${o.b2b_accounts?"translate-x-9":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Inventory Management"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Track materials, consumption rules, and purchase orders"})]}),e.jsx("button",{onClick:()=>E("inventory_management"),className:`relative inline-flex h-8 w-16 items-center rounded-full transition-colors ${o.inventory_management?"bg-yellow-400":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${o.inventory_management?"translate-x-9":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Analytics Dashboard"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Business intelligence with conversion funnels and reports"})]}),e.jsx("button",{onClick:()=>E("analytics_dashboard"),className:`relative inline-flex h-8 w-16 items-center rounded-full transition-colors ${o.analytics_dashboard?"bg-yellow-400":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${o.analytics_dashboard?"translate-x-9":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"SLA Scheduling"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Priority scheduling with SLA timers and breach alerts"})]}),e.jsx("button",{onClick:()=>E("sla_scheduling"),className:`relative inline-flex h-8 w-16 items-center rounded-full transition-colors ${o.sla_scheduling?"bg-yellow-400":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${o.sla_scheduling?"translate-x-9":"translate-x-1"}`})})]})]})]}),a==="payments"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Payment Integration (Stripe)"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Enable Stripe Payments"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Accept online payments via Stripe"})]}),e.jsx("button",{onClick:()=>h({...d,enabled:!d.enabled}),className:`relative inline-flex h-8 w-16 items-center rounded-full transition-colors ${d.enabled?"bg-yellow-400":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${d.enabled?"translate-x-9":"translate-x-1"}`})})]}),d.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg bg-yellow-50",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Test Mode"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Use test API keys (no real charges)"})]}),e.jsx("button",{onClick:()=>h({...d,test_mode:!d.test_mode}),className:`relative inline-flex h-8 w-16 items-center rounded-full transition-colors ${d.test_mode?"bg-yellow-400":"bg-red-600"}`,children:e.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${d.test_mode?"translate-x-9":"translate-x-1"}`})})]}),!d.test_mode&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-700 font-semibold",children:" Live Mode: Real transactions will be processed"})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"publishable_key",className:"block text-sm font-bold text-gray-900 mb-2",children:"Publishable Key *"}),e.jsx("input",{id:"publishable_key",type:"text",value:d.publishable_key,onChange:q=>{h({...d,publishable_key:q.target.value}),v({...f,publishable_key:""})},className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-yellow-100 font-mono text-sm ${f.publishable_key?"border-red-500":"border-gray-200 focus:border-black"}`,placeholder:"pk_test_..."}),f.publishable_key&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.publishable_key})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"secret_key",className:"block text-sm font-bold text-gray-900 mb-2",children:"Secret Key *"}),e.jsx("input",{id:"secret_key",type:"password",value:d.secret_key,onChange:q=>{h({...d,secret_key:q.target.value}),v({...f,secret_key:""})},className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-yellow-100 font-mono text-sm ${f.secret_key?"border-red-500":"border-gray-200 focus:border-black"}`,placeholder:"sk_test_..."}),f.secret_key&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.secret_key}),d.secret_key&&e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Stored securely: ",Y(d.secret_key)]})]})]}),e.jsx("button",{onClick:z,disabled:k.isLoading,className:"px-6 py-3 bg-yellow-400 text-black font-bold rounded-lg hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:k.isLoading?"Saving...":"Save Payment Settings"})]})]}),a==="email"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Email & Notifications"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Enable SMTP"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Send email notifications via SMTP server"})]}),e.jsx("button",{onClick:()=>u({...m,smtp_enabled:!m.smtp_enabled}),className:`relative inline-flex h-8 w-16 items-center rounded-full transition-colors ${m.smtp_enabled?"bg-yellow-400":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${m.smtp_enabled?"translate-x-9":"translate-x-1"}`})})]}),m.smtp_enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"smtp_host",className:"block text-sm font-bold text-gray-900 mb-2",children:"SMTP Host *"}),e.jsx("input",{id:"smtp_host",type:"text",value:m.smtp_host,onChange:q=>{u({...m,smtp_host:q.target.value}),v({...f,smtp_host:""})},className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-yellow-100 ${f.smtp_host?"border-red-500":"border-gray-200 focus:border-black"}`,placeholder:"smtp.gmail.com"}),f.smtp_host&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.smtp_host})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"smtp_port",className:"block text-sm font-bold text-gray-900 mb-2",children:"SMTP Port *"}),e.jsx("input",{id:"smtp_port",type:"number",value:m.smtp_port,onChange:q=>{u({...m,smtp_port:parseInt(q.target.value)||587}),v({...f,smtp_port:""})},className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-yellow-100 ${f.smtp_port?"border-red-500":"border-gray-200 focus:border-black"}`,placeholder:"587"}),f.smtp_port&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.smtp_port})]})]}),e.jsx("button",{onClick:_,disabled:k.isLoading,className:"px-6 py-3 bg-yellow-400 text-black font-bold rounded-lg hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:k.isLoading?"Saving...":"Save Email Settings"})]})]}),a==="security"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Security Configuration"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"rate_limit",className:"block text-sm font-bold text-gray-900 mb-2",children:"Rate Limit (requests per minute)"}),e.jsx("input",{id:"rate_limit",type:"number",value:g.rate_limit_requests_per_minute,onChange:q=>{b({...g,rate_limit_requests_per_minute:parseInt(q.target.value)||60}),v({...f,rate_limit:""})},className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-yellow-100 ${f.rate_limit?"border-red-500":"border-gray-200 focus:border-black"}`,placeholder:"60"}),f.rate_limit&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.rate_limit}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Maximum API requests per minute per IP address"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"audit_retention",className:"block text-sm font-bold text-gray-900 mb-2",children:"Audit Log Retention (days)"}),e.jsx("input",{id:"audit_retention",type:"number",value:g.audit_log_retention_days,onChange:q=>{b({...g,audit_log_retention_days:parseInt(q.target.value)||90}),v({...f,audit_retention:""})},className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-yellow-100 ${f.audit_retention?"border-red-500":"border-gray-200 focus:border-black"}`,placeholder:"90"}),f.audit_retention&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.audit_retention}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Number of days to retain audit log entries"})]}),e.jsx("button",{onClick:O,disabled:k.isLoading,className:"px-6 py-3 bg-yellow-400 text-black font-bold rounded-lg hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:k.isLoading?"Saving...":"Save Security Settings"})]})]})]})]})})]})})},z2=()=>{const t=ae(U=>U.authentication_state.auth_token);ae(U=>U.authentication_state.current_user);const s=ae(U=>U.feature_flags),[r,a]=Ye();Je();const n=et(),l=r.get("account_id"),i=r.get("tab")||"overview",[o,c]=j.useState(l),[d,h]=j.useState(i),[m,u]=j.useState(""),[g,b]=j.useState(void 0),[f,v]=j.useState(!1),[y,p]=j.useState(!1),[x,w]=j.useState(!1),[R,N]=j.useState(!1),[k,L]=j.useState(null),[E,z]=j.useState(null),[_,O]=j.useState({}),[Y,q]=j.useState(null),[A,M]=j.useState({company_name:"",main_contact_id:"",billing_address:"",tax_id:"",tax_exempt:!1,payment_terms:"",contract_start:"",contract_end:"",contract_terms:"{}",discount_pct:"0",is_active:!0}),[P,C]=j.useState({label:"",address:"",contact_person:""}),[V,T]=j.useState({service_id:"",pricing_json:"{}"});j.useEffect(()=>{if(o&&d){const U=new URLSearchParams;U.set("account_id",o),U.set("tab",d),a(U)}},[o,d,a]),j.useEffect(()=>{if(Y){const U=setTimeout(()=>q(null),3e3);return()=>clearTimeout(U)}},[Y]);const Z=async()=>{const U=new URLSearchParams;return m&&U.append("query",m),g!==void 0&&U.append("is_active",String(g)),U.append("limit","50"),(await $.get(`http://localhost:3000/api/b2b-accounts?${U.toString()}`,{headers:{Authorization:`Bearer ${t}`}})).data.accounts||[]},se=async U=>(await $.get(`http://localhost:3000/api/b2b-accounts/${U}`,{headers:{Authorization:`Bearer ${t}`}})).data,B=async U=>(await $.get(`http://localhost:3000/api/b2b-accounts/${U}/locations`,{headers:{Authorization:`Bearer ${t}`}})).data.locations||[],ee=async U=>(await $.get(`http://localhost:3000/api/b2b-accounts/${U}/contract-pricing`,{headers:{Authorization:`Bearer ${t}`}})).data.pricing||[],{data:S=[],isLoading:re}=te({queryKey:["b2b-accounts",m,g],queryFn:Z,enabled:!!t,staleTime:6e4,refetchOnWindowFocus:!1}),{data:le,isLoading:Te}=te({queryKey:["b2b-account",o],queryFn:()=>se(o),enabled:!!t&&!!o,staleTime:6e4,refetchOnWindowFocus:!1}),{data:ke=[]}=te({queryKey:["b2b-locations",o],queryFn:()=>B(o),enabled:!!t&&!!o&&d==="locations",staleTime:6e4,refetchOnWindowFocus:!1}),{data:We=[]}=te({queryKey:["contract-pricing",o],queryFn:()=>ee(o),enabled:!!t&&!!o&&d==="pricing",staleTime:6e4,refetchOnWindowFocus:!1}),F=me({mutationFn:async U=>(await $.post("http://localhost:3000/api/b2b-accounts",{company_name:U.company_name,main_contact_id:U.main_contact_id,billing_address:U.billing_address||null,tax_id:U.tax_id||null,tax_exempt:U.tax_exempt,payment_terms:U.payment_terms||null,contract_start:U.contract_start,contract_end:U.contract_end,contract_terms:U.contract_terms?JSON.parse(U.contract_terms):null,discount_pct:U.discount_pct?Number(U.discount_pct):null,is_active:U.is_active},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,onSuccess:U=>{n.invalidateQueries({queryKey:["b2b-accounts"]}),v(!1),q({type:"success",message:"B2B account created successfully!"}),c(U.id),M({company_name:"",main_contact_id:"",billing_address:"",tax_id:"",tax_exempt:!1,payment_terms:"",contract_start:"",contract_end:"",contract_terms:"{}",discount_pct:"0",is_active:!0}),O({})},onError:U=>{var G,Ie;q({type:"error",message:((Ie=(G=U.response)==null?void 0:G.data)==null?void 0:Ie.message)||"Failed to create account"})}}),H=me({mutationFn:async U=>{const G={};return U.updates.company_name&&(G.company_name=U.updates.company_name),U.updates.main_contact_id&&(G.main_contact_id=U.updates.main_contact_id),U.updates.billing_address!==void 0&&(G.billing_address=U.updates.billing_address||null),U.updates.tax_id!==void 0&&(G.tax_id=U.updates.tax_id||null),U.updates.tax_exempt!==void 0&&(G.tax_exempt=U.updates.tax_exempt),U.updates.payment_terms!==void 0&&(G.payment_terms=U.updates.payment_terms||null),U.updates.contract_start&&(G.contract_start=U.updates.contract_start),U.updates.contract_end&&(G.contract_end=U.updates.contract_end),U.updates.contract_terms!==void 0&&(G.contract_terms=U.updates.contract_terms?JSON.parse(U.updates.contract_terms):null),U.updates.discount_pct!==void 0&&(G.discount_pct=U.updates.discount_pct?Number(U.updates.discount_pct):null),U.updates.is_active!==void 0&&(G.is_active=U.updates.is_active),(await $.put(`http://localhost:3000/api/b2b-accounts/${U.id}`,G,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data},onSuccess:()=>{n.invalidateQueries({queryKey:["b2b-accounts"]}),n.invalidateQueries({queryKey:["b2b-account",o]}),N(!1),q({type:"success",message:"Account updated successfully!"}),O({})},onError:U=>{var G,Ie;q({type:"error",message:((Ie=(G=U.response)==null?void 0:G.data)==null?void 0:Ie.message)||"Failed to update account"})}}),ce=me({mutationFn:async U=>(await $.post(`http://localhost:3000/api/b2b-accounts/${o}/locations`,{label:U.label,address:U.address,contact_person:U.contact_person||null},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,onSuccess:()=>{n.invalidateQueries({queryKey:["b2b-locations",o]}),p(!1),q({type:"success",message:"Location added successfully!"}),C({label:"",address:"",contact_person:""}),O({})},onError:U=>{var G,Ie;q({type:"error",message:((Ie=(G=U.response)==null?void 0:G.data)==null?void 0:Ie.message)||"Failed to add location"})}}),D=me({mutationFn:async U=>(await $.put(`http://localhost:3000/api/b2b-locations/${U.id}`,{label:U.updates.label,address:U.updates.address,contact_person:U.updates.contact_person||null},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,onSuccess:()=>{n.invalidateQueries({queryKey:["b2b-locations",o]}),p(!1),L(null),q({type:"success",message:"Location updated successfully!"}),C({label:"",address:"",contact_person:""}),O({})},onError:U=>{var G,Ie;q({type:"error",message:((Ie=(G=U.response)==null?void 0:G.data)==null?void 0:Ie.message)||"Failed to update location"})}}),X=me({mutationFn:async U=>{await $.delete(`http://localhost:3000/api/b2b-locations/${U}`,{headers:{Authorization:`Bearer ${t}`}})},onSuccess:()=>{n.invalidateQueries({queryKey:["b2b-locations",o]}),q({type:"success",message:"Location deleted successfully!"})},onError:U=>{var G,Ie;q({type:"error",message:((Ie=(G=U.response)==null?void 0:G.data)==null?void 0:Ie.message)||"Failed to delete location"})}}),fe=me({mutationFn:async U=>(await $.post(`http://localhost:3000/api/b2b-accounts/${o}/contract-pricing`,{service_id:U.service_id,pricing_json:JSON.parse(U.pricing_json)},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,onSuccess:()=>{n.invalidateQueries({queryKey:["contract-pricing",o]}),w(!1),q({type:"success",message:"Pricing override added successfully!"}),T({service_id:"",pricing_json:"{}"}),O({})},onError:U=>{var G,Ie;q({type:"error",message:((Ie=(G=U.response)==null?void 0:G.data)==null?void 0:Ie.message)||"Failed to add pricing override"})}}),ve=me({mutationFn:async U=>(await $.put(`http://localhost:3000/api/contract-pricing/${U.id}`,{pricing_json:JSON.parse(U.updates.pricing_json)},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,onSuccess:()=>{n.invalidateQueries({queryKey:["contract-pricing",o]}),w(!1),z(null),q({type:"success",message:"Pricing override updated successfully!"}),T({service_id:"",pricing_json:"{}"}),O({})},onError:U=>{var G,Ie;q({type:"error",message:((Ie=(G=U.response)==null?void 0:G.data)==null?void 0:Ie.message)||"Failed to update pricing override"})}}),qe=U=>{c(U),h("overview"),N(!1)},Ut=U=>{h(U)},us=()=>{v(!0),M({company_name:"",main_contact_id:"",billing_address:"",tax_id:"",tax_exempt:!1,payment_terms:"",contract_start:"",contract_end:"",contract_terms:"{}",discount_pct:"0",is_active:!0})},es=U=>{U.preventDefault(),O({});const G={};if(A.company_name.trim()||(G.company_name="Company name is required"),A.main_contact_id.trim()||(G.main_contact_id="Main contact is required"),A.contract_start||(G.contract_start="Contract start date is required"),A.contract_end||(G.contract_end="Contract end date is required"),A.contract_start&&A.contract_end&&new Date(A.contract_end)<=new Date(A.contract_start)&&(G.contract_end="End date must be after start date"),Object.keys(G).length>0){O(G);return}F.mutate(A)},As=U=>{if(U.preventDefault(),!le)return;O({});const G={};if(A.company_name.trim()||(G.company_name="Company name is required"),A.contract_start||(G.contract_start="Contract start date is required"),A.contract_end||(G.contract_end="Contract end date is required"),A.contract_start&&A.contract_end&&new Date(A.contract_end)<=new Date(A.contract_start)&&(G.contract_end="End date must be after start date"),Object.keys(G).length>0){O(G);return}H.mutate({id:le.id,updates:A})},W=()=>{le&&(M({company_name:le.company_name,main_contact_id:le.main_contact_id,billing_address:le.billing_address||"",tax_id:le.tax_id||"",tax_exempt:le.tax_exempt,payment_terms:le.payment_terms||"",contract_start:le.contract_start.split("T")[0],contract_end:le.contract_end.split("T")[0],contract_terms:le.contract_terms?JSON.stringify(le.contract_terms,null,2):"{}",discount_pct:le.discount_pct!==null?String(le.discount_pct):"0",is_active:le.is_active}),N(!0))},de=()=>{p(!0),L(null),C({label:"",address:"",contact_person:""})},ye=U=>{p(!0),L(U.id),C({label:U.label,address:U.address,contact_person:U.contact_person||""})},pe=U=>{U.preventDefault(),O({});const G={};if(P.label.trim()||(G.label="Location label is required"),P.address.trim()||(G.address="Address is required"),Object.keys(G).length>0){O(G);return}k?D.mutate({id:k,updates:P}):ce.mutate(P)},K=U=>{window.confirm("Are you sure you want to delete this location?")&&X.mutate(U)},ge=()=>{w(!0),z(null),T({service_id:"",pricing_json:"{}"})},De=U=>{w(!0),z(U.id),T({service_id:U.service_id,pricing_json:JSON.stringify(U.pricing_json,null,2)})},Qt=U=>{U.preventDefault(),O({});const G={};if(V.service_id||(G.service_id="Service is required"),!V.pricing_json.trim())G.pricing_json="Pricing configuration is required";else try{JSON.parse(V.pricing_json)}catch{G.pricing_json="Invalid JSON format"}if(Object.keys(G).length>0){O(G);return}E?ve.mutate({id:E,updates:V}):fe.mutate(V)};return s.b2b_accounts?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Y&&e.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg ${Y.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:Y.message}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"B2B Account Management"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage enterprise accounts, locations, and contract pricing"})]}),e.jsxs("button",{onClick:us,className:"inline-flex items-center px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg shadow-md transition-all duration-200",children:[e.jsx(Nt,{className:"w-5 h-5 mr-2"}),"Create Account"]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx(qi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search accounts...",value:m,onChange:U=>u(U.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pn,{className:"w-4 h-4 text-gray-500"}),e.jsxs("select",{value:g===void 0?"all":g?"active":"inactive",onChange:U=>{U.target.value==="all"?b(void 0):b(U.target.value==="active")},className:"flex-1 px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400",children:[e.jsx("option",{value:"all",children:"All Accounts"}),e.jsx("option",{value:"active",children:"Active Only"}),e.jsx("option",{value:"inactive",children:"Inactive Only"})]})]})]}),e.jsx("div",{className:"overflow-y-auto max-h-[600px]",children:re?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-400 mx-auto"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading accounts..."})]}):S.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Pa,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"No B2B accounts found"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:S.map(U=>e.jsx("button",{onClick:()=>qe(U.id),className:`w-full text-left p-4 hover:bg-gray-50 transition-colors ${o===U.id?"bg-yellow-50 border-l-4 border-yellow-400":""}`,children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:U.company_name}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Contract: ",new Date(U.contract_start).toLocaleDateString()," - ",new Date(U.contract_end).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${U.is_active?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:U.is_active?"Active":"Inactive"}),U.tax_exempt&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Tax Exempt"}),U.discount_pct!==null&&Number(U.discount_pct)>0&&e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:[Number(U.discount_pct).toFixed(0),"% Discount"]})]})]})})},U.id))})})]})}),e.jsx("div",{className:"lg:col-span-2",children:o?Te?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-400 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-500",children:"Loading account details..."})]}):le?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex -mb-px",children:["overview","locations","pricing"].map(U=>e.jsxs("button",{onClick:()=>Ut(U),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${d===U?"border-yellow-400 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[U==="overview"&&e.jsx(Pa,{className:"w-4 h-4 inline mr-2"}),U==="locations"&&e.jsx($a,{className:"w-4 h-4 inline mr-2"}),U==="pricing"&&e.jsx(Gs,{className:"w-4 h-4 inline mr-2"}),U.charAt(0).toUpperCase()+U.slice(1)]},U))})}),e.jsxs("div",{className:"p-6",children:[d==="overview"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Account Details"}),R?e.jsxs("button",{onClick:()=>N(!1),className:"inline-flex items-center px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-900 font-medium rounded-lg transition-colors",children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Cancel"]}):e.jsxs("button",{onClick:W,className:"inline-flex items-center px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-900 font-medium rounded-lg transition-colors",children:[e.jsx(ii,{className:"w-4 h-4 mr-2"}),"Edit"]})]}),R?e.jsxs("form",{onSubmit:As,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-1",children:"Company Name *"}),e.jsx("input",{type:"text",value:A.company_name,onChange:U=>{O(G=>({...G,company_name:""})),M(G=>({...G,company_name:U.target.value}))},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 ${_.company_name?"border-red-500":"border-gray-300"}`}),_.company_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.company_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-1",children:"Billing Address"}),e.jsx("input",{type:"text",value:A.billing_address,onChange:U=>M(G=>({...G,billing_address:U.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-1",children:"Tax ID"}),e.jsx("input",{type:"text",value:A.tax_id,onChange:U=>M(G=>({...G,tax_id:U.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-1",children:"Discount %"}),e.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",value:A.discount_pct,onChange:U=>M(G=>({...G,discount_pct:U.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-1",children:"Contract Start *"}),e.jsx("input",{type:"date",value:A.contract_start,onChange:U=>{O(G=>({...G,contract_start:""})),M(G=>({...G,contract_start:U.target.value}))},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 ${_.contract_start?"border-red-500":"border-gray-300"}`}),_.contract_start&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.contract_start})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-1",children:"Contract End *"}),e.jsx("input",{type:"date",value:A.contract_end,onChange:U=>{O(G=>({...G,contract_end:""})),M(G=>({...G,contract_end:U.target.value}))},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 ${_.contract_end?"border-red-500":"border-gray-300"}`}),_.contract_end&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.contract_end})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-1",children:"Payment Terms"}),e.jsx("textarea",{value:A.payment_terms,onChange:U=>M(G=>({...G,payment_terms:U.target.value})),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400"})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:A.tax_exempt,onChange:U=>M(G=>({...G,tax_exempt:U.target.checked})),className:"w-4 h-4 text-yellow-400 border-gray-300 rounded focus:ring-yellow-400"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-900",children:"Tax Exempt"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:A.is_active,onChange:U=>M(G=>({...G,is_active:U.target.checked})),className:"w-4 h-4 text-yellow-400 border-gray-300 rounded focus:ring-yellow-400"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-900",children:"Active"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>N(!1),className:"px-6 py-2 bg-gray-100 hover:bg-gray-200 text-gray-900 font-medium rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:H.isPending,className:"px-6 py-2 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition-colors disabled:opacity-50",children:H.isPending?"Saving...":"Save Changes"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-500 mb-1",children:"Company Name"}),e.jsx("p",{className:"text-base text-gray-900",children:le.company_name})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-500 mb-1",children:"Billing Address"}),e.jsx("p",{className:"text-base text-gray-900",children:le.billing_address||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-500 mb-1",children:"Tax ID"}),e.jsx("p",{className:"text-base text-gray-900",children:le.tax_id||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-500 mb-1",children:"Discount"}),e.jsx("p",{className:"text-base text-gray-900",children:le.discount_pct!==null?`${Number(le.discount_pct).toFixed(2)}%`:"None"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-500 mb-1",children:"Contract Period"}),e.jsxs("p",{className:"text-base text-gray-900",children:[new Date(le.contract_start).toLocaleDateString()," - ",new Date(le.contract_end).toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-500 mb-1",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${le.is_active?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:le.is_active?"Active":"Inactive"}),le.tax_exempt&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:"Tax Exempt"})]})]})]}),le.payment_terms&&e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-500 mb-1",children:"Payment Terms"}),e.jsx("p",{className:"text-base text-gray-900",children:le.payment_terms})]})]})]}),d==="locations"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Locations"}),e.jsxs("button",{onClick:de,className:"inline-flex items-center px-4 py-2 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition-colors",children:[e.jsx(Nt,{className:"w-4 h-4 mr-2"}),"Add Location"]})]}),ke.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx($a,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No locations yet. Add the first location for this account."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ke.map(U=>e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx($a,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:U.label}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:U.address}),U.contact_person&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Contact: ",U.contact_person]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ye(U),className:"p-1 hover:bg-white rounded transition-colors",children:e.jsx(ii,{className:"w-4 h-4 text-gray-600"})}),e.jsx("button",{onClick:()=>K(U.id),className:"p-1 hover:bg-white rounded transition-colors",children:e.jsx(ra,{className:"w-4 h-4 text-red-600"})})]})]})},U.id))})]}),d==="pricing"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Contract Pricing"}),e.jsxs("button",{onClick:ge,className:"inline-flex items-center px-4 py-2 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition-colors",children:[e.jsx(Nt,{className:"w-4 h-4 mr-2"}),"Add Pricing Override"]})]}),We.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Gs,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No custom pricing overrides. Add service-specific pricing."})]}):e.jsx("div",{className:"space-y-4",children:We.map(U=>e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-2",children:["Service ID: ",U.service_id]}),e.jsx("pre",{className:"text-xs text-gray-600 bg-white p-3 rounded border border-gray-200 overflow-x-auto",children:JSON.stringify(U.pricing_json,null,2)})]}),e.jsx("button",{onClick:()=>De(U),className:"ml-4 p-2 hover:bg-white rounded transition-colors",children:e.jsx(ii,{className:"w-4 h-4 text-gray-600"})})]})},U.id))})]})]})]}):null:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12 text-center",children:[e.jsx(Pa,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Account Selected"}),e.jsx("p",{className:"text-gray-600",children:"Select an account from the list to view details or create a new one."})]})})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create B2B Account"}),e.jsx("button",{onClick:()=>v(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(je,{className:"w-5 h-5 text-gray-500"})})]})}),e.jsxs("form",{onSubmit:es,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-1",children:"Company Name *"}),e.jsx("input",{type:"text",value:A.company_name,onChange:U=>{O(G=>({...G,company_name:""})),M(G=>({...G,company_name:U.target.value}))},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 ${_.company_name?"border-red-500":"border-gray-300"}`}),_.company_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.company_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-1",children:"Main Contact User ID *"}),e.jsx("input",{type:"text",value:A.main_contact_id,onChange:U=>{O(G=>({...G,main_contact_id:""})),M(G=>({...G,main_contact_id:U.target.value}))},placeholder:"Enter user ID",className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 ${_.main_contact_id?"border-red-500":"border-gray-300"}`}),_.main_contact_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.main_contact_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-1",children:"Billing Address"}),e.jsx("input",{type:"text",value:A.billing_address,onChange:U=>M(G=>({...G,billing_address:U.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-1",children:"Tax ID"}),e.jsx("input",{type:"text",value:A.tax_id,onChange:U=>M(G=>({...G,tax_id:U.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-1",children:"Discount % (0-100)"}),e.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",value:A.discount_pct,onChange:U=>M(G=>({...G,discount_pct:U.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-1",children:"Payment Terms"}),e.jsx("input",{type:"text",value:A.payment_terms,onChange:U=>M(G=>({...G,payment_terms:U.target.value})),placeholder:"e.g., Net 30",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-1",children:"Contract Start *"}),e.jsx("input",{type:"date",value:A.contract_start,onChange:U=>{O(G=>({...G,contract_start:""})),M(G=>({...G,contract_start:U.target.value}))},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 ${_.contract_start?"border-red-500":"border-gray-300"}`}),_.contract_start&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.contract_start})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-1",children:"Contract End *"}),e.jsx("input",{type:"date",value:A.contract_end,onChange:U=>{O(G=>({...G,contract_end:""})),M(G=>({...G,contract_end:U.target.value}))},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 ${_.contract_end?"border-red-500":"border-gray-300"}`}),_.contract_end&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.contract_end})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:A.tax_exempt,onChange:U=>M(G=>({...G,tax_exempt:U.target.checked})),className:"w-4 h-4 text-yellow-400 border-gray-300 rounded focus:ring-yellow-400"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-900",children:"Tax Exempt"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:A.is_active,onChange:U=>M(G=>({...G,is_active:U.target.checked})),className:"w-4 h-4 text-yellow-400 border-gray-300 rounded focus:ring-yellow-400"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-900",children:"Active"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-6 py-2 bg-gray-100 hover:bg-gray-200 text-gray-900 font-medium rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:F.isPending,className:"px-6 py-2 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition-colors disabled:opacity-50",children:F.isPending?"Creating...":"Create Account"})]})]})]})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:k?"Edit Location":"Add Location"}),e.jsx("button",{onClick:()=>{p(!1),L(null)},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(je,{className:"w-5 h-5 text-gray-500"})})]})}),e.jsxs("form",{onSubmit:pe,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-1",children:"Location Label *"}),e.jsx("input",{type:"text",value:P.label,onChange:U=>{O(G=>({...G,label:""})),C(G=>({...G,label:U.target.value}))},placeholder:"e.g., Main Office, Warehouse",className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 ${_.label?"border-red-500":"border-gray-300"}`}),_.label&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.label})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-1",children:"Address *"}),e.jsx("textarea",{value:P.address,onChange:U=>{O(G=>({...G,address:""})),C(G=>({...G,address:U.target.value}))},rows:3,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 ${_.address?"border-red-500":"border-gray-300"}`}),_.address&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.address})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-1",children:"Contact Person"}),e.jsx("input",{type:"text",value:P.contact_person,onChange:U=>C(G=>({...G,contact_person:U.target.value})),placeholder:"Optional",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>{p(!1),L(null)},className:"px-6 py-2 bg-gray-100 hover:bg-gray-200 text-gray-900 font-medium rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:ce.isPending||D.isPending,className:"px-6 py-2 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition-colors disabled:opacity-50",children:ce.isPending||D.isPending?"Saving...":k?"Update":"Add Location"})]})]})]})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:E?"Edit Pricing Override":"Add Pricing Override"}),e.jsx("button",{onClick:()=>{w(!1),z(null)},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(je,{className:"w-5 h-5 text-gray-500"})})]})}),e.jsxs("form",{onSubmit:Qt,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-1",children:"Service ID *"}),e.jsx("input",{type:"text",value:V.service_id,onChange:U=>{O(G=>({...G,service_id:""})),T(G=>({...G,service_id:U.target.value}))},disabled:!!E,placeholder:"Enter service ID",className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 ${_.service_id?"border-red-500":"border-gray-300"} ${E?"bg-gray-100":""}`}),_.service_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.service_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-1",children:"Pricing Configuration (JSON) *"}),e.jsx("textarea",{value:V.pricing_json,onChange:U=>{O(G=>({...G,pricing_json:""})),T(G=>({...G,pricing_json:U.target.value}))},rows:8,placeholder:'{"base_price": 100, "volume_discounts": {...}}',className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 font-mono text-sm ${_.pricing_json?"border-red-500":"border-gray-300"}`}),_.pricing_json&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.pricing_json}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Enter valid JSON configuration"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>{w(!1),z(null)},className:"px-6 py-2 bg-gray-100 hover:bg-gray-200 text-gray-900 font-medium rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:fe.isPending||ve.isPending,className:"px-6 py-2 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition-colors disabled:opacity-50",children:fe.isPending||ve.isPending?"Saving...":E?"Update":"Add Override"})]})]})]})})]})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx(Pa,{className:"w-16 h-16 text-gray-400 mx-auto"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"B2B Module Disabled"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"The B2B account management feature is currently disabled. Please enable it in system settings."})]})})})},Xs="http://localhost:3000/api",B2=async(t,s,r,a)=>{const n=new URLSearchParams;return s&&n.append("query",s),r&&n.append("sku",r),a&&n.append("low_stock","true"),n.append("limit","100"),(await $.get(`${Xs}/inventory-items?${n.toString()}`,{headers:{Authorization:`Bearer ${t}`}})).data},U2=async(t,s)=>{const r=new URLSearchParams;return s&&r.append("service_id",s),(await $.get(`${Xs}/material-consumption-rules?${r.toString()}`,{headers:{Authorization:`Bearer ${t}`}})).data},Q2=async(t,s,r)=>{const a=new URLSearchParams;return s&&a.append("supplier_name",s),r&&a.append("status",r),a.append("limit","50"),(await $.get(`${Xs}/purchase-orders?${a.toString()}`,{headers:{Authorization:`Bearer ${t}`}})).data},V2=async t=>(await $.get(`${Xs}/services?is_active=true&limit=100`,{headers:{Authorization:`Bearer ${t}`}})).data,K2=async(t,s)=>(await $.post(`${Xs}/inventory-items`,s,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,W2=async(t,s,r)=>(await $.put(`${Xs}/inventory-items/${s}`,r,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,H2=async(t,s)=>(await $.post(`${Xs}/material-consumption-rules`,s,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,G2=async(t,s)=>(await $.post(`${Xs}/purchase-orders`,s,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,J2=async(t,s,r)=>{await $.post(`${Xs}/purchase-orders/${s}/receive`,r,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})},Y2=()=>{const[t,s]=Ye(),r=t.get("tab")||"items",a=t.get("status_filter"),n=ae(Q=>Q.authentication_state.auth_token);ae(Q=>Q.authentication_state.current_user);const[l,i]=j.useState(r),[o,c]=j.useState(a),[d,h]=j.useState(""),[m,u]=j.useState(""),[g,b]=j.useState(""),[f,v]=j.useState(""),[y,p]=j.useState(""),[x,w]=j.useState(null),[R,N]=j.useState(null),[k,L]=j.useState(null),[E,z]=j.useState({}),[_,O]=j.useState({sku:"",name:"",unit:"",qty_on_hand:"",reorder_point:"",reorder_qty:"",supplier_name:"",cost_per_unit:""}),[Y,q]=j.useState({service_id:"",item_id:"",qty_per_unit:""}),[A,M]=j.useState({supplier_name:"",items:[]}),[P,C]=j.useState([]),[V,T]=j.useState(null),Z=et(),{data:se,isLoading:B,error:ee}=te({queryKey:["inventory-items",d,m,o],queryFn:()=>B2(n||"",d,m,o==="low_stock"),enabled:!!n&&l==="items",staleTime:6e4,select:Q=>({...Q,items:Q.items.map(ne=>({...ne,qty_on_hand:Number(ne.qty_on_hand||0),reorder_point:Number(ne.reorder_point||0),reorder_qty:Number(ne.reorder_qty||0),cost_per_unit:Number(ne.cost_per_unit||0)}))})}),{data:S,isLoading:re,error:le}=te({queryKey:["consumption-rules",g],queryFn:()=>U2(n||"",g),enabled:!!n&&l==="consumption_rules",staleTime:6e4,select:Q=>({...Q,rules:Q.rules.map(ne=>({...ne,qty_per_unit:Number(ne.qty_per_unit||0)}))})}),{data:Te,isLoading:ke,error:We}=te({queryKey:["purchase-orders",f,y],queryFn:()=>Q2(n||"",f,y),enabled:!!n&&l==="purchase_orders",staleTime:6e4,select:Q=>({...Q,orders:Q.orders.map(ne=>({...ne,total_cost:Number(ne.total_cost||0)}))})}),{data:F}=te({queryKey:["services"],queryFn:()=>V2(n||""),enabled:!!n,staleTime:3e5}),H=me({mutationFn:Q=>K2(n||"",Q),onSuccess:()=>{Z.invalidateQueries({queryKey:["inventory-items"]}),w(null),T({type:"success",message:"Inventory item created successfully"}),setTimeout(()=>T(null),3e3),ve()},onError:Q=>{var ne,Ce;T({type:"error",message:((Ce=(ne=Q.response)==null?void 0:ne.data)==null?void 0:Ce.message)||"Failed to create item"}),setTimeout(()=>T(null),3e3)}}),ce=me({mutationFn:Q=>W2(n||"",Q.id,Q.updates),onSuccess:()=>{Z.invalidateQueries({queryKey:["inventory-items"]}),w(null),T({type:"success",message:"Inventory item updated successfully"}),setTimeout(()=>T(null),3e3),ve(),N(null)},onError:Q=>{var ne,Ce;T({type:"error",message:((Ce=(ne=Q.response)==null?void 0:ne.data)==null?void 0:Ce.message)||"Failed to update item"}),setTimeout(()=>T(null),3e3)}}),D=me({mutationFn:Q=>H2(n||"",Q),onSuccess:()=>{Z.invalidateQueries({queryKey:["consumption-rules"]}),w(null),T({type:"success",message:"Consumption rule created successfully"}),setTimeout(()=>T(null),3e3),qe()},onError:Q=>{var ne,Ce;T({type:"error",message:((Ce=(ne=Q.response)==null?void 0:ne.data)==null?void 0:Ce.message)||"Failed to create rule"}),setTimeout(()=>T(null),3e3)}}),X=me({mutationFn:Q=>G2(n||"",Q),onSuccess:()=>{Z.invalidateQueries({queryKey:["purchase-orders"]}),Z.invalidateQueries({queryKey:["inventory-items"]}),w(null),T({type:"success",message:"Purchase order created successfully"}),setTimeout(()=>T(null),3e3),Ut()},onError:Q=>{var ne,Ce;T({type:"error",message:((Ce=(ne=Q.response)==null?void 0:ne.data)==null?void 0:Ce.message)||"Failed to create purchase order"}),setTimeout(()=>T(null),3e3)}}),fe=me({mutationFn:Q=>J2(n||"",Q.id,{items_received:Q.items_received}),onSuccess:()=>{Z.invalidateQueries({queryKey:["purchase-orders"]}),Z.invalidateQueries({queryKey:["inventory-items"]}),w(null),T({type:"success",message:"Purchase order received successfully"}),setTimeout(()=>T(null),3e3),L(null),C([])},onError:Q=>{var ne,Ce;T({type:"error",message:((Ce=(ne=Q.response)==null?void 0:ne.data)==null?void 0:Ce.message)||"Failed to receive purchase order"}),setTimeout(()=>T(null),3e3)}}),ve=()=>{O({sku:"",name:"",unit:"",qty_on_hand:"",reorder_point:"",reorder_qty:"",supplier_name:"",cost_per_unit:""}),z({})},qe=()=>{q({service_id:"",item_id:"",qty_per_unit:""}),z({})},Ut=()=>{M({supplier_name:"",items:[]}),z({})},us=Q=>Q.qty_on_hand<=Q.reorder_point,es=(se==null?void 0:se.items.filter(us))||[],As=Q=>{i(Q);const ne=new URLSearchParams(t);ne.set("tab",Q),s(ne)},W=Q=>{c(Q);const ne=new URLSearchParams(t);Q?ne.set("status_filter",Q):ne.delete("status_filter"),s(ne)},de=()=>{const Q={};if(_.sku.trim()||(Q.sku="SKU is required"),_.name.trim()||(Q.name="Name is required"),_.unit.trim()||(Q.unit="Unit is required"),(!_.qty_on_hand||Number(_.qty_on_hand)<0)&&(Q.qty_on_hand="Valid quantity required"),(!_.reorder_point||Number(_.reorder_point)<0)&&(Q.reorder_point="Valid reorder point required"),(!_.reorder_qty||Number(_.reorder_qty)<=0)&&(Q.reorder_qty="Valid reorder quantity required"),(!_.cost_per_unit||Number(_.cost_per_unit)<=0)&&(Q.cost_per_unit="Valid cost required"),Object.keys(Q).length>0){z(Q);return}H.mutate({sku:_.sku.toUpperCase(),name:_.name,unit:_.unit,qty_on_hand:Number(_.qty_on_hand),reorder_point:Number(_.reorder_point),reorder_qty:Number(_.reorder_qty),supplier_name:_.supplier_name||null,cost_per_unit:Number(_.cost_per_unit)})},ye=()=>{if(!R)return;const Q={};if(_.name.trim()||(Q.name="Name is required"),_.unit.trim()||(Q.unit="Unit is required"),(!_.qty_on_hand||Number(_.qty_on_hand)<0)&&(Q.qty_on_hand="Valid quantity required"),(!_.reorder_point||Number(_.reorder_point)<0)&&(Q.reorder_point="Valid reorder point required"),(!_.reorder_qty||Number(_.reorder_qty)<=0)&&(Q.reorder_qty="Valid reorder quantity required"),(!_.cost_per_unit||Number(_.cost_per_unit)<=0)&&(Q.cost_per_unit="Valid cost required"),Object.keys(Q).length>0){z(Q);return}ce.mutate({id:R.id,updates:{name:_.name,unit:_.unit,qty_on_hand:Number(_.qty_on_hand),reorder_point:Number(_.reorder_point),reorder_qty:Number(_.reorder_qty),supplier_name:_.supplier_name||null,cost_per_unit:Number(_.cost_per_unit)}})},pe=()=>{const Q={};if(Y.service_id||(Q.service_id="Service is required"),Y.item_id||(Q.item_id="Inventory item is required"),(!Y.qty_per_unit||Number(Y.qty_per_unit)<=0)&&(Q.qty_per_unit="Valid quantity required"),Object.keys(Q).length>0){z(Q);return}D.mutate({service_id:Y.service_id,item_id:Y.item_id,qty_per_unit:Number(Y.qty_per_unit)})},K=()=>{const Q={};if(A.supplier_name.trim()||(Q.supplier_name="Supplier name is required"),A.items.length===0&&(Q.items="At least one item is required"),A.items.every(dt=>dt.item_id&&dt.qty&&Number(dt.qty)>0&&dt.unit_cost&&Number(dt.unit_cost)>0)||(Q.items="All items must have valid quantities and costs"),Object.keys(Q).length>0){z(Q);return}const Ce=A.items.map(dt=>({item_id:dt.item_id,qty:Number(dt.qty),unit_cost:Number(dt.unit_cost)})),it=Ce.reduce((dt,ha)=>dt+ha.qty*ha.unit_cost,0);X.mutate({supplier_name:A.supplier_name,total_cost:it,items:Ce})},ge=()=>{if(!k)return;const Q={};if(P.every(it=>it.qty_received&&Number(it.qty_received)>0)||(Q.items="All quantities must be positive"),Object.keys(Q).length>0){z(Q);return}const Ce=P.map(it=>({item_id:it.item_id,qty_received:Number(it.qty_received)}));fe.mutate({id:k.id,items_received:Ce})},De=Q=>{N(Q),O({sku:Q.sku,name:Q.name,unit:Q.unit,qty_on_hand:Q.qty_on_hand.toString(),reorder_point:Q.reorder_point.toString(),reorder_qty:Q.reorder_qty.toString(),supplier_name:Q.supplier_name||"",cost_per_unit:Q.cost_per_unit.toString()}),w("edit_item")},Qt=Q=>{L(Q),C([]),w("receive_po")},U=()=>{M(Q=>({...Q,items:[...Q.items,{item_id:"",qty:"",unit_cost:""}]}))},G=Q=>{M(ne=>({...ne,items:ne.items.filter((Ce,it)=>it!==Q)}))},Ie=(Q,ne,Ce)=>{M(it=>({...it,items:it.items.map((dt,ha)=>ha===Q?{...dt,[ne]:Ce}:dt)}))};return j.useEffect(()=>{const Q=t.get("tab");Q&&["items","consumption_rules","purchase_orders"].includes(Q)&&i(Q);const ne=t.get("status_filter");c(ne)},[t]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Wt,{className:"w-8 h-8 text-black"}),e.jsx("h1",{className:"text-3xl font-bold text-black",children:"Inventory Management"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[l==="items"&&e.jsxs("button",{onClick:()=>{ve(),w("create_item")},className:"flex items-center gap-2 px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition-all duration-200 shadow-md hover:shadow-lg",children:[e.jsx(Nt,{className:"w-5 h-5"}),"Add Item"]}),l==="consumption_rules"&&e.jsxs("button",{onClick:()=>{qe(),w("create_rule")},className:"flex items-center gap-2 px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition-all duration-200 shadow-md hover:shadow-lg",children:[e.jsx(Nt,{className:"w-5 h-5"}),"Add Rule"]}),l==="purchase_orders"&&e.jsxs("button",{onClick:()=>{Ut(),w("create_po")},className:"flex items-center gap-2 px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition-all duration-200 shadow-md hover:shadow-lg",children:[e.jsx(Nt,{className:"w-5 h-5"}),"Create PO"]})]})]})})}),V&&e.jsx("div",{className:"fixed top-4 right-4 z-50",children:e.jsx("div",{className:`px-6 py-4 rounded-lg shadow-lg ${V.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[V.type==="success"?e.jsx(Lt,{className:"w-5 h-5"}):e.jsx(we,{className:"w-5 h-5"}),e.jsx("p",{className:"font-medium",children:V.message})]})})}),l==="items"&&es.length>0&&e.jsx("div",{className:"bg-yellow-50 border-b border-yellow-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(we,{className:"w-6 h-6 text-yellow-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-semibold text-yellow-900",children:[es.length," item",es.length!==1?"s":""," below reorder point"]}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Review low stock items and generate purchase orders"})]}),e.jsx("button",{onClick:()=>W("low_stock"),className:"px-4 py-2 bg-yellow-400 hover:bg-yellow-500 text-black font-medium rounded-lg transition-colors",children:"View Items"})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex gap-8",children:[e.jsx("button",{onClick:()=>As("items"),className:`px-4 py-4 border-b-2 font-semibold transition-colors ${l==="items"?"border-yellow-400 text-black":"border-transparent text-gray-600 hover:text-black"}`,children:"Inventory Items"}),e.jsx("button",{onClick:()=>As("consumption_rules"),className:`px-4 py-4 border-b-2 font-semibold transition-colors ${l==="consumption_rules"?"border-yellow-400 text-black":"border-transparent text-gray-600 hover:text-black"}`,children:"Consumption Rules"}),e.jsx("button",{onClick:()=>As("purchase_orders"),className:`px-4 py-4 border-b-2 font-semibold transition-colors ${l==="purchase_orders"?"border-yellow-400 text-black":"border-transparent text-gray-600 hover:text-black"}`,children:"Purchase Orders"})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l==="items"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(qi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name...",value:d,onChange:Q=>{h(Q.target.value)},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]}),e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Filter by SKU...",value:m,onChange:Q=>{u(Q.target.value)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})}),e.jsx("div",{children:e.jsxs("select",{value:o||"all",onChange:Q=>W(Q.target.value==="all"?null:Q.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Items"}),e.jsx("option",{value:"low_stock",children:"Low Stock Only"})]})})]})}),B?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(tt,{className:"w-8 h-8 animate-spin text-yellow-400"})}):ee?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:e.jsx("p",{className:"text-red-700",children:"Failed to load inventory items"})}):!se||se.items.length===0?e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[e.jsx(Wt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No inventory items found"}),e.jsx("button",{onClick:()=>{ve(),w("create_item")},className:"px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition-colors",children:"Add Your First Item"})]}):e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-black",children:"SKU"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-black",children:"Name"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-black",children:"Unit"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-black",children:"Qty On Hand"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-black",children:"Reorder Point"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-black",children:"Supplier"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-black",children:"Cost/Unit"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-black",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:se.items.map(Q=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-black",children:Q.sku}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-black",children:Q.name}),us(Q)&&e.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs font-semibold rounded",children:"LOW STOCK"})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:Q.unit}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-sm font-semibold ${us(Q)?"text-red-600":"text-gray-900"}`,children:Q.qty_on_hand}),us(Q)&&e.jsx(pw,{className:"w-4 h-4 text-red-600"})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:Q.reorder_point}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:Q.supplier_name||"-"}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-900 font-medium",children:["",Number(Q.cost_per_unit||0).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>De(Q),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Os,{className:"w-4 h-4 text-gray-600"})})})]},Q.id))})]})})})]}),l==="consumption_rules"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-black mb-2",children:"Filter by Service"}),e.jsxs("select",{value:g,onChange:Q=>b(Q.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Services"}),F==null?void 0:F.services.map(Q=>e.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]})})}),re?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(tt,{className:"w-8 h-8 animate-spin text-yellow-400"})}):le?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:e.jsx("p",{className:"text-red-700",children:"Failed to load consumption rules"})}):!S||S.rules.length===0?e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[e.jsx(Ae,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No consumption rules found"}),e.jsx("button",{onClick:()=>{qe(),w("create_rule")},className:"px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition-colors",children:"Create First Rule"})]}):e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-black",children:"Service"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-black",children:"Inventory Item"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-black",children:"Qty Per Unit"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-black",children:"Created"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:S.rules.map(Q=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-sm text-black",children:Q.service_name||Q.service_id}),e.jsx("td",{className:"px-6 py-4 text-sm text-black",children:Q.item_name||Q.item_id}),e.jsx("td",{className:"px-6 py-4 text-sm font-semibold text-gray-900",children:Number(Q.qty_per_unit||0).toFixed(2)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:new Date(Q.created_at).toLocaleDateString()})]},Q.id))})]})})})]}),l==="purchase_orders"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Filter by supplier...",value:f,onChange:Q=>v(Q.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})}),e.jsx("div",{children:e.jsxs("select",{value:y,onChange:Q=>p(Q.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"DRAFT",children:"Draft"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"ORDERED",children:"Ordered"}),e.jsx("option",{value:"RECEIVED",children:"Received"}),e.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})})]})}),ke?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(tt,{className:"w-8 h-8 animate-spin text-yellow-400"})}):We?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:e.jsx("p",{className:"text-red-700",children:"Failed to load purchase orders"})}):!Te||Te.orders.length===0?e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[e.jsx(Ae,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No purchase orders found"}),e.jsx("button",{onClick:()=>{Ut(),w("create_po")},className:"px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition-colors",children:"Create Purchase Order"})]}):e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-black",children:"PO Number"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-black",children:"Supplier"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-black",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-black",children:"Total Cost"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-black",children:"Created"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-black",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:Te.orders.map(Q=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-black",children:Q.po_number}),e.jsx("td",{className:"px-6 py-4 text-sm text-black",children:Q.supplier_name}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${Q.status==="RECEIVED"?"bg-green-100 text-green-800":Q.status==="ORDERED"?"bg-blue-100 text-blue-800":Q.status==="CANCELLED"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:Q.status})}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-900 font-medium",children:["",Number(Q.total_cost||0).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:new Date(Q.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:Q.status==="ORDERED"&&e.jsx("button",{onClick:()=>Qt(Q),className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-lg transition-colors",children:"Receive"})})]},Q.id))})]})})})]})]}),(x==="create_item"||x==="edit_item")&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-black",children:x==="create_item"?"Add Inventory Item":"Edit Inventory Item"}),e.jsx("button",{onClick:()=>{w(null),N(null),ve()},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(je,{className:"w-5 h-5 text-gray-600"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[x==="create_item"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-black mb-2",children:["SKU ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",value:_.sku,onChange:Q=>{z(ne=>({...ne,sku:""})),O(ne=>({...ne,sku:Q.target.value}))},placeholder:"e.g., VINYL-001",className:`w-full px-4 py-2 border ${E.sku?"border-red-500":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent`}),E.sku&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:E.sku})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-black mb-2",children:["Name ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",value:_.name,onChange:Q=>{z(ne=>({...ne,name:""})),O(ne=>({...ne,name:Q.target.value}))},placeholder:"e.g., Premium Vinyl Roll",className:`w-full px-4 py-2 border ${E.name?"border-red-500":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent`}),E.name&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:E.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-black mb-2",children:["Unit ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",value:_.unit,onChange:Q=>{z(ne=>({...ne,unit:""})),O(ne=>({...ne,unit:Q.target.value}))},placeholder:"e.g., rolls, sheets, boxes",className:`w-full px-4 py-2 border ${E.unit?"border-red-500":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent`}),E.unit&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:E.unit})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-black mb-2",children:["Qty On Hand ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"number",value:_.qty_on_hand,onChange:Q=>{z(ne=>({...ne,qty_on_hand:""})),O(ne=>({...ne,qty_on_hand:Q.target.value}))},min:"0",step:"1",className:`w-full px-4 py-2 border ${E.qty_on_hand?"border-red-500":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent`}),E.qty_on_hand&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:E.qty_on_hand})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-black mb-2",children:["Reorder Point ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"number",value:_.reorder_point,onChange:Q=>{z(ne=>({...ne,reorder_point:""})),O(ne=>({...ne,reorder_point:Q.target.value}))},min:"0",step:"1",className:`w-full px-4 py-2 border ${E.reorder_point?"border-red-500":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent`}),E.reorder_point&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:E.reorder_point})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-black mb-2",children:["Reorder Qty ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"number",value:_.reorder_qty,onChange:Q=>{z(ne=>({...ne,reorder_qty:""})),O(ne=>({...ne,reorder_qty:Q.target.value}))},min:"1",step:"1",className:`w-full px-4 py-2 border ${E.reorder_qty?"border-red-500":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent`}),E.reorder_qty&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:E.reorder_qty})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-black mb-2",children:"Supplier Name"}),e.jsx("input",{type:"text",value:_.supplier_name,onChange:Q=>{O(ne=>({...ne,supplier_name:Q.target.value}))},placeholder:"Optional",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-black mb-2",children:["Cost Per Unit () ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"number",value:_.cost_per_unit,onChange:Q=>{z(ne=>({...ne,cost_per_unit:""})),O(ne=>({...ne,cost_per_unit:Q.target.value}))},min:"0",step:"0.01",className:`w-full px-4 py-2 border ${E.cost_per_unit?"border-red-500":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent`}),E.cost_per_unit&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:E.cost_per_unit})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{w(null),N(null),ve()},className:"px-6 py-3 border border-gray-300 text-black font-medium rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:()=>{x==="create_item"?de():ye()},disabled:H.isPending||ce.isPending,className:"px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(H.isPending||ce.isPending)&&e.jsx(tt,{className:"w-4 h-4 animate-spin"}),x==="create_item"?"Create Item":"Update Item"]})]})]})]})}),x==="create_rule"&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full",children:[e.jsxs("div",{className:"border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-black",children:"Add Consumption Rule"}),e.jsx("button",{onClick:()=>{w(null),qe()},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(je,{className:"w-5 h-5 text-gray-600"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-black mb-2",children:["Service ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("select",{value:Y.service_id,onChange:Q=>{z(ne=>({...ne,service_id:""})),q(ne=>({...ne,service_id:Q.target.value}))},className:`w-full px-4 py-2 border ${E.service_id?"border-red-500":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent`,children:[e.jsx("option",{value:"",children:"Select service..."}),F==null?void 0:F.services.map(Q=>e.jsx("option",{value:Q.id,children:Q.name},Q.id))]}),E.service_id&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:E.service_id})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-black mb-2",children:["Inventory Item ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("select",{value:Y.item_id,onChange:Q=>{z(ne=>({...ne,item_id:""})),q(ne=>({...ne,item_id:Q.target.value}))},className:`w-full px-4 py-2 border ${E.item_id?"border-red-500":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent`,children:[e.jsx("option",{value:"",children:"Select item..."}),se==null?void 0:se.items.map(Q=>e.jsxs("option",{value:Q.id,children:[Q.name," (",Q.sku,")"]},Q.id))]}),E.item_id&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:E.item_id})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-black mb-2",children:["Quantity Per Unit ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"number",value:Y.qty_per_unit,onChange:Q=>{z(ne=>({...ne,qty_per_unit:""})),q(ne=>({...ne,qty_per_unit:Q.target.value}))},min:"0",step:"0.01",placeholder:"e.g., 2.5",className:`w-full px-4 py-2 border ${E.qty_per_unit?"border-red-500":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent`}),E.qty_per_unit&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:E.qty_per_unit})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{w(null),qe()},className:"px-6 py-3 border border-gray-300 text-black font-medium rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:pe,disabled:D.isPending,className:"px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[D.isPending&&e.jsx(tt,{className:"w-4 h-4 animate-spin"}),"Create Rule"]})]})]})]})}),x==="create_po"&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-black",children:"Create Purchase Order"}),e.jsx("button",{onClick:()=>{w(null),Ut()},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(je,{className:"w-5 h-5 text-gray-600"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-black mb-2",children:["Supplier Name ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",value:A.supplier_name,onChange:Q=>{z(ne=>({...ne,supplier_name:""})),M(ne=>({...ne,supplier_name:Q.target.value}))},placeholder:"e.g., Materials Supplier Ltd",className:`w-full px-4 py-2 border ${E.supplier_name?"border-red-500":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent`}),E.supplier_name&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:E.supplier_name})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("label",{className:"block text-sm font-semibold text-black",children:["Items ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("button",{onClick:U,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-black font-medium rounded-lg transition-colors",children:[e.jsx(Nt,{className:"w-4 h-4"}),"Add Item"]})]}),E.items&&e.jsx("p",{className:"text-red-600 text-sm mb-2",children:E.items}),e.jsxs("div",{className:"space-y-3",children:[A.items.map((Q,ne)=>e.jsxs("div",{className:"flex items-start gap-3 p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Item"}),e.jsxs("select",{value:Q.item_id,onChange:Ce=>Ie(ne,"item_id",Ce.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-yellow-400",children:[e.jsx("option",{value:"",children:"Select..."}),se==null?void 0:se.items.map(Ce=>e.jsxs("option",{value:Ce.id,children:[Ce.name," (",Ce.sku,")"]},Ce.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),e.jsx("input",{type:"number",value:Q.qty,onChange:Ce=>Ie(ne,"qty",Ce.target.value),min:"1",step:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-yellow-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Cost ()"}),e.jsx("input",{type:"number",value:Q.unit_cost,onChange:Ce=>Ie(ne,"unit_cost",Ce.target.value),min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-yellow-400"})]})]}),e.jsx("button",{onClick:()=>G(ne),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(je,{className:"w-4 h-4"})})]},ne)),A.items.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:'No items added yet. Click "Add Item" to get started.'})]})]}),A.items.length>0&&e.jsx("div",{className:"border-t border-gray-200 pt-4",children:e.jsxs("div",{className:"flex items-center justify-between text-lg font-bold",children:[e.jsx("span",{className:"text-black",children:"Total Cost:"}),e.jsxs("span",{className:"text-black",children:["",A.items.reduce((Q,ne)=>{const Ce=Number(ne.qty)||0,it=Number(ne.unit_cost)||0;return Q+Ce*it},0).toFixed(2)]})]})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{w(null),Ut()},className:"px-6 py-3 border border-gray-300 text-black font-medium rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:K,disabled:X.isPending,className:"px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[X.isPending&&e.jsx(tt,{className:"w-4 h-4 animate-spin"}),"Create Purchase Order"]})]})]})]})}),x==="receive_po"&&k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsxs("h2",{className:"text-2xl font-bold text-black",children:["Receive Purchase Order: ",k.po_number]}),e.jsx("button",{onClick:()=>{w(null),L(null),C([])},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(je,{className:"w-5 h-5 text-gray-600"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:"Supplier:"})," ",k.supplier_name]}),e.jsxs("p",{className:"text-sm text-blue-900 mt-1",children:[e.jsx("strong",{children:"Total Cost:"})," ",Number(k.total_cost||0).toFixed(2)]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-black",children:"Enter Received Quantities"}),P.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("p",{children:"No items to receive. Purchase order items will be loaded here."}),e.jsxs("p",{className:"text-sm mt-2",children:["(In production, this would fetch items from GET /purchase-orders/","{","id","}","/items)"]})]}):P.map((Q,ne)=>e.jsxs("div",{className:"flex items-center gap-4 p-4 border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("p",{className:"font-medium text-black",children:["Item #",ne+1]})}),e.jsxs("div",{className:"w-40",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Qty Received"}),e.jsx("input",{type:"number",value:Q.qty_received,onChange:Ce=>{z(it=>({...it,items:""})),C(it=>it.map((dt,ha)=>ha===ne?{...dt,qty_received:Ce.target.value}:dt))},min:"0",step:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-yellow-400"})]})]},ne)),E.items&&e.jsx("p",{className:"text-red-600 text-sm",children:E.items})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{w(null),L(null),C([])},className:"px-6 py-3 border border-gray-300 text-black font-medium rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:ge,disabled:fe.isPending||P.length===0,className:"px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[fe.isPending&&e.jsx(tt,{className:"w-4 h-4 animate-spin"}),"Confirm Receipt"]})]})]})]})})]})})},X2=()=>{const t=Je(),[s,r]=Ye(),a=ae(S=>S.authentication_state.auth_token),n=ae(S=>S.authentication_state.current_user);if(!ae(S=>S.feature_flags).analytics_dashboard)return t("/admin/settings"),null;if(!n||n.role!=="ADMIN")return t("/admin"),null;const i=()=>{const S=new Date,re=new Date(S);return re.setDate(S.getDate()-30),{start_date:re.toISOString().split("T")[0],end_date:S.toISOString().split("T")[0],preset:"last_30_days"}},[o,c]=j.useState(()=>{const S=s.get("date_range");if(S&&["last_7_days","last_30_days","last_90_days"].includes(S)){const re=new Date;let le=30;S==="last_7_days"&&(le=7),S==="last_90_days"&&(le=90);const Te=new Date(re);return Te.setDate(re.getDate()-le),{start_date:Te.toISOString().split("T")[0],end_date:re.toISOString().split("T")[0],preset:S}}return i()}),[d,h]=j.useState(s.get("metric")),[m,u]=j.useState(!1),g="http://localhost:3000",{data:b,isLoading:f,error:v,refetch:y}=te({queryKey:["analytics-funnel",o.start_date,o.end_date],queryFn:async()=>(await $.get(`${g}/api/analytics/funnel`,{params:{start_date:o.start_date,end_date:o.end_date},headers:{Authorization:`Bearer ${a}`}})).data,staleTime:5*60*1e3,retry:1,enabled:!!a}),{data:p,isLoading:x,error:w,refetch:R}=te({queryKey:["analytics-services",o.start_date,o.end_date],queryFn:async()=>(await $.get(`${g}/api/analytics/services`,{params:{start_date:o.start_date,end_date:o.end_date},headers:{Authorization:`Bearer ${a}`}})).data,staleTime:5*60*1e3,retry:1,enabled:!!a}),{data:N,isLoading:k,error:L,refetch:E}=te({queryKey:["analytics-turnaround",o.start_date,o.end_date],queryFn:async()=>(await $.get(`${g}/api/analytics/turnaround`,{params:{start_date:o.start_date,end_date:o.end_date},headers:{Authorization:`Bearer ${a}`}})).data,staleTime:5*60*1e3,retry:1,enabled:!!a}),{data:z,isLoading:_,error:O,refetch:Y}=te({queryKey:["analytics-emergency",o.start_date,o.end_date],queryFn:async()=>(await $.get(`${g}/api/analytics/emergency-bookings`,{params:{start_date:o.start_date,end_date:o.end_date},headers:{Authorization:`Bearer ${a}`}})).data,staleTime:5*60*1e3,retry:1,enabled:!!a}),{data:q,isLoading:A,error:M,refetch:P}=te({queryKey:["analytics-revenue",o.start_date,o.end_date],queryFn:async()=>(await $.get(`${g}/api/analytics/revenue`,{params:{start_date:o.start_date,end_date:o.end_date,group_by:"week"},headers:{Authorization:`Bearer ${a}`}})).data,staleTime:5*60*1e3,retry:1,enabled:!!a}),C=f||x||k||_||A,V=j.useMemo(()=>{if(!q||!b)return null;const S=b.orders_completed,re=S>0?q.total_revenue/S:0,le=b.visitors>0?b.orders_completed/b.visitors*100:0;return{totalRevenue:q.total_revenue,totalOrders:S,avgOrderValue:re,conversionRate:le,outstandingBalance:q.outstanding_amount,onTimeDelivery:(N==null?void 0:N.overall_on_time_percentage)||0}},[q,b,N]),T=S=>{const re=new Date;let le=30;S==="last_7_days"&&(le=7),S==="last_30_days"&&(le=30),S==="last_90_days"&&(le=90);const Te=new Date(re);Te.setDate(re.getDate()-le);const ke={start_date:Te.toISOString().split("T")[0],end_date:re.toISOString().split("T")[0],preset:S};c(ke),r({date_range:S})},Z=(S,re)=>{const le={...o,[S]:re,preset:"custom"};le.start_date&&le.end_date&&new Date(le.start_date)<=new Date(le.end_date)&&(c(le),r({date_range:"custom"}))},se=()=>{y(),R(),E(),Y(),P()},B=()=>{if(!(!b||!p||!N||!z||!q)){u(!0);try{let S=`SultanStamp Analytics Export
`;S+=`Date Range: ${o.start_date} to ${o.end_date}

`,S+=`Conversion Funnel
`,S+=`Stage,Count,Conversion Rate
`,S+=`Visitors,${b.visitors},-
`,S+=`Quotes Submitted,${b.quotes_submitted},${(b.conversion_rates.visitor_to_quote*100).toFixed(2)}%
`,S+=`Bookings Created,${b.bookings_created},${(b.conversion_rates.quote_to_booking*100).toFixed(2)}%
`,S+=`Deposits Paid,${b.deposits_paid},${(b.conversion_rates.booking_to_payment*100).toFixed(2)}%
`,S+=`Orders Completed,${b.orders_completed},${(b.conversion_rates.payment_to_completion*100).toFixed(2)}%

`,S+=`Revenue Summary
`,S+=`Total Revenue,${q.total_revenue.toFixed(2)}
`,S+=`Outstanding Balance,${q.outstanding_amount.toFixed(2)}

`,S+=`Top Services by Revenue
`,S+=`Service,Revenue,Order Count
`,p.top_by_revenue.forEach(ke=>{S+=`${ke.service_name},${ke.revenue.toFixed(2)},${ke.order_count}
`}),S+=`
`,S+=`Turnaround Time Analysis
`,S+=`Tier,Avg Actual Days,Promised Days,On-Time %
`,N.by_tier.forEach(ke=>{S+=`${ke.tier_name},${ke.avg_actual_days.toFixed(1)},${ke.promised_days},${ke.on_time_percentage.toFixed(1)}%
`});const re=new Blob([S],{type:"text/csv;charset=utf-8;"}),le=document.createElement("a"),Te=URL.createObjectURL(re);le.setAttribute("href",Te),le.setAttribute("download",`sultanstamp-analytics-${o.start_date}-to-${o.end_date}.csv`),document.body.appendChild(le),le.click(),document.body.removeChild(le)}catch(S){console.error("Export error:",S)}finally{u(!1)}}},ee=S=>{h(d===S?null:S),r(d!==S?{metric:S,date_range:o.preset}:{date_range:o.preset})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-900",children:"Analytics Dashboard"}),e.jsx("p",{className:"mt-2 text-base text-gray-600",children:"Business intelligence and performance metrics"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("button",{onClick:se,disabled:C,className:"inline-flex items-center px-4 py-2 rounded-lg border-2 border-gray-300 bg-white text-gray-900 font-medium hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("svg",{className:`w-5 h-5 mr-2 ${C?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]}),e.jsx("button",{onClick:B,disabled:m||C||!V,className:"inline-flex items-center px-6 py-2 rounded-lg bg-yellow-400 text-black font-bold hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export CSV"]})})]})]}),e.jsxs("div",{className:"mt-6 bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Date Range"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:[{value:"last_7_days",label:"Last 7 Days"},{value:"last_30_days",label:"Last 30 Days"},{value:"last_90_days",label:"Last 90 Days"}].map(S=>e.jsx("button",{onClick:()=>T(S.value),className:`px-4 py-2 rounded-lg font-medium transition-colors ${o.preset===S.value?"bg-black text-white":"bg-gray-100 text-gray-900 hover:bg-gray-200"}`,children:S.label},S.value))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:o.start_date,onChange:S=>Z("start_date",S.target.value),max:o.end_date,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:o.end_date,onChange:S=>Z("end_date",S.target.value),min:o.start_date,max:new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-colors"})]})]})]})]}),C&&e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("svg",{className:"animate-spin h-16 w-16 text-yellow-400",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Loading analytics data..."})]})}),(v||w||L||O||M)&&!C&&e.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-6 mb-8",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-6 h-6 text-red-600 flex-shrink-0 mt-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Failed to load analytics data"}),e.jsx("p",{className:"text-sm text-red-700 mb-4",children:"Some analytics data could not be loaded. Please try refreshing the page."}),e.jsx("button",{onClick:se,className:"inline-flex items-center px-4 py-2 rounded-lg bg-red-600 text-white font-medium hover:bg-red-700 transition-colors",children:"Retry"})]})]})}),!C&&V&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{onClick:()=>ee("revenue"),className:`bg-white rounded-xl shadow-lg border-2 p-6 transition-all cursor-pointer hover:shadow-xl ${d==="revenue"?"border-yellow-400 ring-4 ring-yellow-100":"border-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Total Revenue"}),e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),e.jsxs("p",{className:"text-4xl font-bold text-gray-900",children:["",V.totalRevenue.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:o.preset.replace("_"," ")})]}),e.jsxs("div",{onClick:()=>ee("orders"),className:`bg-white rounded-xl shadow-lg border-2 p-6 transition-all cursor-pointer hover:shadow-xl ${d==="orders"?"border-yellow-400 ring-4 ring-yellow-100":"border-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Total Orders"}),e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})]}),e.jsx("p",{className:"text-4xl font-bold text-gray-900",children:V.totalOrders}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Completed orders"})]}),e.jsxs("div",{onClick:()=>ee("aov"),className:`bg-white rounded-xl shadow-lg border-2 p-6 transition-all cursor-pointer hover:shadow-xl ${d==="aov"?"border-yellow-400 ring-4 ring-yellow-100":"border-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Avg Order Value"}),e.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})]}),e.jsxs("p",{className:"text-4xl font-bold text-gray-900",children:["",V.avgOrderValue.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Per completed order"})]}),e.jsxs("div",{onClick:()=>ee("conversion"),className:`bg-white rounded-xl shadow-lg border-2 p-6 transition-all cursor-pointer hover:shadow-xl ${d==="conversion"?"border-yellow-400 ring-4 ring-yellow-100":"border-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Conversion Rate"}),e.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})]}),e.jsxs("p",{className:"text-4xl font-bold text-gray-900",children:[V.conversionRate.toFixed(2),"%"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Visitors to orders"})]}),e.jsxs("div",{onClick:()=>ee("outstanding"),className:`bg-white rounded-xl shadow-lg border-2 p-6 transition-all cursor-pointer hover:shadow-xl ${d==="outstanding"?"border-yellow-400 ring-4 ring-yellow-100":"border-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Outstanding Balance"}),e.jsx("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),e.jsxs("p",{className:"text-4xl font-bold text-gray-900",children:["",V.outstandingBalance.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Pending payments"})]}),e.jsxs("div",{onClick:()=>ee("ontime"),className:`bg-white rounded-xl shadow-lg border-2 p-6 transition-all cursor-pointer hover:shadow-xl ${d==="ontime"?"border-yellow-400 ring-4 ring-yellow-100":"border-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"On-Time Delivery"}),e.jsx("svg",{className:"w-6 h-6 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),e.jsxs("p",{className:"text-4xl font-bold text-gray-900",children:[V.onTimeDelivery.toFixed(1),"%"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Meeting SLA targets"})]})]}),b&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8 mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Conversion Funnel"}),e.jsx("div",{className:"space-y-4",children:[{label:"Visitors",count:b.visitors,width:100,color:"bg-blue-500"},{label:"Quotes Submitted",count:b.quotes_submitted,width:b.quotes_submitted/b.visitors*100,color:"bg-indigo-500",rate:b.conversion_rates.visitor_to_quote},{label:"Bookings Created",count:b.bookings_created,width:b.bookings_created/b.visitors*100,color:"bg-purple-500",rate:b.conversion_rates.quote_to_booking},{label:"Deposits Paid",count:b.deposits_paid,width:b.deposits_paid/b.visitors*100,color:"bg-pink-500",rate:b.conversion_rates.booking_to_payment},{label:"Orders Completed",count:b.orders_completed,width:b.orders_completed/b.visitors*100,color:"bg-green-500",rate:b.conversion_rates.payment_to_completion}].map((S,re)=>e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:S.label}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:S.count}),S.rate!==void 0&&e.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[(S.rate*100).toFixed(1),"% conversion"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-8 overflow-hidden",children:e.jsx("div",{className:`${S.color} h-8 rounded-full transition-all duration-500 flex items-center justify-end pr-4`,style:{width:`${S.width}%`},children:e.jsxs("span",{className:"text-xs font-bold text-white",children:[S.width.toFixed(1),"%"]})})})]},re))})]}),p&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Top Services by Revenue"}),e.jsx("div",{className:"space-y-4",children:p.top_by_revenue.slice(0,5).map((S,re)=>{var ke;const le=((ke=p.top_by_revenue[0])==null?void 0:ke.revenue)||1,Te=S.revenue/le*100;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:S.service_name}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[S.order_count," orders"]}),e.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["",S.revenue.toFixed(2)]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-6 overflow-hidden",children:e.jsx("div",{className:"bg-green-500 h-6 rounded-full transition-all duration-500",style:{width:`${Te}%`}})})]},re)})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Top Services by Volume"}),e.jsx("div",{className:"space-y-4",children:p.top_by_volume.slice(0,5).map((S,re)=>{var ke;const le=((ke=p.top_by_volume[0])==null?void 0:ke.order_count)||1,Te=S.order_count/le*100;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:S.service_name}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-600",children:["Avg ",S.avg_order_value.toFixed(2)]}),e.jsxs("span",{className:"text-lg font-bold text-gray-900",children:[S.order_count," orders"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-6 overflow-hidden",children:e.jsx("div",{className:"bg-blue-500 h-6 rounded-full transition-all duration-500",style:{width:`${Te}%`}})})]},re)})})]})]}),N&&N.by_tier.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8 mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Turnaround Time Analysis"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-900 uppercase tracking-wider",children:"Tier"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-900 uppercase tracking-wider",children:"Avg Actual Days"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-900 uppercase tracking-wider",children:"Promised Days"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-900 uppercase tracking-wider",children:"On-Time %"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-900 uppercase tracking-wider",children:"Performance"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.by_tier.map((S,re)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:S.tier_name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-900",children:S.avg_actual_days.toFixed(1)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-900",children:S.promised_days})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`text-sm font-semibold ${S.on_time_percentage>=90?"text-green-600":S.on_time_percentage>=70?"text-yellow-600":"text-red-600"}`,children:[S.on_time_percentage.toFixed(1),"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:`h-4 rounded-full ${S.on_time_percentage>=90?"bg-green-500":S.on_time_percentage>=70?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(S.on_time_percentage,100)}%`}})})})]},re))})]})}),e.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["Overall On-Time Delivery:",e.jsxs("span",{className:`ml-2 text-lg ${N.overall_on_time_percentage>=90?"text-green-600":N.overall_on_time_percentage>=70?"text-yellow-600":"text-red-600"}`,children:[N.overall_on_time_percentage.toFixed(1),"%"]})]})})]}),z&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8 mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Emergency Booking Utilization"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center p-6 bg-orange-50 rounded-lg border-2 border-orange-200",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide mb-2",children:"Emergency Bookings"}),e.jsx("p",{className:"text-4xl font-bold text-orange-600",children:z.emergency_booking_count}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[z.emergency_percentage.toFixed(1),"% of total"]})]}),e.jsxs("div",{className:"text-center p-6 bg-blue-50 rounded-lg border-2 border-blue-200",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide mb-2",children:"Standard Bookings"}),e.jsx("p",{className:"text-4xl font-bold text-blue-600",children:z.standard_booking_count}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[(100-z.emergency_percentage).toFixed(1),"% of total"]})]}),e.jsxs("div",{className:"text-center p-6 bg-green-50 rounded-lg border-2 border-green-200",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide mb-2",children:"Urgent Fee Revenue"}),e.jsxs("p",{className:"text-4xl font-bold text-green-600",children:["",z.urgent_fee_revenue.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"From emergency bookings"})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"flex-1 bg-orange-500 h-12 rounded-lg flex items-center justify-center",style:{width:`${z.emergency_percentage}%`},children:e.jsxs("span",{className:"text-xs font-bold text-white",children:["Emergency ",z.emergency_percentage.toFixed(0),"%"]})}),e.jsx("div",{className:"flex-1 bg-blue-500 h-12 rounded-lg flex items-center justify-center",style:{width:`${100-z.emergency_percentage}%`},children:e.jsxs("span",{className:"text-xs font-bold text-white",children:["Standard ",(100-z.emergency_percentage).toFixed(0),"%"]})})]})})]}),q&&q.revenue_by_period.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Revenue Trend"}),e.jsx("div",{className:"space-y-3",children:q.revenue_by_period.map((S,re)=>{const le=Math.max(...q.revenue_by_period.map(ke=>ke.revenue)),Te=S.revenue/le*100;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:S.period}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-xs font-medium text-gray-600",children:[S.order_count," orders"]}),e.jsxs("span",{className:"text-base font-bold text-gray-900",children:["",S.revenue.toFixed(2)]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-6 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-yellow-500 h-6 rounded-full transition-all duration-500",style:{width:`${Te}%`}})})]},re)})}),e.jsx("div",{className:"mt-6 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"Period Total:"}),e.jsxs("span",{className:"text-xl font-bold text-gray-900",children:["",q.revenue_by_period.reduce((S,re)=>S+re.revenue,0).toFixed(2)]})]})})]})]})]})})})},Z2=new Kb({defaultOptions:{queries:{staleTime:5*60*1e3,retry:1,refetchOnWindowFocus:!1}}}),_u=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-yellow-400"}),e.jsx("p",{className:"text-white text-lg font-medium",children:"Loading..."})]})}),ts=({children:t})=>e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx(vw,{}),e.jsx("main",{className:"flex-1",children:t}),e.jsx(go,{})]}),er=({children:t})=>e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx(wu,{}),e.jsxs("div",{className:"flex flex-1",children:[e.jsx(Nw,{}),e.jsx("main",{className:"flex-1",children:t})]}),e.jsx(go,{})]}),fa=({children:t})=>e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx(wu,{}),e.jsxs("div",{className:"flex flex-1",children:[e.jsx(_w,{}),e.jsx("main",{className:"flex-1",children:t})]}),e.jsx(go,{})]}),Vt=({children:t})=>e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx(wu,{}),e.jsxs("div",{className:"flex flex-1",children:[e.jsx(Ew,{}),e.jsx("main",{className:"flex-1",children:t})]}),e.jsx(go,{})]}),Le=({children:t})=>{const s=ae(a=>a.authentication_state.authentication_status.is_authenticated);return ae(a=>a.authentication_state.authentication_status.is_loading)?e.jsx(_u,{}):s?e.jsx(e.Fragment,{children:t}):e.jsx(lr,{to:"/login",replace:!0})},Me=({children:t,allowedRoles:s})=>{const r=ae(l=>l.authentication_state.authentication_status.is_authenticated),a=ae(l=>l.authentication_state.authentication_status.is_loading),n=ae(l=>l.authentication_state.current_user);return a?e.jsx(_u,{}):r?!n||!s.includes(n.role)?(n==null?void 0:n.role)==="CUSTOMER"?e.jsx(lr,{to:"/app",replace:!0}):(n==null?void 0:n.role)==="STAFF"?e.jsx(lr,{to:"/staff",replace:!0}):(n==null?void 0:n.role)==="ADMIN"?e.jsx(lr,{to:"/admin",replace:!0}):e.jsx(lr,{to:"/",replace:!0}):e.jsx(e.Fragment,{children:t}):e.jsx(lr,{to:"/login",replace:!0})},Xo=({children:t,featureFlag:s})=>ae(a=>a.feature_flags)[s]?e.jsx(e.Fragment,{children:t}):e.jsx(lr,{to:"/admin",replace:!0}),e1=()=>{const t=ae(r=>r.authentication_state.authentication_status.is_loading),s=ae(r=>r.initialize_auth);return j.useEffect(()=>{s()},[s]),t?e.jsx(_u,{}):e.jsx(Cb,{children:e.jsx(Yb,{client:Z2,children:e.jsx("div",{className:"App min-h-screen bg-gray-50",children:e.jsxs(bb,{children:[e.jsx(_e,{path:"/",element:e.jsx(ts,{children:e.jsx(Tw,{})})}),e.jsx(_e,{path:"/about",element:e.jsx(ts,{children:e.jsx(Ow,{})})}),e.jsx(_e,{path:"/gallery",element:e.jsx(ts,{children:e.jsx(Aw,{})})}),e.jsx(_e,{path:"/services",element:e.jsx(ts,{children:e.jsx(Dw,{})})}),e.jsx(_e,{path:"/services/:service_slug",element:e.jsx(ts,{children:e.jsx($w,{})})}),e.jsx(_e,{path:"/pricing",element:e.jsx(ts,{children:e.jsx(zw,{})})}),e.jsx(_e,{path:"/policies",element:e.jsx(ts,{children:e.jsx(Bw,{})})}),e.jsx(_e,{path:"/contact",element:e.jsx(ts,{children:e.jsx(Vw,{})})}),e.jsx(_e,{path:"/login",element:e.jsx(ts,{children:e.jsx(Kw,{})})}),e.jsx(_e,{path:"/register",element:e.jsx(ts,{children:e.jsx(Ww,{})})}),e.jsx(_e,{path:"/forgot-password",element:e.jsx(ts,{children:e.jsx(Hw,{})})}),e.jsx(_e,{path:"/reset-password/:reset_token",element:e.jsx(ts,{children:e.jsx(Gw,{})})}),e.jsx(_e,{path:"/app",element:e.jsx(Le,{children:e.jsx(Me,{allowedRoles:["CUSTOMER"],children:e.jsx(er,{children:e.jsx(Yw,{})})})})}),e.jsx(_e,{path:"/app/quotes",element:e.jsx(Le,{children:e.jsx(Me,{allowedRoles:["CUSTOMER"],children:e.jsx(er,{children:e.jsx(eN,{})})})})}),e.jsx(_e,{path:"/app/quotes/new",element:e.jsx(Le,{children:e.jsx(Me,{allowedRoles:["CUSTOMER"],children:e.jsx(er,{children:e.jsx(tN,{})})})})}),e.jsx(_e,{path:"/app/quotes/:quote_id",element:e.jsx(Le,{children:e.jsx(Me,{allowedRoles:["CUSTOMER"],children:e.jsx(er,{children:e.jsx(mN,{})})})})}),e.jsx(_e,{path:"/app/bookings",element:e.jsx(Le,{children:e.jsx(Me,{allowedRoles:["CUSTOMER"],children:e.jsx(er,{children:e.jsx(bN,{})})})})}),e.jsx(_e,{path:"/app/orders",element:e.jsx(Le,{children:e.jsx(Me,{allowedRoles:["CUSTOMER"],children:e.jsx(er,{children:e.jsx(_N,{})})})})}),e.jsx(_e,{path:"/app/orders/:order_id",element:e.jsx(Le,{children:e.jsx(Me,{allowedRoles:["CUSTOMER"],children:e.jsx(er,{children:e.jsx(kN,{})})})})}),e.jsx(_e,{path:"/app/profile",element:e.jsx(Le,{children:e.jsx(Me,{allowedRoles:["CUSTOMER"],children:e.jsx(er,{children:e.jsx(SN,{})})})})}),e.jsx(_e,{path:"/staff",element:e.jsx(Le,{children:e.jsx(Me,{allowedRoles:["STAFF"],children:e.jsx(fa,{children:e.jsx(FN,{})})})})}),e.jsx(_e,{path:"/staff/jobs",element:e.jsx(Le,{children:e.jsx(Me,{allowedRoles:["STAFF"],children:e.jsx(fa,{children:e.jsx(PN,{})})})})}),e.jsx(_e,{path:"/staff/jobs/:order_id",element:e.jsx(Le,{children:e.jsx(Me,{allowedRoles:["STAFF"],children:e.jsx(fa,{children:e.jsx(DN,{})})})})}),e.jsx(_e,{path:"/staff/calendar",element:e.jsx(Le,{children:e.jsx(Me,{allowedRoles:["STAFF"],children:e.jsx(fa,{children:e.jsx(qN,{})})})})}),e.jsx(_e,{path:"/staff/messages",element:e.jsx(Le,{children:e.jsx(Me,{allowedRoles:["STAFF"],children:e.jsx(fa,{children:e.jsx(QN,{})})})})}),e.jsx(_e,{path:"/staff/profile",element:e.jsx(Le,{children:e.jsx(Me,{allowedRoles:["STAFF"],children:e.jsx(fa,{children:e.jsx(WN,{})})})})}),e.jsx(_e,{path:"/admin",element:e.jsx(Le,{children:e.jsx(Me,{allowedRoles:["ADMIN"],children:e.jsx(Vt,{children:e.jsx(e2,{})})})})}),e.jsx(_e,{path:"/admin/services",element:e.jsx(Le,{children:e.jsx(Me,{allowedRoles:["ADMIN"],children:e.jsx(Vt,{children:e.jsx(t2,{})})})})}),e.jsx(_e,{path:"/admin/pricing",element:e.jsx(Le,{children:e.jsx(Me,{allowedRoles:["ADMIN"],children:e.jsx(Vt,{children:e.jsx(o2,{})})})})}),e.jsx(_e,{path:"/admin/tiers",element:e.jsx(Le,{children:e.jsx(Me,{allowedRoles:["ADMIN"],children:e.jsx(Vt,{children:e.jsx(c2,{})})})})}),e.jsx(_e,{path:"/admin/calendar",element:e.jsx(Le,{children:e.jsx(Me,{allowedRoles:["ADMIN"],children:e.jsx(Vt,{children:e.jsx(d2,{})})})})}),e.jsx(_e,{path:"/admin/quotes",element:e.jsx(Le,{children:e.jsx(Me,{allowedRoles:["ADMIN"],children:e.jsx(Vt,{children:e.jsx(y2,{})})})})}),e.jsx(_e,{path:"/admin/orders",element:e.jsx(Le,{children:e.jsx(Me,{allowedRoles:["ADMIN"],children:e.jsx(Vt,{children:e.jsx(S2,{})})})})}),e.jsx(_e,{path:"/admin/users",element:e.jsx(Le,{children:e.jsx(Me,{allowedRoles:["ADMIN"],children:e.jsx(Vt,{children:e.jsx(C2,{})})})})}),e.jsx(_e,{path:"/admin/content",element:e.jsx(Le,{children:e.jsx(Me,{allowedRoles:["ADMIN"],children:e.jsx(Vt,{children:e.jsx(q2,{})})})})}),e.jsx(_e,{path:"/admin/settings",element:e.jsx(Le,{children:e.jsx(Me,{allowedRoles:["ADMIN"],children:e.jsx(Vt,{children:e.jsx(I2,{})})})})}),e.jsx(_e,{path:"/admin/b2b",element:e.jsx(Le,{children:e.jsx(Me,{allowedRoles:["ADMIN"],children:e.jsx(Xo,{featureFlag:"b2b_accounts",children:e.jsx(Vt,{children:e.jsx(z2,{})})})})})}),e.jsx(_e,{path:"/admin/inventory",element:e.jsx(Le,{children:e.jsx(Me,{allowedRoles:["ADMIN"],children:e.jsx(Xo,{featureFlag:"inventory_management",children:e.jsx(Vt,{children:e.jsx(Y2,{})})})})})}),e.jsx(_e,{path:"/admin/analytics",element:e.jsx(Le,{children:e.jsx(Me,{allowedRoles:["ADMIN"],children:e.jsx(Xo,{featureFlag:"analytics_dashboard",children:e.jsx(Vt,{children:e.jsx(X2,{})})})})})}),e.jsx(_e,{path:"*",element:e.jsx(lr,{to:"/",replace:!0})})]})})})})},t1=()=>e.jsx(e.Fragment,{children:e.jsx(e1,{})});H0(document.getElementById("root")).render(e.jsx(t1,{}));
